/*! For license information please see 746.31d0c85b.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[746],{6599:(e,t,n)=>{"use strict";n.d(t,{Mx:()=>$,Qr:()=>J});class o{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=function(e){if("immediatePropagationStopped"in e)return e;{const{stopImmediatePropagation:t}=e;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}(e);for(const e of this.bindings){if(t.immediatePropagationStopped)break;e.handleEvent(t)}}get bindings(){return Array.from(this.unorderedBindings).sort(((e,t)=>{const n=e.index,o=t.index;return n<o?-1:n>o?1:0}))}}class r{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach((e=>e.connect())))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach((e=>e.disconnect())))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce(((e,t)=>e.concat(Array.from(t.values()))),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:n,eventOptions:o}=e;return this.fetchEventListener(t,n,o)}fetchEventListener(e,t,n){const o=this.fetchEventListenerMapForEventTarget(e),r=this.cacheKey(t,n);let s=o.get(r);return s||(s=this.createEventListener(e,t,n),o.set(r,s)),s}createEventListener(e,t,n){const r=new o(e,t,n);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const n=[e];return Object.keys(t).sort().forEach((e=>{n.push(`${t[e]?"":"!"}${e}`)})),n.join(":")}}const s=/^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;function i(e){return"window"==e?window:"document"==e?document:void 0}function a(e){return e.replace(/(?:[_-])([a-z0-9])/g,((e,t)=>t.toUpperCase()))}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e){return e.replace(/([A-Z])/g,((e,t)=>`-${t.toLowerCase()}`))}const d={a:e=>"click",button:e=>"click",form:e=>"submit",details:e=>"toggle",input:e=>"submit"==e.getAttribute("type")?"click":"input",select:e=>"change",textarea:e=>"input"};function u(e){throw new Error(e)}function h(e){try{return JSON.parse(e)}catch(t){return e}}class m{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){this.willBeInvokedByEvent(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}invokeWithEvent(e){const{target:t,currentTarget:n}=e;try{const{params:o}=this.action,r=Object.assign(e,{params:o});this.method.call(this.controller,r),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(t){const{identifier:n,controller:o,element:r,index:s}=this,i={identifier:n,controller:o,element:r,index:s,event:e};this.context.handleError(t,`invoking action "${this.action}"`,i)}}willBeInvokedByEvent(e){const t=e.target;return this.element===t||(t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class p{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){const n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,t):this.removeElement(n):this.matchElement(n)&&this.addElement(n)}processRemovedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.processTree(e,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.elementIsActive(e)&&this.processTree(e,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class f{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new p(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}class g{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const n=this.delegate.getStringMapKeyForAttribute(e);if(null!=n){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);const o=this.element.getAttribute(e);if(this.stringMap.get(e)!=o&&this.stringMapValueChanged(o,n,t),null==o){const t=this.stringMap.get(e);this.stringMap.delete(e),t&&this.stringMapKeyRemoved(n,e,t)}else this.stringMap.set(e,o)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map((e=>e.name))}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}function b(e,t,n){y(e,t).add(n)}function v(e,t,n){y(e,t).delete(n),function(e,t){const n=e.get(t);null!=n&&0==n.size&&e.delete(t)}(e,t)}function y(e,t){let n=e.get(t);return n||(n=new Set,e.set(t,n)),n}class x{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e.concat(Array.from(t))),[])}get size(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e+t.size),0)}add(e,t){b(this.valuesByKey,e,t)}delete(e,t){v(this.valuesByKey,e,t)}has(e,t){const n=this.valuesByKey.get(e);return null!=n&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some((t=>t.has(e)))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter((([t,n])=>n.has(e))).map((([e,t])=>e))}}class w{constructor(e,t,n){this.attributeObserver=new f(e,t,this),this.delegate=n,this.tokensByElement=new x}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach((e=>this.tokenMatched(e)))}tokensUnmatched(e){e.forEach((e=>this.tokenUnmatched(e)))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),o=function(e,t){const n=Math.max(e.length,t.length);return Array.from({length:n},((n,o)=>[e[o],t[o]]))}(t,n).findIndex((([e,t])=>{return o=t,!((n=e)&&o&&n.index==o.index&&n.content==o.content);var n,o}));return-1==o?[[],[]]:[t.slice(o),n.slice(o)]}readTokensForElement(e){const t=this.attributeName;return function(e,t,n){return e.trim().split(/\s+/).filter((e=>e.length)).map(((e,o)=>({element:t,attributeName:n,content:e,index:o})))}(e.getAttribute(t)||"",e,t)}}class C{constructor(e,t,n){this.tokenListObserver=new w(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}}}class _{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new C(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new m(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach((e=>this.delegate.bindingDisconnected(e))),this.bindingsByAction.clear()}parseValueForToken(e){const t=class{constructor(e,t,n){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){const t=e.tagName.toLowerCase();if(t in d)return d[t](e)}(e)||u("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||u("missing identifier"),this.methodName=n.methodName||u("missing method name")}static forToken(e){return new this(e.element,e.index,function(e){const t=e.trim().match(s)||[];return{eventTarget:i(t[4]),eventName:t[2],eventOptions:t[9]?(n=t[9],n.split(":").reduce(((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)})),{})):{},identifier:t[5],methodName:t[7]};var n}(e.content))}toString(){const e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}->${this.identifier}#${this.methodName}`}get params(){return this.eventTarget instanceof Element?this.getParamsFromEventTargetAttributes(this.eventTarget):{}}getParamsFromEventTargetAttributes(e){const t={},n=new RegExp(`^data-${this.identifier}-(.+)-param$`);return Array.from(e.attributes).forEach((({name:e,value:o})=>{const r=e.match(n),s=r&&r[1];s&&Object.assign(t,{[a(s)]:h(o)})})),t}get eventTargetName(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e}}.forToken(e);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class S{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new g(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap,this.invokeChangedCallbacksForDefaultValues()}start(){this.stringMapObserver.start()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){const o=this.valueDescriptorNameMap[t];null!==e&&(null===n&&(n=o.writer(o.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){const o=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,o.writer(this.receiver[e]),n):this.invokeChangedCallback(e,o.writer(o.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:n,writer:o}of this.valueDescriptors)null==n||this.controller.data.has(e)||this.invokeChangedCallback(t,o(n),void 0)}invokeChangedCallback(e,t,n){const o=`${e}Changed`,r=this.receiver[o];if("function"==typeof r){const o=this.valueDescriptorNameMap[e],s=o.reader(t);let i=n;n&&(i=o.reader(n)),r.call(this.receiver,s,i)}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map((t=>e[t]))}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach((t=>{const n=this.valueDescriptorMap[t];e[n.name]=n})),e}hasValue(e){const t=`has${l(this.valueDescriptorNameMap[e].name)}`;return this.receiver[t]}}class k{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new x}start(){this.tokenListObserver||(this.tokenListObserver=new w(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetConnected(e,t))))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetDisconnected(e,t))))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}class E{constructor(e,t){this.logDebugActivity=(e,t={})=>{const{identifier:n,controller:o,element:r}=this;t=Object.assign({identifier:n,controller:o,element:r},t),this.application.logDebugActivity(this.identifier,e,t)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new _(this,this.dispatcher),this.valueObserver=new S(this,this.controller),this.targetObserver=new k(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(e){this.handleError(e,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){const{identifier:o,controller:r,element:s}=this;n=Object.assign({identifier:o,controller:r,element:s},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}invokeControllerMethod(e,...t){const n=this.controller;"function"==typeof n[e]&&n[e](...t)}}function O(e,t){const n=A(e);return Array.from(n.reduce(((e,n)=>(function(e,t){const n=e[t];return Array.isArray(n)?n:[]}(n,t).forEach((t=>e.add(t))),e)),new Set))}function T(e,t){return A(e).reduce(((e,n)=>(e.push(...function(e,t){const n=e[t];return n?Object.keys(n).map((e=>[e,n[e]])):[]}(n,t)),e)),[])}function A(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}function D(e){return function(e,t){const n=M(e),o=function(e,t){return R(t).reduce(((n,o)=>{const r=function(e,t,n){const o=Object.getOwnPropertyDescriptor(e,n);if(!o||!("value"in o)){const e=Object.getOwnPropertyDescriptor(t,n).value;return o&&(e.get=o.get||e.get,e.set=o.set||e.set),e}}(e,t,o);return r&&Object.assign(n,{[o]:r}),n}),{})}(e.prototype,t);return Object.defineProperties(n.prototype,o),n}(e,function(e){return O(e,"blessings").reduce(((t,n)=>{const o=n(e);for(const e in o){const n=t[e]||{};t[e]=Object.assign(n,o[e])}return t}),{})}(e))}const R="function"==typeof Object.getOwnPropertySymbols?e=>[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)]:Object.getOwnPropertyNames,M=(()=>{function e(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{return function(){const t=e((function(){this.a.call(this)}));t.prototype.a=function(){},new t}(),e}catch(e){return e=>class extends e{}}})();class N{constructor(e,t){this.application=e,this.definition=function(e){return{identifier:e.identifier,controllerConstructor:D(e.controllerConstructor)}}(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new E(this,e),this.contextsByScope.set(e,t)),t}}class P{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return t.match(/[^\s]+/g)||[]}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class L{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${c(e)}`}}class B{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let o=this.warnedKeysByObject.get(e);o||(o=new Set,this.warnedKeysByObject.set(e,o)),o.has(t)||(o.add(t),this.logger.warn(n,e))}}function I(e,t){return`[${e}~="${t}"]`}class F{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return null!=this.find(e)}find(...e){return e.reduce(((e,t)=>e||this.findTarget(t)||this.findLegacyTarget(t)),void 0)}findAll(...e){return e.reduce(((e,t)=>[...e,...this.findAllTargets(t),...this.findAllLegacyTargets(t)]),[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){return I(this.schema.targetAttributeForScope(this.identifier),e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map((t=>this.deprecate(t,e)))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return I(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:n}=this,o=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${o}="${n}.${t}" with ${r}="${t}". The ${o} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class z{constructor(e,t,n,o){this.targets=new F(this),this.classes=new P(this),this.data=new L(this),this.containsElement=e=>e.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new B(o)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return I(this.schema.controllerAttribute,this.identifier)}}class j{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new C(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:n}=e,o=this.fetchScopesByIdentifierForElement(t);let r=o.get(n);return r||(r=this.delegate.createScopeForElementAndIdentifier(t,n),o.set(n,r)),r}elementMatchedValue(e,t){const n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class H{constructor(e){this.application=e,this.scopeObserver=new j(this.element,this.schema,this),this.scopesByIdentifier=new x,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce(((e,t)=>e.concat(t.contexts)),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new N(this.application,e);this.connectModule(t)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find((t=>t.element==e))}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new z(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e);this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.connectContextForScope(t)))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier);this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.disconnectContextForScope(t)))}}const V={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:e=>`data-${e}-target`};class ${constructor(e=document.documentElement,t=V){this.logger=console,this.debug=!1,this.logDebugActivity=(e,t,n={})=>{this.debug&&this.logFormattedMessage(e,t,n)},this.element=e,this.schema=t,this.dispatcher=new r(this),this.router=new H(this)}static start(e,t){const n=new $(e,t);return n.start(),n}async start(){await new Promise((e=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>e())):e()})),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){t.shouldLoad&&this.load({identifier:e,controllerConstructor:t})}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>this.router.loadDefinition(e)))}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>this.router.unloadIdentifier(e)))}get controllers(){return this.router.contexts.map((e=>e.controller))}getControllerForElementAndIdentifier(e,t){const n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var o;this.logger.error("%s\n\n%o\n\n%o",t,e,n),null===(o=window.onerror)||void 0===o||o.call(window,t,"",0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}}function U([e,t]){return function(e,t){const n=`${c(e)}-value`,o=function(e){const t=function(e){const t=W(e.type);if(t){const n=q(e.default);if(t!==n)throw new Error(`Type "${t}" must match the type of the default value. Given default value: "${e.default}" as "${n}"`);return t}}(e),n=q(e),o=W(e),r=t||n||o;if(r)return r;throw new Error(`Unknown value type "${e}"`)}(t);return{type:o,key:n,name:a(n),get defaultValue(){return function(e){const t=W(e);if(t)return K[t];const n=e.default;return void 0!==n?n:e}(t)},get hasCustomDefaultValue(){return void 0!==q(t)},reader:G[o],writer:Y[o]||Y.default}}(e,t)}function W(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function q(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}const K={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},G={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError("Expected array");return t},boolean:e=>!("0"==e||"false"==e),number:e=>Number(e),object(e){const t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError("Expected object");return t},string:e=>e},Y={default:function(e){return`${e}`},array:X,object:X};function X(e){return JSON.stringify(e)}class J{constructor(e){this.context=e}static get shouldLoad(){return!0}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:o=this.identifier,bubbles:r=!0,cancelable:s=!0}={}){const i=new CustomEvent(o?`${o}:${e}`:e,{detail:n,bubbles:r,cancelable:s});return t.dispatchEvent(i),i}}J.blessings=[function(e){return O(e,"classes").reduce(((e,t)=>{return Object.assign(e,{[`${n=t}Class`]:{get(){const{classes:e}=this;if(e.has(n))return e.get(n);{const t=e.getAttributeName(n);throw new Error(`Missing attribute "${t}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${l(n)}Class`]:{get(){return this.classes.has(n)}}});var n}),{})},function(e){return O(e,"targets").reduce(((e,t)=>{return Object.assign(e,{[`${n=t}Target`]:{get(){const e=this.targets.find(n);if(e)return e;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${l(n)}Target`]:{get(){return this.targets.has(n)}}});var n}),{})},function(e){const t=T(e,"values"),n={valueDescriptorMap:{get(){return t.reduce(((e,t)=>{const n=U(t),o=this.data.getAttributeNameForKey(n.key);return Object.assign(e,{[o]:n})}),{})}}};return t.reduce(((e,t)=>Object.assign(e,function(e){const t=U(e),{key:n,name:o,reader:r,writer:s}=t;return{[o]:{get(){const e=this.data.get(n);return null!==e?r(e):t.defaultValue},set(e){void 0===e?this.data.delete(n):this.data.set(n,s(e))}},[`has${l(o)}`]:{get(){return this.data.has(n)||t.hasCustomDefaultValue}}}}(t))),n)}],J.targets=[],J.values={}},2192:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var o=n(6599),r=n(8205);function s(e){return e.keys().map((t=>function(e,t){const n=function(e){const t=(e.match(/^(?:\.\/)?(.+)(?:[_-]controller\..+?)$/)||[])[1];if(t)return t.replace(/_/g,"-").replace(/\//g,"--")}(t);if(n)return function(e,t){const n=e.default;if("function"==typeof n)return{identifier:t,controllerConstructor:n}}(e(t),n)}(e,t))).filter((e=>e))}function i(e){const t=o.Mx.start();e&&t.load(s(e));for(const e in r.Z)r.Z.hasOwnProperty(e)&&r.Z[e].then((n=>{t.register(e,n.default)}));return t}},2831:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ui});var o=n(6599);const r="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function s(e,t,n){const o=n||(e=>Array.prototype.slice.call(e));let s=!1,i=[];return function(...n){i=o(n),s||(s=!0,r.call(window,(()=>{s=!1,e.apply(t,i)})))}}const i=e=>"start"===e?"left":"end"===e?"right":"center",a=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function l(){}const c=function(){let e=0;return function(){return e++}}();function d(e){return null==e}function u(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function h(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const m=e=>("number"==typeof e||e instanceof Number)&&isFinite(+e);function p(e,t){return m(e)?e:t}function f(e,t){return void 0===e?t:e}const g=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function b(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)}function v(e,t,n,o){let r,s,i;if(u(e))if(s=e.length,o)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(h(e))for(i=Object.keys(e),s=i.length,r=0;r<s;r++)t.call(n,e[i[r]],i[r])}function y(e,t){let n,o,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,o=e.length;n<o;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function x(e){if(u(e))return e.map(x);if(h(e)){const t=Object.create(null),n=Object.keys(e),o=n.length;let r=0;for(;r<o;++r)t[n[r]]=x(e[n[r]]);return t}return e}function w(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function C(e,t,n,o){if(!w(e))return;const r=t[e],s=n[e];h(r)&&h(s)?_(r,s,o):t[e]=x(s)}function _(e,t,n){const o=u(t)?t:[t],r=o.length;if(!h(e))return e;const s=(n=n||{}).merger||C;for(let i=0;i<r;++i){if(!h(t=o[i]))continue;const r=Object.keys(t);for(let o=0,i=r.length;o<i;++o)s(r[o],e,t,n)}return e}function S(e,t){return _(e,t,{merger:k})}function k(e,t,n){if(!w(e))return;const o=t[e],r=n[e];h(o)&&h(r)?S(o,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=x(r))}function E(e,t){const n=e.indexOf(".",t);return-1===n?e.length:n}function O(e,t){if(""===t)return e;let n=0,o=E(t,n);for(;e&&o>n;)e=e[t.slice(n,o)],n=o+1,o=E(t,n);return e}function T(e){return e.charAt(0).toUpperCase()+e.slice(1)}const A=e=>void 0!==e,D=e=>"function"==typeof e,R=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const M=Math.PI,N=2*M,P=N+M,L=Number.POSITIVE_INFINITY,B=M/180,I=M/2,F=M/4,z=2*M/3,j=Math.log10,H=Math.sign;function V(e){const t=Math.round(e);e=U(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(j(e))),o=e/n;return(o<=1?1:o<=2?2:o<=5?5:10)*n}function $(e){return!isNaN(parseFloat(e))&&isFinite(e)}function U(e,t,n){return Math.abs(e-t)<n}function W(e,t,n){let o,r,s;for(o=0,r=e.length;o<r;o++)s=e[o][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function q(e){return e*(M/180)}function K(e){return e*(180/M)}function G(e){if(!m(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Y(e,t){const n=t.x-e.x,o=t.y-e.y,r=Math.sqrt(n*n+o*o);let s=Math.atan2(o,n);return s<-.5*M&&(s+=N),{angle:s,distance:r}}function X(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function J(e,t){return(e-t+P)%N-M}function Q(e){return(e%N+N)%N}function Z(e,t,n,o){const r=Q(e),s=Q(t),i=Q(n),a=Q(s-r),l=Q(i-r),c=Q(r-s),d=Q(r-i);return r===s||r===i||o&&s===i||a>l&&c<d}function ee(e,t,n){return Math.max(t,Math.min(n,e))}function te(e,t,n,o=1e-6){return e>=Math.min(t,n)-o&&e<=Math.max(t,n)+o}const ne=e=>0===e||1===e,oe=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*N/n),re=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*N/n)+1,se={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*I),easeOutSine:e=>Math.sin(e*I),easeInOutSine:e=>-.5*(Math.cos(M*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>ne(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ne(e)?e:oe(e,.075,.3),easeOutElastic:e=>ne(e)?e:re(e,.075,.3),easeInOutElastic(e){const t=.1125;return ne(e)?e:e<.5?.5*oe(2*e,t,.45):.5+.5*re(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-se.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*se.easeInBounce(2*e):.5*se.easeOutBounce(2*e-1)+.5};function ie(e){return e+.5|0}const ae=(e,t,n)=>Math.max(Math.min(e,n),t);function le(e){return ae(ie(2.55*e),0,255)}function ce(e){return ae(ie(255*e),0,255)}function de(e){return ae(ie(e/2.55)/100,0,1)}function ue(e){return ae(ie(100*e),0,100)}const he={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},me=[..."0123456789ABCDEF"],pe=e=>me[15&e],fe=e=>me[(240&e)>>4]+me[15&e],ge=e=>(240&e)>>4==(15&e);function be(e){var t=(e=>ge(e.r)&&ge(e.g)&&ge(e.b)&&ge(e.a))(e)?pe:fe;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const ve=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ye(e,t,n){const o=t*Math.min(n,1-n),r=(t,r=(t+e/30)%12)=>n-o*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function xe(e,t,n){const o=(o,r=(o+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[o(5),o(3),o(1)]}function we(e,t,n){const o=ye(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)o[r]*=1-t-n,o[r]+=t;return o}function Ce(e){const t=e.r/255,n=e.g/255,o=e.b/255,r=Math.max(t,n,o),s=Math.min(t,n,o),i=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=i>.5?c/(2-r-s):c/(r+s),a=function(e,t,n,o,r){return e===r?(t-n)/o+(t<n?6:0):t===r?(n-e)/o+2:(e-t)/o+4}(t,n,o,c,r),a=60*a+.5),[0|a,l||0,i]}function _e(e,t,n,o){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,o)).map(ce)}function Se(e,t,n){return _e(ye,e,t,n)}function ke(e){return(e%360+360)%360}function Ee(e){const t=ve.exec(e);let n,o=255;if(!t)return;t[5]!==n&&(o=t[6]?le(+t[5]):ce(+t[5]));const r=ke(+t[2]),s=+t[3]/100,i=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return _e(we,e,t,n)}(r,s,i):"hsv"===t[1]?function(e,t,n){return _e(xe,e,t,n)}(r,s,i):Se(r,s,i),{r:n[0],g:n[1],b:n[2],a:o}}const Oe={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Te={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ae;function De(e){Ae||(Ae=function(){const e={},t=Object.keys(Te),n=Object.keys(Oe);let o,r,s,i,a;for(o=0;o<t.length;o++){for(i=a=t[o],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Oe[s]);s=parseInt(Te[i],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),Ae.transparent=[0,0,0,0]);const t=Ae[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Re=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Me=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Ne=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Pe(e,t,n){if(e){let o=Ce(e);o[t]=Math.max(0,Math.min(o[t]+o[t]*n,0===t?360:1)),o=Se(o),e.r=o[0],e.g=o[1],e.b=o[2]}}function Le(e,t){return e?Object.assign(t||{},e):e}function Be(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ce(e[3]))):(t=Le(e,{r:0,g:0,b:0,a:1})).a=ce(t.a),t}function Ie(e){return"r"===e.charAt(0)?function(e){const t=Re.exec(e);let n,o,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?le(e):ae(255*e,0,255)}return n=+t[1],o=+t[3],r=+t[5],n=255&(t[2]?le(n):ae(n,0,255)),o=255&(t[4]?le(o):ae(o,0,255)),r=255&(t[6]?le(r):ae(r,0,255)),{r:n,g:o,b:r,a:s}}}(e):Ee(e)}class Fe{constructor(e){if(e instanceof Fe)return e;const t=typeof e;let n;var o,r,s;"object"===t?n=Be(e):"string"===t&&(s=(o=e).length,"#"===o[0]&&(4===s||5===s?r={r:255&17*he[o[1]],g:255&17*he[o[2]],b:255&17*he[o[3]],a:5===s?17*he[o[4]]:255}:7!==s&&9!==s||(r={r:he[o[1]]<<4|he[o[2]],g:he[o[3]]<<4|he[o[4]],b:he[o[5]]<<4|he[o[6]],a:9===s?he[o[7]]<<4|he[o[8]]:255})),n=r||De(e)||Ie(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Le(this._rgb);return e&&(e.a=de(e.a)),e}set rgb(e){this._rgb=Be(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${de(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?be(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Ce(e),n=t[0],o=ue(t[1]),r=ue(t[2]);return e.a<255?`hsla(${n}, ${o}%, ${r}%, ${de(e.a)})`:`hsl(${n}, ${o}%, ${r}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,o=e.rgb;let r;const s=t===r?.5:t,i=2*s-1,a=n.a-o.a,l=((i*a==-1?i:(i+a)/(1+i*a))+1)/2;r=1-l,n.r=255&l*n.r+r*o.r+.5,n.g=255&l*n.g+r*o.g+.5,n.b=255&l*n.b+r*o.b+.5,n.a=s*n.a+(1-s)*o.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const o=Ne(de(e.r)),r=Ne(de(e.g)),s=Ne(de(e.b));return{r:ce(Me(o+n*(Ne(de(t.r))-o))),g:ce(Me(r+n*(Ne(de(t.g))-r))),b:ce(Me(s+n*(Ne(de(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Fe(this.rgb)}alpha(e){return this._rgb.a=ce(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=ie(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Pe(this._rgb,2,e),this}darken(e){return Pe(this._rgb,2,-e),this}saturate(e){return Pe(this._rgb,1,e),this}desaturate(e){return Pe(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Ce(e);n[0]=ke(n[0]+t),n=Se(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function ze(e){return new Fe(e)}function je(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function He(e){return je(e)?e:ze(e)}function Ve(e){return je(e)?e:ze(e).saturate(.5).darken(.1).hexString()}const $e=Object.create(null),Ue=Object.create(null);function We(e,t){if(!t)return e;const n=t.split(".");for(let t=0,o=n.length;t<o;++t){const o=n[t];e=e[o]||(e[o]=Object.create(null))}return e}function qe(e,t,n){return"string"==typeof t?_(We(e,t),n):_(We(e,""),t)}var Ke=new class{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Ve(t.backgroundColor),this.hoverBorderColor=(e,t)=>Ve(t.borderColor),this.hoverColor=(e,t)=>Ve(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return qe(this,e,t)}get(e){return We(this,e)}describe(e,t){return qe(Ue,e,t)}override(e,t){return qe($e,e,t)}route(e,t,n,o){const r=We(this,e),s=We(this,n),i="_"+t;Object.defineProperties(r,{[i]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=s[o];return h(e)?Object.assign({},t,e):f(e,t)},set(e){this[i]=e}}})}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Ge(e,t,n,o,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>o&&(o=s),o}function Ye(e,t,n,o){let r=(o=o||{}).data=o.data||{},s=o.garbageCollect=o.garbageCollect||[];o.font!==t&&(r=o.data={},s=o.garbageCollect=[],o.font=t),e.save(),e.font=t;let i=0;const a=n.length;let l,c,d,h,m;for(l=0;l<a;l++)if(h=n[l],null!=h&&!0!==u(h))i=Ge(e,r,s,i,h);else if(u(h))for(c=0,d=h.length;c<d;c++)m=h[c],null==m||u(m)||(i=Ge(e,r,s,i,m));e.restore();const p=s.length/2;if(p>n.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return i}function Xe(e,t,n){const o=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*o)/o+r}function Je(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Qe(e,t,n,o){let r,s,i,a,l;const c=t.pointStyle,d=t.rotation,u=t.radius;let h=(d||0)*B;if(c&&"object"==typeof c&&(r=c.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(n,o),e.rotate(h),e.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void e.restore();if(!(isNaN(u)||u<=0)){switch(e.beginPath(),c){default:e.arc(n,o,u,0,N),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(h)*u,o-Math.cos(h)*u),h+=z,e.lineTo(n+Math.sin(h)*u,o-Math.cos(h)*u),h+=z,e.lineTo(n+Math.sin(h)*u,o-Math.cos(h)*u),e.closePath();break;case"rectRounded":l=.516*u,a=u-l,s=Math.cos(h+F)*a,i=Math.sin(h+F)*a,e.arc(n-s,o-i,l,h-M,h-I),e.arc(n+i,o-s,l,h-I,h),e.arc(n+s,o+i,l,h,h+I),e.arc(n-i,o+s,l,h+I,h+M),e.closePath();break;case"rect":if(!d){a=Math.SQRT1_2*u,e.rect(n-a,o-a,2*a,2*a);break}h+=F;case"rectRot":s=Math.cos(h)*u,i=Math.sin(h)*u,e.moveTo(n-s,o-i),e.lineTo(n+i,o-s),e.lineTo(n+s,o+i),e.lineTo(n-i,o+s),e.closePath();break;case"crossRot":h+=F;case"cross":s=Math.cos(h)*u,i=Math.sin(h)*u,e.moveTo(n-s,o-i),e.lineTo(n+s,o+i),e.moveTo(n+i,o-s),e.lineTo(n-i,o+s);break;case"star":s=Math.cos(h)*u,i=Math.sin(h)*u,e.moveTo(n-s,o-i),e.lineTo(n+s,o+i),e.moveTo(n+i,o-s),e.lineTo(n-i,o+s),h+=F,s=Math.cos(h)*u,i=Math.sin(h)*u,e.moveTo(n-s,o-i),e.lineTo(n+s,o+i),e.moveTo(n+i,o-s),e.lineTo(n-i,o+s);break;case"line":s=Math.cos(h)*u,i=Math.sin(h)*u,e.moveTo(n-s,o-i),e.lineTo(n+s,o+i);break;case"dash":e.moveTo(n,o),e.lineTo(n+Math.cos(h)*u,o+Math.sin(h)*u)}e.fill(),t.borderWidth>0&&e.stroke()}}function Ze(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function et(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function tt(e){e.restore()}function nt(e,t,n,o,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const o=(t.x+n.x)/2;e.lineTo(o,t.y),e.lineTo(o,n.y)}else"after"===r!=!!o?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function ot(e,t,n,o){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(o?t.cp1x:t.cp2x,o?t.cp1y:t.cp2y,o?n.cp2x:n.cp1x,o?n.cp2y:n.cp1y,n.x,n.y)}function rt(e,t,n,o,r,s={}){const i=u(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);d(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<i.length;++l)c=i[l],a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),d(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,o,s.maxWidth)),e.fillText(c,n,o,s.maxWidth),st(e,n,o,c,s),o+=r.lineHeight;e.restore()}function st(e,t,n,o,r){if(r.strikethrough||r.underline){const s=e.measureText(o),i=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(i,d),e.lineTo(a,d),e.stroke()}}function it(e,t){const{x:n,y:o,w:r,h:s,radius:i}=t;e.arc(n+i.topLeft,o+i.topLeft,i.topLeft,-I,M,!0),e.lineTo(n,o+s-i.bottomLeft),e.arc(n+i.bottomLeft,o+s-i.bottomLeft,i.bottomLeft,M,I,!0),e.lineTo(n+r-i.bottomRight,o+s),e.arc(n+r-i.bottomRight,o+s-i.bottomRight,i.bottomRight,I,0,!0),e.lineTo(n+r,o+i.topRight),e.arc(n+r-i.topRight,o+i.topRight,i.topRight,0,-I,!0),e.lineTo(n+i.topLeft,o)}const at=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),lt=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ct(e,t){const n=(""+e).match(at);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}function dt(e,t){const n={},o=h(t),r=o?Object.keys(t):t,s=h(e)?o?n=>f(e[n],e[t[n]]):t=>e[t]:()=>e;for(const e of r)n[e]=+s(e)||0;return n}function ut(e){return dt(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ht(e){return dt(e,["topLeft","topRight","bottomLeft","bottomRight"])}function mt(e){const t=ut(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function pt(e,t){e=e||{},t=t||Ke.font;let n=f(e.size,t.size);"string"==typeof n&&(n=parseInt(n,10));let o=f(e.style,t.style);o&&!(""+o).match(lt)&&(console.warn('Invalid font style specified: "'+o+'"'),o="");const r={family:f(e.family,t.family),lineHeight:ct(f(e.lineHeight,t.lineHeight),n),size:n,style:o,weight:f(e.weight,t.weight),string:""};return r.string=function(e){return!e||d(e.size)||d(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function ft(e,t,n,o){let r,s,i,a=!0;for(r=0,s=e.length;r<s;++r)if(i=e[r],void 0!==i&&(void 0!==t&&"function"==typeof i&&(i=i(t),a=!1),void 0!==n&&u(i)&&(i=i[n%i.length],a=!1),void 0!==i))return o&&!a&&(o.cacheable=!1),i}function gt(e,t){return Object.assign(Object.create(e),t)}function bt(e,t,n){n=n||(n=>e[n]<t);let o,r=e.length-1,s=0;for(;r-s>1;)o=s+r>>1,n(o)?s=o:r=o;return{lo:s,hi:r}}const vt=(e,t,n)=>bt(e,n,(o=>e[o][t]<n)),yt=(e,t,n)=>bt(e,n,(o=>e[o][t]>=n));const xt=["push","pop","shift","splice","unshift"];function wt(e,t){const n=e._chartjs;if(!n)return;const o=n.listeners,r=o.indexOf(t);-1!==r&&o.splice(r,1),o.length>0||(xt.forEach((t=>{delete e[t]})),delete e._chartjs)}function Ct(e){const t=new Set;let n,o;for(n=0,o=e.length;n<o;++n)t.add(e[n]);return t.size===o?e:Array.from(t)}function _t(e,t=[""],n=e,o,r=(()=>e[0])){A(o)||(o=Pt("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:o,_getTarget:r,override:r=>_t([r,...e],t,n,o)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,o)=>Tt(n,o,(()=>function(e,t,n,o){let r;for(const s of t)if(r=Pt(Et(s,e),n),A(r))return Ot(e,r)?Mt(n,o,e,r):r}(o,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Lt(e).includes(t),ownKeys:e=>Lt(e),set(e,t,n){const o=e._storage||(e._storage=r());return e[t]=o[t]=n,delete e._keys,!0}})}function St(e,t,n,o){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:kt(e,o),setContext:t=>St(e,t,n,o),override:r=>St(e.override(r),t,n,o)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Tt(e,t,(()=>function(e,t,n){const{_proxy:o,_context:r,_subProxy:s,_descriptors:i}=e;let a=o[t];D(a)&&i.isScriptable(t)&&(a=function(e,t,n,o){const{_proxy:r,_context:s,_subProxy:i,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e),t=t(s,i||o),a.delete(e),Ot(e,t)&&(t=Mt(r._scopes,r,e,t));return t}(t,a,e,n));u(a)&&a.length&&(a=function(e,t,n,o){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=n;if(A(s.index)&&o(e))t=t[s.index%t.length];else if(h(t[0])){const n=t,o=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Mt(o,r,e,l);t.push(St(n,s,i&&i[e],a))}}return t}(t,a,e,i.isIndexable));Ot(t,a)&&(a=St(a,r,s&&s[t],i));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,o)=>(e[n]=o,delete t[n],!0)})}function kt(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:o=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:o,isScriptable:D(n)?n:()=>n,isIndexable:D(o)?o:()=>o}}const Et=(e,t)=>e?e+T(t):t,Ot=(e,t)=>h(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Tt(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const o=n();return e[t]=o,o}function At(e,t,n){return D(e)?e(t,n):e}const Dt=(e,t)=>!0===e?t:"string"==typeof e?O(t,e):void 0;function Rt(e,t,n,o,r){for(const s of t){const t=Dt(n,s);if(t){e.add(t);const s=At(t._fallback,n,r);if(A(s)&&s!==n&&s!==o)return s}else if(!1===t&&A(o)&&n!==o)return null}return!1}function Mt(e,t,n,o){const r=t._rootScopes,s=At(t._fallback,n,o),i=[...e,...r],a=new Set;a.add(o);let l=Nt(a,i,n,s||n,o);return null!==l&&((!A(s)||s===n||(l=Nt(a,i,s,l,o),null!==l))&&_t(Array.from(a),[""],r,s,(()=>function(e,t,n){const o=e._getTarget();t in o||(o[t]={});const r=o[t];if(u(r)&&h(n))return n;return r}(t,n,o))))}function Nt(e,t,n,o,r){for(;n;)n=Rt(e,t,n,o,r);return n}function Pt(e,t){for(const n of t){if(!n)continue;const t=n[e];if(A(t))return t}}function Lt(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Bt(e,t,n,o){const{iScale:r}=e,{key:s="r"}=this._parsing,i=new Array(o);let a,l,c,d;for(a=0,l=o;a<l;++a)c=a+n,d=t[c],i[a]={r:r.parse(O(d,s),c)};return i}const It=Number.EPSILON||1e-14,Ft=(e,t)=>t<e.length&&!e[t].skip&&e[t],zt=e=>"x"===e?"y":"x";function jt(e,t,n,o){const r=e.skip?t:e,s=t,i=n.skip?t:n,a=X(s,r),l=X(i,s);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=o*c,h=o*d;return{previous:{x:s.x-u*(i.x-r.x),y:s.y-u*(i.y-r.y)},next:{x:s.x+h*(i.x-r.x),y:s.y+h*(i.y-r.y)}}}function Ht(e,t="x"){const n=zt(t),o=e.length,r=Array(o).fill(0),s=Array(o);let i,a,l,c=Ft(e,0);for(i=0;i<o;++i)if(a=l,l=c,c=Ft(e,i+1),l){if(c){const e=c[t]-l[t];r[i]=0!==e?(c[n]-l[n])/e:0}s[i]=a?c?H(r[i-1])!==H(r[i])?0:(r[i-1]+r[i])/2:r[i-1]:r[i]}!function(e,t,n){const o=e.length;let r,s,i,a,l,c=Ft(e,0);for(let d=0;d<o-1;++d)l=c,c=Ft(e,d+1),l&&c&&(U(t[d],0,It)?n[d]=n[d+1]=0:(r=n[d]/t[d],s=n[d+1]/t[d],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(i=3/Math.sqrt(a),n[d]=r*i*t[d],n[d+1]=s*i*t[d])))}(e,r,s),function(e,t,n="x"){const o=zt(n),r=e.length;let s,i,a,l=Ft(e,0);for(let c=0;c<r;++c){if(i=a,a=l,l=Ft(e,c+1),!a)continue;const r=a[n],d=a[o];i&&(s=(r-i[n])/3,a[`cp1${n}`]=r-s,a[`cp1${o}`]=d-s*t[c]),l&&(s=(l[n]-r)/3,a[`cp2${n}`]=r+s,a[`cp2${o}`]=d+s*t[c])}}(e,s,t)}function Vt(e,t,n){return Math.max(Math.min(e,n),t)}function $t(e,t,n,o,r){let s,i,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)Ht(e,r);else{let n=o?e[e.length-1]:e[0];for(s=0,i=e.length;s<i;++s)a=e[s],l=jt(n,a,e[Math.min(s+1,i-(o?0:1))%i],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,o,r,s,i,a=Ze(e[0],t);for(n=0,o=e.length;n<o;++n)i=s,s=a,a=n<o-1&&Ze(e[n+1],t),s&&(r=e[n],i&&(r.cp1x=Vt(r.cp1x,t.left,t.right),r.cp1y=Vt(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Vt(r.cp2x,t.left,t.right),r.cp2y=Vt(r.cp2y,t.top,t.bottom)))}(e,n)}function Ut(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Wt(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function qt(e,t,n){let o;return"string"==typeof e?(o=parseInt(e,10),-1!==e.indexOf("%")&&(o=o/100*t.parentNode[n])):o=e,o}const Kt=e=>window.getComputedStyle(e,null);const Gt=["top","right","bottom","left"];function Yt(e,t,n){const o={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Gt[r];o[s]=parseFloat(e[t+"-"+s+n])||0}return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function Xt(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:o}=t,r=Kt(n),s="border-box"===r.boxSizing,i=Yt(r,"padding"),a=Yt(r,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,o=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=o;let i,a,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))i=r,a=s;else{const e=t.getBoundingClientRect();i=o.clientX-e.left,a=o.clientY-e.top,l=!0}return{x:i,y:a,box:l}}(e,n),u=i.left+(d&&a.left),h=i.top+(d&&a.top);let{width:m,height:p}=t;return s&&(m-=i.width+a.width,p-=i.height+a.height),{x:Math.round((l-u)/m*n.width/o),y:Math.round((c-h)/p*n.height/o)}}const Jt=e=>Math.round(10*e)/10;function Qt(e,t,n,o){const r=Kt(e),s=Yt(r,"margin"),i=qt(r.maxWidth,e,"clientWidth")||L,a=qt(r.maxHeight,e,"clientHeight")||L,l=function(e,t,n){let o,r;if(void 0===t||void 0===n){const s=Wt(e);if(s){const e=s.getBoundingClientRect(),i=Kt(s),a=Yt(i,"border","width"),l=Yt(i,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,o=qt(i.maxWidth,s,"clientWidth"),r=qt(i.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:o||L,maxHeight:r||L}}(e,t,n);let{width:c,height:d}=l;if("content-box"===r.boxSizing){const e=Yt(r,"border","width"),t=Yt(r,"padding");c-=t.width+e.width,d-=t.height+e.height}return c=Math.max(0,c-s.width),d=Math.max(0,o?Math.floor(c/o):d-s.height),c=Jt(Math.min(c,i,l.maxWidth)),d=Jt(Math.min(d,a,l.maxHeight)),c&&!d&&(d=Jt(c/2)),{width:c,height:d}}function Zt(e,t,n){const o=t||1,r=Math.floor(e.height*o),s=Math.floor(e.width*o);e.height=r/o,e.width=s/o;const i=e.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height=`${e.height}px`,i.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==o||i.height!==r||i.width!==s)&&(e.currentDevicePixelRatio=o,i.height=r,i.width=s,e.ctx.setTransform(o,0,0,o,0,0),!0)}const en=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function tn(e,t){const n=function(e,t){return Kt(e).getPropertyValue(t)}(e,t),o=n&&n.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:void 0}function nn(e,t,n,o){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function on(e,t,n,o){return{x:e.x+n*(t.x-e.x),y:"middle"===o?n<.5?e.y:t.y:"after"===o?n<1?e.y:t.y:n>0?t.y:e.y}}function rn(e,t,n,o){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},i=nn(e,r,n),a=nn(r,s,n),l=nn(s,t,n),c=nn(i,a,n),d=nn(a,l,n);return nn(c,d,n)}const sn=new Map;function an(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let o=sn.get(n);return o||(o=new Intl.NumberFormat(e,t),sn.set(n,o)),o}(t,n).format(e)}function ln(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function cn(e,t){let n,o;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,o=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=o)}function dn(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function un(e){return"angle"===e?{between:Z,compare:J,normalize:Q}:{between:te,compare:(e,t)=>e-t,normalize:e=>e}}function hn({start:e,end:t,count:n,loop:o,style:r}){return{start:e%n,end:t%n,loop:o&&(t-e+1)%n==0,style:r}}function mn(e,t,n){if(!n)return[e];const{property:o,start:r,end:s}=n,i=t.length,{compare:a,between:l,normalize:c}=un(o),{start:d,end:u,loop:h,style:m}=function(e,t,n){const{property:o,start:r,end:s}=n,{between:i,normalize:a}=un(o),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&i(a(t[u%l][o]),r,s);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,n),p=[];let f,g,b,v=!1,y=null;const x=()=>v||l(r,b,f)&&0!==a(r,b),w=()=>!v||0===a(s,f)||l(s,b,f);for(let e=d,n=d;e<=u;++e)g=t[e%i],g.skip||(f=c(g[o]),f!==b&&(v=l(f,r,s),null===y&&x()&&(y=0===a(f,r)?e:n),null!==y&&w()&&(p.push(hn({start:y,end:e,loop:h,count:i,style:m})),y=null),n=e,b=f));return null!==y&&p.push(hn({start:y,end:u,loop:h,count:i,style:m})),p}function pn(e,t){const n=[],o=e.segments;for(let r=0;r<o.length;r++){const s=mn(o[r],e.points,t);s.length&&n.push(...s)}return n}function fn(e,t,n,o){return o&&o.setContext&&n?function(e,t,n,o){const r=e._chart.getContext(),s=gn(e.options),{_datasetIndex:i,options:{spanGaps:a}}=e,l=n.length,c=[];let d=s,u=t[0].start,h=u;function m(e,t,o,r){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!=t%l&&(c.push({start:e%l,end:t%l,loop:o,style:r}),d=r,u=t%l)}}for(const e of t){u=a?u:e.start;let t,s=n[u%l];for(h=u+1;h<=e.end;h++){const a=n[h%l];t=gn(o.setContext(gt(r,{type:"segment",p0:s,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:i}))),bn(t,d)&&m(u,h-1,e.loop,d),s=a,d=t}u<h-1&&m(u,h-1,e.loop,d)}return c}(e,t,n,o):t}function gn(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function bn(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var vn=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,o){const r=t.listeners[o],s=t.duration;r.forEach((o=>o({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=r.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let t=0;this._charts.forEach(((n,o)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,i=r.length-1,a=!1;for(;i>=0;--i)s=r[i],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(r[i]=r[r.length-1],r.pop());a&&(o.draw(),this._notify(o,n,e,"progress")),r.length||(n.running=!1,this._notify(o,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let o=n.length-1;for(;o>=0;--o)n[o].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const yn="transparent",xn={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const o=He(e||yn),r=o.valid&&He(t||yn);return r&&r.valid?r.mix(o,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class wn{constructor(e,t,n,o){const r=t[n];o=ft([e.to,o,r,e.from]);const s=ft([e.from,r,o]);this._active=!0,this._fn=e.fn||xn[e.type||typeof s],this._easing=se[e.easing]||se.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=o,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const o=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=ft([e.to,t,o,e.from]),this._from=ft([e.from,o,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,o=this._prop,r=this._from,s=this._loop,i=this._to;let a;if(this._active=r!==i&&(s||t<n),!this._active)return this._target[o]=i,void this._notify(!0);t<0?this._target[o]=r:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[o]=this._fn(r,i,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let e=0;e<n.length;e++)n[e][t]()}}Ke.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Cn=Object.keys(Ke.animation);Ke.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),Ke.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Ke.describe("animations",{_fallback:"animation"}),Ke.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class _n{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!h(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const o=e[n];if(!h(o))return;const r={};for(const e of Cn)r[e]=o[e];(u(o.properties)&&o.properties||[n]).forEach((e=>{e!==n&&t.has(e)||t.set(e,r)}))}))}_animateOptions(e,t){const n=t.options,o=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!o)return[];const r=this._createAnimations(o,n);return n.$shared&&function(e,t){const n=[],o=Object.keys(t);for(let t=0;t<o.length;t++){const r=e[o[t]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,o=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),i=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){o.push(...this._animateOptions(e,t));continue}const c=t[l];let d=r[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(r[l]=d=new wn(u,e,l,c),o.push(d)):e[l]=c}return o}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(vn.add(this._chart,n),!0):void 0}}function Sn(e,t){const n=e&&e.options||{},o=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:o?s:r,end:o?r:s}}function kn(e,t){const n=[],o=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=o.length;r<s;++r)n.push(o[r].index);return n}function En(e,t,n,o={}){const r=e.keys,s="single"===o.mode;let i,a,l,c;if(null!==t){for(i=0,a=r.length;i<a;++i){if(l=+r[i],l===n){if(o.all)continue;break}c=e.values[l],m(c)&&(s||0===t||H(t)===H(c))&&(t+=c)}return t}}function On(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Tn(e,t,n){const o=e[t]||(e[t]={});return o[n]||(o[n]={})}function An(e,t,n,o){for(const r of t.getMatchingVisibleMetas(o).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function Dn(e,t){const{chart:n,_cachedMeta:o}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:i,index:a}=o,l=s.axis,c=i.axis,d=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(s,i,o),u=t.length;let h;for(let e=0;e<u;++e){const n=t[e],{[l]:s,[c]:u}=n;h=(n._stacks||(n._stacks={}))[c]=Tn(r,d,s),h[a]=u,h._top=An(h,i,!0,o.type),h._bottom=An(h,i,!1,o.type)}}function Rn(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function Mn(e,t){const n=e.controller.index,o=e.vScale&&e.vScale.axis;if(o){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[o]||void 0===t[o][n])return;delete t[o][n]}}}const Nn=e=>"reset"===e||"none"===e,Pn=(e,t)=>t?e:Object.assign({},e);class Ln{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=On(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&Mn(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),o=(e,t,n,o)=>"x"===e?t:"r"===e?o:n,r=t.xAxisID=f(n.xAxisID,Rn(e,"x")),s=t.yAxisID=f(n.yAxisID,Rn(e,"y")),i=t.rAxisID=f(n.rAxisID,Rn(e,"r")),a=t.indexAxis,l=t.iAxisID=o(a,r,s,i),c=t.vAxisID=o(a,s,r,i);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&wt(this._data,this),e._stacked&&Mn(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(h(t))this._data=function(e){const t=Object.keys(e),n=new Array(t.length);let o,r,s;for(o=0,r=t.length;o<r;++o)s=t[o],n[o]={x:s,y:e[s]};return n}(t);else if(n!==t){if(n){wt(n,this);const e=this._cachedMeta;Mn(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(o=t)._chartjs?o._chartjs.listeners.push(r):(Object.defineProperty(o,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),xt.forEach((e=>{const t="_onData"+T(e),n=o[e];Object.defineProperty(o,e,{configurable:!0,enumerable:!1,value(...e){const r=n.apply(this,e);return o._chartjs.listeners.forEach((n=>{"function"==typeof n[t]&&n[t](...e)})),r}})})))),this._syncList=[],this._data=t}var o,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let o=!1;this._dataCheck();const r=t._stacked;t._stacked=On(t.vScale,t),t.stack!==n.stack&&(o=!0,Mn(t),t.stack=n.stack),this._resyncElements(e),(o||r!==t._stacked)&&Dn(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:o}=this,{iScale:r,_stacked:s}=n,i=r.axis;let a,l,c,d=0===e&&t===o.length||n._sorted,m=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=o,n._sorted=!0,c=o;else{c=u(o[e])?this.parseArrayData(n,o,e,t):h(o[e])?this.parseObjectData(n,o,e,t):this.parsePrimitiveData(n,o,e,t);const r=()=>null===l[i]||m&&l[i]<m[i];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],d&&(r()&&(d=!1),m=l);n._sorted=d}s&&Dn(this,c)}parsePrimitiveData(e,t,n,o){const{iScale:r,vScale:s}=e,i=r.axis,a=s.axis,l=r.getLabels(),c=r===s,d=new Array(o);let u,h,m;for(u=0,h=o;u<h;++u)m=u+n,d[u]={[i]:c||r.parse(l[m],m),[a]:s.parse(t[m],m)};return d}parseArrayData(e,t,n,o){const{xScale:r,yScale:s}=e,i=new Array(o);let a,l,c,d;for(a=0,l=o;a<l;++a)c=a+n,d=t[c],i[a]={x:r.parse(d[0],c),y:s.parse(d[1],c)};return i}parseObjectData(e,t,n,o){const{xScale:r,yScale:s}=e,{xAxisKey:i="x",yAxisKey:a="y"}=this._parsing,l=new Array(o);let c,d,u,h;for(c=0,d=o;c<d;++c)u=c+n,h=t[u],l[c]={x:r.parse(O(h,i),u),y:s.parse(O(h,a),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const o=this.chart,r=this._cachedMeta,s=t[e.axis];return En({keys:kn(o,!0),values:t._stacks[e.axis]},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,o){const r=n[t.axis];let s=null===r?NaN:r;const i=o&&n._stacks[t.axis];o&&i&&(o.values=i,s=En(o,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,o=n._parsed,r=n._sorted&&e===n.iScale,s=o.length,i=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:kn(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:o,maxDefined:r}=e.getUserBounds();return{min:o?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(i);let u,h;function p(){h=o[u];const t=h[i.axis];return!m(h[e.axis])||c>t||d<t}for(u=0;u<s&&(p()||(this.updateRangeFromParsed(l,e,h,a),!r));++u);if(r)for(u=s-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,e,h,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let o,r,s;for(o=0,r=t.length;o<r;++o)s=t[o][e.axis],m(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,o=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:o?""+o.getLabelForValue(r[o.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,o,r;return h(e)?(t=e.top,n=e.right,o=e.bottom,r=e.left):t=n=o=r=e,{top:t,right:n,bottom:o,left:r,disabled:!1===e}}(f(this.options.clip,function(e,t,n){if(!1===n)return!1;const o=Sn(e,n),r=Sn(t,n);return{top:r.end,right:o.end,bottom:r.start,left:o.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,o=n.data||[],r=t.chartArea,s=[],i=this._drawStart||0,a=this._drawCount||o.length-i,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,i,a),c=i;c<i+a;++c){const t=o[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const o=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return gt(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=o.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return gt(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=o,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const o="active"===t,r=this._cachedDataOpts,s=e+"-"+t,i=r[s],a=this.enableOptionSharing&&A(n);if(i)return Pn(i,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=o?[`${e}Hover`,"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Ke.elements[e]),m=l.resolveNamedOptions(u,h,(()=>this.getContext(n,o)),d);return m.$shared&&(m.$shared=a,r[s]=Object.freeze(Pn(m,a))),m}_resolveAnimations(e,t,n){const o=this.chart,r=this._cachedDataOpts,s=`animation-${t}`,i=r[s];if(i)return i;let a;if(!1!==o.options.animation){const o=this.chart.config,r=o.datasetAnimationScopeKeys(this._type,t),s=o.getOptionScopes(this.getDataset(),r);a=o.createResolver(s,this.getContext(e,n,t))}const l=new _n(o,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Nn(e)||this.chart._animationsDisabled}updateElement(e,t,n,o){Nn(o)?Object.assign(e,n):this._resolveAnimations(t,o).update(e,n)}updateSharedOptions(e,t,n){e&&!Nn(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,o){e.active=o;const r=this.getStyle(t,o);this._resolveAnimations(t,n,o).update(e,{options:!o&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[e,t,n]of this._syncList)this[e](t,n);this._syncList=[];const o=n.length,r=t.length,s=Math.min(r,o);s&&this.parse(0,s),r>o?this._insertElements(o,r-o,e):r<o&&this._removeElements(r,o-r)}_insertElements(e,t,n=!0){const o=this._cachedMeta,r=o.data,s=e+t;let i;const a=e=>{for(e.length+=t,i=e.length-1;i>=s;i--)e[i]=e[i-t]};for(a(r),i=e;i<s;++i)r[i]=new this.dataElementType;this._parsing&&a(o._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,o){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const o=n._parsed.splice(e,t);n._stacked&&Mn(n,o)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,o]=e;this[t](n,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Bn(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let o=[];for(let t=0,r=n.length;t<r;t++)o=o.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Ct(o.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let o,r,s,i,a=t._length;const l=()=>{32767!==s&&-32768!==s&&(A(i)&&(a=Math.min(a,Math.abs(s-i)||a)),i=s)};for(o=0,r=n.length;o<r;++o)s=t.getPixelForValue(n[o]),l();for(i=void 0,o=0,r=t.ticks.length;o<r;++o)s=t.getPixelForTick(o),l();return a}function In(e,t,n,o){return u(e)?function(e,t,n,o){const r=n.parse(e[0],o),s=n.parse(e[1],o),i=Math.min(r,s),a=Math.max(r,s);let l=i,c=a;Math.abs(i)>Math.abs(a)&&(l=a,c=i),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:i,max:a}}(e,t,n,o):t[n.axis]=n.parse(e,o),t}function Fn(e,t,n,o){const r=e.iScale,s=e.vScale,i=r.getLabels(),a=r===s,l=[];let c,d,u,h;for(c=n,d=n+o;c<d;++c)h=t[c],u={},u[r.axis]=a||r.parse(i[c],c),l.push(In(h,u,s,c));return l}function zn(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function jn(e,t,n,o){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);const{start:i,end:a,reverse:l,top:c,bottom:d}=function(e){let t,n,o,r,s;return e.horizontal?(t=e.base>e.x,n="left",o="right"):(t=e.base<e.y,n="bottom",o="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:o,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===o?r=c:(n._bottom||0)===o?r=d:(s[Hn(d,i,a,l)]=!0,r=c)),s[Hn(r,i,a,l)]=!0,e.borderSkipped=s}function Hn(e,t,n,o){var r,s,i;return o?(i=n,e=Vn(e=(r=e)===(s=t)?i:r===i?s:r,n,t)):e=Vn(e,t,n),e}function Vn(e,t,n){return"start"===e?t:"end"===e?n:e}function $n(e,{inflateAmount:t},n){e.inflateAmount="auto"===t?1===n?.33:0:t}Ln.defaults={},Ln.prototype.datasetElementType=null,Ln.prototype.dataElementType=null;class Un extends Ln{parsePrimitiveData(e,t,n,o){return Fn(e,t,n,o)}parseArrayData(e,t,n,o){return Fn(e,t,n,o)}parseObjectData(e,t,n,o){const{iScale:r,vScale:s}=e,{xAxisKey:i="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?i:a,c="x"===s.axis?i:a,d=[];let u,h,m,p;for(u=n,h=n+o;u<h;++u)p=t[u],m={},m[r.axis]=r.parse(O(p,l),u),d.push(In(O(p,c),m,s,u));return d}updateRangeFromParsed(e,t,n,o){super.updateRangeFromParsed(e,t,n,o);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:o}=t,r=this.getParsed(e),s=r._custom,i=zn(s)?"["+s.start+", "+s.end+"]":""+o.getLabelForValue(r[o.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,o){const r="reset"===o,{index:s,_cachedMeta:{vScale:i}}=this,a=i.getBasePixel(),l=i.isHorizontal(),c=this._getRuler(),u=this.resolveDataElementOptions(t,o),h=this.getSharedOptions(u),m=this.includeOptions(o,h);this.updateSharedOptions(h,o,u);for(let u=t;u<t+n;u++){const t=this.getParsed(u),n=r||d(t[i.axis])?{base:a,head:a}:this._calculateBarValuePixels(u),p=this._calculateBarIndexPixels(u,c),f=(t._stacks||{})[i.axis],g={horizontal:l,base:n.base,enableBorderRadius:!f||zn(t._custom)||s===f._top||s===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};m&&(g.options=h||this.resolveDataElementOptions(u,e[u].active?"active":o));const b=g.options||e[u].options;jn(g,b,f,s),$n(g,b,c.ratio),this.updateElement(e[u],u,g,o)}}_getStacks(e,t){const n=this._cachedMeta.iScale,o=n.getMatchingVisibleMetas(this._type),r=n.options.stacked,s=o.length,i=[];let a,l;for(a=0;a<s;++a)if(l=o[a],l.controller.options.grouped){if(void 0!==t){const e=l.controller.getParsed(t)[l.controller._cachedMeta.vScale.axis];if(d(e)||isNaN(e))continue}if((!1===r||-1===i.indexOf(l.stack)||void 0===r&&void 0===l.stack)&&i.push(l.stack),l.index===e)break}return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const o=this._getStacks(e,n),r=void 0!==t?o.indexOf(t):-1;return-1===r?o.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,o=[];let r,s;for(r=0,s=t.data.length;r<s;++r)o.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const i=e.barThickness;return{min:i||Bn(t),pixels:o,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n},options:{base:o,minBarLength:r}}=this,s=o||0,i=this.getParsed(e),a=i._custom,l=zn(a);let c,u,h=i[t.axis],m=0,p=n?this.applyStack(t,i,n):h;p!==h&&(m=p-h,p=h),l&&(h=a.barStart,p=a.barEnd-a.barStart,0!==h&&H(h)!==H(a.barEnd)&&(m=0),m+=h);const f=d(o)||l?m:o;let g=t.getPixelForValue(f);if(c=this.chart.getDataVisibility(e)?t.getPixelForValue(m+p):g,u=c-g,Math.abs(u)<r){u=function(e,t,n){return 0!==e?H(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,s)*r,h===s&&(g-=u/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),o=Math.min(e,n),i=Math.max(e,n);g=Math.max(Math.min(g,i),o),c=g+u}if(g===t.getPixelForValue(s)){const e=H(u)*t.getLineWidthForValue(s)/2;g+=e,u-=e}return{size:u,base:g,head:c,center:c+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,o=this.options,r=o.skipNull,s=f(o.maxBarThickness,1/0);let i,a;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,l="flex"===o.barThickness?function(e,t,n,o){const r=t.pixels,s=r[e];let i=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===i&&(i=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-i);const c=s-(s-Math.min(i,a))/2*l;return{chunk:Math.abs(a-i)/2*l/o,ratio:n.barPercentage,start:c}}(e,t,o,n):function(e,t,n,o){const r=n.barThickness;let s,i;return d(r)?(s=t.min*n.categoryPercentage,i=n.barPercentage):(s=r*o,i=1),{chunk:s/o,ratio:i,start:t.pixels[e]-s/2}}(e,t,o,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);i=l.start+l.chunk*c+l.chunk/2,a=Math.min(s,l.chunk*l.ratio)}else i=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:i-a/2,head:i+a/2,center:i,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,o=n.length;let r=0;for(;r<o;++r)null!==this.getParsed(r)[t.axis]&&n[r].draw(this._ctx)}}Un.id="bar",Un.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Un.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Wn extends Ln{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,o){const r=super.parsePrimitiveData(e,t,n,o);for(let e=0;e<r.length;e++)r[e]._custom=this.resolveDataElementOptions(e+n).radius;return r}parseArrayData(e,t,n,o){const r=super.parseArrayData(e,t,n,o);for(let e=0;e<r.length;e++){const o=t[n+e];r[e]._custom=f(o[2],this.resolveDataElementOptions(e+n).radius)}return r}parseObjectData(e,t,n,o){const r=super.parseObjectData(e,t,n,o);for(let e=0;e<r.length;e++){const o=t[n+e];r[e]._custom=f(o&&o.r&&+o.r,this.resolveDataElementOptions(e+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:n,yScale:o}=t,r=this.getParsed(e),s=n.getLabelForValue(r.x),i=o.getLabelForValue(r.y),a=r._custom;return{label:t.label,value:"("+s+", "+i+(a?", "+a:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,o){const r="reset"===o,{iScale:s,vScale:i}=this._cachedMeta,a=this.resolveDataElementOptions(t,o),l=this.getSharedOptions(a),c=this.includeOptions(o,l),d=s.axis,u=i.axis;for(let a=t;a<t+n;a++){const t=e[a],n=!r&&this.getParsed(a),l={},h=l[d]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[d]),m=l[u]=r?i.getBasePixel():i.getPixelForValue(n[u]);l.skip=isNaN(h)||isNaN(m),c&&(l.options=this.resolveDataElementOptions(a,t.active?"active":o),r&&(l.options.radius=0)),this.updateElement(t,a,l,o)}this.updateSharedOptions(l,o,a)}resolveDataElementOptions(e,t){const n=this.getParsed(e);let o=super.resolveDataElementOptions(e,t);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const r=o.radius;return"active"!==t&&(o.radius=0),o.radius+=f(n&&n._custom,r),o}}Wn.id="bubble",Wn.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Wn.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class qn extends Ln{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,o=this._cachedMeta;if(!1===this._parsing)o._parsed=n;else{let r,s,i=e=>+n[e];if(h(n[e])){const{key:e="value"}=this._parsing;i=t=>+O(n[t],e)}for(r=e,s=e+t;r<s;++r)o._parsed[r]=i(r)}}_getRotation(){return q(this.options.rotation-90)}_getCircumference(){return q(this.options.circumference)}_getRotationExtents(){let e=N,t=-N;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const o=this.chart.getDatasetMeta(n).controller,r=o._getRotation(),s=o._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,o=this._cachedMeta,r=o.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,i=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=i,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:f,offsetY:b}=function(e,t,n){let o=1,r=1,s=0,i=0;if(t<N){const a=e,l=a+t,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),h=Math.sin(l),m=(e,t,o)=>Z(e,a,l,!0)?1:Math.max(t,t*n,o,o*n),p=(e,t,o)=>Z(e,a,l,!0)?-1:Math.min(t,t*n,o,o*n),f=m(0,c,u),g=m(I,d,h),b=p(M,c,u),v=p(M+I,d,h);o=(f-b)/2,r=(g-v)/2,s=-(f+b)/2,i=-(g+v)/2}return{ratioX:o,ratioY:r,offsetX:s,offsetY:i}}(h,u,a),v=(n.width-s)/m,y=(n.height-s)/p,x=Math.max(Math.min(v,y)/2,0),w=g(this.options.radius,x),C=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*w,this.offsetY=b*w,o.total=this.calculateTotal(),this.outerRadius=w-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*d,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,o=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===o._parsed[e]||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*r/N)}updateElements(e,t,n,o){const r="reset"===o,s=this.chart,i=s.chartArea,a=s.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=r&&a.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,m=this.resolveDataElementOptions(t,o),p=this.getSharedOptions(m),f=this.includeOptions(o,p);let g,b=this._getRotation();for(g=0;g<t;++g)b+=this._circumference(g,r);for(g=t;g<t+n;++g){const t=this._circumference(g,r),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:b,endAngle:b+t,circumference:t,outerRadius:h,innerRadius:u};f&&(s.options=p||this.resolveDataElementOptions(g,n.active?"active":o)),b+=t,this.updateElement(n,g,s,o)}this.updateSharedOptions(p,o,m)}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,o=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(o+=Math.abs(r))}return o}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?N*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,o=n.data.labels||[],r=an(t._parsed[e],n.options.locale);return{label:o[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let o,r,s,i,a;if(!e)for(o=0,r=n.data.datasets.length;o<r;++o)if(n.isDatasetVisible(o)){s=n.getDatasetMeta(o),e=s.data,i=s.controller;break}if(!e)return 0;for(o=0,r=e.length;o<r;++o)a=i.resolveDataElementOptions(o),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,o=e.length;n<o;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(f(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}qn.id="doughnut",qn.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},qn.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},qn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,o)=>{const r=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const n=": "+e.formattedValue;return u(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class Kn extends Ln{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:o=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:i,count:a}=function(e,t,n){const o=t.length;let r=0,s=o;if(e._sorted){const{iScale:i,_parsed:a}=e,l=i.axis,{min:c,max:d,minDefined:u,maxDefined:h}=i.getUserBounds();u&&(r=ee(Math.min(vt(a,i.axis,c).lo,n?o:vt(t,l,i.getPixelForValue(c)).lo),0,o-1)),s=h?ee(Math.max(vt(a,i.axis,d).hi+1,n?0:vt(t,l,i.getPixelForValue(d)).hi+1),r,o)-r:o-r}return{start:r,count:s}}(t,o,s);this._drawStart=i,this._drawCount=a,function(e){const{xScale:t,yScale:n,_scaleRanges:o}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!o)return e._scaleRanges=r,!0;const s=o.xmin!==t.min||o.xmax!==t.max||o.ymin!==n.min||o.ymax!==n.max;return Object.assign(o,r),s}(t)&&(i=0,a=o.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=o;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(o,i,a,e)}updateElements(e,t,n,o){const r="reset"===o,{iScale:s,vScale:i,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,o),u=this.getSharedOptions(c),h=this.includeOptions(o,u),m=s.axis,p=i.axis,{spanGaps:f,segment:g}=this.options,b=$(f)?f:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===o;let y=t>0&&this.getParsed(t-1);for(let c=t;c<t+n;++c){const t=e[c],n=this.getParsed(c),f=v?t:{},x=d(n[p]),w=f[m]=s.getPixelForValue(n[m],c),C=f[p]=r||x?i.getBasePixel():i.getPixelForValue(a?this.applyStack(i,n,a):n[p],c);f.skip=isNaN(w)||isNaN(C)||x,f.stop=c>0&&Math.abs(n[m]-y[m])>b,g&&(f.parsed=n,f.raw=l.data[c]),h&&(f.options=u||this.resolveDataElementOptions(c,t.active?"active":o)),v||this.updateElement(t,c,f,o),y=n}this.updateSharedOptions(u,o,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,o=e.data||[];if(!o.length)return n;const r=o[0].size(this.resolveDataElementOptions(0)),s=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Kn.id="line",Kn.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Kn.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Gn extends Ln{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,o=n.data.labels||[],r=an(t._parsed[e].r,n.options.locale);return{label:o[e]||"",value:r}}parseObjectData(e,t,n,o){return Bt.bind(this)(e,t,n,o)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const o=this.getParsed(n).r;!isNaN(o)&&this.chart.getDataVisibility(n)&&(o<t.min&&(t.min=o),o>t.max&&(t.max=o))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,o=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(o/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,o){const r="reset"===o,s=this.chart,i=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,d=a.getIndexAngle(0)-.5*M;let u,h=d;const m=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,o,m);for(u=t;u<t+n;u++){const t=e[u];let n=h,p=h+this._computeAngle(u,o,m),f=s.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=p,r&&(i.animateScale&&(f=0),i.animateRotate&&(n=p=d));const g={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(u,t.active?"active":o)};this.updateElement(t,u,g,o)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?q(this.resolveDataElementOptions(e,t).angle||n):0}}Gn.id="polarArea",Gn.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Gn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,o)=>{const r=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Yn extends qn{}Yn.id="pie",Yn.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Xn extends Ln{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,o){return Bt.bind(this)(e,t,n,o)}update(e){const t=this._cachedMeta,n=t.dataset,o=t.data||[],r=t.iScale.getLabels();if(n.points=o,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===o.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(o,0,o.length,e)}updateElements(e,t,n,o){const r=this._cachedMeta.rScale,s="reset"===o;for(let i=t;i<t+n;i++){const t=e[i],n=this.resolveDataElementOptions(i,t.active?"active":o),a=r.getPointPositionForValue(i,this.getParsed(i).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,d={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,i,d,o)}}}Xn.id="radar",Xn.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Xn.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Jn extends Kn{}Jn.id="scatter",Jn.defaults={showLine:!1,fill:!1},Jn.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Qn=Object.freeze({__proto__:null,BarController:Un,BubbleController:Wn,DoughnutController:qn,LineController:Kn,PolarAreaController:Gn,PieController:Yn,RadarController:Xn,ScatterController:Jn});function Zn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class eo{constructor(e){this.options=e||{}}formats(){return Zn()}parse(e,t){return Zn()}format(e,t){return Zn()}add(e,t,n){return Zn()}diff(e,t,n){return Zn()}startOf(e,t,n){return Zn()}endOf(e,t){return Zn()}}eo.override=function(e){Object.assign(eo.prototype,e)};var to={_date:eo};function no(e,t,n,o){const{controller:r,data:s,_sorted:i}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&i&&s.length){const e=a._reversePixels?yt:vt;if(!o)return e(s,t,n);if(r._sharedOptions){const o=s[0],r="function"==typeof o.getRange&&o.getRange(t);if(r){const o=e(s,t,n-r),i=e(s,t,n+r);return{lo:o.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function oo(e,t,n,o,r){const s=e.getSortedVisibleDatasetMetas(),i=n[t];for(let e=0,n=s.length;e<n;++e){const{index:n,data:a}=s[e],{lo:l,hi:c}=no(s[e],t,i,r);for(let e=l;e<=c;++e){const t=a[e];t.skip||o(t,n,e)}}}function ro(e,t,n,o,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return oo(e,n,t,(function(n,i,a){(r||Ze(n,e.chartArea,0))&&n.inRange(t.x,t.y,o)&&s.push({element:n,datasetIndex:i,index:a})}),!0),s}function so(e,t,n,o,r,s){let i=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,o){const r=t?Math.abs(e.x-o.x):0,s=n?Math.abs(e.y-o.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return oo(e,n,t,(function(n,c,d){const u=n.inRange(t.x,t.y,r);if(o&&!u)return;const h=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(h))&&!u)return;const m=a(t,h);m<l?(i=[{element:n,datasetIndex:c,index:d}],l=m):m===l&&i.push({element:n,datasetIndex:c,index:d})})),i}function io(e,t,n,o,r,s){return s||e.isPointInArea(t)?"r"!==n||o?so(e,t,n,o,r,s):function(e,t,n,o){let r=[];return oo(e,n,t,(function(e,n,s){const{startAngle:i,endAngle:a}=e.getProps(["startAngle","endAngle"],o),{angle:l}=Y(e,{x:t.x,y:t.y});Z(l,i,a)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function ao(e,t,n,o,r){const s=[],i="x"===n?"inXRange":"inYRange";let a=!1;return oo(e,n,t,((e,o,l)=>{e[i](t[n],r)&&(s.push({element:e,datasetIndex:o,index:l}),a=a||e.inRange(t.x,t.y,r))})),o&&!a?[]:s}var lo={evaluateInteractionItems:oo,modes:{index(e,t,n,o){const r=Xt(t,e),s=n.axis||"x",i=n.includeInvisible||!1,a=n.intersect?ro(e,r,s,o,i):io(e,r,s,!1,o,i),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,o){const r=Xt(t,e),s=n.axis||"xy",i=n.includeInvisible||!1;let a=n.intersect?ro(e,r,s,o,i):io(e,r,s,!1,o,i);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,o)=>ro(e,Xt(t,e),n.axis||"xy",o,n.includeInvisible||!1),nearest(e,t,n,o){const r=Xt(t,e),s=n.axis||"xy",i=n.includeInvisible||!1;return io(e,r,s,n.intersect,o,i)},x:(e,t,n,o)=>ao(e,Xt(t,e),"x",n.intersect,o),y:(e,t,n,o)=>ao(e,Xt(t,e),"y",n.intersect,o)}};const co=["left","top","right","bottom"];function uo(e,t){return e.filter((e=>e.pos===t))}function ho(e,t){return e.filter((e=>-1===co.indexOf(e.pos)&&e.box.axis===t))}function mo(e,t){return e.sort(((e,n)=>{const o=t?n:e,r=t?e:n;return o.weight===r.weight?o.index-r.index:o.weight-r.weight}))}function po(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:o,stackWeight:r}=n;if(!e||!co.includes(o))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:o,hBoxMaxHeight:r}=t;let s,i,a;for(s=0,i=e.length;s<i;++s){a=e[s];const{fullSize:i}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*o:i&&t.availableWidth,a.height=r):(a.width=o,a.height=c?c*r:i&&t.availableHeight)}return n}function fo(e,t,n,o){return Math.max(e[n],t[n])+Math.max(e[o],t[o])}function go(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function bo(e,t,n,o){const{pos:r,box:s}=n,i=e.maxPadding;if(!h(r)){n.size&&(e[r]-=n.size);const t=o[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&go(i,s.getPadding());const a=Math.max(0,t.outerWidth-fo(i,e,"left","right")),l=Math.max(0,t.outerHeight-fo(i,e,"top","bottom")),c=a!==e.w,d=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function vo(e,t){const n=t.maxPadding;function o(e){const o={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{o[e]=Math.max(t[e],n[e])})),o}return o(e?["left","right"]:["top","bottom"])}function yo(e,t,n,o){const r=[];let s,i,a,l,c,d;for(s=0,i=e.length,c=0;s<i;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,vo(a.horizontal,t));const{same:i,other:u}=bo(t,n,a,o);c|=i&&r.length,d=d||u,l.fullSize||r.push(a)}return c&&yo(r,t,n,o)||d}function xo(e,t,n,o,r){e.top=n,e.left=t,e.right=t+o,e.bottom=n+r,e.width=o,e.height=r}function wo(e,t,n,o){const r=n.padding;let{x:s,y:i}=t;for(const a of e){const e=a.box,l=o[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const o=t.w*c,s=l.size||e.height;A(l.start)&&(i=l.start),e.fullSize?xo(e,r.left,i,n.outerWidth-r.right-r.left,s):xo(e,t.left+l.placed,i,o,s),l.start=i,l.placed+=o,i=e.bottom}else{const o=t.h*c,i=l.size||e.width;A(l.start)&&(s=l.start),e.fullSize?xo(e,s,r.top,i,n.outerHeight-r.bottom-r.top):xo(e,s,t.top+l.placed,i,o),l.start=s,l.placed+=o,s=e.right}}t.x=s,t.y=i}Ke.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Co={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,o){if(!e)return;const r=mt(e.options.layout.padding),s=Math.max(t-r.width,0),i=Math.max(n-r.height,0),a=function(e){const t=function(e){const t=[];let n,o,r,s,i,a;for(n=0,o=(e||[]).length;n<o;++n)r=e[n],({position:s,options:{stack:i,stackWeight:a=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:i&&s+i,stackWeight:a});return t}(e),n=mo(t.filter((e=>e.box.fullSize)),!0),o=mo(uo(t,"left"),!0),r=mo(uo(t,"right")),s=mo(uo(t,"top"),!0),i=mo(uo(t,"bottom")),a=ho(t,"x"),l=ho(t,"y");return{fullSize:n,leftAndTop:o.concat(s),rightAndBottom:r.concat(l).concat(i).concat(a),chartArea:uo(t,"chartArea"),vertical:o.concat(r).concat(l),horizontal:s.concat(i).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;v(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const d=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:i,vBoxMaxWidth:s/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},r);go(h,mt(o));const m=Object.assign({maxPadding:h,w:s,h:i,x:r.left,y:r.top},r),p=po(l.concat(c),u);yo(a.fullSize,m,u,p),yo(l,m,u,p),yo(c,m,u,p)&&yo(l,m,u,p),function(e){const t=e.maxPadding;function n(n){const o=Math.max(t[n]-e[n],0);return e[n]+=o,o}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(m),wo(a.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,wo(a.rightAndBottom,m,u,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},v(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})}))}};class _o{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,o){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,o?Math.floor(t/o):n)}}isAttached(e){return!0}updateConfig(e){}}class So extends _o{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ko={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Eo=e=>null===e||""===e;const Oo=!!en&&{passive:!0};function To(e,t,n){e.canvas.removeEventListener(t,n,Oo)}function Ao(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Do(e,t,n){const o=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Ao(n.addedNodes,o),t=t&&!Ao(n.removedNodes,o);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Ro(e,t,n){const o=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Ao(n.removedNodes,o),t=t&&!Ao(n.addedNodes,o);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Mo=new Map;let No=0;function Po(){const e=window.devicePixelRatio;e!==No&&(No=e,Mo.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Lo(e,t,n){const o=e.canvas,r=o&&Wt(o);if(!r)return;const i=s(((e,t)=>{const o=r.clientWidth;n(e,t),o<r.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,o=t.contentRect.height;0===n&&0===o||i(n,o)}));return a.observe(r),function(e,t){Mo.size||window.addEventListener("resize",Po),Mo.set(e,t)}(e,i),a}function Bo(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Mo.delete(e),Mo.size||window.removeEventListener("resize",Po)}(e)}function Io(e,t,n){const o=e.canvas,r=s((t=>{null!==e.ctx&&n(function(e,t){const n=ko[e.type]||e.type,{x:o,y:r}=Xt(e,t);return{type:n,chart:t,native:e,x:void 0!==o?o:null,y:void 0!==r?r:null}}(t,e))}),e,(e=>{const t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,n){e.addEventListener(t,n,Oo)}(o,t,r),r}class Fo extends _o{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,o=e.getAttribute("height"),r=e.getAttribute("width");if(e.$chartjs={initial:{height:o,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Eo(r)){const t=tn(e,"width");void 0!==t&&(e.width=t)}if(Eo(o))if(""===e.style.height)e.height=e.width/(t||2);else{const t=tn(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t.$chartjs)return!1;const n=t.$chartjs.initial;["height","width"].forEach((e=>{const o=n[e];d(o)?t.removeAttribute(e):t.setAttribute(e,o)}));const o=n.style||{};return Object.keys(o).forEach((e=>{t.style[e]=o[e]})),t.width=t.width,delete t.$chartjs,!0}addEventListener(e,t,n){this.removeEventListener(e,t);const o=e.$proxies||(e.$proxies={}),r={attach:Do,detach:Ro,resize:Lo}[t]||Io;o[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),o=n[t];if(!o)return;({attach:Bo,detach:Bo,resize:Bo}[t]||To)(e,t,o),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,o){return Qt(e,t,n,o)}isAttached(e){const t=Wt(e);return!(!t||!t.isConnected)}}class zo{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return $(this.x)&&$(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const o={};return e.forEach((e=>{o[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),o}}zo.defaults={},zo.defaultRoutes=void 0;const jo={values:e=>u(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const o=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const i=j(Math.abs(s)),a=Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),an(e,o,l)},logarithmic(e,t,n){if(0===e)return"0";const o=e/Math.pow(10,Math.floor(j(e)));return 1===o||2===o||5===o?jo.numeric.call(this,e,t,n):""}};var Ho={formatters:jo};function Vo(e,t){const n=e.options.ticks,o=n.maxTicksLimit||function(e){const t=e.options.offset,n=e._tickSize(),o=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(o,r))}(e),r=n.major.enabled?function(e){const t=[];let n,o;for(n=0,o=e.length;n<o;n++)e[n].major&&t.push(n);return t}(t):[],s=r.length,i=r[0],a=r[s-1],l=[];if(s>o)return function(e,t,n,o){let r,s=0,i=n[0];for(o=Math.ceil(o),r=0;r<e.length;r++)r===i&&(t.push(e[r]),s++,i=n[s*o])}(t,l,r,s/o),l;const c=function(e,t,n){const o=function(e){const t=e.length;let n,o;if(t<2)return!1;for(o=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==o)return!1;return o}(e),r=t.length/n;if(!o)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let o;for(o=1;o<n;o++)e%o==0&&(t.push(o),t.push(e/o));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(o);for(let e=0,t=s.length-1;e<t;e++){const t=s[e];if(t>r)return t}return Math.max(r,1)}(r,t,o);if(s>0){let e,n;const o=s>1?Math.round((a-i)/(s-1)):null;for($o(t,l,c,d(o)?0:i-o,i),e=0,n=s-1;e<n;e++)$o(t,l,c,r[e],r[e+1]);return $o(t,l,c,a,d(o)?t.length:a+o),l}return $o(t,l,c),l}function $o(e,t,n,o,r){const s=f(o,0),i=Math.min(f(r,e.length),e.length);let a,l,c,d=0;for(n=Math.ceil(n),r&&(a=r-o,n=a/Math.floor(a/n)),c=s;c<0;)d++,c=Math.round(s+d*n);for(l=Math.max(s,0);l<i;l++)l===c&&(t.push(e[l]),d++,c=Math.round(s+d*n))}Ke.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ho.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Ke.route("scale.ticks","color","","color"),Ke.route("scale.grid","color","","borderColor"),Ke.route("scale.grid","borderColor","","borderColor"),Ke.route("scale.title","color","","color"),Ke.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),Ke.describe("scales",{_fallback:"scale"}),Ke.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e});const Uo=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n;function Wo(e,t){const n=[],o=e.length/t,r=e.length;let s=0;for(;s<r;s+=o)n.push(e[Math.floor(s)]);return n}function qo(e,t,n){const o=e.ticks.length,r=Math.min(t,o-1),s=e._startPixel,i=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===o?Math.max(c-s,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-a||c>i+a)))return c}function Ko(e){return e.drawTicks?e.tickLength:0}function Go(e,t){if(!e.display)return 0;const n=pt(e.font,t),o=mt(e.padding);return(u(e.text)?e.text.length:1)*n.lineHeight+o.height}function Yo(e,t,n){let o=i(e);return(n&&"right"!==t||!n&&"right"===t)&&(o=(e=>"left"===e?"right":"right"===e?"left":e)(o)),o}class Xo extends zo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:o}=this;return e=p(e,Number.POSITIVE_INFINITY),t=p(t,Number.NEGATIVE_INFINITY),n=p(n,Number.POSITIVE_INFINITY),o=p(o,Number.NEGATIVE_INFINITY),{min:p(e,n),max:p(t,o),minDefined:m(e),maxDefined:m(t)}}getMinMax(e){let t,{min:n,max:o,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:o};const i=this.getMatchingVisibleMetas();for(let a=0,l=i.length;a<l;++a)t=i[a].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(o=Math.max(o,t.max));return n=s&&n>o?o:n,o=r&&n>o?n:o,{min:p(n,p(o,n)),max:p(o,p(n,o))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){b(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:o,grace:r,ticks:s}=this.options,i=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:o,max:r}=e,s=g(t,(r-o)/2),i=(e,t)=>n&&0===e?0:e+t;return{min:i(o,-Math.abs(s)),max:i(r,s)}}(this,r,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=i<this.ticks.length;this._convertTicksToLabels(a?Wo(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Vo(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){b(this.options.afterUpdate,[this])}beforeSetDimensions(){b(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){b(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),b(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){b(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,o,r;for(n=0,o=e.length;n<o;n++)r=e[n],r.label=b(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){b(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){b(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=this.ticks.length,o=t.minRotation||0,r=t.maxRotation;let s,i,a,l=o;if(!this._isVisible()||!t.display||o>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=o);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=ee(this.chart.width-d,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),d+6>s&&(s=h/(n-(e.offset?.5:1)),i=this.maxHeight-Ko(e.grid)-t.padding-Go(e.title,this.chart.options.font),a=Math.sqrt(d*d+u*u),l=K(Math.min(Math.asin(ee((c.highest.height+6)/s,-1,1)),Math.asin(ee(i/a,-1,1))-Math.asin(ee(u/a,-1,1)))),l=Math.max(o,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){b(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){b(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:o,grid:r}}=this,s=this._isVisible(),i=this.isHorizontal();if(s){const s=Go(o,t.options.font);if(i?(e.width=this.maxWidth,e.height=Ko(r)+s):(e.height=this.maxHeight,e.width=Ko(r)+s),n.display&&this.ticks.length){const{first:t,last:o,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=q(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(i){const t=n.mirror?0:d*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*r.width+d*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,o,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,o){const{ticks:{align:r,padding:s},position:i}=this.options,a=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;a?l?(d=o*e.width,u=n*t.height):(d=n*e.height,u=o*t.width):"start"===r?u=t.width:"end"===r?d=e.width:"inner"!==r&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+s)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,o=e.height/2;"start"===r?(n=0,o=e.height):"end"===r&&(n=t.height,o=0),this.paddingTop=n+s,this.paddingBottom=o+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){b(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)d(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Wo(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,t){const{ctx:n,_longestTextCache:o}=this,r=[],s=[];let i,a,l,c,h,m,p,f,g,b,y,x=0,w=0;for(i=0;i<t;++i){if(c=e[i].label,h=this._resolveTickFontOptions(i),n.font=m=h.string,p=o[m]=o[m]||{data:{},gc:[]},f=h.lineHeight,g=b=0,d(c)||u(c)){if(u(c))for(a=0,l=c.length;a<l;++a)y=c[a],d(y)||u(y)||(g=Ge(n,p.data,p.gc,g,y),b+=f)}else g=Ge(n,p.data,p.gc,g,c),b=f;r.push(g),s.push(b),x=Math.max(g,x),w=Math.max(b,w)}!function(e,t){v(e,(e=>{const n=e.gc,o=n.length/2;let r;if(o>t){for(r=0;r<o;++r)delete e.data[n[r]];n.splice(0,o)}}))}(o,t);const C=r.indexOf(x),_=s.indexOf(w),S=e=>({width:r[e]||0,height:s[e]||0});return{first:S(0),last:S(t-1),widest:S(C),highest:S(_),widths:r,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return ee(this._alignToPixels?Xe(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return gt(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=gt(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=q(this.labelRotation),n=Math.abs(Math.cos(t)),o=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,i=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>i*o?i/n:a/o:a*o<i*n?a/n:i/o}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,o=this.options,{grid:r,position:s}=o,i=r.offset,a=this.isHorizontal(),l=this.ticks.length+(i?1:0),c=Ko(r),d=[],u=r.setContext(this.getContext()),m=u.drawBorder?u.borderWidth:0,p=m/2,g=function(e){return Xe(n,e,m)};let b,v,y,x,w,C,_,S,k,E,O,T;if("top"===s)b=g(this.bottom),C=this.bottom-c,S=b-p,E=g(e.top)+p,T=e.bottom;else if("bottom"===s)b=g(this.top),E=e.top,T=g(e.bottom)-p,C=b+p,S=this.top+c;else if("left"===s)b=g(this.right),w=this.right-c,_=b-p,k=g(e.left)+p,O=e.right;else if("right"===s)b=g(this.left),k=e.left,O=g(e.right)-p,w=b+p,_=this.left+c;else if("x"===t){if("center"===s)b=g((e.top+e.bottom)/2+.5);else if(h(s)){const e=Object.keys(s)[0],t=s[e];b=g(this.chart.scales[e].getPixelForValue(t))}E=e.top,T=e.bottom,C=b+p,S=C+c}else if("y"===t){if("center"===s)b=g((e.left+e.right)/2);else if(h(s)){const e=Object.keys(s)[0],t=s[e];b=g(this.chart.scales[e].getPixelForValue(t))}w=b-p,_=w-c,k=e.left,O=e.right}const A=f(o.ticks.maxTicksLimit,l),D=Math.max(1,Math.ceil(l/A));for(v=0;v<l;v+=D){const e=r.setContext(this.getContext(v)),t=e.lineWidth,o=e.color,s=r.borderDash||[],l=e.borderDashOffset,c=e.tickWidth,u=e.tickColor,h=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=qo(this,v,i),void 0!==y&&(x=Xe(n,y,t),a?w=_=k=O=x:C=S=E=T=x,d.push({tx1:w,ty1:C,tx2:_,ty2:S,x1:k,y1:E,x2:O,y2:T,width:t,color:o,borderDash:s,borderDashOffset:l,tickWidth:c,tickColor:u,tickBorderDash:h,tickBorderDashOffset:m}))}return this._ticksLength=l,this._borderValue=b,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:o,ticks:r}=n,s=this.isHorizontal(),i=this.ticks,{align:a,crossAlign:l,padding:c,mirror:d}=r,m=Ko(n.grid),p=m+c,f=d?-c:p,g=-q(this.labelRotation),b=[];let v,y,x,w,C,_,S,k,E,O,T,A,D="middle";if("top"===o)_=this.bottom-f,S=this._getXAxisLabelAlignment();else if("bottom"===o)_=this.top+f,S=this._getXAxisLabelAlignment();else if("left"===o){const e=this._getYAxisLabelAlignment(m);S=e.textAlign,C=e.x}else if("right"===o){const e=this._getYAxisLabelAlignment(m);S=e.textAlign,C=e.x}else if("x"===t){if("center"===o)_=(e.top+e.bottom)/2+p;else if(h(o)){const e=Object.keys(o)[0],t=o[e];_=this.chart.scales[e].getPixelForValue(t)+p}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===o)C=(e.left+e.right)/2-p;else if(h(o)){const e=Object.keys(o)[0],t=o[e];C=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(m).textAlign}"y"===t&&("start"===a?D="top":"end"===a&&(D="bottom"));const R=this._getLabelSizes();for(v=0,y=i.length;v<y;++v){x=i[v],w=x.label;const e=r.setContext(this.getContext(v));k=this.getPixelForTick(v)+r.labelOffset,E=this._resolveTickFontOptions(v),O=E.lineHeight,T=u(w)?w.length:1;const t=T/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h,m=S;if(s?(C=k,"inner"===S&&(m=v===y-1?this.options.reverse?"left":"right":0===v?this.options.reverse?"right":"left":"center"),A="top"===o?"near"===l||0!==g?-T*O+O/2:"center"===l?-R.highest.height/2-t*O+O:-R.highest.height+O/2:"near"===l||0!==g?O/2:"center"===l?R.highest.height/2-t*O:R.highest.height-T*O,d&&(A*=-1)):(_=k,A=(1-T)*O/2),e.showLabelBackdrop){const t=mt(e.backdropPadding),n=R.heights[v],o=R.widths[v];let r=_+A-t.top,s=C-t.left;switch(D){case"middle":r-=n/2;break;case"bottom":r-=n}switch(S){case"center":s-=o/2;break;case"right":s-=o}h={left:s,top:r,width:o+t.width,height:n+t.height,color:e.backdropColor}}b.push({rotation:g,label:w,font:E,color:n,strokeColor:a,strokeWidth:c,textOffset:A,textAlign:m,textBaseline:D,translation:[C,_],backdrop:h})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-q(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:o,padding:r}}=this.options,s=e+r,i=this._getLabelSizes().widest.width;let a,l;return"left"===t?o?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=i/2):(a="right",l+=i)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=i/2):(a="left",l=this.left)):"right"===t?o?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=i/2):(a="left",l-=i)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=i/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:o,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,o,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const i=(e,t,o)=>{o.width&&o.color&&(n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.setLineDash(o.borderDash||[]),n.lineDashOffset=o.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=o.length;r<s;++r){const e=o[r];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:n}}=this,o=n.setContext(this.getContext()),r=n.drawBorder?o.borderWidth:0;if(!r)return;const s=n.setContext(this.getContext(0)).lineWidth,i=this._borderValue;let a,l,c,d;this.isHorizontal()?(a=Xe(e,this.left,r)-r/2,l=Xe(e,this.right,s)+s/2,c=d=i):(c=Xe(e,this.top,r)-r/2,d=Xe(e,this.bottom,s)+s/2,a=l=i),t.save(),t.lineWidth=o.borderWidth,t.strokeStyle=o.borderColor,t.beginPath(),t.moveTo(a,c),t.lineTo(l,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&et(t,n);const o=this._labelItems||(this._labelItems=this._computeLabelItems(e));let r,s;for(r=0,s=o.length;r<s;++r){const e=o[r],n=e.font,s=e.label;e.backdrop&&(t.fillStyle=e.backdrop.color,t.fillRect(e.backdrop.left,e.backdrop.top,e.backdrop.width,e.backdrop.height)),rt(t,s,0,e.textOffset,n,e)}n&&tt(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:o}}=this;if(!n.display)return;const r=pt(n.font),s=mt(n.padding),i=n.align;let l=r.lineHeight/2;"bottom"===t||"center"===t||h(t)?(l+=s.bottom,u(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=s.top;const{titleX:c,titleY:d,maxWidth:m,rotation:p}=function(e,t,n,o){const{top:r,left:s,bottom:i,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let m,p,f,g=0;const b=i-r,v=l-s;if(e.isHorizontal()){if(p=a(o,s,l),h(n)){const e=Object.keys(n)[0],o=n[e];f=u[e].getPixelForValue(o)+b-t}else f="center"===n?(d.bottom+d.top)/2+b-t:Uo(e,n,t);m=l-s}else{if(h(n)){const e=Object.keys(n)[0],o=n[e];p=u[e].getPixelForValue(o)-v+t}else p="center"===n?(d.left+d.right)/2-v+t:Uo(e,n,t);f=a(o,i,r),g="left"===n?-I:I}return{titleX:p,titleY:f,maxWidth:m,rotation:g}}(this,l,t,i);rt(e,n.text,0,0,r,{color:n.color,maxWidth:m,rotation:p,textAlign:Yo(i,t,o),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=f(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===Xo.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",o=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||o.push(s)}return o}_resolveTickFontOptions(e){return pt(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Jo{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const o=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in o||(o[r]=e,function(e,t,n){const o=_(Object.create(null),[n?Ke.get(n):{},Ke.get(t),e.defaults]);Ke.set(t,o),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const o=n.split("."),r=o.pop(),s=[e].concat(o).join("."),i=t[n].split("."),a=i.pop(),l=i.join(".");Ke.route(s,r,l,a)}))}(t,e.defaultRoutes);e.descriptors&&Ke.describe(t,e.descriptors)}(e,s,n),this.override&&Ke.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,o=this.scope;n in t&&delete t[n],o&&n in Ke[o]&&(delete Ke[o][n],this.override&&delete $e[n])}}var Qo=new class{constructor(){this.controllers=new Jo(Ln,"datasets",!0),this.elements=new Jo(zo,"elements"),this.plugins=new Jo(Object,"plugins"),this.scales=new Jo(Xo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach((t=>{const o=n||this._getRegistryForType(t);n||o.isForType(t)||o===this.plugins&&t.id?this._exec(e,o,t):v(t,(t=>{const o=n||this._getRegistryForType(t);this._exec(e,o,t)}))}))}_exec(e,t,n){const o=T(e);b(n["before"+o],[],n),t[e](n),b(n["after"+o],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const o=t.get(e);if(void 0===o)throw new Error('"'+e+'" is not a registered '+n+".");return o}};class Zo{constructor(){this._init=[]}notify(e,t,n,o){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=o?this._descriptors(e).filter(o):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,o){o=o||{};for(const r of e){const e=r.plugin;if(!1===b(e[n],[t,o,r.options],e)&&o.cancelable)return!1}return!0}invalidate(){d(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,o=f(n.options&&n.options.plugins,{}),r=function(e){const t=[],n=Object.keys(Qo.plugins.items);for(let e=0;e<n.length;e++)t.push(Qo.getPlugin(n[e]));const o=e.plugins||[];for(let e=0;e<o.length;e++){const n=o[e];-1===t.indexOf(n)&&t.push(n)}return t}(n);return!1!==o||t?function(e,t,n,o){const r=[],s=e.getContext();for(let i=0;i<t.length;i++){const a=t[i],l=er(n[a.id],o);null!==l&&r.push({plugin:a,options:tr(e.config,a,l,s)})}return r}(e,r,o,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,o=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(o(t,n),e,"stop"),this._notify(o(n,t),e,"start")}}function er(e,t){return t||!1!==e?!0===e?{}:e:null}function tr(e,t,n,o){const r=e.pluginScopeKeys(t),s=e.getOptionScopes(n,r);return e.createResolver(s,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nr(e,t){const n=Ke.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function or(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.charAt(0).toLowerCase();var n}function rr(e){const t=e.options||(e.options={});t.plugins=f(t.plugins,{}),t.scales=function(e,t){const n=$e[e.type]||{scales:{}},o=t.scales||{},r=nr(e.type,t),s=Object.create(null),i=Object.create(null);return Object.keys(o).forEach((e=>{const t=o[e];if(!h(t))return console.error(`Invalid scale configuration for scale: ${e}`);if(t._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=or(e,t),l=function(e,t){return e===t?"_index_":"_value_"}(a,r),c=n.scales||{};s[a]=s[a]||e,i[e]=S(Object.create(null),[{axis:a},t,c[a],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,a=n.indexAxis||nr(r,t),l=($e[r]||{}).scales||{};Object.keys(l).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),r=n[t+"AxisID"]||s[t]||t;i[r]=i[r]||Object.create(null),S(i[r],[{axis:t},o[r],l[e]])}))})),Object.keys(i).forEach((e=>{const t=i[e];S(t,[Ke.scales[t.type],Ke.scale])})),i}(e,t)}function sr(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const ir=new Map,ar=new Set;function lr(e,t){let n=ir.get(e);return n||(n=t(),ir.set(e,n),ar.add(n)),n}const cr=(e,t,n)=>{const o=O(t,n);void 0!==o&&e.add(o)};class dr{constructor(e){this._config=function(e){return(e=e||{}).data=sr(e.data),rr(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=sr(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),rr(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return lr(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return lr(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return lr(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return lr(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let o=n.get(e);return o&&!t||(o=new Map,n.set(e,o)),o}getOptionScopes(e,t,n){const{options:o,type:r}=this,s=this._cachedScopes(e,n),i=s.get(t);if(i)return i;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>cr(a,e,t)))),t.forEach((e=>cr(a,o,e))),t.forEach((e=>cr(a,$e[r]||{},e))),t.forEach((e=>cr(a,Ke,e))),t.forEach((e=>cr(a,Ue,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),ar.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,$e[t]||{},Ke.datasets[t]||{},{type:t},Ke,Ue]}resolveNamedOptions(e,t,n,o=[""]){const r={$shared:!0},{resolver:s,subPrefixes:i}=ur(this._resolverCache,e,o);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:o}=kt(e);for(const r of t){const t=n(r),s=o(r),i=(s||t)&&e[r];if(t&&(D(i)||hr(i))||s&&u(i))return!0}return!1}(s,t)){r.$shared=!1;a=St(s,n=D(n)?n():n,this.createResolver(e,n,i))}for(const e of t)r[e]=a[e];return r}createResolver(e,t,n=[""],o){const{resolver:r}=ur(this._resolverCache,e,n);return h(t)?St(r,t,void 0,o):r}}function ur(e,t,n){let o=e.get(t);o||(o=new Map,e.set(t,o));const r=n.join();let s=o.get(r);if(!s){s={resolver:_t(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},o.set(r,s)}return s}const hr=e=>h(e)&&Object.getOwnPropertyNames(e).reduce(((t,n)=>t||D(e[n])),!1);const mr=["top","bottom","left","right","chartArea"];function pr(e,t){return"top"===e||"bottom"===e||-1===mr.indexOf(e)&&"x"===t}function fr(e,t){return function(n,o){return n[e]===o[e]?n[t]-o[t]:n[e]-o[e]}}function gr(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),b(n&&n.onComplete,[e],t)}function br(e){const t=e.chart,n=t.options.animation;b(n&&n.onProgress,[e],t)}function vr(e){return Ut()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const yr={},xr=e=>{const t=vr(e);return Object.values(yr).filter((e=>e.canvas===t)).pop()};function wr(e,t,n){const o=Object.keys(e);for(const r of o){const o=+r;if(o>=t){const s=e[r];delete e[r],(n>0||o>t)&&(e[o+n]=s)}}}class Cr{constructor(e,t){const n=this.config=new dr(t),o=vr(e),r=xr(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Ut()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?So:Fo}(o)),this.platform.updateConfig(n);const i=this.platform.acquireContext(o,s.aspectRatio),a=i&&i.canvas,l=a&&a.height,d=a&&a.width;this.id=c(),this.ctx=i,this.canvas=a,this.width=d,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Zo,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(...o){return t?(clearTimeout(n),n=setTimeout(e,t,o)):e.apply(this,o),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],yr[this.id]=this,i&&a?(vn.listen(this,"complete",gr),vn.listen(this,"progress",br),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:o,_aspectRatio:r}=this;return d(e)?t&&r?r:o?n/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Zt(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Je(this.canvas,this.ctx),this}stop(){return vn.stop(this),this}resize(e,t){vn.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,o=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(o,e,t,r),i=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Zt(this,i,!0)&&(this.notifyPlugins("resize",{size:s}),b(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){v(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,o=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],o=or(e,n),r="r"===o,s="x"===o;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),v(r,(t=>{const r=t.options,s=r.id,i=or(s,r),a=f(r.type,t.dtype);void 0!==r.position&&pr(r.position,i)===pr(t.dposition)||(r.position=t.dposition),o[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(Qo.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),v(o,((e,t)=>{e||delete n[t]})),v(n,(e=>{Co.configure(this,e,e.options),Co.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(fr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,o;for(this._removeUnreferencedMetasets(),n=0,o=t.length;n<o;n++){const o=t[n];let r=this.getDatasetMeta(n);const s=o.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=o.indexAxis||nr(s,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=Qo.getController(s),{datasetElementType:o,dataElementType:i}=Ke.datasets[s];Object.assign(t.prototype,{dataElementType:Qo.getElement(i),datasetElementType:o&&Qo.getElement(o)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){v(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let e=0,t=this.data.datasets.length;e<t;e++){const{controller:t}=this.getDatasetMeta(e),n=!o&&-1===r.indexOf(t);t.buildOrUpdateElements(n),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),o||v(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(fr("z","_idx"));const{_active:i,_lastEvent:a}=this;a?this._eventHandler(a,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){v(this.scales,(e=>{Co.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);R(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:o,count:r}of t){wr(e,o,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),o=n(0);for(let e=1;e<t;e++)if(!R(o,n(e)))return;return Array.from(o).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Co.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],v(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,D(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),o={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",o)&&(n.controller._update(t),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(vn.has(this)?this.attached&&!vn.running(this)&&vn.start(this):(this.draw(),gr({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let o,r;for(o=0,r=t.length;o<r;++o){const r=t[o];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,o=!n.disabled,r=this.chartArea,s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(o&&et(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),o&&tt(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Ze(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,o){const r=lo.modes[t];return"function"==typeof r?r(this,e,n,o):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let o=n.filter((e=>e&&e._dataset===t)).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(o)),o}getContext(){return this.$context||(this.$context=gt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"==typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const o=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,o);A(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?o:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),vn.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Je(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete yr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,o)=>{t.addEventListener(this,n,o),e[n]=o},o=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};v(this.options.events,(e=>n(e,o)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,o)=>{t.addEventListener(this,n,o),e[n]=o},o=(n,o)=>{e[n]&&(t.removeEventListener(this,n,o),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const i=()=>{o("attach",i),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,o("resize",r),this._stop(),this._resize(0,0),n("attach",i)},t.isAttached(this.canvas)?i():s()}unbindEvents(){v(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},v(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const o=n?"set":"remove";let r,s,i,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+o+"DatasetHoverStyle"]()),i=0,a=e.length;i<a;++i){s=e[i];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[o+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((({datasetIndex:e,index:t})=>{const n=this.getDatasetMeta(e);if(!n)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:n.data[t],index:t}}));!y(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}_updateHoverStyles(e,t,n){const o=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),i=n?e:r(e,t);s.length&&this.updateHoverStyle(s,o.mode,!1),i.length&&o.mode&&this.updateHoverStyle(i,o.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},o=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,o))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,o),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:o=[],options:r}=this,s=t,i=this._getActiveElements(e,o,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,o){return n&&"mouseout"!==e.type?o?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,b(r.onHover,[e,i,this],this),a&&b(r.onClick,[e,i,this],this));const c=!y(i,o);return(c||t)&&(this._active=i,this._updateHoverStyles(i,o,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,o){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,o)}}const _r=()=>v(Cr.instances,(e=>e._plugins.invalidate())),Sr=!0;function kr(e,t,n){const{startAngle:o,pixelMargin:r,x:s,y:i,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(s,i,a,o-c,n+c),l>r?(c=r/l,e.arc(s,i,l,n+c,o-c,!0)):e.arc(s,i,r,n+I,o-I),e.closePath(),e.clip()}function Er(e,t,n,o){const r=dt(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,i=Math.min(s,o*t/2),a=e=>{const t=(n-Math.min(s,e))*o/2;return ee(e,0,Math.min(s,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ee(r.innerStart,0,i),innerEnd:ee(r.innerEnd,0,i)}}function Or(e,t,n,o){return{x:n+e*Math.cos(t),y:o+e*Math.sin(t)}}function Tr(e,t,n,o,r){const{x:s,y:i,startAngle:a,pixelMargin:l,innerRadius:c}=t,d=Math.max(t.outerRadius+o+n-l,0),u=c>0?c+o+n+l:0;let h=0;const m=r-a;if(o){const e=((c>0?c-o:0)+(d>0?d-o:0))/2;h=(m-(0!==e?m*e/(e+o):m))/2}const p=(m-Math.max(.001,m*d-n/M)/d)/2,f=a+p+h,g=r-p-h,{outerStart:b,outerEnd:v,innerStart:y,innerEnd:x}=Er(t,u,d,g-f),w=d-b,C=d-v,_=f+b/w,S=g-v/C,k=u+y,E=u+x,O=f+y/k,T=g-x/E;if(e.beginPath(),e.arc(s,i,d,_,S),v>0){const t=Or(C,S,s,i);e.arc(t.x,t.y,v,S,g+I)}const A=Or(E,g,s,i);if(e.lineTo(A.x,A.y),x>0){const t=Or(E,T,s,i);e.arc(t.x,t.y,x,g+I,T+Math.PI)}if(e.arc(s,i,u,g-x/u,f+y/u,!0),y>0){const t=Or(k,O,s,i);e.arc(t.x,t.y,y,O+Math.PI,f-I)}const D=Or(w,f,s,i);if(e.lineTo(D.x,D.y),b>0){const t=Or(w,_,s,i);e.arc(t.x,t.y,b,f-I,_)}e.closePath()}function Ar(e,t,n,o,r){const{options:s}=t,{borderWidth:i,borderJoinStyle:a}=s,l="inner"===s.borderAlign;i&&(l?(e.lineWidth=2*i,e.lineJoin=a||"round"):(e.lineWidth=i,e.lineJoin=a||"bevel"),t.fullCircles&&function(e,t,n){const{x:o,y:r,startAngle:s,pixelMargin:i,fullCircles:a}=t,l=Math.max(t.outerRadius-i,0),c=t.innerRadius+i;let d;for(n&&kr(e,t,s+N),e.beginPath(),e.arc(o,r,c,s+N,s,!0),d=0;d<a;++d)e.stroke();for(e.beginPath(),e.arc(o,r,l,s,s+N),d=0;d<a;++d)e.stroke()}(e,t,l),l&&kr(e,t,r),Tr(e,t,n,o,r),e.stroke())}Object.defineProperties(Cr,{defaults:{enumerable:Sr,value:Ke},instances:{enumerable:Sr,value:yr},overrides:{enumerable:Sr,value:$e},registry:{enumerable:Sr,value:Qo},version:{enumerable:Sr,value:"3.8.0"},getChart:{enumerable:Sr,value:xr},register:{enumerable:Sr,value:(...e)=>{Qo.add(...e),_r()}},unregister:{enumerable:Sr,value:(...e)=>{Qo.remove(...e),_r()}}});class Dr extends zo{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const o=this.getProps(["x","y"],n),{angle:r,distance:s}=Y(o,{x:e,y:t}),{startAngle:i,endAngle:a,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=this.options.spacing/2,h=f(d,a-i)>=N||Z(r,i,a),m=te(s,l+u,c+u);return h&&m}getCenterPoint(e){const{x:t,y:n,startAngle:o,endAngle:r,innerRadius:s,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:a,spacing:l}=this.options,c=(o+r)/2,d=(s+i+l+a)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,o=(t.offset||0)/2,r=(t.spacing||0)/2;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>N?Math.floor(n/N):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();let s=0;if(o){s=o/2;const t=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(t)*s,Math.sin(t)*s),this.circumference>=M&&(s=o)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const i=function(e,t,n,o){const{fullCircles:r,startAngle:s,circumference:i}=t;let a=t.endAngle;if(r){Tr(e,t,n,o,s+N);for(let t=0;t<r;++t)e.fill();isNaN(i)||(a=s+i%N,i%N==0&&(a+=N))}return Tr(e,t,n,o,a),e.fill(),a}(e,this,s,r);Ar(e,this,s,r,i),e.restore()}}function Rr(e,t,n=t){e.lineCap=f(n.borderCapStyle,t.borderCapStyle),e.setLineDash(f(n.borderDash,t.borderDash)),e.lineDashOffset=f(n.borderDashOffset,t.borderDashOffset),e.lineJoin=f(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=f(n.borderWidth,t.borderWidth),e.strokeStyle=f(n.borderColor,t.borderColor)}function Mr(e,t,n){e.lineTo(n.x,n.y)}function Nr(e,t,n={}){const o=e.length,{start:r=0,end:s=o-1}=n,{start:i,end:a}=t,l=Math.max(r,i),c=Math.min(s,a),d=r<i&&s<i||r>a&&s>a;return{count:o,start:l,loop:t.loop,ilen:c<l&&!d?o+c-l:c-l}}function Pr(e,t,n,o){const{points:r,options:s}=t,{count:i,start:a,loop:l,ilen:c}=Nr(r,n,o),d=function(e){return e.stepped?nt:e.tension||"monotone"===e.cubicInterpolationMode?ot:Mr}(s);let u,h,m,{move:p=!0,reverse:f}=o||{};for(u=0;u<=c;++u)h=r[(a+(f?c-u:u))%i],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,m,h,f,s.stepped),m=h);return l&&(h=r[(a+(f?c:0))%i],d(e,m,h,f,s.stepped)),!!l}function Lr(e,t,n,o){const r=t.points,{count:s,start:i,ilen:a}=Nr(r,n,o),{move:l=!0,reverse:c}=o||{};let d,u,h,m,p,f,g=0,b=0;const v=e=>(i+(c?a-e:e))%s,y=()=>{m!==p&&(e.lineTo(g,p),e.lineTo(g,m),e.lineTo(g,f))};for(l&&(u=r[v(0)],e.moveTo(u.x,u.y)),d=0;d<=a;++d){if(u=r[v(d)],u.skip)continue;const t=u.x,n=u.y,o=0|t;o===h?(n<m?m=n:n>p&&(p=n),g=(b*g+t)/++b):(y(),e.lineTo(t,n),h=o,b=0,m=p=n),f=n}y()}function Br(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!(e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||n)?Lr:Pr}Dr.id="arc",Dr.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Dr.defaultRoutes={backgroundColor:"backgroundColor"};const Ir="function"==typeof Path2D;function Fr(e,t,n,o){Ir&&!t.options.segment?function(e,t,n,o){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,o)&&r.closePath()),Rr(e,t.options),e.stroke(r)}(e,t,n,o):function(e,t,n,o){const{segments:r,options:s}=t,i=Br(t);for(const a of r)Rr(e,s,a.style),e.beginPath(),i(e,t,a,{start:n,end:n+o-1})&&e.closePath(),e.stroke()}(e,t,n,o)}class zr extends zo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const o=n.spanGaps?this._loop:this._fullLoop;$t(this._points,n,e,o,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,o=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:i,end:a}=function(e,t,n,o){let r=0,s=t-1;if(n&&!o)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,o);return fn(e,!0===o?[{start:i,end:a,loop:s}]:function(e,t,n,o){const r=e.length,s=[];let i,a=t,l=e[t];for(i=t+1;i<=n;++i){const n=e[i%r];n.skip||n.stop?l.skip||(o=!1,s.push({start:t%r,end:(i-1)%r,loop:o}),t=a=n.stop?i:null):(a=i,l.skip&&(t=i)),l=n}return null!==a&&s.push({start:t%r,end:a%r,loop:o}),s}(n,i,a<i?a+r:a,!!e._fullLoop&&0===i&&a===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,o=e[t],r=this.points,s=pn(this,{property:t,start:o,end:o});if(!s.length)return;const i=[],a=function(e){return e.stepped?on:e.tension||"monotone"===e.cubicInterpolationMode?rn:nn}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:d}=s[l],u=r[c],h=r[d];if(u===h){i.push(u);continue}const m=a(u,h,Math.abs((o-u[t])/(h[t]-u[t])),n.stepped);m[t]=e[t],i.push(m)}return 1===i.length?i[0]:i}pathSegment(e,t,n){return Br(this)(e,this,t,n)}path(e,t,n){const o=this.segments,r=Br(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const i of o)s&=r(e,this,i,{start:t,end:t+n-1});return!!s}draw(e,t,n,o){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Fr(e,this,n,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function jr(e,t,n,o){const r=e.options,{[n]:s}=e.getProps([n],o);return Math.abs(t-s)<r.radius+r.hitRadius}zr.id="line",zr.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},zr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},zr.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};class Hr extends zo{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const o=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,t){return jr(this,e,"x",t)}inYRange(e,t){return jr(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Ze(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Qe(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Vr(e,t){const{x:n,y:o,base:r,width:s,height:i}=e.getProps(["x","y","base","width","height"],t);let a,l,c,d,u;return e.horizontal?(u=i/2,a=Math.min(n,r),l=Math.max(n,r),c=o-u,d=o+u):(u=s/2,a=n-u,l=n+u,c=Math.min(o,r),d=Math.max(o,r)),{left:a,top:c,right:l,bottom:d}}function $r(e,t,n,o){return e?0:ee(t,n,o)}function Ur(e){const t=Vr(e),n=t.right-t.left,o=t.bottom-t.top,r=function(e,t,n){const o=e.options.borderWidth,r=e.borderSkipped,s=ut(o);return{t:$r(r.top,s.top,0,n),r:$r(r.right,s.right,0,t),b:$r(r.bottom,s.bottom,0,n),l:$r(r.left,s.left,0,t)}}(e,n/2,o/2),s=function(e,t,n){const{enableBorderRadius:o}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=ht(r),i=Math.min(t,n),a=e.borderSkipped,l=o||h(r);return{topLeft:$r(!l||a.top||a.left,s.topLeft,0,i),topRight:$r(!l||a.top||a.right,s.topRight,0,i),bottomLeft:$r(!l||a.bottom||a.left,s.bottomLeft,0,i),bottomRight:$r(!l||a.bottom||a.right,s.bottomRight,0,i)}}(e,n/2,o/2);return{outer:{x:t.left,y:t.top,w:n,h:o,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:o-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Wr(e,t,n,o){const r=null===t,s=null===n,i=e&&!(r&&s)&&Vr(e,o);return i&&(r||te(t,i.left,i.right))&&(s||te(n,i.top,i.bottom))}function qr(e,t){e.rect(t.x,t.y,t.w,t.h)}function Kr(e,t,n={}){const o=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-o,i=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+o,y:e.y+r,w:e.w+s,h:e.h+i,radius:e.radius}}Hr.id="point",Hr.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Hr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Gr extends zo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:o}}=this,{inner:r,outer:s}=Ur(this),i=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?it:qr;var a;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),i(e,Kr(s,t,r)),e.clip(),i(e,Kr(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),i(e,Kr(r,t)),e.fillStyle=o,e.fill(),e.restore()}inRange(e,t,n){return Wr(this,e,t,n)}inXRange(e,t){return Wr(this,e,null,t)}inYRange(e,t){return Wr(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:o,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+o)/2:t,y:r?n:(n+o)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Gr.id="bar",Gr.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Gr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Yr=Object.freeze({__proto__:null,ArcElement:Dr,LineElement:zr,PointElement:Hr,BarElement:Gr});function Xr(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function Jr(e){e.data.datasets.forEach((e=>{Xr(e)}))}var Qr={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void Jr(e);const o=e.width;e.data.datasets.forEach(((t,r)=>{const{_data:s,indexAxis:i}=t,a=e.getDatasetMeta(r),l=s||t.data;if("y"===ft([i,e.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=e.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:u,count:h}=function(e,t){const n=t.length;let o,r=0;const{iScale:s}=e,{min:i,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=ee(vt(t,s.axis,i).lo,0,n-1)),o=c?ee(vt(t,s.axis,a).hi+1,r,n)-r:n-r,{start:r,count:o}}(a,l);if(h<=(n.threshold||4*o))return void Xr(t);let m;switch(d(s)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":m=function(e,t,n,o,r){const s=r.samples||o;if(s>=n)return e.slice(t,t+n);const i=[],a=(n-2)/(s-2);let l=0;const c=t+n-1;let d,u,h,m,p,f=t;for(i[l++]=e[f],d=0;d<s-2;d++){let o,r=0,s=0;const c=Math.floor((d+1)*a)+1+t,g=Math.min(Math.floor((d+2)*a)+1,n)+t,b=g-c;for(o=c;o<g;o++)r+=e[o].x,s+=e[o].y;r/=b,s/=b;const v=Math.floor(d*a)+1+t,y=Math.min(Math.floor((d+1)*a)+1,n)+t,{x,y:w}=e[f];for(h=m=-1,o=v;o<y;o++)m=.5*Math.abs((x-r)*(e[o].y-w)-(x-e[o].x)*(s-w)),m>h&&(h=m,u=e[o],p=o);i[l++]=u,f=p}return i[l++]=e[c],i}(l,u,h,o,n);break;case"min-max":m=function(e,t,n,o){let r,s,i,a,l,c,u,h,m,p,f=0,g=0;const b=[],v=t+n-1,y=e[t].x,x=e[v].x-y;for(r=t;r<t+n;++r){s=e[r],i=(s.x-y)/x*o,a=s.y;const t=0|i;if(t===l)a<m?(m=a,c=r):a>p&&(p=a,u=r),f=(g*f+s.x)/++g;else{const n=r-1;if(!d(c)&&!d(u)){const t=Math.min(c,u),o=Math.max(c,u);t!==h&&t!==n&&b.push({...e[t],x:f}),o!==h&&o!==n&&b.push({...e[o],x:f})}r>0&&n!==h&&b.push(e[n]),b.push(s),l=t,g=0,m=p=a,c=u=h=r}}return b}(l,u,h,o);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}t._decimated=m}))},destroy(e){Jr(e)}};function Zr(e,t,n,o){if(o)return;let r=t[e],s=n[e];return"angle"===e&&(r=Q(r),s=Q(s)),{property:e,start:r,end:s}}function es(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function ts(e,t,n,o){return e&&t?o(e[n],t[n]):e?e[n]:t?t[n]:0}function ns(e,t){let n=[],o=!1;return u(e)?(o=!0,n=e):n=function(e,t){const{x:n=null,y:o=null}=e||{},r=t.points,s=[];return t.segments.forEach((({start:e,end:t})=>{t=es(e,t,r);const i=r[e],a=r[t];null!==o?(s.push({x:i.x,y:o}),s.push({x:a.x,y:o})):null!==n&&(s.push({x:n,y:i.y}),s.push({x:n,y:a.y}))})),s}(e,t),n.length?new zr({points:n,options:{tension:0},_loop:o,_fullLoop:o}):null}function os(e,t,n){let o=e[t].fill;const r=[t];let s;if(!n)return o;for(;!1!==o&&-1===r.indexOf(o);){if(!m(o))return o;if(s=e[o],!s)return!1;if(s.visible)return o;r.push(o),o=s.fill}return!1}function rs(e,t,n){const o=function(e){const t=e.options,n=t.fill;let o=f(n&&n.target,n);void 0===o&&(o=!!t.backgroundColor);if(!1===o||null===o)return!1;if(!0===o)return"origin";return o}(e);if(h(o))return!isNaN(o.value)&&o;let r=parseFloat(o);return m(r)&&Math.floor(r)===r?function(e,t,n,o){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=o)return!1;return n}(o[0],t,r,n):["origin","start","end","stack","shape"].indexOf(o)>=0&&o}function ss(e,t,n){const o=[];for(let r=0;r<n.length;r++){const s=n[r],{first:i,last:a,point:l}=is(s,t,"x");if(!(!l||i&&a))if(i)o.unshift(l);else if(e.push(l),!a)break}e.push(...o)}function is(e,t,n){const o=e.interpolate(t,n);if(!o)return{};const r=o[n],s=e.segments,i=e.points;let a=!1,l=!1;for(let e=0;e<s.length;e++){const t=s[e],o=i[t.start][n],c=i[t.end][n];if(te(r,o,c)){a=r===o,l=r===c;break}}return{first:a,last:l,point:o}}class as{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:o,y:r,radius:s}=this;return t=t||{start:0,end:N},e.arc(o,r,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:o}=this,r=e.angle;return{x:t+Math.cos(r)*o,y:n+Math.sin(r)*o,angle:r}}}function ls(e){const{chart:t,fill:n,line:o}=e;if(m(n))return function(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:o}=e,r=[],s=o.segments,i=o.points,a=function(e,t){const n=[],o=e.getMatchingVisibleMetas("line");for(let e=0;e<o.length;e++){const r=o[e];if(r.index===t)break;r.hidden||n.unshift(r.dataset)}return n}(t,n);a.push(ns({x:null,y:t.bottom},o));for(let e=0;e<s.length;e++){const t=s[e];for(let e=t.start;e<=t.end;e++)ss(r,i[e],a)}return new zr({points:r,options:{}})}(e);if("shape"===n)return!0;const r=function(e){if((e.scale||{}).getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,o=t.options,r=t.getLabels().length,s=o.reverse?t.max:t.min,i=function(e,t,n){let o;return o="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:h(e)?e.value:t.getBaseValue(),o}(n,t,s),a=[];if(o.grid.circular){const e=t.getPointPositionForValue(0,s);return new as({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(i)})}for(let e=0;e<r;++e)a.push(t.getPointPositionForValue(e,i));return a}(e);return function(e){const{scale:t={},fill:n}=e,o=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:h(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(m(o)){const e=t.isHorizontal();return{x:e?o:null,y:e?null:o}}return null}(e)}(e);return r instanceof as?r:ns(r,o)}function cs(e,t,n){const o=ls(t),{line:r,scale:s,axis:i}=t,a=r.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:u=c}=l||{};o&&r.points.length&&(et(e,n),function(e,t){const{line:n,target:o,above:r,below:s,area:i,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),"x"===l&&s!==r&&(ds(e,o,i.top),us(e,{line:n,target:o,color:r,scale:a,property:l}),e.restore(),e.save(),ds(e,o,i.bottom));us(e,{line:n,target:o,color:s,scale:a,property:l}),e.restore()}(e,{line:r,target:o,above:d,below:u,area:n,scale:s,axis:i}),tt(e))}function ds(e,t,n){const{segments:o,points:r}=t;let s=!0,i=!1;e.beginPath();for(const a of o){const{start:o,end:l}=a,c=r[o],d=r[es(o,l,r)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,a,{move:i}),i?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function us(e,t){const{line:n,target:o,property:r,color:s,scale:i}=t,a=function(e,t,n){const o=e.segments,r=e.points,s=t.points,i=[];for(const e of o){let{start:o,end:a}=e;a=es(o,a,r);const l=Zr(n,r[o],r[a],e.loop);if(!t.segments){i.push({source:e,target:l,start:r[o],end:r[a]});continue}const c=pn(t,l);for(const t of c){const o=Zr(n,s[t.start],s[t.end],t.loop),a=mn(e,r,o);for(const e of a)i.push({source:e,target:t,start:{[n]:ts(l,o,"start",Math.max)},end:{[n]:ts(l,o,"end",Math.min)}})}}return i}(n,o,r);for(const{source:t,target:l,start:c,end:d}of a){const{style:{backgroundColor:a=s}={}}=t,u=!0!==o;e.save(),e.fillStyle=a,hs(e,i,u&&Zr(r,c,d)),e.beginPath();const h=!!n.pathSegment(e,t);let m;if(u){h?e.closePath():ms(e,o,d,r);const t=!!o.pathSegment(e,l,{move:h,reverse:!0});m=h&&t,m||ms(e,o,c,r)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function hs(e,t,n){const{top:o,bottom:r}=t.chart.chartArea,{property:s,start:i,end:a}=n||{};"x"===s&&(e.beginPath(),e.rect(i,o,a-i,r-o),e.clip())}function ms(e,t,n,o){const r=t.interpolate(n,o);r&&e.lineTo(r.x,r.y)}var ps={id:"filler",afterDatasetsUpdate(e,t,n){const o=(e.data.datasets||[]).length,r=[];let s,i,a,l;for(i=0;i<o;++i)s=e.getDatasetMeta(i),a=s.dataset,l=null,a&&a.options&&a instanceof zr&&(l={visible:e.isDatasetVisible(i),index:i,fill:rs(a,i,o),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(i=0;i<o;++i)l=r[i],l&&!1!==l.fill&&(l.fill=os(r,i,n.propagate))},beforeDraw(e,t,n){const o="beforeDraw"===n.drawTime,r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let t=r.length-1;t>=0;--t){const n=r[t].$filler;n&&(n.line.updateControlPoints(s,n.axis),o&&cs(e.ctx,n,s))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const o=e.getSortedVisibleDatasetMetas();for(let t=o.length-1;t>=0;--t){const n=o[t].$filler;n&&cs(e.ctx,n,e.chartArea)}},beforeDatasetDraw(e,t,n){const o=t.meta.$filler;o&&!1!==o.fill&&"beforeDatasetDraw"===n.drawTime&&cs(e.ctx,o,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const fs=(e,t)=>{let{boxHeight:n=t,boxWidth:o=t}=e;return e.usePointStyle&&(n=Math.min(n,t),o=Math.min(o,t)),{boxWidth:o,boxHeight:n,itemHeight:Math.max(t,n)}};class gs extends zo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=b(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,o=pt(n.font),r=o.size,s=this._computeTitleHeight(),{boxWidth:i,itemHeight:a}=fs(n,r);let l,c;t.font=o.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,i,a)+10):(c=this.maxHeight,l=this._fitCols(s,r,i,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,o){const{ctx:r,maxWidth:s,options:{labels:{padding:i}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=o+i;let d=e;r.textAlign="left",r.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach(((e,m)=>{const p=n+t/2+r.measureText(e.text).width;(0===m||l[l.length-1]+p+2*i>s)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),a[m]={left:0,top:h,row:u,width:p,height:o},l[l.length-1]+=p+i})),d}_fitCols(e,t,n,o){const{ctx:r,maxHeight:s,options:{labels:{padding:i}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let d=i,u=0,h=0,m=0,p=0;return this.legendItems.forEach(((e,s)=>{const f=n+t/2+r.measureText(e.text).width;s>0&&h+o+2*i>c&&(d+=u+i,l.push({width:u,height:h}),m+=u+i,p++,u=h=0),a[s]={left:m,top:h,col:p,width:f,height:o},u=Math.max(u,f),h+=o+i})),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:o},rtl:r}}=this,s=ln(r,this.left,this.width);if(this.isHorizontal()){let r=0,i=a(n,this.left+o,this.right-this.lineWidths[r]);for(const l of t)r!==l.row&&(r=l.row,i=a(n,this.left+o,this.right-this.lineWidths[r])),l.top+=this.top+e+o,l.left=s.leftForLtr(s.x(i),l.width),i+=l.width+o}else{let r=0,i=a(n,this.top+e+o,this.bottom-this.columnSizes[r].height);for(const l of t)l.col!==r&&(r=l.col,i=a(n,this.top+e+o,this.bottom-this.columnSizes[r].height)),l.top=i,l.left+=this.left+o,l.left=s.leftForLtr(s.x(l.left),l.width),i+=l.height+o}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;et(e,this),this._draw(),tt(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:o}=this,{align:r,labels:s}=e,i=Ke.color,l=ln(e.rtl,this.left,this.width),c=pt(s.font),{color:d,padding:u}=s,h=c.size,m=h/2;let p;this.drawTitle(),o.textAlign=l.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=c.string;const{boxWidth:g,boxHeight:b,itemHeight:v}=fs(s,h),y=this.isHorizontal(),x=this._computeTitleHeight();p=y?{x:a(r,this.left+u,this.right-n[0]),y:this.top+u+x,line:0}:{x:this.left+u,y:a(r,this.top+x+u,this.bottom-t[0].height),line:0},cn(this.ctx,e.textDirection);const w=v+u;this.legendItems.forEach(((C,_)=>{o.strokeStyle=C.fontColor||d,o.fillStyle=C.fontColor||d;const S=o.measureText(C.text).width,k=l.textAlign(C.textAlign||(C.textAlign=s.textAlign)),E=g+m+S;let O=p.x,T=p.y;l.setWidth(this.width),y?_>0&&O+E+u>this.right&&(T=p.y+=w,p.line++,O=p.x=a(r,this.left+u,this.right-n[p.line])):_>0&&T+w>this.bottom&&(O=p.x=O+t[p.line].width+u,p.line++,T=p.y=a(r,this.top+x+u,this.bottom-t[p.line].height));!function(e,t,n){if(isNaN(g)||g<=0||isNaN(b)||b<0)return;o.save();const r=f(n.lineWidth,1);if(o.fillStyle=f(n.fillStyle,i),o.lineCap=f(n.lineCap,"butt"),o.lineDashOffset=f(n.lineDashOffset,0),o.lineJoin=f(n.lineJoin,"miter"),o.lineWidth=r,o.strokeStyle=f(n.strokeStyle,i),o.setLineDash(f(n.lineDash,[])),s.usePointStyle){const s={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},i=l.xPlus(e,g/2);Qe(o,s,i,t+m)}else{const s=t+Math.max((h-b)/2,0),i=l.leftForLtr(e,g),a=ht(n.borderRadius);o.beginPath(),Object.values(a).some((e=>0!==e))?it(o,{x:i,y:s,w:g,h:b,radius:a}):o.rect(i,s,g,b),o.fill(),0!==r&&o.stroke()}o.restore()}(l.x(O),T,C),O=((e,t,n,o)=>e===(o?"left":"right")?n:"center"===e?(t+n)/2:t)(k,O+g+m,y?O+E:this.right,e.rtl),function(e,t,n){rt(o,n.text,e,t+v/2,c,{strikethrough:n.hidden,textAlign:l.textAlign(n.textAlign)})}(l.x(O),T,C),y?p.x+=E+u:p.y+=w})),dn(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=pt(t.font),o=mt(t.padding);if(!t.display)return;const r=ln(e.rtl,this.left,this.width),s=this.ctx,l=t.position,c=n.size/2,d=o.top+c;let u,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+d,h=a(e.align,h,this.right-m);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);u=d+a(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const p=a(l,h,h+m);s.textAlign=r.textAlign(i(l)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,rt(s,t.text,p,u,n)}_computeTitleHeight(){const e=this.options.title,t=pt(e.font),n=mt(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,o,r;if(te(e,this.left,this.right)&&te(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(o=r[n],te(e,o.left,o.left+o.width)&&te(t,o.top,o.top+o.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,i=(r=n,null!==(o=s)&&null!==r&&o.datasetIndex===r.datasetIndex&&o.index===r.index);s&&!i&&b(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!i&&b(t.onHover,[e,n,this],this)}else n&&b(t.onClick,[e,n,this],this);var o,r}}var bs={id:"legend",_element:gs,start(e,t,n){const o=e.legend=new gs({ctx:e.ctx,options:n,chart:e});Co.configure(e,o,n),Co.addBox(e,o)},stop(e){Co.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const o=e.legend;Co.configure(e,o,n),o.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const o=t.datasetIndex,r=n.chart;r.isDatasetVisible(o)?(r.hide(o),t.hidden=!0):(r.show(o),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:o,textAlign:r,color:s}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const i=e.controller.getStyle(n?0:void 0),a=mt(i.borderWidth);return{text:t[e.index].label,fillStyle:i.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:i.borderColor,pointStyle:o||i.pointStyle,rotation:i.rotation,textAlign:r||i.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class vs extends zo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const o=u(n.text)?n.text.length:1;this._padding=mt(n.padding);const r=o*pt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:o,right:r,options:s}=this,i=s.align;let l,c,d,u=0;return this.isHorizontal()?(c=a(i,n,r),d=t+e,l=r-n):("left"===s.position?(c=n+e,d=a(i,o,t),u=-.5*M):(c=r-e,d=a(i,t,o),u=.5*M),l=o-t),{titleX:c,titleY:d,maxWidth:l,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=pt(t.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:l}=this._drawArgs(o);rt(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:l,textAlign:i(t.align),textBaseline:"middle",translation:[r,s]})}}var ys={id:"title",_element:vs,start(e,t,n){!function(e,t){const n=new vs({ctx:e.ctx,options:t,chart:e});Co.configure(e,n,t),Co.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Co.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const o=e.titleBlock;Co.configure(e,o,n),o.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const xs=new WeakMap;var ws={id:"subtitle",start(e,t,n){const o=new vs({ctx:e.ctx,options:n,chart:e});Co.configure(e,o,n),Co.addBox(e,o),xs.set(e,o)},stop(e){Co.removeBox(e,xs.get(e)),xs.delete(e)},beforeUpdate(e,t,n){const o=xs.get(e);Co.configure(e,o,n),o.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cs={average(e){if(!e.length)return!1;let t,n,o=0,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();o+=e.x,r+=e.y,++s}}return{x:o/s,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,o,r,s=t.x,i=t.y,a=Number.POSITIVE_INFINITY;for(n=0,o=e.length;n<o;++n){const o=e[n].element;if(o&&o.hasValue()){const e=X(t,o.getCenterPoint());e<a&&(a=e,r=o)}}if(r){const e=r.tooltipPosition();s=e.x,i=e.y}return{x:s,y:i}}};function _s(e,t){return t&&(u(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ss(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function ks(e,t){const{element:n,datasetIndex:o,index:r}=t,s=e.getDatasetMeta(o).controller,{label:i,value:a}=s.getLabelAndValue(r);return{chart:e,label:i,parsed:s.getParsed(r),raw:e.data.datasets[o].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:o,element:n}}function Es(e,t){const n=e.chart.ctx,{body:o,footer:r,title:s}=e,{boxWidth:i,boxHeight:a}=t,l=pt(t.bodyFont),c=pt(t.titleFont),d=pt(t.footerFont),u=s.length,h=r.length,m=o.length,p=mt(t.padding);let f=p.height,g=0,b=o.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(b+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),b){f+=m*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-m)*l.lineHeight+(b-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const x=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,v(e.title,x),n.font=l.string,v(e.beforeBody.concat(e.afterBody),x),y=t.displayColors?i+2+t.boxPadding:0,v(o,(e=>{v(e.before,x),v(e.lines,x),v(e.after,x)})),y=0,n.font=d.string,v(e.footer,x),n.restore(),g+=p.width,{width:g,height:f}}function Os(e,t,n,o){const{x:r,width:s}=n,{width:i,chartArea:{left:a,right:l}}=e;let c="center";return"center"===o?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=i-s/2&&(c="right"),function(e,t,n,o){const{x:r,width:s}=o,i=n.caretSize+n.caretPadding;return"left"===e&&r+s+i>t.width||"right"===e&&r-s-i<0||void 0}(c,e,t,n)&&(c="center"),c}function Ts(e,t,n){const o=n.yAlign||t.yAlign||function(e,t){const{y:n,height:o}=t;return n<o/2?"top":n>e.height-o/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Os(e,t,n,o),yAlign:o}}function As(e,t,n,o){const{caretSize:r,caretPadding:s,cornerRadius:i}=e,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=ht(i);let p=function(e,t){let{x:n,width:o}=e;return"right"===t?n-=o:"center"===t&&(n-=o/2),n}(t,a);const f=function(e,t,n){let{y:o,height:r}=e;return"top"===t?o+=n:o-="bottom"===t?r+n:r/2,o}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(d,h)+r:"right"===a&&(p+=Math.max(u,m)+r),{x:ee(p,0,o.width-t.width),y:ee(f,0,o.height-t.height)}}function Ds(e,t,n){const o=mt(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-o.right:e.x+o.left}function Rs(e){return _s([],Ss(e))}function Ms(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class Ns extends zo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),o=n.enabled&&t.options.animation&&n.animations,r=new _n(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,gt(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,o=n.beforeTitle.apply(this,[e]),r=n.title.apply(this,[e]),s=n.afterTitle.apply(this,[e]);let i=[];return i=_s(i,Ss(o)),i=_s(i,Ss(r)),i=_s(i,Ss(s)),i}getBeforeBody(e,t){return Rs(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:n}=t,o=[];return v(e,(e=>{const t={before:[],lines:[],after:[]},r=Ms(n,e);_s(t.before,Ss(r.beforeLabel.call(this,e))),_s(t.lines,r.label.call(this,e)),_s(t.after,Ss(r.afterLabel.call(this,e))),o.push(t)})),o}getAfterBody(e,t){return Rs(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:n}=t,o=n.beforeFooter.apply(this,[e]),r=n.footer.apply(this,[e]),s=n.afterFooter.apply(this,[e]);let i=[];return i=_s(i,Ss(o)),i=_s(i,Ss(r)),i=_s(i,Ss(s)),i}_createItems(e){const t=this._active,n=this.chart.data,o=[],r=[],s=[];let i,a,l=[];for(i=0,a=t.length;i<a;++i)l.push(ks(this.chart,t[i]));return e.filter&&(l=l.filter(((t,o,r)=>e.filter(t,o,r,n)))),e.itemSort&&(l=l.sort(((t,o)=>e.itemSort(t,o,n)))),v(l,(t=>{const n=Ms(e.callbacks,t);o.push(n.labelColor.call(this,t)),r.push(n.labelPointStyle.call(this,t)),s.push(n.labelTextColor.call(this,t))})),this.labelColors=o,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),o=this._active;let r,s=[];if(o.length){const e=Cs[n.position].call(this,o,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=Es(this,n),i=Object.assign({},e,t),a=Ts(this.chart,n,i),l=As(n,i,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,o){const r=this.getCaretPosition(e,n,o);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:o,yAlign:r}=this,{caretSize:s,cornerRadius:i}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:d}=ht(i),{x:u,y:h}=e,{width:m,height:p}=t;let f,g,b,v,y,x;return"center"===r?(y=h+p/2,"left"===o?(f=u,g=f-s,v=y+s,x=y-s):(f=u+m,g=f+s,v=y-s,x=y+s),b=f):(g="left"===o?u+Math.max(a,c)+s:"right"===o?u+m-Math.max(l,d)-s:this.caretX,"top"===r?(v=h,y=v-s,f=g-s,b=g+s):(v=h+p,y=v+s,f=g+s,b=g-s),x=v),{x1:f,x2:g,x3:b,y1:v,y2:y,y3:x}}drawTitle(e,t,n){const o=this.title,r=o.length;let s,i,a;if(r){const l=ln(n.rtl,this.x,this.width);for(e.x=Ds(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=pt(n.titleFont),i=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<r;++a)t.fillText(o[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i,a+1===r&&(e.y+=n.titleMarginBottom-i)}}_drawColorBox(e,t,n,o,r){const s=this.labelColors[n],i=this.labelPointStyles[n],{boxHeight:a,boxWidth:l,boxPadding:c}=r,d=pt(r.bodyFont),u=Ds(this,"left",r),h=o.x(u),m=a<d.lineHeight?(d.lineHeight-a)/2:0,p=t.y+m;if(r.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},n=o.leftForLtr(h,l)+l/2,c=p+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Qe(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Qe(e,t,n,c)}else{e.lineWidth=s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=o.leftForLtr(h,l-c),n=o.leftForLtr(o.xPlus(h,1),l-c-2),i=ht(s.borderRadius);Object.values(i).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,it(e,{x:t,y:p,w:l,h:a,radius:i}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),it(e,{x:n,y:p+1,w:l-2,h:a-2,radius:i}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,p,l,a),e.strokeRect(t,p,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,p+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:o}=this,{bodySpacing:r,bodyAlign:s,displayColors:i,boxHeight:a,boxWidth:l,boxPadding:c}=n,d=pt(n.bodyFont);let u=d.lineHeight,h=0;const m=ln(n.rtl,this.x,this.width),p=function(n){t.fillText(n,m.x(e.x+h),e.y+u/2),e.y+=u+r},f=m.textAlign(s);let g,b,y,x,w,C,_;for(t.textAlign=s,t.textBaseline="middle",t.font=d.string,e.x=Ds(this,f,n),t.fillStyle=n.bodyColor,v(this.beforeBody,p),h=i&&"right"!==f?"center"===s?l/2+c:l+2+c:0,x=0,C=o.length;x<C;++x){for(g=o[x],b=this.labelTextColors[x],t.fillStyle=b,v(g.before,p),y=g.lines,i&&y.length&&(this._drawColorBox(t,e,x,m,n),u=Math.max(d.lineHeight,a)),w=0,_=y.length;w<_;++w)p(y[w]),u=d.lineHeight;v(g.after,p)}h=0,u=d.lineHeight,v(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const o=this.footer,r=o.length;let s,i;if(r){const a=ln(n.rtl,this.x,this.width);for(e.x=Ds(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=pt(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,i=0;i<r;++i)t.fillText(o[i],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,o){const{xAlign:r,yAlign:s}=this,{x:i,y:a}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=ht(o.cornerRadius);t.fillStyle=o.backgroundColor,t.strokeStyle=o.borderColor,t.lineWidth=o.borderWidth,t.beginPath(),t.moveTo(i+d,a),"top"===s&&this.drawCaret(e,t,n,o),t.lineTo(i+l-u,a),t.quadraticCurveTo(i+l,a,i+l,a+u),"center"===s&&"right"===r&&this.drawCaret(e,t,n,o),t.lineTo(i+l,a+c-m),t.quadraticCurveTo(i+l,a+c,i+l-m,a+c),"bottom"===s&&this.drawCaret(e,t,n,o),t.lineTo(i+h,a+c),t.quadraticCurveTo(i,a+c,i,a+c-h),"center"===s&&"left"===r&&this.drawCaret(e,t,n,o),t.lineTo(i,a+d),t.quadraticCurveTo(i,a,i+d,a),t.closePath(),t.fill(),o.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,o=n&&n.x,r=n&&n.y;if(o||r){const n=Cs[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Es(this,e),i=Object.assign({},n,this._size),a=Ts(t,e,i),l=As(e,i,a,t);o._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const o={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=mt(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,o,t),cn(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),dn(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,o=e.map((({datasetIndex:e,index:t})=>{const n=this.chart.getDatasetMeta(e);if(!n)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:n.data[t],index:t}})),r=!y(n,o),s=this._positionChanged(o,t);(r||s)&&(this._active=o,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),i=this._positionChanged(s,e),a=t||!y(s,r)||i;return a&&(this._active=s,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,o){const r=this.options;if("mouseout"===e.type)return[];if(!o)return t;const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:o,options:r}=this,s=Cs[r.position].call(this,e,t);return!1!==s&&(n!==s.x||o!==s.y)}}Ns.positioners=Cs;var Ps={id:"tooltip",_element:Ns,positioners:Cs,afterInit(e,t,n){n&&(e.tooltip=new Ns({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:l,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,o=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(o>0&&t.dataIndex<o)return n[t.dataIndex]}return""},afterTitle:l,beforeBody:l,beforeLabel:l,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return d(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:l,afterBody:l,beforeFooter:l,footer:l,afterFooter:l}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Ls=Object.freeze({__proto__:null,Decimation:Qr,Filler:ps,Legend:bs,SubTitle:ws,Title:ys,Tooltip:Ps});function Bs(e,t,n,o){const r=e.indexOf(t);if(-1===r)return((e,t,n,o)=>("string"==typeof t?(n=e.push(t)-1,o.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,o);return r!==e.lastIndexOf(t)?n:r}class Is extends Xo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:o}of t)e[n]===o&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(d(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:ee(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Bs(n,e,f(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:o}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(o=this.getLabels().length-1)),this.min=n,this.max=o}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,o=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=e;n<=t;n++)o.push({value:n});return o}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Fs(e,t){const n=[],{bounds:o,step:r,min:s,max:i,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,m=r||1,p=c-1,{min:f,max:g}=t,b=!d(s),v=!d(i),y=!d(l),x=(g-f)/(u+1);let w,C,_,S,k=V((g-f)/p/m)*m;if(k<1e-14&&!b&&!v)return[{value:f},{value:g}];S=Math.ceil(g/k)-Math.floor(f/k),S>p&&(k=V(S*k/p/m)*m),d(a)||(w=Math.pow(10,a),k=Math.ceil(k*w)/w),"ticks"===o?(C=Math.floor(f/k)*k,_=Math.ceil(g/k)*k):(C=f,_=g),b&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((i-s)/r,k/1e3)?(S=Math.round(Math.min((i-s)/k,c)),k=(i-s)/S,C=s,_=i):y?(C=b?s:C,_=v?i:_,S=l-1,k=(_-C)/S):(S=(_-C)/k,S=U(S,Math.round(S),k/1e3)?Math.round(S):Math.ceil(S));const E=Math.max(G(k),G(C));w=Math.pow(10,d(a)?E:a),C=Math.round(C*w)/w,_=Math.round(_*w)/w;let O=0;for(b&&(h&&C!==s?(n.push({value:s}),C<s&&O++,U(Math.round((C+O*k)*w)/w,s,zs(s,x,e))&&O++):C<s&&O++);O<S;++O)n.push({value:Math.round((C+O*k)*w)/w});return v&&h&&_!==i?n.length&&U(n[n.length-1].value,i,zs(i,x,e))?n[n.length-1].value=i:n.push({value:i}):v&&_!==i||n.push({value:_}),n}function zs(e,t,{horizontal:n,minRotation:o}){const r=q(o),s=(n?Math.sin(r):Math.cos(r))||.001,i=.75*t*(""+e).length;return Math.min(t/s,i)}Is.id="category",Is.defaults={ticks:{callback:Is.prototype.getLabelForValue}};class js extends Xo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return d(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:o,max:r}=this;const s=e=>o=t?o:e,i=e=>r=n?r:e;if(e){const e=H(o),t=H(r);e<0&&t<0?i(0):e>0&&t>0&&s(0)}if(o===r){let t=1;(r>=Number.MAX_SAFE_INTEGER||o<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*r)),i(r+t),e||s(o-t)}this.min=o,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:o}=e;return o?(t=Math.ceil(this.max/o)-Math.floor(this.min/o)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${o} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o=Fs({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&W(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const o=(n-t)/Math.max(e.length-1,1)/2;t-=o,n+=o}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return an(e,this.chart.options.locale,this.options.ticks.format)}}class Hs extends js{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=m(e)?e:0,this.max=m(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=q(this.options.ticks.minRotation),o=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/o))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function Vs(e){return 1===e/Math.pow(10,Math.floor(j(e)))}Hs.id="linear",Hs.defaults={ticks:{callback:Ho.formatters.numeric}};class $s extends Xo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=js.prototype.parse.apply(this,[e,t]);if(0!==n)return m(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=m(e)?Math.max(0,e):null,this.max=m(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,o=this.max;const r=t=>n=e?n:t,s=e=>o=t?o:e,i=(e,t)=>Math.pow(10,Math.floor(j(e))+t);n===o&&(n<=0?(r(1),s(10)):(r(i(n,-1)),s(i(o,1)))),n<=0&&r(i(o,-1)),o<=0&&s(i(n,1)),this._zero&&this.min!==this._suggestedMin&&n===i(this.min,0)&&r(i(n,-1)),this.min=n,this.max=o}buildTicks(){const e=this.options,t=function(e,t){const n=Math.floor(j(t.max)),o=Math.ceil(t.max/Math.pow(10,n)),r=[];let s=p(e.min,Math.pow(10,Math.floor(j(t.min)))),i=Math.floor(j(s)),a=Math.floor(s/Math.pow(10,i)),l=i<0?Math.pow(10,Math.abs(i)):1;do{r.push({value:s,major:Vs(s)}),++a,10===a&&(a=1,++i,l=i>=0?1:l),s=Math.round(a*Math.pow(10,i)*l)/l}while(i<n||i===n&&a<o);const c=p(e.max,s);return r.push({value:c,major:Vs(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&W(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":an(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=j(e),this._valueRange=j(this.max)-j(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(j(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Us(e){const t=e.ticks;if(t.display&&e.display){const e=mt(t.backdropPadding);return f(t.font&&t.font.size,Ke.font.size)+e.height}return 0}function Ws(e,t,n,o,r){return e===o||e===r?{start:t-n/2,end:t+n/2}:e<o||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function qs(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),o=[],r=[],s=e._pointLabels.length,i=e.options.pointLabels,a=i.centerPointLabels?M/s:0;for(let h=0;h<s;h++){const s=i.setContext(e.getPointLabelContext(h));r[h]=s.padding;const m=e.getPointPosition(h,e.drawingArea+r[h],a),p=pt(s.font),f=(l=e.ctx,c=p,d=u(d=e._pointLabels[h])?d:[d],{w:Ye(l,c.string,d),h:d.length*c.lineHeight});o[h]=f;const g=Q(e.getIndexAngle(h)+a),b=Math.round(K(g));Ks(n,t,g,Ws(b,m.x,f.w,0,180),Ws(b,m.y,f.h,90,270))}var l,c,d;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const o=[],r=e._pointLabels.length,s=e.options,i=Us(s)/2,a=e.drawingArea,l=s.pointLabels.centerPointLabels?M/r:0;for(let s=0;s<r;s++){const r=e.getPointPosition(s,a+i+n[s],l),c=Math.round(K(Q(r.angle+I))),d=t[s],u=Xs(r.y,d.h,c),h=Gs(c),m=Ys(r.x,d.w,h);o.push({x:r.x,y:u,textAlign:h,left:m,top:u,right:m+d.w,bottom:u+d.h})}return o}(e,o,r)}function Ks(e,t,n,o,r){const s=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));let a=0,l=0;o.start<t.l?(a=(t.l-o.start)/s,e.l=Math.min(e.l,t.l-a)):o.end>t.r&&(a=(o.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/i,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function Gs(e){return 0===e||180===e?"center":e<180?"left":"right"}function Ys(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function Xs(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function Js(e,t,n,o){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,N);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<o;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}$s.id="logarithmic",$s.defaults={ticks:{callback:Ho.formatters.logarithmic,major:{enabled:!0}}};class Qs extends js{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=mt(Us(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=m(e)&&!isNaN(e)?e:0,this.max=m(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Us(this.options))}generateTickLabels(e){js.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=b(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?qs(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,o){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,o))}getIndexAngle(e){return Q(e*(N/(this._pointLabels.length||1))+q(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(d(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(d(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return gt(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const o=this.getIndexAngle(e)-I+n;return{x:Math.cos(o)*t+this.xCenter,y:Math.sin(o)*t+this.yCenter,angle:o}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:o,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:o,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Js(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:o}=t,r=this._pointLabels.length;let s,i,a;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:o}}=e;for(let r=t-1;r>=0;r--){const t=o.setContext(e.getPointLabelContext(r)),s=pt(t.font),{x:i,y:a,textAlign:l,left:c,top:u,right:h,bottom:m}=e._pointLabelItems[r],{backdropColor:p}=t;if(!d(p)){const e=ht(t.borderRadius),o=mt(t.backdropPadding);n.fillStyle=p;const r=c-o.left,s=u-o.top,i=h-c+o.width,a=m-u+o.height;Object.values(e).some((e=>0!==e))?(n.beginPath(),it(n,{x:r,y:s,w:i,h:a,radius:e}),n.fill()):n.fillRect(r,s,i,a)}rt(n,e._pointLabels[r],i,a+s.lineHeight/2,s,{color:t.color,textAlign:l,textBaseline:"middle"})}}(this,r),o.display&&this.ticks.forEach(((e,t)=>{if(0!==t){i=this.getDistanceFromCenterForValue(e.value);!function(e,t,n,o){const r=e.ctx,s=t.circular,{color:i,lineWidth:a}=t;!s&&!o||!i||!a||n<0||(r.save(),r.strokeStyle=i,r.lineWidth=a,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),Js(e,n,s,o),r.closePath(),r.stroke(),r.restore())}(this,o.setContext(this.getContext(t-1)),i,r)}})),n.display){for(e.save(),s=r-1;s>=0;s--){const o=n.setContext(this.getPointLabelContext(s)),{color:r,lineWidth:l}=o;l&&r&&(e.lineWidth=l,e.strokeStyle=r,e.setLineDash(o.borderDash),e.lineDashOffset=o.borderDashOffset,i=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),a=this.getPointPosition(s,i),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(a.x,a.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const o=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(o),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((o,i)=>{if(0===i&&!t.reverse)return;const a=n.setContext(this.getContext(i)),l=pt(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[i].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(o.label).width,e.fillStyle=a.backdropColor;const t=mt(a.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}rt(e,o.label,0,-r,l,{color:a.color})})),e.restore()}drawTitle(){}}Qs.id="radialLinear",Qs.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ho.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}},Qs.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Qs.descriptors={angleLines:{_fallback:"grid"}};const Zs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ei=Object.keys(Zs);function ti(e,t){return e-t}function ni(e,t){if(d(t))return null;const n=e._adapter,{parser:o,round:r,isoWeekday:s}=e._parseOpts;let i=t;return"function"==typeof o&&(i=o(i)),m(i)||(i="string"==typeof o?n.parse(i,o):n.parse(i)),null===i?null:(r&&(i="week"!==r||!$(s)&&!0!==s?n.startOf(i,r):n.startOf(i,"isoWeek",s)),+i)}function oi(e,t,n,o){const r=ei.length;for(let s=ei.indexOf(e);s<r-1;++s){const e=Zs[ei[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=o)return ei[s]}return ei[r-1]}function ri(e,t,n){if(n){if(n.length){const{lo:o,hi:r}=bt(n,t);e[n[o]>=t?n[o]:n[r]]=!0}}else e[t]=!0}function si(e,t,n){const o=[],r={},s=t.length;let i,a;for(i=0;i<s;++i)a=t[i],r[a]=i,o.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,o){const r=e._adapter,s=+r.startOf(t[0].value,o),i=t[t.length-1].value;let a,l;for(a=s;a<=i;a=+r.add(a,1,o))l=n[a],l>=0&&(t[l].major=!0);return t}(e,o,r,n):o}class ii extends Xo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const n=e.time||(e.time={}),o=this._adapter=new to._date(e.adapters.date);S(n.displayFormats,o.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:ni(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:o,max:r,minDefined:s,maxDefined:i}=this.getUserBounds();function a(e){s||isNaN(e.min)||(o=Math.min(o,e.min)),i||isNaN(e.max)||(r=Math.max(r,e.max))}s&&i||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),o=m(o)&&!isNaN(o)?o:+t.startOf(Date.now(),n),r=m(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(o,r-1),this.max=Math.max(o+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,o="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const r=this.min,s=function(e,t,n){let o=0,r=e.length;for(;o<r&&e[o]<t;)o++;for(;r>o&&e[r-1]>n;)r--;return o>0||r<e.length?e.slice(o,r):e}(o,r,this.max);return this._unit=t.unit||(n.autoSkip?oi(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,o,r){for(let s=ei.length-1;s>=ei.indexOf(n);s--){const n=ei[s];if(Zs[n].common&&e._adapter.diff(r,o,n)>=t-1)return n}return ei[n?ei.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=ei.indexOf(e)+1,n=ei.length;t<n;++t)if(Zs[ei[t]].common)return ei[t]}(this._unit):void 0,this.initOffsets(o),e.reverse&&s.reverse(),si(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(e){let t,n,o=0,r=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),o=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),r=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;o=ee(o,0,s),r=ee(r,0,s),this._offsets={start:o,end:r,factor:1/(o+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,o=this.options,r=o.time,s=r.unit||oi(r.minUnit,t,n,this._getLabelCapacity(t)),i=f(r.stepSize,1),a="week"===s&&r.isoWeekday,l=$(a)||!0===a,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",a)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*i)throw new Error(t+" and "+n+" are too far apart with stepSize of "+i+" "+s);const m="data"===o.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,i,s),u++)ri(c,d,m);return d!==n&&"ticks"!==o.bounds&&1!==u||ri(c,d,m),Object.keys(c).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,t,n,o){const r=this.options,s=r.time.displayFormats,i=this._unit,a=this._majorUnit,l=i&&s[i],c=a&&s[a],d=n[t],u=a&&c&&d&&d.major,h=this._adapter.format(e,o||(u?c:l)),m=r.ticks.callback;return m?b(m,[h,t,n],this):h}generateTickLabels(e){let t,n,o;for(t=0,n=e.length;t<n;++t)o=e[t],o.label=this._tickFormatFunction(o.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,o=q(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(o),s=Math.sin(o),i=this._resolveTickFontOptions(0).size;return{w:n*r+i*s,h:n*s+i*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,o=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,si(this,[e],this._majorUnit),o),s=this._getLabelSize(r),i=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(e=0,t=o.length;e<t;++e)n=n.concat(o[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const o=this.getLabels();for(t=0,n=o.length;t<n;++t)e.push(ni(this,o[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Ct(e.sort(ti))}}function ai(e,t,n){let o,r,s,i,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=vt(e,"pos",t)),({pos:o,time:s}=e[a]),({pos:r,time:i}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=vt(e,"time",t)),({time:o,pos:s}=e[a]),({time:r,pos:i}=e[l]));const c=r-o;return c?s+(i-s)*(t-o)/c:s}ii.id="time",ii.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class li extends ii{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=ai(t,this.min),this._tableRange=ai(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,o=[],r=[];let s,i,a,l,c;for(s=0,i=e.length;s<i;++s)l=e[s],l>=t&&l<=n&&o.push(l);if(o.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,i=o.length;s<i;++s)c=o[s+1],a=o[s-1],l=o[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(i-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(ai(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return ai(this._table,n*this._tableRange+this._minPos,!0)}}li.id="timeseries",li.defaults=ii.defaults;const ci=[Qn,Yr,Ls,Object.freeze({__proto__:null,CategoryScale:Is,LinearScale:Hs,LogarithmicScale:$s,RadialLinearScale:Qs,TimeScale:ii,TimeSeriesScale:li})];Cr.register(...ci);const di=Cr;class ui extends o.Qr{connect(){if(!(this.element instanceof HTMLCanvasElement))throw new Error("Invalid element");const e=this.viewValue;Array.isArray(e.options)&&0===e.options.length&&(e.options={}),this._dispatchEvent("chartjs:pre-connect",{options:e.options});const t=this.element.getContext("2d");if(!t)throw new Error("Could not getContext() from Element");const n=new di(t,e);this._dispatchEvent("chartjs:connect",{chart:n})}_dispatchEvent(e,t){this.element.dispatchEvent(new CustomEvent(e,{detail:t}))}}ui.values={view:Object}},3307:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Se});var o=n(6599);!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const e=HTMLElement,t=function(){return Reflect.construct(e,[],this.constructor)};window.HTMLElement=t,HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}(),function(e){function t(e,t,n){throw new e("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+t+".",n)}"function"!=typeof e.requestSubmit&&(e.requestSubmit=function(e){e?(!function(e,n){e instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==e.type||t(TypeError,"The specified element is not a submit button"),e.form==n||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}(e,this),e.click()):((e=document.createElement("input")).type="submit",e.hidden=!0,this.appendChild(e),e.click(),this.removeChild(e))})}(HTMLFormElement.prototype);const r=new WeakMap;function s(e){const t=function(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null,n=t?t.closest("input, button"):null;return"submit"==(null==n?void 0:n.type)?n:null}(e.target);t&&t.form&&r.set(t.form,t)}var i,a,l,c,d,u;!function(){if("submitter"in Event.prototype)return;let e;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))e=window.SubmitEvent.prototype;else{if("SubmitEvent"in window)return;e=window.Event.prototype}addEventListener("click",s,!0),Object.defineProperty(e,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return r.get(this.target)}})}(),function(e){e.eager="eager",e.lazy="lazy"}(i||(i={}));class h extends HTMLElement{constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new h.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){const{src:e}=this;this.src=null,this.src=e}attributeChangedCallback(e){"loading"==e?this.delegate.loadingStyleChanged():"src"==e?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get loading(){return function(e){if("lazy"===e.toLowerCase())return i.lazy;return i.eager}(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var e,t;return null===(t=null===(e=this.ownerDocument)||void 0===e?void 0:e.documentElement)||void 0===t?void 0:t.hasAttribute("data-turbo-preview")}}function m(e){return new URL(e.toString(),document.baseURI)}function p(e){let t;return e.hash?e.hash.slice(1):(t=e.href.match(/#(.*)$/))?t[1]:void 0}function f(e,t){return m((null==t?void 0:t.getAttribute("formaction"))||e.getAttribute("action")||e.action)}function g(e){return(function(e){return function(e){return e.pathname.split("/").slice(1)}(e).slice(-1)[0]}(e).match(/\.[^.]*$/)||[])[0]||""}function b(e,t){const n=function(e){return t=e.origin+e.pathname,t.endsWith("/")?t:t+"/";var t}(t);return e.href===m(n).href||e.href.startsWith(n)}function v(e,t){return b(e,t)&&!!g(e).match(/^(?:|\.(?:htm|html|xhtml))$/)}function y(e){const t=p(e);return null!=t?e.href.slice(0,-(t.length+1)):e.href}function x(e){return y(e)}class w{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return m(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}}function C(e,{target:t,cancelable:n,detail:o}={}){const r=new CustomEvent(e,{cancelable:n,bubbles:!0,detail:o});return t&&t.isConnected?t.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function _(){return new Promise((e=>requestAnimationFrame((()=>e()))))}function S(e=""){return(new DOMParser).parseFromString(e,"text/html")}function k(e,...t){const n=function(e,t){return e.reduce(((e,n,o)=>e+n+(null==t[o]?"":t[o])),"")}(e,t).replace(/^\n/,"").split("\n"),o=n[0].match(/^\s+/),r=o?o[0].length:0;return n.map((e=>e.slice(r))).join("\n")}function E(){return Array.apply(null,{length:36}).map(((e,t)=>8==t||13==t||18==t||23==t?"-":14==t?"4":19==t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16))).join("")}function O(e,...t){for(const n of t.map((t=>null==t?void 0:t.getAttribute(e))))if("string"==typeof n)return n;return null}function T(...e){for(const t of e)"turbo-frame"==t.localName&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function A(...e){for(const t of e)"turbo-frame"==t.localName&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}!function(e){e[e.get=0]="get",e[e.post=1]="post",e[e.put=2]="put",e[e.patch=3]="patch",e[e.delete=4]="delete"}(a||(a={}));class D{constructor(e,t,n,o=new URLSearchParams,r=null){this.abortController=new AbortController,this.resolveRequestPromise=e=>{},this.delegate=e,this.method=t,this.headers=this.defaultHeaders,this.body=o,this.url=n,this.target=r}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){var e,t;const{fetchOptions:n}=this;null===(t=(e=this.delegate).prepareHeadersForRequest)||void 0===t||t.call(e,this.headers,this),await this.allowRequestToBeIntercepted(n);try{this.delegate.requestStarted(this);const e=await fetch(this.url.href,n);return await this.receive(e)}catch(e){if("AbortError"!==e.name)throw this.delegate.requestErrored(this,e),e}finally{this.delegate.requestFinished(this)}}async receive(e){const t=new w(e);return C("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get fetchOptions(){var e;return{method:a[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isIdempotent?null:this.body,signal:this.abortSignal,referrer:null===(e=this.delegate.referrer)||void 0===e?void 0:e.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isIdempotent(){return this.method==a.get}get abortSignal(){return this.abortController.signal}async allowRequestToBeIntercepted(e){const t=new Promise((e=>this.resolveRequestPromise=e));C("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await t}}class R{constructor(e,t){this.started=!1,this.intersect=e=>{const t=e.slice(-1)[0];(null==t?void 0:t.isIntersecting)&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class M{constructor(e){this.templateElement=document.createElement("template"),this.templateElement.innerHTML=e}static wrap(e){return"string"==typeof e?new this(e):e}get fragment(){const e=document.createDocumentFragment();for(const t of this.foreignElements)e.appendChild(document.importNode(t,!0));return e}get foreignElements(){return this.templateChildren.reduce(((e,t)=>"turbo-stream"==t.tagName.toLowerCase()?[...e,t]:e),[])}get templateChildren(){return Array.from(this.templateElement.content.children)}}M.contentType="text/vnd.turbo-stream.html",function(e){e[e.initialized=0]="initialized",e[e.requesting=1]="requesting",e[e.waiting=2]="waiting",e[e.receiving=3]="receiving",e[e.stopping=4]="stopping",e[e.stopped=5]="stopped"}(l||(l={})),function(e){e.urlEncoded="application/x-www-form-urlencoded",e.multipart="multipart/form-data",e.plain="text/plain"}(c||(c={}));class N{constructor(e,t,n,o=!1){this.state=l.initialized,this.delegate=e,this.formElement=t,this.submitter=n,this.formData=function(e,t){const n=new FormData(e),o=null==t?void 0:t.getAttribute("name"),r=null==t?void 0:t.getAttribute("value");o&&null!=r&&n.get(o)!=r&&n.append(o,r);return n}(t,n),this.location=m(this.action),this.method==a.get&&function(e,t){const n=new URLSearchParams;for(const[e,o]of t)o instanceof File||n.append(e,o);e.search=n.toString()}(this.location,[...this.body.entries()]),this.fetchRequest=new D(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=o}static confirmMethod(e,t){return confirm(e)}get method(){var e;return function(e){switch(e.toLowerCase()){case"get":return a.get;case"post":return a.post;case"put":return a.put;case"patch":return a.patch;case"delete":return a.delete}}(((null===(e=this.submitter)||void 0===e?void 0:e.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"").toLowerCase())||a.get}get action(){var e;const t="string"==typeof this.formElement.action?this.formElement.action:null;return(null===(e=this.submitter)||void 0===e?void 0:e.getAttribute("formaction"))||this.formElement.getAttribute("action")||t||""}get body(){return this.enctype==c.urlEncoded||this.method==a.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var e;return function(e){switch(e.toLowerCase()){case c.multipart:return c.multipart;case c.plain:return c.plain;default:return c.urlEncoded}}((null===(e=this.submitter)||void 0===e?void 0:e.getAttribute("formenctype"))||this.formElement.enctype)}get isIdempotent(){return this.fetchRequest.isIdempotent}get stringFormData(){return[...this.formData].reduce(((e,[t,n])=>e.concat("string"==typeof n?[[t,n]]:[])),[])}get confirmationMessage(){return this.formElement.getAttribute("data-turbo-confirm")}get needsConfirmation(){return null!==this.confirmationMessage}async start(){const{initialized:e,requesting:t}=l;if(this.needsConfirmation){if(!N.confirmMethod(this.confirmationMessage,this.formElement))return}if(this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){const{stopping:e,stopped:t}=l;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareHeadersForRequest(e,t){if(!t.isIdempotent){const t=function(e){if(null!=e){const t=(document.cookie?document.cookie.split("; "):[]).find((t=>t.startsWith(e)));if(t){const e=t.split("=").slice(1).join("=");return e?decodeURIComponent(e):void 0}}}(P("csrf-param"))||P("csrf-token");t&&(e["X-CSRF-Token"]=t),e.Accept=[M.contentType,e.Accept].join(", ")}}requestStarted(e){var t;this.state=l.waiting,null===(t=this.submitter)||void 0===t||t.setAttribute("disabled",""),C("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError)this.delegate.formSubmissionFailedWithResponse(this,t);else if(this.requestMustRedirect(e)&&function(e){return 200==e.statusCode&&!e.redirected}(t)){const e=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,e)}else this.state=l.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){var t;this.state=l.stopped,null===(t=this.submitter)||void 0===t||t.removeAttribute("disabled"),C("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}requestMustRedirect(e){return!e.isIdempotent&&this.mustRedirect}}function P(e){const t=document.querySelector(`meta[name="${e}"]`);return t&&t.content}class L{constructor(e){this.element=e}get children(){return[...this.element.children]}hasAnchor(e){return null!=this.getElementForAnchor(e)}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return this.element.querySelector("[autofocus]")}get permanentElements(){return[...this.element.querySelectorAll("[id][data-turbo-permanent]")]}getPermanentElementById(e){return this.element.querySelector(`#${e}[data-turbo-permanent]`)}getPermanentElementMapForSnapshot(e){const t={};for(const n of this.permanentElements){const{id:o}=n,r=e.getPermanentElementById(o);r&&(t[o]=[n,r])}return t}}class B{constructor(e,t){this.submitBubbled=e=>{const t=e.target;if(!e.defaultPrevented&&t instanceof HTMLFormElement&&t.closest("turbo-frame, html")==this.element){const n=e.submitter||void 0;"dialog"!=((null==n?void 0:n.getAttribute("formmethod"))||t.method)&&this.delegate.shouldInterceptFormSubmission(t,n)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmissionIntercepted(t,n))}},this.delegate=e,this.element=t}start(){this.element.addEventListener("submit",this.submitBubbled)}stop(){this.element.removeEventListener("submit",this.submitBubbled)}}class I{constructor(e,t){this.resolveRenderPromise=e=>{},this.resolveInterceptionPromise=e=>{},this.delegate=e,this.element=t}scrollToAnchor(e){const t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(p(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){const{isPreview:t,shouldRender:n,newSnapshot:o}=e;if(n)try{this.renderPromise=new Promise((e=>this.resolveRenderPromise=e)),this.renderer=e,this.prepareToRenderSnapshot(e);const n=new Promise((e=>this.resolveInterceptionPromise=e));this.delegate.allowsImmediateRender(o,this.resolveInterceptionPromise)||await n,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(o,t),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate()}invalidate(){this.delegate.viewInvalidated()}prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}}class F extends I{invalidate(){this.element.innerHTML=""}get snapshot(){return new L(this.element)}}class z{constructor(e,t){this.clickBubbled=e=>{this.respondsToEventTarget(e.target)?this.clickEvent=e:delete this.clickEvent},this.linkClicked=e=>{this.clickEvent&&this.respondsToEventTarget(e.target)&&e.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url)),delete this.clickEvent},this.willVisit=()=>{delete this.clickEvent},this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}}class j{constructor(e,t,n,o=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=n,this.willRender=o,this.promise=new Promise(((e,t)=>this.resolvingFunctions={resolve:e,reject:t}))}get shouldRender(){return!0}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}createScriptElement(e){if("false"==e.getAttribute("data-turbo-eval"))return e;{const t=document.createElement("script");return this.cspNonce&&(t.nonce=this.cspNonce),t.textContent=e.textContent,t.async=!1,function(e,t){for(const{name:n,value:o}of[...t.attributes])e.setAttribute(n,o)}(t,e),t}}preservingPermanentElements(e){(class{constructor(e){this.permanentElementMap=e}static preservingPermanentElements(e,t){const n=new this(e);n.enter(),t(),n.leave()}enter(){for(const e in this.permanentElementMap){const[,t]=this.permanentElementMap[e];this.replaceNewPermanentElementWithPlaceholder(t)}}leave(){for(const e in this.permanentElementMap){const[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t)}}replaceNewPermanentElementWithPlaceholder(e){const t=function(e){const t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",e.id),t}(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){const t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){const t=this.getPlaceholderById(e.id);null==t||t.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find((t=>t.content==e))}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}).preservingPermanentElements(this.permanentElementMap,e)}focusFirstAutofocusableElement(){const e=this.connectedSnapshot.firstAutofocusableElement;(function(e){return e&&"function"==typeof e.focus})(e)&&e.focus()}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get cspNonce(){var e;return null===(e=document.head.querySelector('meta[name="csp-nonce"]'))||void 0===e?void 0:e.getAttribute("content")}}class H extends j{get shouldRender(){return!0}async render(){await _(),this.preservingPermanentElements((()=>{this.loadFrameElement()})),this.scrollFrameIntoView(),await _(),this.focusFirstAutofocusableElement(),await _(),this.activateScriptElements()}loadFrameElement(){var e;const t=document.createRange();t.selectNodeContents(this.currentElement),t.deleteContents();const n=this.newElement,o=null===(e=n.ownerDocument)||void 0===e?void 0:e.createRange();o&&(o.selectNodeContents(n),this.currentElement.appendChild(o.extractContents()))}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const n=this.currentElement.firstElementChild,o=(e=this.currentElement.getAttribute("data-autoscroll-block"),t="end","end"==e||"start"==e||"center"==e||"nearest"==e?e:t);if(n)return n.scrollIntoView({block:o}),!0}var e,t;return!1}activateScriptElements(){for(const e of this.newScriptElements){const t=this.createScriptElement(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}class V{constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return k`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 9999;
        transition:
          width ${V.animationDuration}ms ease-out,
          opacity ${V.animationDuration/2}ms ${V.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement((()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1})))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,1.5*V.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,V.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame((()=>{this.progressElement.style.width=10+90*this.value+"%"}))}createStylesheetElement(){const e=document.createElement("style");return e.type="text/css",e.textContent=V.defaultCSS,e}createProgressElement(){const e=document.createElement("div");return e.className="turbo-progress-bar",e}}V.animationDuration=300;class $ extends L{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter((e=>!function(e){return"noscript"==e.tagName.toLowerCase()}(e))).map((e=>function(e){e.hasAttribute("nonce")&&e.setAttribute("nonce","");return e}(e))).reduce(((e,t)=>{const{outerHTML:n}=t,o=n in e?e[n]:{type:U(t),tracked:W(t),elements:[]};return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},o),{elements:[...o.elements,t]})})}),{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter((e=>this.detailsByOuterHTML[e].tracked)).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter((e=>!(e in t.detailsByOuterHTML))).map((e=>this.detailsByOuterHTML[e])).filter((({type:t})=>t==e)).map((({elements:[e]})=>e))}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce(((e,t)=>{const{type:n,tracked:o,elements:r}=this.detailsByOuterHTML[t];return null!=n||o?r.length>1?[...e,...r.slice(1)]:e:[...e,...r]}),[])}getMetaValue(e){const t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce(((t,n)=>{const{elements:[o]}=this.detailsByOuterHTML[n];return function(e,t){return"meta"==e.tagName.toLowerCase()&&e.getAttribute("name")==t}(o,e)?o:t}),void 0)}}function U(e){return function(e){return"script"==e.tagName.toLowerCase()}(e)?"script":function(e){const t=e.tagName.toLowerCase();return"style"==t||"link"==t&&"stylesheet"==e.getAttribute("rel")}(e)?"stylesheet":void 0}function W(e){return"reload"==e.getAttribute("data-turbo-track")}class q extends L{constructor(e,t){super(e),this.headSnapshot=t}static fromHTMLString(e=""){return this.fromDocument(S(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({head:e,body:t}){return new this(t,new $(e))}clone(){return new q(this.element.cloneNode(!0),this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var e;return m(null!==(e=this.getSetting("root"))&&void 0!==e?e:"/")}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return"no-preview"!=this.cacheControlValue}get isCacheable(){return"no-cache"!=this.cacheControlValue}get isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}}!function(e){e.visitStart="visitStart",e.requestStart="requestStart",e.requestEnd="requestEnd",e.visitEnd="visitEnd"}(d||(d={})),function(e){e.initialized="initialized",e.started="started",e.canceled="canceled",e.failed="failed",e.completed="completed"}(u||(u={}));const K={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0};var G,Y;!function(e){e[e.networkFailure=0]="networkFailure",e[e.timeoutFailure=-1]="timeoutFailure",e[e.contentTypeMismatch=-2]="contentTypeMismatch"}(G||(G={}));class X{constructor(e,t,n,o={}){this.identifier=E(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.snapshotCached=!1,this.state=u.initialized,this.delegate=e,this.location=t,this.restorationIdentifier=n||E();const{action:r,historyChanged:s,referrer:i,snapshotHTML:a,response:l,visitCachedSnapshot:c,willRender:d}=Object.assign(Object.assign({},K),o);this.action=r,this.historyChanged=s,this.referrer=i,this.snapshotHTML=a,this.response=l,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=c,this.willRender=d,this.scrolled=!d}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==u.initialized&&(this.recordTimingMetric(d.visitStart),this.state=u.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==u.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=u.canceled)}complete(){this.state==u.started&&(this.recordTimingMetric(d.visitEnd),this.state=u.completed,this.adapter.visitCompleted(this),this.delegate.visitCompleted(this),this.followRedirect())}fail(){this.state==u.started&&(this.state=u.failed,this.adapter.visitFailed(this))}changeHistory(){var e;if(!this.historyChanged){const t=this.location.href===(null===(e=this.referrer)||void 0===e?void 0:e.href)?"replace":this.action,n=this.getHistoryMethodForAction(t);this.history.update(n,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new D(this,a.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(d.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){const{statusCode:t}=e;J(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(d.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:e,responseHTML:t}=this.response;this.render((async()=>{this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,J(e)&&null!=t?(await this.view.renderPage(q.fromHTMLString(t),!1,this.willRender),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(q.fromHTMLString(t)),this.adapter.visitRendered(this),this.fail())}))}}getCachedSnapshot(){const e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!p(this.location)||e.hasAnchor(p(this.location)))&&("restore"==this.action||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return q.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){const e=this.getCachedSnapshot();if(e){const t=this.shouldIssueRequest();this.render((async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(e,t,this.willRender),this.adapter.visitRendered(this),t||this.complete())}))}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&(null===(e=this.response)||void 0===e?void 0:e.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render((async()=>{this.cacheSnapshot(),this.adapter.visitRendered(this)}))}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){const n=await t.responseHTML,{redirected:o,statusCode:r}=t;null==n?this.recordResponse({statusCode:G.contentTypeMismatch,redirected:o}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:r,responseHTML:n,redirected:o}))}async requestFailedWithResponse(e,t){const n=await t.responseHTML,{redirected:o,statusCode:r}=t;null==n?this.recordResponse({statusCode:G.contentTypeMismatch,redirected:o}):this.recordResponse({statusCode:r,responseHTML:n,redirected:o})}requestErrored(e,t){this.recordResponse({statusCode:G.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){const e=p(this.location);if(null!=e)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=(new Date).getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return!this.isSamePage&&("restore"==this.action?!this.hasCachedSnapshot():this.willRender)}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot().then((e=>e&&this.visitCachedSnapshot(e))),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise((e=>{this.frame=requestAnimationFrame((()=>e()))})),await e(),delete this.frame,this.performScroll()}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function J(e){return e>=200&&e<300}class Q{constructor(e){this.progressBar=new V,this.showProgressBar=()=>{this.progressBar.show()},this.session=e}visitProposedToLocation(e,t){this.navigator.startVisit(e,E(),t)}visitStarted(e){e.loadCachedSnapshot(),e.issueRequest(),e.changeHistory(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||"restore"!=e.action?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case G.networkFailure:case G.timeoutFailure:case G.contentTypeMismatch:return this.reload();default:return e.loadResponse()}}visitRequestFinished(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(e){}pageInvalidated(){this.reload()}visitFailed(e){}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),null!=this.visitProgressBarTimeout&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){null==this.formProgressBarTimeout&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),null!=this.formProgressBarTimeout&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(){window.location.reload()}get navigator(){return this.session.navigator}}class Z{constructor(){this.started=!1}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeStaleElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeStaleElements,!1))}removeStaleElements(){const e=[...document.querySelectorAll('[data-turbo-cache="false"]')];for(const t of e)t.remove()}}class ee{constructor(e){this.started=!1,this.submitCaptured=()=>{removeEventListener("submit",this.submitBubbled,!1),addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=e=>{if(!e.defaultPrevented){const t=e.target instanceof HTMLFormElement?e.target:void 0,n=e.submitter||void 0;if(t){"dialog"!=((null==n?void 0:n.getAttribute("formmethod"))||t.getAttribute("method"))&&this.delegate.willSubmitForm(t,n)&&(e.preventDefault(),this.delegate.formSubmitted(t,n))}}},this.delegate=e}start(){this.started||(addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}class te{constructor(e){this.element=e,this.linkInterceptor=new z(this,e),this.formInterceptor=new B(this,e)}start(){this.linkInterceptor.start(),this.formInterceptor.start()}stop(){this.linkInterceptor.stop(),this.formInterceptor.stop()}shouldInterceptLinkClick(e,t){return this.shouldRedirect(e)}linkClickIntercepted(e,t){const n=this.findFrameElement(e);n&&n.delegate.linkClickIntercepted(e,t)}shouldInterceptFormSubmission(e,t){return this.shouldSubmit(e,t)}formSubmissionIntercepted(e,t){const n=this.findFrameElement(e,t);n&&(n.removeAttribute("reloadable"),n.delegate.formSubmissionIntercepted(e,t))}shouldSubmit(e,t){var n;const o=f(e,t),r=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),s=m(null!==(n=null==r?void 0:r.content)&&void 0!==n?n:"/");return this.shouldRedirect(e,t)&&v(o,s)}shouldRedirect(e,t){const n=this.findFrameElement(e,t);return!!n&&n!=e.closest("turbo-frame")}findFrameElement(e,t){const n=(null==t?void 0:t.getAttribute("data-turbo-frame"))||e.getAttribute("data-turbo-frame");if(n&&"_top"!=n){const e=this.element.querySelector(`#${n}:not([disabled])`);if(e instanceof h)return e}}}class ne{constructor(e){this.restorationIdentifier=E(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=e=>{if(this.shouldHandlePopState()){const{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);const{restorationIdentifier:e}=t;this.restorationIdentifier=e,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,e)}}},this.onPageLoad=async e=>{await Promise.resolve(),this.pageLoaded=!0},this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,n=E()){const o={turbo:{restorationIdentifier:n}};e.call(history,o,"",t.href),this.location=t,this.restorationIdentifier=n}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){const{restorationIdentifier:t}=this,n=this.restorationData[t];this.restorationData[t]=Object.assign(Object.assign({},n),e)}assumeControlOfScrollRestoration(){var e;this.previousScrollRestoration||(this.previousScrollRestoration=null!==(e=history.scrollRestoration)&&void 0!==e?e:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}class oe{constructor(e){this.started=!1,this.clickCaptured=()=>{removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=e=>{if(this.clickEventIsSignificant(e)){const t=e.composedPath&&e.composedPath()[0]||e.target,n=this.findLinkFromClickTarget(t);if(n){const t=this.getLocationForLink(n);this.delegate.willFollowLinkToLocation(n,t)&&(e.preventDefault(),this.delegate.followedLinkToLocation(n,t))}}},this.delegate=e}start(){this.started||(addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}findLinkFromClickTarget(e){if(e instanceof Element)return e.closest("a[href]:not([target^=_]):not([download])")}getLocationForLink(e){return m(e.getAttribute("href")||"")}}function re(e){return"advance"==e||"replace"==e||"restore"==e}class se{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&(v(e,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(e,t):window.location.href=e.toString())}startVisit(e,t,n={}){this.stop(),this.currentVisit=new X(this,m(e),t,Object.assign({referrer:this.location},n)),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new N(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(e){"function"==typeof this.adapter.formSubmissionStarted&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){const n=await t.responseHTML;if(n){e.method!=a.get&&this.view.clearSnapshotCache();const{statusCode:o,redirected:r}=t,s={action:this.getActionForFormSubmission(e),response:{statusCode:o,responseHTML:n,redirected:r}};this.proposeVisit(t.location,s)}}}async formSubmissionFailedWithResponse(e,t){const n=await t.responseHTML;if(n){const e=q.fromHTMLString(n);t.serverError?await this.view.renderError(e):await this.view.renderPage(e),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){"function"==typeof this.adapter.formSubmissionFinished&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){const n=p(e),o=p(this.view.lastRenderedLocation),r="restore"===t&&void 0===n;return"replace"!==t&&y(e)===y(this.view.lastRenderedLocation)&&(r||null!=n&&n!==o)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission(e){const{formElement:t,submitter:n}=e,o=O("data-turbo-action",n,t);return re(o)?o:"advance"}}!function(e){e[e.initial=0]="initial",e[e.loading=1]="loading",e[e.interactive=2]="interactive",e[e.complete=3]="complete"}(Y||(Y={}));class ie{constructor(e){this.stage=Y.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:e}=this;"interactive"==e?this.pageIsInteractive():"complete"==e&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=e}start(){this.started||(this.stage==Y.initial&&(this.stage=Y.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==Y.loading&&(this.stage=Y.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Y.interactive&&(this.stage=Y.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class ae{constructor(e){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}}class le{constructor(e){this.sources=new Set,this.started=!1,this.inspectFetchResponse=e=>{const t=function(e){var t;const n=null===(t=e.detail)||void 0===t?void 0:t.fetchResponse;if(n instanceof w)return n}(e);t&&function(e){var t;return(null!==(t=e.contentType)&&void 0!==t?t:"").startsWith(M.contentType)}(t)&&(e.preventDefault(),this.receiveMessageResponse(t))},this.receiveMessageEvent=e=>{this.started&&"string"==typeof e.data&&this.receiveMessageHTML(e.data)},this.delegate=e}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}async receiveMessageResponse(e){const t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(new M(e))}}class ce extends j{async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:e,head:t,body:n}=document;e.replaceChild(this.newHead,t),e.replaceChild(this.newElement,n)}activateScriptElements(){for(const e of this.scriptElements){const t=e.parentNode;if(t){const n=this.createScriptElement(e);t.replaceChild(n,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return[...document.documentElement.querySelectorAll("script")]}}class de extends j{get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}prepareToRender(){this.mergeHead()}async render(){this.willRender&&this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}mergeHead(){this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()}replaceBody(){this.preservingPermanentElements((()=>{this.activateNewBody(),this.assignNewBody()}))}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}copyNewHeadStylesheetElements(){for(const e of this.newHeadStylesheetElements)document.head.appendChild(e)}copyNewHeadScriptElements(){for(const e of this.newHeadScriptElements)document.head.appendChild(this.createScriptElement(e))}removeCurrentHeadProvisionalElements(){for(const e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(const e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const e of this.newBodyScriptElements){const t=this.createScriptElement(e);e.replaceWith(t)}}assignNewBody(){document.body&&this.newElement instanceof HTMLBodyElement?document.body.replaceWith(this.newElement):document.documentElement.appendChild(this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class ue{constructor(e){this.keys=[],this.snapshots={},this.size=e}has(e){return x(e)in this.snapshots}get(e){if(this.has(e)){const t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[x(e)]}write(e,t){this.snapshots[x(e)]=t}touch(e){const t=x(e),n=this.keys.indexOf(t);n>-1&&this.keys.splice(n,1),this.keys.unshift(t),this.trim()}trim(){for(const e of this.keys.splice(this.size))delete this.snapshots[e]}}class he extends I{constructor(){super(...arguments),this.snapshotCache=new ue(10),this.lastRenderedLocation=new URL(location.href)}renderPage(e,t=!1,n=!0){const o=new de(this.snapshot,e,t,n);return this.render(o)}renderError(e){const t=new ce(this.snapshot,e,!1);return this.render(t)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(){if(this.shouldCacheSnapshot){this.delegate.viewWillCacheSnapshot();const{snapshot:e,lastRenderedLocation:t}=this;await new Promise((e=>setTimeout((()=>e()),0)));const n=e.clone();return this.snapshotCache.put(t,n),n}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}get snapshot(){return q.fromElement(this.element)}get shouldCacheSnapshot(){return this.snapshot.isCacheable}}function me(e){Object.defineProperties(e,pe)}const pe={absoluteURL:{get(){return this.toString()}}},fe=new class{constructor(){this.navigator=new se(this),this.history=new ne(this),this.view=new he(this,document.documentElement),this.adapter=new Q(this),this.pageObserver=new ie(this),this.cacheObserver=new Z,this.linkClickObserver=new oe(this),this.formSubmitObserver=new ee(this),this.scrollObserver=new ae(this),this.streamObserver=new le(this),this.frameRedirector=new te(document.documentElement),this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){this.navigator.proposeVisit(m(e),t)}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){document.documentElement.appendChild(M.wrap(e).fragment)}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(e,t){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated()}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willFollowLinkToLocation(e,t){return this.elementDriveEnabled(e)&&v(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t)}followedLinkToLocation(e,t){const n=this.getActionForLink(e);this.convertLinkWithMethodClickToFormSubmission(e)||this.visit(t.href,{action:n})}convertLinkWithMethodClickToFormSubmission(e){const t=e.getAttribute("data-turbo-method");if(t){const n=document.createElement("form");n.method=t,n.action=e.getAttribute("href")||"undefined",n.hidden=!0,e.hasAttribute("data-turbo-confirm")&&n.setAttribute("data-turbo-confirm",e.getAttribute("data-turbo-confirm"));const o=this.getTargetFrameForLink(e);return o?(n.setAttribute("data-turbo-frame",o),n.addEventListener("turbo:submit-start",(()=>n.remove()))):n.addEventListener("submit",(()=>n.remove())),document.body.appendChild(n),C("submit",{cancelable:!0,target:n})}return!1}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){me(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){me(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){const n=f(e,t);return this.elementDriveEnabled(e)&&(!t||this.elementDriveEnabled(t))&&v(m(n),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;(null===(e=this.navigator.currentVisit)||void 0===e?void 0:e.silent)||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){return!this.notifyApplicationBeforeRender(e,t).defaultPrevented}viewRenderedSnapshot(e,t){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}viewInvalidated(){this.adapter.pageInvalidated()}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t){return!this.notifyApplicationAfterClickingLinkToLocation(e,t).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t){return C("turbo:click",{target:e,detail:{url:t.href},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return C("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return T(document.documentElement),C("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return C("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return C("turbo:before-render",{detail:{newBody:e,resume:t},cancelable:!0})}notifyApplicationAfterRender(){return C("turbo:render")}notifyApplicationAfterPageLoad(e={}){return A(document.documentElement),C("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return C("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return C("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}elementDriveEnabled(e){const t=null==e?void 0:e.closest("[data-turbo]");return this.drive?!t||"false"!=t.getAttribute("data-turbo"):!!t&&"true"==t.getAttribute("data-turbo")}getActionForLink(e){const t=e.getAttribute("data-turbo-action");return re(t)?t:"advance"}getTargetFrameForLink(e){const t=e.getAttribute("data-turbo-frame");if(t)return t;{const t=e.closest("turbo-frame");if(t)return t.id}}get snapshot(){return this.view.snapshot}},{navigator:ge}=fe;function be(){fe.start()}var ve=Object.freeze({__proto__:null,navigator:ge,session:fe,PageRenderer:de,PageSnapshot:q,start:be,registerAdapter:function(e){fe.registerAdapter(e)},visit:function(e,t){fe.visit(e,t)},connectStreamSource:function(e){fe.connectStreamSource(e)},disconnectStreamSource:function(e){fe.disconnectStreamSource(e)},renderStreamMessage:function(e){fe.renderStreamMessage(e)},clearCache:function(){fe.clearCache()},setProgressBarDelay:function(e){fe.setProgressBarDelay(e)},setConfirmMethod:function(e){N.confirmMethod=e}});class ye{constructor(e){this.visitCachedSnapshot=({element:e})=>{var t;const{id:n,clone:o}=this;null===(t=e.querySelector("#"+n))||void 0===t||t.replaceWith(o)},this.clone=e.cloneNode(!0),this.id=e.id}}function xe(e){if(null!=e){const t=document.getElementById(e);if(t instanceof h)return t}}function we(e,t){if(e){const o=e.getAttribute("src");if(null!=o&&null!=t&&(n=t,m(o).href==m(n).href))throw new Error(`Matching <turbo-frame id="${e.id}"> element has a source URL which references itself`);if(e.ownerDocument!==document&&(e=document.importNode(e,!0)),e instanceof h)return e.connectedCallback(),e.disconnectedCallback(),e}var n}const Ce={after(){this.targetElements.forEach((e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.insertBefore(this.templateContent,e.nextSibling)}))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((e=>e.append(this.templateContent)))},before(){this.targetElements.forEach((e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.insertBefore(this.templateContent,e)}))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((e=>e.prepend(this.templateContent)))},remove(){this.targetElements.forEach((e=>e.remove()))},replace(){this.targetElements.forEach((e=>e.replaceWith(this.templateContent)))},update(){this.targetElements.forEach((e=>{e.innerHTML="",e.append(this.templateContent)}))}};class _e extends HTMLElement{async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){var e;return null!==(e=this.renderPromise)&&void 0!==e?e:this.renderPromise=(async()=>{this.dispatchEvent(this.beforeRenderEvent)&&(await _(),this.performAction())})()}disconnect(){try{this.remove()}catch(e){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach((e=>e.remove()))}get duplicateChildren(){var e;const t=this.targetElements.flatMap((e=>[...e.children])).filter((e=>!!e.id)),n=[...null===(e=this.templateContent)||void 0===e?void 0:e.children].filter((e=>!!e.id)).map((e=>e.id));return t.filter((e=>n.includes(e.id)))}get performAction(){if(this.action){const e=Ce[this.action];if(e)return e;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){return this.target?this.targetElementsById:this.targets?this.targetElementsByQuery:void this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(e){throw new Error(`${this.description}: ${e}`)}get description(){var e,t;return null!==(t=(null!==(e=this.outerHTML.match(/<[^>]+>/))&&void 0!==e?e:[])[0])&&void 0!==t?t:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0})}get targetElementsById(){var e;const t=null===(e=this.ownerDocument)||void 0===e?void 0:e.getElementById(this.target);return null!==t?[t]:[]}get targetElementsByQuery(){var e;const t=null===(e=this.ownerDocument)||void 0===e?void 0:e.querySelectorAll(this.targets);return 0!==t.length?Array.prototype.slice.call(t):[]}}h.delegateConstructor=class{constructor(e){this.fetchResponseLoaded=e=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.settingSourceURL=!1,this.element=e,this.view=new F(this,this.element),this.appearanceObserver=new R(this,this.element),this.linkInterceptor=new z(this,this.element),this.formInterceptor=new B(this,this.element)}connect(){this.connected||(this.connected=!0,this.reloadable=!1,this.loadingStyle==i.lazy&&this.appearanceObserver.start(),this.linkInterceptor.start(),this.formInterceptor.start(),this.sourceURLChanged())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.linkInterceptor.stop(),this.formInterceptor.stop())}disabledChanged(){this.loadingStyle==i.eager&&this.loadSourceURL()}sourceURLChanged(){(this.loadingStyle==i.eager||this.hasBeenLoaded)&&this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==i.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){if(!this.settingSourceURL&&this.enabled&&this.isActive&&(this.reloadable||this.sourceURL!=this.currentURL)){const e=this.currentURL;if(this.currentURL=this.sourceURL,this.sourceURL)try{this.element.loaded=this.visit(m(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0}catch(t){throw this.currentURL=e,t}}}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{const t=await e.responseHTML;if(t){const{body:n}=S(t),o=new L(await this.extractForeignFrameElement(n)),r=new H(this.view.snapshot,o,!1,!1);this.view.renderPromise&&await this.view.renderPromise,await this.view.render(r),fe.frameRendered(e,this.element),fe.frameLoaded(this.element),this.fetchResponseLoaded(e)}}catch(e){console.error(e),this.view.invalidate()}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(e){this.loadSourceURL()}shouldInterceptLinkClick(e,t){return!e.hasAttribute("data-turbo-method")&&this.shouldInterceptNavigation(e)}linkClickIntercepted(e,t){this.reloadable=!0,this.navigateFrame(e,t)}shouldInterceptFormSubmission(e,t){return this.shouldInterceptNavigation(e,t)}formSubmissionIntercepted(e,t){this.formSubmission&&this.formSubmission.stop(),this.reloadable=!1,this.formSubmission=new N(this,e,t);const{fetchRequest:n}=this.formSubmission;this.prepareHeadersForRequest(n.headers,n),this.formSubmission.start()}prepareHeadersForRequest(e,t){e["Turbo-Frame"]=this.id}requestStarted(e){T(this.element)}requestPreventedHandlingResponse(e,t){this.resolveVisitPromise()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.resolveVisitPromise()}requestFailedWithResponse(e,t){console.error(t),this.resolveVisitPromise()}requestErrored(e,t){console.error(t),this.resolveVisitPromise()}requestFinished(e){A(this.element)}formSubmissionStarted({formElement:e}){T(e,this.findFrameElement(e))}formSubmissionSucceededWithResponse(e,t){const n=this.findFrameElement(e.formElement,e.submitter);this.proposeVisitIfNavigatedWithAction(n,e.formElement,e.submitter),n.delegate.loadResponse(t)}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t)}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){A(e,this.findFrameElement(e))}allowsImmediateRender(e,t){return!0}viewRenderedSnapshot(e,t){}viewInvalidated(){}async visit(e){var t;const n=new D(this,a.get,e,new URLSearchParams,this.element);return null===(t=this.currentFetchRequest)||void 0===t||t.cancel(),this.currentFetchRequest=n,new Promise((e=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,e()},n.perform()}))}navigateFrame(e,t,n){const o=this.findFrameElement(e,n);this.proposeVisitIfNavigatedWithAction(o,e,n),o.setAttribute("reloadable",""),o.src=t}proposeVisitIfNavigatedWithAction(e,t,n){const o=O("data-turbo-action",n,t,e);if(re(o)){const{visitCachedSnapshot:t}=new ye(e);e.delegate.fetchResponseLoaded=n=>{if(e.src){const{statusCode:r,redirected:s}=n,i={statusCode:r,redirected:s,responseHTML:e.ownerDocument.documentElement.outerHTML};fe.visit(e.src,{action:o,response:i,visitCachedSnapshot:t,willRender:!1})}}}}findFrameElement(e,t){var n;return null!==(n=xe(O("data-turbo-frame",t,e)||this.element.getAttribute("target")))&&void 0!==n?n:this.element}async extractForeignFrameElement(e){let t;const n=CSS.escape(this.id);try{if(t=we(e.querySelector(`turbo-frame#${n}`),this.currentURL))return t;if(t=we(e.querySelector(`turbo-frame[src][recurse~=${n}]`),this.currentURL))return await t.loaded,await this.extractForeignFrameElement(t);console.error(`Response has no matching <turbo-frame id="${n}"> element`)}catch(e){console.error(e)}return new h}formActionIsVisitable(e,t){return v(m(f(e,t)),this.rootLocation)}shouldInterceptNavigation(e,t){const n=O("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.formActionIsVisitable(e,t))return!1;if(!this.enabled||"_top"==n)return!1;if(n){const e=xe(n);if(e)return!e.disabled}return!!fe.elementDriveEnabled(e)&&!(t&&!fe.elementDriveEnabled(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}get reloadable(){return this.findFrameElement(this.element).hasAttribute("reloadable")}set reloadable(e){const t=this.findFrameElement(this.element);e?t.setAttribute("reloadable",""):t.removeAttribute("reloadable")}set sourceURL(e){this.settingSourceURL=!0,this.element.src=null!=e?e:null,this.currentURL=this.element.src,this.settingSourceURL=!1}get loadingStyle(){return this.element.loading}get isLoading(){return void 0!==this.formSubmission||void 0!==this.resolveVisitPromise()}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var e;const t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]');return m(null!==(e=null==t?void 0:t.content)&&void 0!==e?e:"/")}},customElements.define("turbo-frame",h),customElements.define("turbo-stream",_e),(()=>{let e=document.currentScript;if(e&&!e.hasAttribute("data-turbo-suppress-warning"))for(;e=e.parentElement;)if(e==document.body)return console.warn(k`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,e.outerHTML)})(),window.Turbo=ve,be();class Se extends o.Qr{}},2711:function(e,t,n){e.exports=function(){"use strict";var e="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},t="Expected a function",o=NaN,r="[object Symbol]",s=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,h=d||u||Function("return this")(),m=Object.prototype.toString,p=Math.max,f=Math.min,g=function(){return h.Date.now()};function b(e,n,o){var r,s,i,a,l,c,d=0,u=!1,h=!1,m=!0;if("function"!=typeof e)throw new TypeError(t);function b(t){var n=r,o=s;return r=s=void 0,d=t,a=e.apply(o,n)}function x(e){var t=e-c;return void 0===c||t>=n||t<0||h&&e-d>=i}function w(){var e=g();if(x(e))return C(e);l=setTimeout(w,function(e){var t=n-(e-c);return h?f(t,i-(e-d)):t}(e))}function C(e){return l=void 0,m&&r?b(e):(r=s=void 0,a)}function _(){var e=g(),t=x(e);if(r=arguments,s=this,c=e,t){if(void 0===l)return function(e){return d=e,l=setTimeout(w,n),u?b(e):a}(c);if(h)return l=setTimeout(w,n),b(c)}return void 0===l&&(l=setTimeout(w,n)),a}return n=y(n)||0,v(o)&&(u=!!o.leading,i=(h="maxWait"in o)?p(y(o.maxWait)||0,n):i,m="trailing"in o?!!o.trailing:m),_.cancel=function(){void 0!==l&&clearTimeout(l),d=0,r=c=s=l=void 0},_.flush=function(){return void 0===l?a:C(g())},_}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&m.call(e)==r}(e))return o;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):i.test(e)?o:+e}var x=function(e,n,o){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(t);return v(o)&&(r="leading"in o?!!o.leading:r,s="trailing"in o?!!o.trailing:s),b(e,n,{leading:r,maxWait:n,trailing:s})},w="Expected a function",C=NaN,_="[object Symbol]",S=/^\s+|\s+$/g,k=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,O=/^0o[0-7]+$/i,T=parseInt,A="object"==typeof e&&e&&e.Object===Object&&e,D="object"==typeof self&&self&&self.Object===Object&&self,R=A||D||Function("return this")(),M=Object.prototype.toString,N=Math.max,P=Math.min,L=function(){return R.Date.now()};function B(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function I(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&M.call(e)==_}(e))return C;if(B(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=B(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(S,"");var n=E.test(e);return n||O.test(e)?T(e.slice(2),n?2:8):k.test(e)?C:+e}var F=function(e,t,n){var o,r,s,i,a,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError(w);function m(t){var n=o,s=r;return o=r=void 0,c=t,i=e.apply(s,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=s}function f(){var e=L();if(p(e))return g(e);a=setTimeout(f,function(e){var n=t-(e-l);return u?P(n,s-(e-c)):n}(e))}function g(e){return a=void 0,h&&o?m(e):(o=r=void 0,i)}function b(){var e=L(),n=p(e);if(o=arguments,r=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(f,t),d?m(e):i}(l);if(u)return a=setTimeout(f,t),m(l)}return void 0===a&&(a=setTimeout(f,t)),i}return t=I(t)||0,B(n)&&(d=!!n.leading,s=(u="maxWait"in n)?N(I(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==a&&clearTimeout(a),c=0,o=l=r=a=void 0},b.flush=function(){return void 0===a?i:g(L())},b},z=function(){};function j(e){e&&e.forEach((function(e){var t=Array.prototype.slice.call(e.addedNodes),n=Array.prototype.slice.call(e.removedNodes);if(function e(t){var n=void 0,o=void 0;for(n=0;n<t.length;n+=1){if((o=t[n]).dataset&&o.dataset.aos)return!0;if(o.children&&e(o.children))return!0}return!1}(t.concat(n)))return z()}))}function H(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}var V={isSupported:function(){return!!H()},ready:function(e,t){var n=window.document,o=new(H())(j);z=t,o.observe(n.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}},$=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},U=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},q=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,K=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,G=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,Y=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;function X(){return navigator.userAgent||navigator.vendor||window.opera||""}var J=new(function(){function e(){$(this,e)}return U(e,[{key:"phone",value:function(){var e=X();return!(!q.test(e)&&!K.test(e.substr(0,4)))}},{key:"mobile",value:function(){var e=X();return!(!G.test(e)&&!Y.test(e.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}},{key:"ie11",value:function(){return"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style}}]),e}()),Q=function(e,t){var n=void 0;return J.ie11()?(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,{detail:t}):n=new CustomEvent(e,{detail:t}),document.dispatchEvent(n)},Z=function(e){return e.forEach((function(e,t){return function(e,t){var n=e.options,o=e.position,r=e.node,s=(e.data,function(){e.animated&&(function(e,t){t&&t.forEach((function(t){return e.classList.remove(t)}))}(r,n.animatedClassNames),Q("aos:out",r),e.options.id&&Q("aos:in:"+e.options.id,r),e.animated=!1)});n.mirror&&t>=o.out&&!n.once?s():t>=o.in?e.animated||(function(e,t){t&&t.forEach((function(t){return e.classList.add(t)}))}(r,n.animatedClassNames),Q("aos:in",r),e.options.id&&Q("aos:in:"+e.options.id,r),e.animated=!0):e.animated&&!n.once&&s()}(e,window.pageYOffset)}))},ee=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-("BODY"!=e.tagName?e.scrollLeft:0),n+=e.offsetTop-("BODY"!=e.tagName?e.scrollTop:0),e=e.offsetParent;return{top:n,left:t}},te=function(e,t,n){var o=e.getAttribute("data-aos-"+t);if(void 0!==o){if("true"===o)return!0;if("false"===o)return!1}return o||n},ne=function(e,t){return e.forEach((function(e,n){var o=te(e.node,"mirror",t.mirror),r=te(e.node,"once",t.once),s=te(e.node,"id"),i=t.useClassNames&&e.node.getAttribute("data-aos"),a=[t.animatedClassName].concat(i?i.split(" "):[]).filter((function(e){return"string"==typeof e}));t.initClassName&&e.node.classList.add(t.initClassName),e.position={in:function(e,t,n){var o=window.innerHeight,r=te(e,"anchor"),s=te(e,"anchor-placement"),i=Number(te(e,"offset",s?0:t)),a=s||n,l=e;r&&document.querySelectorAll(r)&&(l=document.querySelectorAll(r)[0]);var c=ee(l).top-o;switch(a){case"top-bottom":break;case"center-bottom":c+=l.offsetHeight/2;break;case"bottom-bottom":c+=l.offsetHeight;break;case"top-center":c+=o/2;break;case"center-center":c+=o/2+l.offsetHeight/2;break;case"bottom-center":c+=o/2+l.offsetHeight;break;case"top-top":c+=o;break;case"bottom-top":c+=o+l.offsetHeight;break;case"center-top":c+=o+l.offsetHeight/2}return c+i}(e.node,t.offset,t.anchorPlacement),out:o&&function(e,t){window.innerHeight;var n=te(e,"anchor"),o=te(e,"offset",t),r=e;return n&&document.querySelectorAll(n)&&(r=document.querySelectorAll(n)[0]),ee(r).top+r.offsetHeight-o}(e.node,t.offset)},e.options={once:r,mirror:o,animatedClassNames:a,id:s}})),e},oe=function(){var e=document.querySelectorAll("[data-aos]");return Array.prototype.map.call(e,(function(e){return{node:e}}))},re=[],se=!1,ie={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,mirror:!1,anchorPlacement:"top-bottom",startEvent:"DOMContentLoaded",animatedClassName:"aos-animate",initClassName:"aos-init",useClassNames:!1,disableMutationObserver:!1,throttleDelay:99,debounceDelay:50},ae=function(){return document.all&&!window.atob},le=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(se=!0),se&&(re=ne(re,ie),Z(re),window.addEventListener("scroll",x((function(){Z(re,ie.once)}),ie.throttleDelay)))},ce=function(){if(re=oe(),ue(ie.disable)||ae())return de();le()},de=function(){re.forEach((function(e,t){e.node.removeAttribute("data-aos"),e.node.removeAttribute("data-aos-easing"),e.node.removeAttribute("data-aos-duration"),e.node.removeAttribute("data-aos-delay"),ie.initClassName&&e.node.classList.remove(ie.initClassName),ie.animatedClassName&&e.node.classList.remove(ie.animatedClassName)}))},ue=function(e){return!0===e||"mobile"===e&&J.mobile()||"phone"===e&&J.phone()||"tablet"===e&&J.tablet()||"function"==typeof e&&!0===e()};return{init:function(e){return ie=W(ie,e),re=oe(),ie.disableMutationObserver||V.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),ie.disableMutationObserver=!0),ie.disableMutationObserver||V.ready("[data-aos]",ce),ue(ie.disable)||ae()?de():(document.querySelector("body").setAttribute("data-aos-easing",ie.easing),document.querySelector("body").setAttribute("data-aos-duration",ie.duration),document.querySelector("body").setAttribute("data-aos-delay",ie.delay),-1===["DOMContentLoaded","load"].indexOf(ie.startEvent)?document.addEventListener(ie.startEvent,(function(){le(!0)})):window.addEventListener("load",(function(){le(!0)})),"DOMContentLoaded"===ie.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1&&le(!0),window.addEventListener("resize",F(le,ie.debounceDelay,!0)),window.addEventListener("orientationchange",F(le,ie.debounceDelay,!0)),re)},refresh:le,refreshHard:ce}}()},9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var o=n(4867),r=n(6026),s=n(4372),i=n(5327),a=n(4097),l=n(4109),c=n(7985),d=n(7874),u=n(2648),h=n(644),m=n(205);e.exports=function(e){return new Promise((function(t,n){var p,f=e.data,g=e.headers,b=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}o.isFormData(f)&&o.isStandardBrowserEnv()&&delete g["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(x+":"+w)}var C=a(e.baseURL,e.url);function _(){if(y){var o="getAllResponseHeaders"in y?l(y.getAllResponseHeaders()):null,s={data:b&&"text"!==b&&"json"!==b?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:o,config:e,request:y};r((function(e){t(e),v()}),(function(e){n(e),v()}),s),y=null}}if(y.open(e.method.toUpperCase(),i(C,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=_:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(_)},y.onabort=function(){y&&(n(new u("Request aborted",u.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new u("Network Error",u.ERR_NETWORK,e,y,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",o=e.transitional||d;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new u(t,o.clarifyTimeoutError?u.ETIMEDOUT:u.ECONNABORTED,e,y)),y=null},o.isStandardBrowserEnv()){var S=(e.withCredentials||c(C))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;S&&(g[e.xsrfHeaderName]=S)}"setRequestHeader"in y&&o.forEach(g,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete g[t]:y.setRequestHeader(t,e)})),o.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),b&&"json"!==b&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(n(!e||e&&e.type?new h:e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null);var k=m(C);k&&-1===["http","https","file"].indexOf(k)?n(new u("Unsupported protocol "+k+":",u.ERR_BAD_REQUEST,e)):y.send(f)}))}},1609:(e,t,n)=>{"use strict";var o=n(4867),r=n(1849),s=n(321),i=n(7185);var a=function e(t){var n=new s(t),a=r(s.prototype.request,n);return o.extend(a,s.prototype,n),o.extend(a,n),a.create=function(n){return e(i(t,n))},a}(n(5546));a.Axios=s,a.CanceledError=n(644),a.CancelToken=n(4972),a.isCancel=n(6502),a.VERSION=n(7288).version,a.toFormData=n(7675),a.AxiosError=n(2648),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(6268),e.exports=a,e.exports.default=a},4972:(e,t,n)=>{"use strict";var o=n(644);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,o=n._listeners.length;for(t=0;t<o;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,o=new Promise((function(e){n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e){n.reason||(n.reason=new o(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},644:(e,t,n)=>{"use strict";var o=n(2648);function r(e){o.call(this,null==e?"canceled":e,o.ERR_CANCELED),this.name="CanceledError"}n(4867).inherits(r,o,{__CANCEL__:!0}),e.exports=r},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var o=n(4867),r=n(5327),s=n(782),i=n(3572),a=n(7185),l=n(4097),c=n(4875),d=c.validators;function u(e){this.defaults=e,this.interceptors={request:new s,response:new s}}u.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:d.transitional(d.boolean),forcedJSONParsing:d.transitional(d.boolean),clarifyTimeoutError:d.transitional(d.boolean)},!1);var o=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var s,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!r){var u=[i,void 0];for(Array.prototype.unshift.apply(u,o),u=u.concat(l),s=Promise.resolve(t);u.length;)s=s.then(u.shift(),u.shift());return s}for(var h=t;o.length;){var m=o.shift(),p=o.shift();try{h=m(h)}catch(e){p(e);break}}try{s=i(h)}catch(e){return Promise.reject(e)}for(;l.length;)s=s.then(l.shift(),l.shift());return s},u.prototype.getUri=function(e){e=a(this.defaults,e);var t=l(e.baseURL,e.url);return r(t,e.params,e.paramsSerializer)},o.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),o.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,r){return this.request(a(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}u.prototype[e]=t(),u.prototype[e+"Form"]=t(!0)})),e.exports=u},2648:(e,t,n)=>{"use strict";var o=n(4867);function r(e,t,n,o,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}o.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var s=r.prototype,i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){i[e]={value:e}})),Object.defineProperties(r,i),Object.defineProperty(s,"isAxiosError",{value:!0}),r.from=function(e,t,n,i,a,l){var c=Object.create(s);return o.toFlatObject(e,c,(function(e){return e!==Error.prototype})),r.call(c,e.message,t,n,i,a),c.name=e.name,l&&Object.assign(c,l),c},e.exports=r},782:(e,t,n)=>{"use strict";var o=n(4867);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},4097:(e,t,n)=>{"use strict";var o=n(1793),r=n(7303);e.exports=function(e,t){return e&&!o(t)?r(e,t):t}},3572:(e,t,n)=>{"use strict";var o=n(4867),r=n(8527),s=n(6502),i=n(5546),a=n(644);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},7185:(e,t,n)=>{"use strict";var o=n(4867);e.exports=function(e,t){t=t||{};var n={};function r(e,t){return o.isPlainObject(e)&&o.isPlainObject(t)?o.merge(e,t):o.isPlainObject(t)?o.merge({},t):o.isArray(t)?t.slice():t}function s(n){return o.isUndefined(t[n])?o.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function i(e){if(!o.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return o.isUndefined(t[n])?o.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function l(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return o.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||s,r=t(e);o.isUndefined(r)&&t!==l||(n[e]=r)})),n}},6026:(e,t,n)=>{"use strict";var o=n(2648);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new o("Request failed with status code "+n.status,[o.ERR_BAD_REQUEST,o.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var o=n(4867),r=n(5546);e.exports=function(e,t,n){var s=this||r;return o.forEach(n,(function(n){e=n.call(s,e,t)})),e}},5546:(e,t,n)=>{"use strict";var o=n(4867),r=n(6016),s=n(2648),i=n(7874),a=n(7675),l={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var d,u={transitional:i,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(d=n(5448)),d),transformRequest:[function(e,t){if(r(t,"Accept"),r(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e))return e;if(o.isArrayBufferView(e))return e.buffer;if(o.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,s=o.isObject(e),i=t&&t["Content-Type"];if((n=o.isFileList(e))||s&&"multipart/form-data"===i){var l=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,l&&new l)}return s||"application/json"===i?(c(t,"application/json"),function(e,t,n){if(o.isString(e))try{return(t||JSON.parse)(e),o.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw s.from(e,s.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(1623)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){u.headers[e]=o.merge(l)})),e.exports=u},7874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:e=>{e.exports={version:"0.27.2"}},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var o=n(4867);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(o.isURLSearchParams(t))s=t.toString();else{var i=[];o.forEach(t,(function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),i.push(r(t)+"="+r(e))})))})),s=i.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var o=n(4867);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,n,r,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),o.isString(r)&&a.push("path="+r),o.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},6268:(e,t,n)=>{"use strict";var o=n(4867);e.exports=function(e){return o.isObject(e)&&!0===e.isAxiosError}},7985:(e,t,n)=>{"use strict";var o=n(4867);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=o.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var o=n(4867);e.exports=function(e,t){o.forEach(e,(function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])}))}},1623:e=>{e.exports=null},4109:(e,t,n)=>{"use strict";var o=n(4867),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,i={};return e?(o.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=o.trim(e.substr(0,s)).toLowerCase(),n=o.trim(e.substr(s+1)),t){if(i[t]&&r.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},205:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7675:(e,t,n)=>{"use strict";var o=n(4867);e.exports=function(e,t){t=t||new FormData;var n=[];function r(e){return null===e?"":o.isDate(e)?e.toISOString():o.isArrayBuffer(e)||o.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(s,i){if(o.isPlainObject(s)||o.isArray(s)){if(-1!==n.indexOf(s))throw Error("Circular reference detected in "+i);n.push(s),o.forEach(s,(function(n,s){if(!o.isUndefined(n)){var a,l=i?i+"."+s:s;if(n&&!i&&"object"==typeof n)if(o.endsWith(s,"{}"))n=JSON.stringify(n);else if(o.endsWith(s,"[]")&&(a=o.toArray(n)))return void a.forEach((function(e){!o.isUndefined(e)&&t.append(l,r(e))}));e(n,l)}})),n.pop()}else t.append(i,r(s))}(e),t}},4875:(e,t,n)=>{"use strict";var o=n(7288).version,r=n(2648),s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};s.transitional=function(e,t,n){function s(e,t){return"[Axios v"+o+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,a){if(!1===e)throw new r(s(o," has been removed"+(t?" in "+t:"")),r.ERR_DEPRECATED);return t&&!i[o]&&(i[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new r("options must be an object",r.ERR_BAD_OPTION_VALUE);for(var o=Object.keys(e),s=o.length;s-- >0;){var i=o[s],a=t[i];if(a){var l=e[i],c=void 0===l||a(l,i,e);if(!0!==c)throw new r("option "+i+" must be "+c,r.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new r("Unknown option "+i,r.ERR_BAD_OPTION)}},validators:s}},4867:(e,t,n)=>{"use strict";var o,r=n(1849),s=Object.prototype.toString,i=(o=Object.create(null),function(e){var t=s.call(e);return o[t]||(o[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return i(t)===e}}function l(e){return Array.isArray(e)}function c(e){return void 0===e}var d=a("ArrayBuffer");function u(e){return null!==e&&"object"==typeof e}function h(e){if("object"!==i(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var m=a("Date"),p=a("File"),f=a("Blob"),g=a("FileList");function b(e){return"[object Function]"===s.call(e)}var v=a("URLSearchParams");function y(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),l(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var x,w=(x="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return x&&e instanceof x});e.exports={isArray:l,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||s.call(e)===t||b(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isPlainObject:h,isUndefined:c,isDate:m,isFile:p,isBlob:f,isFunction:b,isStream:function(e){return u(e)&&b(e.pipe)},isURLSearchParams:v,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:y,merge:function e(){var t={};function n(n,o){h(t[o])&&h(n)?t[o]=e(t[o],n):h(n)?t[o]=e({},n):l(n)?t[o]=n.slice():t[o]=n}for(var o=0,r=arguments.length;o<r;o++)y(arguments[o],n);return t},extend:function(e,t,n){return y(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,o){e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var o,r,s,i={};t=t||{};do{for(r=(o=Object.getOwnPropertyNames(e)).length;r-- >0;)i[s=o[r]]||(t[s]=e[s],i[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var o=e.indexOf(t,n);return-1!==o&&o===n},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:w,isFileList:g}},9662:(e,t,n)=>{var o=n(614),r=n(6330),s=TypeError;e.exports=function(e){if(o(e))return e;throw s(r(e)+" is not a function")}},9483:(e,t,n)=>{var o=n(4411),r=n(6330),s=TypeError;e.exports=function(e){if(o(e))return e;throw s(r(e)+" is not a constructor")}},6077:(e,t,n)=>{var o=n(614),r=String,s=TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw s("Can't set "+r(e)+" as a prototype")}},1223:(e,t,n)=>{var o=n(5112),r=n(30),s=n(3070).f,i=o("unscopables"),a=Array.prototype;null==a[i]&&s(a,i,{configurable:!0,value:r(null)}),e.exports=function(e){a[i][e]=!0}},1530:(e,t,n)=>{"use strict";var o=n(8710).charAt;e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},5787:(e,t,n)=>{var o=n(7976),r=TypeError;e.exports=function(e,t){if(o(t,e))return e;throw r("Incorrect invocation")}},9670:(e,t,n)=>{var o=n(111),r=String,s=TypeError;e.exports=function(e){if(o(e))return e;throw s(r(e)+" is not an object")}},8533:(e,t,n)=>{"use strict";var o=n(2092).forEach,r=n(2133)("forEach");e.exports=r?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},8457:(e,t,n)=>{"use strict";var o=n(9974),r=n(6916),s=n(7908),i=n(3411),a=n(7659),l=n(4411),c=n(6244),d=n(6135),u=n(8554),h=n(1246),m=Array;e.exports=function(e){var t=s(e),n=l(this),p=arguments.length,f=p>1?arguments[1]:void 0,g=void 0!==f;g&&(f=o(f,p>2?arguments[2]:void 0));var b,v,y,x,w,C,_=h(t),S=0;if(!_||this===m&&a(_))for(b=c(t),v=n?new this(b):m(b);b>S;S++)C=g?f(t[S],S):t[S],d(v,S,C);else for(w=(x=u(t,_)).next,v=n?new this:[];!(y=r(w,x)).done;S++)C=g?i(x,f,[y.value,S],!0):y.value,d(v,S,C);return v.length=S,v}},1318:(e,t,n)=>{var o=n(5656),r=n(1400),s=n(6244),i=function(e){return function(t,n,i){var a,l=o(t),c=s(l),d=r(i,c);if(e&&n!=n){for(;c>d;)if((a=l[d++])!=a)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},2092:(e,t,n)=>{var o=n(9974),r=n(1702),s=n(8361),i=n(7908),a=n(6244),l=n(5417),c=r([].push),d=function(e){var t=1==e,n=2==e,r=3==e,d=4==e,u=6==e,h=7==e,m=5==e||u;return function(p,f,g,b){for(var v,y,x=i(p),w=s(x),C=o(f,g),_=a(w),S=0,k=b||l,E=t?k(p,_):n||h?k(p,0):void 0;_>S;S++)if((m||S in w)&&(y=C(v=w[S],S,x),e))if(t)E[S]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:c(E,v)}else switch(e){case 4:return!1;case 7:c(E,v)}return u?-1:r||d?d:E}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},1194:(e,t,n)=>{var o=n(7293),r=n(5112),s=n(7392),i=r("species");e.exports=function(e){return s>=51||!o((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2133:(e,t,n)=>{"use strict";var o=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&o((function(){n.call(null,t||function(){return 1},1)}))}},1589:(e,t,n)=>{var o=n(1400),r=n(6244),s=n(6135),i=Array,a=Math.max;e.exports=function(e,t,n){for(var l=r(e),c=o(t,l),d=o(void 0===n?l:n,l),u=i(a(d-c,0)),h=0;c<d;c++,h++)s(u,h,e[c]);return u.length=h,u}},206:(e,t,n)=>{var o=n(1702);e.exports=o([].slice)},4362:(e,t,n)=>{var o=n(1589),r=Math.floor,s=function(e,t){var n=e.length,l=r(n/2);return n<8?i(e,t):a(e,s(o(e,0,l),t),s(o(e,l),t),t)},i=function(e,t){for(var n,o,r=e.length,s=1;s<r;){for(o=s,n=e[s];o&&t(e[o-1],n)>0;)e[o]=e[--o];o!==s++&&(e[o]=n)}return e},a=function(e,t,n,o){for(var r=t.length,s=n.length,i=0,a=0;i<r||a<s;)e[i+a]=i<r&&a<s?o(t[i],n[a])<=0?t[i++]:n[a++]:i<r?t[i++]:n[a++];return e};e.exports=s},7475:(e,t,n)=>{var o=n(3157),r=n(4411),s=n(111),i=n(5112)("species"),a=Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,(r(t)&&(t===a||o(t.prototype))||s(t)&&null===(t=t[i]))&&(t=void 0)),void 0===t?a:t}},5417:(e,t,n)=>{var o=n(7475);e.exports=function(e,t){return new(o(e))(0===t?0:t)}},3411:(e,t,n)=>{var o=n(9670),r=n(9212);e.exports=function(e,t,n,s){try{return s?t(o(n)[0],n[1]):t(n)}catch(t){r(e,"throw",t)}}},7072:(e,t,n)=>{var o=n(5112)("iterator"),r=!1;try{var s=0,i={next:function(){return{done:!!s++}},return:function(){r=!0}};i[o]=function(){return this},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var s={};s[o]=function(){return{next:function(){return{done:n=!0}}}},e(s)}catch(e){}return n}},4326:(e,t,n)=>{var o=n(1702),r=o({}.toString),s=o("".slice);e.exports=function(e){return s(r(e),8,-1)}},648:(e,t,n)=>{var o=n(1694),r=n(614),s=n(4326),i=n(5112)("toStringTag"),a=Object,l="Arguments"==s(function(){return arguments}());e.exports=o?s:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),i))?n:l?s(t):"Object"==(o=s(t))&&r(t.callee)?"Arguments":o}},9920:(e,t,n)=>{var o=n(2597),r=n(3887),s=n(1236),i=n(3070);e.exports=function(e,t,n){for(var a=r(t),l=i.f,c=s.f,d=0;d<a.length;d++){var u=a[d];o(e,u)||n&&o(n,u)||l(e,u,c(t,u))}}},8544:(e,t,n)=>{var o=n(7293);e.exports=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:(e,t,n)=>{"use strict";var o=n(3383).IteratorPrototype,r=n(30),s=n(9114),i=n(8003),a=n(7497),l=function(){return this};e.exports=function(e,t,n,c){var d=t+" Iterator";return e.prototype=r(o,{next:s(+!c,n)}),i(e,d,!1,!0),a[d]=l,e}},8880:(e,t,n)=>{var o=n(9781),r=n(3070),s=n(9114);e.exports=o?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,n)=>{"use strict";var o=n(4948),r=n(3070),s=n(9114);e.exports=function(e,t,n){var i=o(t);i in e?r.f(e,i,s(0,n)):e[i]=n}},7045:(e,t,n)=>{var o=n(6339),r=n(3070);e.exports=function(e,t,n){return n.get&&o(n.get,t,{getter:!0}),n.set&&o(n.set,t,{setter:!0}),r.f(e,t,n)}},8052:(e,t,n)=>{var o=n(614),r=n(3070),s=n(6339),i=n(3072);e.exports=function(e,t,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:t;return o(n)&&s(n,c,a),a.global?l?e[t]=n:i(t,n):(a.unsafe?e[t]&&(l=!0):delete e[t],l?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})),e}},9190:(e,t,n)=>{var o=n(8052);e.exports=function(e,t,n){for(var r in t)o(e,r,t[r],n);return e}},3072:(e,t,n)=>{var o=n(7854),r=Object.defineProperty;e.exports=function(e,t){try{r(o,e,{value:t,configurable:!0,writable:!0})}catch(n){o[e]=t}return t}},654:(e,t,n)=>{"use strict";var o=n(2109),r=n(6916),s=n(1913),i=n(6530),a=n(614),l=n(4994),c=n(9518),d=n(7674),u=n(8003),h=n(8880),m=n(8052),p=n(5112),f=n(7497),g=n(3383),b=i.PROPER,v=i.CONFIGURABLE,y=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,w=p("iterator"),C="keys",_="values",S="entries",k=function(){return this};e.exports=function(e,t,n,i,p,g,E){l(n,t,i);var O,T,A,D=function(e){if(e===p&&L)return L;if(!x&&e in N)return N[e];switch(e){case C:case _:case S:return function(){return new n(this,e)}}return function(){return new n(this)}},R=t+" Iterator",M=!1,N=e.prototype,P=N[w]||N["@@iterator"]||p&&N[p],L=!x&&P||D(p),B="Array"==t&&N.entries||P;if(B&&(O=c(B.call(new e)))!==Object.prototype&&O.next&&(s||c(O)===y||(d?d(O,y):a(O[w])||m(O,w,k)),u(O,R,!0,!0),s&&(f[R]=k)),b&&p==_&&P&&P.name!==_&&(!s&&v?h(N,"name",_):(M=!0,L=function(){return r(P,this)})),p)if(T={values:D(_),keys:g?L:D(C),entries:D(S)},E)for(A in T)(x||M||!(A in N))&&m(N,A,T[A]);else o({target:t,proto:!0,forced:x||M},T);return s&&!E||N[w]===L||m(N,w,L,{name:p}),f[t]=L,T}},7235:(e,t,n)=>{var o=n(857),r=n(2597),s=n(6061),i=n(3070).f;e.exports=function(e){var t=o.Symbol||(o.Symbol={});r(t,e)||i(t,e,{value:s.f(e)})}},9781:(e,t,n)=>{var o=n(7293);e.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(e,t,n)=>{var o=n(7854),r=n(111),s=o.document,i=r(s)&&r(s.createElement);e.exports=function(e){return i?s.createElement(e):{}}},7207:e=>{var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(e,t,n)=>{var o=n(317)("span").classList,r=o&&o.constructor&&o.constructor.prototype;e.exports=r===Object.prototype?void 0:r},7871:e=>{e.exports="object"==typeof window&&"object"!=typeof Deno},1528:(e,t,n)=>{var o=n(8113),r=n(7854);e.exports=/ipad|iphone|ipod/i.test(o)&&void 0!==r.Pebble},6833:(e,t,n)=>{var o=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},5268:(e,t,n)=>{var o=n(4326),r=n(7854);e.exports="process"==o(r.process)},1036:(e,t,n)=>{var o=n(8113);e.exports=/web0s(?!.*chrome)/i.test(o)},8113:(e,t,n)=>{var o=n(5005);e.exports=o("navigator","userAgent")||""},7392:(e,t,n)=>{var o,r,s=n(7854),i=n(8113),a=s.process,l=s.Deno,c=a&&a.versions||l&&l.version,d=c&&c.v8;d&&(r=(o=d.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&i&&(!(o=i.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=i.match(/Chrome\/(\d+)/))&&(r=+o[1]),e.exports=r},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,n)=>{var o=n(7854),r=n(1236).f,s=n(8880),i=n(8052),a=n(3072),l=n(9920),c=n(4705);e.exports=function(e,t){var n,d,u,h,m,p=e.target,f=e.global,g=e.stat;if(n=f?o:g?o[p]||a(p,{}):(o[p]||{}).prototype)for(d in t){if(h=t[d],u=e.dontCallGetSet?(m=r(n,d))&&m.value:n[d],!c(f?d:p+(g?".":"#")+d,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;l(h,u)}(e.sham||u&&u.sham)&&s(h,"sham",!0),i(n,d,h,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:(e,t,n)=>{"use strict";n(4916);var o=n(1702),r=n(8052),s=n(2261),i=n(7293),a=n(5112),l=n(8880),c=a("species"),d=RegExp.prototype;e.exports=function(e,t,n,u){var h=a(e),m=!i((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),p=m&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!m||!p||n){var f=o(/./[h]),g=t(h,""[e],(function(e,t,n,r,i){var a=o(e),l=t.exec;return l===s||l===d.exec?m&&!i?{done:!0,value:f(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));r(String.prototype,e,g[0]),r(d,h,g[1])}u&&l(d[h],"sham",!0)}},2104:(e,t,n)=>{var o=n(4374),r=Function.prototype,s=r.apply,i=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?i.bind(s):function(){return i.apply(s,arguments)})},9974:(e,t,n)=>{var o=n(1702),r=n(9662),s=n(4374),i=o(o.bind);e.exports=function(e,t){return r(e),void 0===t?e:s?i(e,t):function(){return e.apply(t,arguments)}}},4374:(e,t,n)=>{var o=n(7293);e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},7065:(e,t,n)=>{"use strict";var o=n(1702),r=n(9662),s=n(111),i=n(2597),a=n(206),l=n(4374),c=Function,d=o([].concat),u=o([].join),h={},m=function(e,t,n){if(!i(h,t)){for(var o=[],r=0;r<t;r++)o[r]="a["+r+"]";h[t]=c("C,a","return new C("+u(o,",")+")")}return h[t](e,n)};e.exports=l?c.bind:function(e){var t=r(this),n=t.prototype,o=a(arguments,1),i=function(){var n=d(o,a(arguments));return this instanceof i?m(t,n.length,n):t.apply(e,n)};return s(n)&&(i.prototype=n),i}},6916:(e,t,n)=>{var o=n(4374),r=Function.prototype.call;e.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},6530:(e,t,n)=>{var o=n(9781),r=n(2597),s=Function.prototype,i=o&&Object.getOwnPropertyDescriptor,a=r(s,"name"),l=a&&"something"===function(){}.name,c=a&&(!o||o&&i(s,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},1702:(e,t,n)=>{var o=n(4374),r=Function.prototype,s=r.bind,i=r.call,a=o&&s.bind(i,i);e.exports=o?function(e){return e&&a(e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},5005:(e,t,n)=>{var o=n(7854),r=n(614),s=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(o[e]):o[e]&&o[e][t]}},1246:(e,t,n)=>{var o=n(648),r=n(8173),s=n(7497),i=n(5112)("iterator");e.exports=function(e){if(null!=e)return r(e,i)||r(e,"@@iterator")||s[o(e)]}},8554:(e,t,n)=>{var o=n(6916),r=n(9662),s=n(9670),i=n(6330),a=n(1246),l=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(r(n))return s(o(n,e));throw l(i(e)+" is not iterable")}},8173:(e,t,n)=>{var o=n(9662);e.exports=function(e,t){var n=e[t];return null==n?void 0:o(n)}},647:(e,t,n)=>{var o=n(1702),r=n(7908),s=Math.floor,i=o("".charAt),a=o("".replace),l=o("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,o,u,h){var m=n+e.length,p=o.length,f=d;return void 0!==u&&(u=r(u),f=c),a(h,f,(function(r,a){var c;switch(i(a,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,m);case"<":c=u[l(a,1,-1)];break;default:var d=+a;if(0===d)return r;if(d>p){var h=s(d/10);return 0===h?r:h<=p?void 0===o[h-1]?i(a,1):o[h-1]+i(a,1):r}c=o[d-1]}return void 0===c?"":c}))}},7854:(e,t,n)=>{var o=function(e){return e&&e.Math==Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:(e,t,n)=>{var o=n(1702),r=n(7908),s=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(r(e),t)}},3501:e=>{e.exports={}},842:(e,t,n)=>{var o=n(7854);e.exports=function(e,t){var n=o.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},490:(e,t,n)=>{var o=n(5005);e.exports=o("document","documentElement")},4664:(e,t,n)=>{var o=n(9781),r=n(7293),s=n(317);e.exports=!o&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,n)=>{var o=n(1702),r=n(7293),s=n(4326),i=Object,a=o("".split);e.exports=r((function(){return!i("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a(e,""):i(e)}:i},9587:(e,t,n)=>{var o=n(614),r=n(111),s=n(7674);e.exports=function(e,t,n){var i,a;return s&&o(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&s(e,a),e}},2788:(e,t,n)=>{var o=n(1702),r=n(614),s=n(5465),i=o(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return i(e)}),e.exports=s.inspectSource},9909:(e,t,n)=>{var o,r,s,i=n(8536),a=n(7854),l=n(1702),c=n(111),d=n(8880),u=n(2597),h=n(5465),m=n(6200),p=n(3501),f="Object already initialized",g=a.TypeError,b=a.WeakMap;if(i||h.state){var v=h.state||(h.state=new b),y=l(v.get),x=l(v.has),w=l(v.set);o=function(e,t){if(x(v,e))throw new g(f);return t.facade=e,w(v,e,t),t},r=function(e){return y(v,e)||{}},s=function(e){return x(v,e)}}else{var C=m("state");p[C]=!0,o=function(e,t){if(u(e,C))throw new g(f);return t.facade=e,d(e,C,t),t},r=function(e){return u(e,C)?e[C]:{}},s=function(e){return u(e,C)}}e.exports={set:o,get:r,has:s,enforce:function(e){return s(e)?r(e):o(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=r(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}}}},7659:(e,t,n)=>{var o=n(5112),r=n(7497),s=o("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[s]===e)}},3157:(e,t,n)=>{var o=n(4326);e.exports=Array.isArray||function(e){return"Array"==o(e)}},614:e=>{e.exports=function(e){return"function"==typeof e}},4411:(e,t,n)=>{var o=n(1702),r=n(7293),s=n(614),i=n(648),a=n(5005),l=n(2788),c=function(){},d=[],u=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,m=o(h.exec),p=!h.exec(c),f=function(e){if(!s(e))return!1;try{return u(c,d,e),!0}catch(e){return!1}},g=function(e){if(!s(e))return!1;switch(i(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!m(h,l(e))}catch(e){return!0}};g.sham=!0,e.exports=!u||r((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?g:f},4705:(e,t,n)=>{var o=n(7293),r=n(614),s=/#|\.prototype\./,i=function(e,t){var n=l[a(e)];return n==d||n!=c&&(r(t)?o(t):!!t)},a=i.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=i.data={},c=i.NATIVE="N",d=i.POLYFILL="P";e.exports=i},111:(e,t,n)=>{var o=n(614);e.exports=function(e){return"object"==typeof e?null!==e:o(e)}},1913:e=>{e.exports=!1},2190:(e,t,n)=>{var o=n(5005),r=n(614),s=n(7976),i=n(4774),a=Object;e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return r(t)&&s(t.prototype,a(e))}},408:(e,t,n)=>{var o=n(9974),r=n(6916),s=n(9670),i=n(6330),a=n(7659),l=n(6244),c=n(7976),d=n(8554),u=n(1246),h=n(9212),m=TypeError,p=function(e,t){this.stopped=e,this.result=t},f=p.prototype;e.exports=function(e,t,n){var g,b,v,y,x,w,C,_=n&&n.that,S=!(!n||!n.AS_ENTRIES),k=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),O=o(t,_),T=function(e){return g&&h(g,"normal",e),new p(!0,e)},A=function(e){return S?(s(e),E?O(e[0],e[1],T):O(e[0],e[1])):E?O(e,T):O(e)};if(k)g=e;else{if(!(b=u(e)))throw m(i(e)+" is not iterable");if(a(b)){for(v=0,y=l(e);y>v;v++)if((x=A(e[v]))&&c(f,x))return x;return new p(!1)}g=d(e,b)}for(w=g.next;!(C=r(w,g)).done;){try{x=A(C.value)}catch(e){h(g,"throw",e)}if("object"==typeof x&&x&&c(f,x))return x}return new p(!1)}},9212:(e,t,n)=>{var o=n(6916),r=n(9670),s=n(8173);e.exports=function(e,t,n){var i,a;r(e);try{if(!(i=s(e,"return"))){if("throw"===t)throw n;return n}i=o(i,e)}catch(e){a=!0,i=e}if("throw"===t)throw n;if(a)throw i;return r(i),n}},3383:(e,t,n)=>{"use strict";var o,r,s,i=n(7293),a=n(614),l=n(30),c=n(9518),d=n(8052),u=n(5112),h=n(1913),m=u("iterator"),p=!1;[].keys&&("next"in(s=[].keys())?(r=c(c(s)))!==Object.prototype&&(o=r):p=!0),null==o||i((function(){var e={};return o[m].call(e)!==e}))?o={}:h&&(o=l(o)),a(o[m])||d(o,m,(function(){return this})),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:p}},7497:e=>{e.exports={}},6244:(e,t,n)=>{var o=n(7466);e.exports=function(e){return o(e.length)}},6339:(e,t,n)=>{var o=n(7293),r=n(614),s=n(2597),i=n(9781),a=n(6530).CONFIGURABLE,l=n(2788),c=n(9909),d=c.enforce,u=c.get,h=Object.defineProperty,m=i&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),p=String(String).split("String"),f=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||a&&e.name!==t)&&h(e,"name",{value:t,configurable:!0}),m&&n&&s(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?i&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var o=d(e);return s(o,"source")||(o.source=p.join("string"==typeof t?t:"")),e};Function.prototype.toString=f((function(){return r(this)&&u(this).source||l(this)}),"toString")},4758:e=>{var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var o=+e;return(o>0?n:t)(o)}},5948:(e,t,n)=>{var o,r,s,i,a,l,c,d,u=n(7854),h=n(9974),m=n(1236).f,p=n(261).set,f=n(6833),g=n(1528),b=n(1036),v=n(5268),y=u.MutationObserver||u.WebKitMutationObserver,x=u.document,w=u.process,C=u.Promise,_=m(u,"queueMicrotask"),S=_&&_.value;S||(o=function(){var e,t;for(v&&(e=w.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?i():s=void 0,e}}s=void 0,e&&e.enter()},f||v||b||!y||!x?!g&&C&&C.resolve?((c=C.resolve(void 0)).constructor=C,d=h(c.then,c),i=function(){d(o)}):v?i=function(){w.nextTick(o)}:(p=h(p,u),i=function(){p(o)}):(a=!0,l=x.createTextNode(""),new y(o).observe(l,{characterData:!0}),i=function(){l.data=a=!a})),e.exports=S||function(e){var t={fn:e,next:void 0};s&&(s.next=t),r||(r=t,i()),s=t}},735:(e,t,n)=>{var o=n(133);e.exports=o&&!!Symbol.for&&!!Symbol.keyFor},133:(e,t,n)=>{var o=n(7392),r=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},590:(e,t,n)=>{var o=n(7293),r=n(5112),s=n(1913),i=r("iterator");e.exports=!o((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,o){t.delete("b"),n+=o+e})),s&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},8536:(e,t,n)=>{var o=n(7854),r=n(614),s=n(2788),i=o.WeakMap;e.exports=r(i)&&/native code/.test(s(i))},8523:(e,t,n)=>{"use strict";var o=n(9662),r=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=o})),this.resolve=o(t),this.reject=o(n)};e.exports.f=function(e){return new r(e)}},1574:(e,t,n)=>{"use strict";var o=n(9781),r=n(1702),s=n(6916),i=n(7293),a=n(1956),l=n(5181),c=n(5296),d=n(7908),u=n(8361),h=Object.assign,m=Object.defineProperty,p=r([].concat);e.exports=!h||i((function(){if(o&&1!==h({b:1},h(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=h({},e)[n]||a(h({},t)).join("")!=r}))?function(e,t){for(var n=d(e),r=arguments.length,i=1,h=l.f,m=c.f;r>i;)for(var f,g=u(arguments[i++]),b=h?p(a(g),h(g)):a(g),v=b.length,y=0;v>y;)f=b[y++],o&&!s(m,g,f)||(n[f]=g[f]);return n}:h},30:(e,t,n)=>{var o,r=n(9670),s=n(6048),i=n(748),a=n(3501),l=n(490),c=n(317),d=n(6200),u=d("IE_PROTO"),h=function(){},m=function(e){return"<script>"+e+"</"+"script>"},p=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{o=new ActiveXObject("htmlfile")}catch(e){}var e,t;f="undefined"!=typeof document?document.domain&&o?p(o):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):p(o);for(var n=i.length;n--;)delete f.prototype[i[n]];return f()};a[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=r(e),n=new h,h.prototype=null,n[u]=e):n=f(),void 0===t?n:s.f(n,t)}},6048:(e,t,n)=>{var o=n(9781),r=n(3353),s=n(3070),i=n(9670),a=n(5656),l=n(1956);t.f=o&&!r?Object.defineProperties:function(e,t){i(e);for(var n,o=a(t),r=l(t),c=r.length,d=0;c>d;)s.f(e,n=r[d++],o[n]);return e}},3070:(e,t,n)=>{var o=n(9781),r=n(4664),s=n(3353),i=n(9670),a=n(4948),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",m="writable";t.f=o?s?function(e,t,n){if(i(e),t=a(t),i(n),"function"==typeof e&&"prototype"===t&&"value"in n&&m in n&&!n.writable){var o=d(e,t);o&&o.writable&&(e[t]=n.value,n={configurable:h in n?n.configurable:o.configurable,enumerable:u in n?n.enumerable:o.enumerable,writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(i(e),t=a(t),i(n),r)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:(e,t,n)=>{var o=n(9781),r=n(6916),s=n(5296),i=n(9114),a=n(5656),l=n(4948),c=n(2597),d=n(4664),u=Object.getOwnPropertyDescriptor;t.f=o?u:function(e,t){if(e=a(e),t=l(t),d)try{return u(e,t)}catch(e){}if(c(e,t))return i(!r(s.f,e,t),e[t])}},1156:(e,t,n)=>{var o=n(4326),r=n(5656),s=n(8006).f,i=n(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==o(e)?function(e){try{return s(e)}catch(e){return i(a)}}(e):s(r(e))}},8006:(e,t,n)=>{var o=n(6324),r=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,n)=>{var o=n(2597),r=n(614),s=n(7908),i=n(6200),a=n(8544),l=i("IE_PROTO"),c=Object,d=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=s(e);if(o(t,l))return t[l];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof c?d:null}},7976:(e,t,n)=>{var o=n(1702);e.exports=o({}.isPrototypeOf)},6324:(e,t,n)=>{var o=n(1702),r=n(2597),s=n(5656),i=n(1318).indexOf,a=n(3501),l=o([].push);e.exports=function(e,t){var n,o=s(e),c=0,d=[];for(n in o)!r(a,n)&&r(o,n)&&l(d,n);for(;t.length>c;)r(o,n=t[c++])&&(~i(d,n)||l(d,n));return d}},1956:(e,t,n)=>{var o=n(6324),r=n(748);e.exports=Object.keys||function(e){return o(e,r)}},5296:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!n.call({1:2},1);t.f=r?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},7674:(e,t,n)=>{var o=n(1702),r=n(9670),s=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),s(o),t?e(n,o):n.__proto__=o,n}}():void 0)},288:(e,t,n)=>{"use strict";var o=n(1694),r=n(648);e.exports=o?{}.toString:function(){return"[object "+r(this)+"]"}},2140:(e,t,n)=>{var o=n(6916),r=n(614),s=n(111),i=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&r(n=e.toString)&&!s(a=o(n,e)))return a;if(r(n=e.valueOf)&&!s(a=o(n,e)))return a;if("string"!==t&&r(n=e.toString)&&!s(a=o(n,e)))return a;throw i("Can't convert object to primitive value")}},3887:(e,t,n)=>{var o=n(5005),r=n(1702),s=n(8006),i=n(5181),a=n(9670),l=r([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=i.f;return n?l(t,n(e)):t}},857:(e,t,n)=>{var o=n(7854);e.exports=o},2534:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},3702:(e,t,n)=>{var o=n(7854),r=n(2492),s=n(614),i=n(4705),a=n(2788),l=n(5112),c=n(7871),d=n(1913),u=n(7392),h=r&&r.prototype,m=l("species"),p=!1,f=s(o.PromiseRejectionEvent),g=i("Promise",(function(){var e=a(r),t=e!==String(r);if(!t&&66===u)return!0;if(d&&(!h.catch||!h.finally))return!0;if(u>=51&&/native code/.test(e))return!1;var n=new r((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))};return(n.constructor={})[m]=o,!(p=n.then((function(){}))instanceof o)||!t&&c&&!f}));e.exports={CONSTRUCTOR:g,REJECTION_EVENT:f,SUBCLASSING:p}},2492:(e,t,n)=>{var o=n(7854);e.exports=o.Promise},9478:(e,t,n)=>{var o=n(9670),r=n(111),s=n(8523);e.exports=function(e,t){if(o(e),r(t)&&t.constructor===e)return t;var n=s.f(e);return(0,n.resolve)(t),n.promise}},612:(e,t,n)=>{var o=n(2492),r=n(7072),s=n(3702).CONSTRUCTOR;e.exports=s||!r((function(e){o.all(e).then(void 0,(function(){}))}))},8572:e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},7651:(e,t,n)=>{var o=n(6916),r=n(9670),s=n(614),i=n(4326),a=n(2261),l=TypeError;e.exports=function(e,t){var n=e.exec;if(s(n)){var c=o(n,e,t);return null!==c&&r(c),c}if("RegExp"===i(e))return o(a,e,t);throw l("RegExp#exec called on incompatible receiver")}},2261:(e,t,n)=>{"use strict";var o,r,s=n(6916),i=n(1702),a=n(1340),l=n(7066),c=n(2999),d=n(2309),u=n(30),h=n(9909).get,m=n(9441),p=n(7168),f=d("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,b=g,v=i("".charAt),y=i("".indexOf),x=i("".replace),w=i("".slice),C=(r=/b*/g,s(g,o=/a/,"a"),s(g,r,"a"),0!==o.lastIndex||0!==r.lastIndex),_=c.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(C||S||_||m||p)&&(b=function(e){var t,n,o,r,i,c,d,m=this,p=h(m),k=a(e),E=p.raw;if(E)return E.lastIndex=m.lastIndex,t=s(b,E,k),m.lastIndex=E.lastIndex,t;var O=p.groups,T=_&&m.sticky,A=s(l,m),D=m.source,R=0,M=k;if(T&&(A=x(A,"y",""),-1===y(A,"g")&&(A+="g"),M=w(k,m.lastIndex),m.lastIndex>0&&(!m.multiline||m.multiline&&"\n"!==v(k,m.lastIndex-1))&&(D="(?: "+D+")",M=" "+M,R++),n=new RegExp("^(?:"+D+")",A)),S&&(n=new RegExp("^"+D+"$(?!\\s)",A)),C&&(o=m.lastIndex),r=s(g,T?n:m,M),T?r?(r.input=w(r.input,R),r[0]=w(r[0],R),r.index=m.lastIndex,m.lastIndex+=r[0].length):m.lastIndex=0:C&&r&&(m.lastIndex=m.global?r.index+r[0].length:o),S&&r&&r.length>1&&s(f,r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r&&O)for(r.groups=c=u(null),i=0;i<O.length;i++)c[(d=O[i])[0]]=r[d[1]];return r}),e.exports=b},7066:(e,t,n)=>{"use strict";var o=n(9670);e.exports=function(){var e=o(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2999:(e,t,n)=>{var o=n(7293),r=n(7854).RegExp,s=o((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),i=s||o((function(){return!r("a","y").sticky})),a=s||o((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:i,UNSUPPORTED_Y:s}},9441:(e,t,n)=>{var o=n(7293),r=n(7854).RegExp;e.exports=o((function(){var e=r(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:(e,t,n)=>{var o=n(7293),r=n(7854).RegExp;e.exports=o((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:e=>{var t=TypeError;e.exports=function(e){if(null==e)throw t("Can't call method on "+e);return e}},6340:(e,t,n)=>{"use strict";var o=n(5005),r=n(3070),s=n(5112),i=n(9781),a=s("species");e.exports=function(e){var t=o(e),n=r.f;i&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},8003:(e,t,n)=>{var o=n(3070).f,r=n(2597),s=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!r(e,s)&&o(e,s,{configurable:!0,value:t})}},6200:(e,t,n)=>{var o=n(2309),r=n(9711),s=o("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},5465:(e,t,n)=>{var o=n(7854),r=n(3072),s="__core-js_shared__",i=o[s]||r(s,{});e.exports=i},2309:(e,t,n)=>{var o=n(1913),r=n(5465);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.23.1",mode:o?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(e,t,n)=>{var o=n(9670),r=n(9483),s=n(5112)("species");e.exports=function(e,t){var n,i=o(e).constructor;return void 0===i||null==(n=o(i)[s])?t:r(n)}},8710:(e,t,n)=>{var o=n(1702),r=n(9303),s=n(1340),i=n(4488),a=o("".charAt),l=o("".charCodeAt),c=o("".slice),d=function(e){return function(t,n){var o,d,u=s(i(t)),h=r(n),m=u.length;return h<0||h>=m?e?"":void 0:(o=l(u,h))<55296||o>56319||h+1===m||(d=l(u,h+1))<56320||d>57343?e?a(u,h):o:e?c(u,h,h+2):d-56320+(o-55296<<10)+65536}};e.exports={codeAt:d(!1),charAt:d(!0)}},3197:(e,t,n)=>{"use strict";var o=n(1702),r=2147483647,s=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",l=RangeError,c=o(i.exec),d=Math.floor,u=String.fromCharCode,h=o("".charCodeAt),m=o([].join),p=o([].push),f=o("".replace),g=o("".split),b=o("".toLowerCase),v=function(e){return e+22+75*(e<26)},y=function(e,t,n){var o=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;)e=d(e/35),o+=36;return d(o+36*e/(e+38))},x=function(e){var t=[];e=function(e){for(var t=[],n=0,o=e.length;n<o;){var r=h(e,n++);if(r>=55296&&r<=56319&&n<o){var s=h(e,n++);56320==(64512&s)?p(t,((1023&r)<<10)+(1023&s)+65536):(p(t,r),n--)}else p(t,r)}return t}(e);var n,o,s=e.length,i=128,c=0,f=72;for(n=0;n<e.length;n++)(o=e[n])<128&&p(t,u(o));var g=t.length,b=g;for(g&&p(t,"-");b<s;){var x=r;for(n=0;n<e.length;n++)(o=e[n])>=i&&o<x&&(x=o);var w=b+1;if(x-i>d((r-c)/w))throw l(a);for(c+=(x-i)*w,i=x,n=0;n<e.length;n++){if((o=e[n])<i&&++c>r)throw l(a);if(o==i){for(var C=c,_=36;;){var S=_<=f?1:_>=f+26?26:_-f;if(C<S)break;var k=C-S,E=36-S;p(t,u(v(S+k%E))),C=d(k/E),_+=36}p(t,u(v(C))),f=y(c,w,b==g),c=0,b++}}c++,i++}return m(t,"")};e.exports=function(e){var t,n,o=[],r=g(f(b(e),i,"."),".");for(t=0;t<r.length;t++)n=r[t],p(o,c(s,n)?"xn--"+x(n):n);return m(o,".")}},3111:(e,t,n)=>{var o=n(1702),r=n(4488),s=n(1340),i=n(1361),a=o("".replace),l="["+i+"]",c=RegExp("^"+l+l+"*"),d=RegExp(l+l+"*$"),u=function(e){return function(t){var n=s(r(t));return 1&e&&(n=a(n,c,"")),2&e&&(n=a(n,d,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},6532:(e,t,n)=>{var o=n(6916),r=n(5005),s=n(5112),i=n(8052);e.exports=function(){var e=r("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,a=s("toPrimitive");t&&!t[a]&&i(t,a,(function(e){return o(n,this)}),{arity:1})}},261:(e,t,n)=>{var o,r,s,i,a=n(7854),l=n(2104),c=n(9974),d=n(614),u=n(2597),h=n(7293),m=n(490),p=n(206),f=n(317),g=n(8053),b=n(6833),v=n(5268),y=a.setImmediate,x=a.clearImmediate,w=a.process,C=a.Dispatch,_=a.Function,S=a.MessageChannel,k=a.String,E=0,O={},T="onreadystatechange";try{o=a.location}catch(e){}var A=function(e){if(u(O,e)){var t=O[e];delete O[e],t()}},D=function(e){return function(){A(e)}},R=function(e){A(e.data)},M=function(e){a.postMessage(k(e),o.protocol+"//"+o.host)};y&&x||(y=function(e){g(arguments.length,1);var t=d(e)?e:_(e),n=p(arguments,1);return O[++E]=function(){l(t,void 0,n)},r(E),E},x=function(e){delete O[e]},v?r=function(e){w.nextTick(D(e))}:C&&C.now?r=function(e){C.now(D(e))}:S&&!b?(i=(s=new S).port2,s.port1.onmessage=R,r=c(i.postMessage,i)):a.addEventListener&&d(a.postMessage)&&!a.importScripts&&o&&"file:"!==o.protocol&&!h(M)?(r=M,a.addEventListener("message",R,!1)):r=T in f("script")?function(e){m.appendChild(f("script")).onreadystatechange=function(){m.removeChild(this),A(e)}}:function(e){setTimeout(D(e),0)}),e.exports={set:y,clear:x}},863:(e,t,n)=>{var o=n(1702);e.exports=o(1..valueOf)},1400:(e,t,n)=>{var o=n(9303),r=Math.max,s=Math.min;e.exports=function(e,t){var n=o(e);return n<0?r(n+t,0):s(n,t)}},5656:(e,t,n)=>{var o=n(8361),r=n(4488);e.exports=function(e){return o(r(e))}},9303:(e,t,n)=>{var o=n(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:o(t)}},7466:(e,t,n)=>{var o=n(9303),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},7908:(e,t,n)=>{var o=n(4488),r=Object;e.exports=function(e){return r(o(e))}},7593:(e,t,n)=>{var o=n(6916),r=n(111),s=n(2190),i=n(8173),a=n(2140),l=n(5112),c=TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var n,l=i(e,d);if(l){if(void 0===t&&(t="default"),n=o(l,e,t),!r(n)||s(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:(e,t,n)=>{var o=n(7593),r=n(2190);e.exports=function(e){var t=o(e,"string");return r(t)?t:t+""}},1694:(e,t,n)=>{var o={};o[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(o)},1340:(e,t,n)=>{var o=n(648),r=String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},6330:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9711:(e,t,n)=>{var o=n(1702),r=0,s=Math.random(),i=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++r+s,36)}},4774:(e,t,n)=>{var o=n(133);e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,n)=>{var o=n(9781),r=n(7293);e.exports=o&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:e=>{var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},6061:(e,t,n)=>{var o=n(5112);t.f=o},5112:(e,t,n)=>{var o=n(7854),r=n(2309),s=n(2597),i=n(9711),a=n(133),l=n(4774),c=r("wks"),d=o.Symbol,u=d&&d.for,h=l?d:d&&d.withoutSetter||i;e.exports=function(e){if(!s(c,e)||!a&&"string"!=typeof c[e]){var t="Symbol."+e;a&&s(d,e)?c[e]=d[e]:c[e]=l&&u?u(t):h(t)}return c[e]}},1361:e=>{e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},2222:(e,t,n)=>{"use strict";var o=n(2109),r=n(7293),s=n(3157),i=n(111),a=n(7908),l=n(6244),c=n(7207),d=n(6135),u=n(5417),h=n(1194),m=n(5112),p=n(7392),f=m("isConcatSpreadable"),g=p>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),b=h("concat"),v=function(e){if(!i(e))return!1;var t=e[f];return void 0!==t?!!t:s(e)};o({target:"Array",proto:!0,arity:1,forced:!g||!b},{concat:function(e){var t,n,o,r,s,i=a(this),h=u(i,0),m=0;for(t=-1,o=arguments.length;t<o;t++)if(v(s=-1===t?i:arguments[t]))for(r=l(s),c(m+r),n=0;n<r;n++,m++)n in s&&d(h,m,s[n]);else c(m+1),d(h,m++,s);return h.length=m,h}})},9826:(e,t,n)=>{"use strict";var o=n(2109),r=n(2092).find,s=n(1223),i="find",a=!0;i in[]&&Array(1).find((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},9554:(e,t,n)=>{"use strict";var o=n(2109),r=n(8533);o({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},1038:(e,t,n)=>{var o=n(2109),r=n(8457);o({target:"Array",stat:!0,forced:!n(7072)((function(e){Array.from(e)}))},{from:r})},6992:(e,t,n)=>{"use strict";var o=n(5656),r=n(1223),s=n(7497),i=n(9909),a=n(3070).f,l=n(654),c=n(1913),d=n(9781),u="Array Iterator",h=i.set,m=i.getterFor(u);e.exports=l(Array,"Array",(function(e,t){h(this,{type:u,target:o(e),index:0,kind:t})}),(function(){var e=m(this),t=e.target,n=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:o,done:!1}:"values"==n?{value:t[o],done:!1}:{value:[o,t[o]],done:!1}}),"values");var p=s.Arguments=s.Array;if(r("keys"),r("values"),r("entries"),!c&&d&&"values"!==p.name)try{a(p,"name",{value:"values"})}catch(e){}},5069:(e,t,n)=>{"use strict";var o=n(2109),r=n(1702),s=n(3157),i=r([].reverse),a=[1,2];o({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),i(this)}})},7042:(e,t,n)=>{"use strict";var o=n(2109),r=n(3157),s=n(4411),i=n(111),a=n(1400),l=n(6244),c=n(5656),d=n(6135),u=n(5112),h=n(1194),m=n(206),p=h("slice"),f=u("species"),g=Array,b=Math.max;o({target:"Array",proto:!0,forced:!p},{slice:function(e,t){var n,o,u,h=c(this),p=l(h),v=a(e,p),y=a(void 0===t?p:t,p);if(r(h)&&(n=h.constructor,(s(n)&&(n===g||r(n.prototype))||i(n)&&null===(n=n[f]))&&(n=void 0),n===g||void 0===n))return m(h,v,y);for(o=new(void 0===n?g:n)(b(y-v,0)),u=0;v<y;v++,u++)v in h&&d(o,u,h[v]);return o.length=u,o}})},4812:(e,t,n)=>{var o=n(2109),r=n(7065);o({target:"Function",proto:!0,forced:Function.bind!==r},{bind:r})},8309:(e,t,n)=>{var o=n(9781),r=n(6530).EXISTS,s=n(1702),i=n(3070).f,a=Function.prototype,l=s(a.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=s(c.exec);o&&!r&&i(a,"name",{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(e){return""}}})},8862:(e,t,n)=>{var o=n(2109),r=n(5005),s=n(2104),i=n(6916),a=n(1702),l=n(7293),c=n(3157),d=n(614),u=n(111),h=n(2190),m=n(206),p=n(133),f=r("JSON","stringify"),g=a(/./.exec),b=a("".charAt),v=a("".charCodeAt),y=a("".replace),x=a(1..toString),w=/[\uD800-\uDFFF]/g,C=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,S=!p||l((function(){var e=r("Symbol")();return"[null]"!=f([e])||"{}"!=f({a:e})||"{}"!=f(Object(e))})),k=l((function(){return'"\\udf06\\ud834"'!==f("\udf06\ud834")||'"\\udead"'!==f("\udead")})),E=function(e,t){var n=m(arguments),o=t;if((u(t)||void 0!==e)&&!h(e))return c(t)||(t=function(e,t){if(d(o)&&(t=i(o,this,e,t)),!h(t))return t}),n[1]=t,s(f,null,n)},O=function(e,t,n){var o=b(n,t-1),r=b(n,t+1);return g(C,e)&&!g(_,r)||g(_,e)&&!g(C,o)?"\\u"+x(v(e,0),16):e};f&&o({target:"JSON",stat:!0,arity:3,forced:S||k},{stringify:function(e,t,n){var o=m(arguments),r=s(S?E:f,null,o);return k&&"string"==typeof r?y(r,w,O):r}})},3706:(e,t,n)=>{var o=n(7854);n(8003)(o.JSON,"JSON",!0)},2703:(e,t,n)=>{n(8003)(Math,"Math",!0)},9653:(e,t,n)=>{"use strict";var o=n(9781),r=n(7854),s=n(1702),i=n(4705),a=n(8052),l=n(2597),c=n(9587),d=n(7976),u=n(2190),h=n(7593),m=n(7293),p=n(8006).f,f=n(1236).f,g=n(3070).f,b=n(863),v=n(3111).trim,y="Number",x=r.Number,w=x.prototype,C=r.TypeError,_=s("".slice),S=s("".charCodeAt),k=function(e){var t=h(e,"number");return"bigint"==typeof t?t:E(t)},E=function(e){var t,n,o,r,s,i,a,l,c=h(e,"number");if(u(c))throw C("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=v(c),43===(t=S(c,0))||45===t){if(88===(n=S(c,2))||120===n)return NaN}else if(48===t){switch(S(c,1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+c}for(i=(s=_(c,2)).length,a=0;a<i;a++)if((l=S(s,a))<48||l>r)return NaN;return parseInt(s,o)}return+c};if(i(y,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var O,T=function(e){var t=arguments.length<1?0:x(k(e)),n=this;return d(w,n)&&m((function(){b(n)}))?c(Object(t),n,T):t},A=o?p(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),D=0;A.length>D;D++)l(x,O=A[D])&&!l(T,O)&&g(T,O,f(x,O));T.prototype=w,w.constructor=T,a(r,y,T,{constructor:!0})}},9601:(e,t,n)=>{var o=n(2109),r=n(1574);o({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},8011:(e,t,n)=>{n(2109)({target:"Object",stat:!0,sham:!n(9781)},{create:n(30)})},9070:(e,t,n)=>{var o=n(2109),r=n(9781),s=n(3070).f;o({target:"Object",stat:!0,forced:Object.defineProperty!==s,sham:!r},{defineProperty:s})},9660:(e,t,n)=>{var o=n(2109),r=n(133),s=n(7293),i=n(5181),a=n(7908);o({target:"Object",stat:!0,forced:!r||s((function(){i.f(1)}))},{getOwnPropertySymbols:function(e){var t=i.f;return t?t(a(e)):[]}})},489:(e,t,n)=>{var o=n(2109),r=n(7293),s=n(7908),i=n(9518),a=n(8544);o({target:"Object",stat:!0,forced:r((function(){i(1)})),sham:!a},{getPrototypeOf:function(e){return i(s(e))}})},8304:(e,t,n)=>{n(2109)({target:"Object",stat:!0},{setPrototypeOf:n(7674)})},1539:(e,t,n)=>{var o=n(1694),r=n(8052),s=n(288);o||r(Object.prototype,"toString",s,{unsafe:!0})},821:(e,t,n)=>{"use strict";var o=n(2109),r=n(6916),s=n(9662),i=n(8523),a=n(2534),l=n(408);o({target:"Promise",stat:!0,forced:n(612)},{all:function(e){var t=this,n=i.f(t),o=n.resolve,c=n.reject,d=a((function(){var n=s(t.resolve),i=[],a=0,d=1;l(e,(function(e){var s=a++,l=!1;d++,r(n,t,e).then((function(e){l||(l=!0,i[s]=e,--d||o(i))}),c)})),--d||o(i)}));return d.error&&c(d.value),n.promise}})},4164:(e,t,n)=>{"use strict";var o=n(2109),r=n(1913),s=n(3702).CONSTRUCTOR,i=n(2492),a=n(5005),l=n(614),c=n(8052),d=i&&i.prototype;if(o({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(e){return this.then(void 0,e)}}),!r&&l(i)){var u=a("Promise").prototype.catch;d.catch!==u&&c(d,"catch",u,{unsafe:!0})}},3401:(e,t,n)=>{"use strict";var o,r,s,i=n(2109),a=n(1913),l=n(5268),c=n(7854),d=n(6916),u=n(8052),h=n(7674),m=n(8003),p=n(6340),f=n(9662),g=n(614),b=n(111),v=n(5787),y=n(6707),x=n(261).set,w=n(5948),C=n(842),_=n(2534),S=n(8572),k=n(9909),E=n(2492),O=n(3702),T=n(8523),A="Promise",D=O.CONSTRUCTOR,R=O.REJECTION_EVENT,M=O.SUBCLASSING,N=k.getterFor(A),P=k.set,L=E&&E.prototype,B=E,I=L,F=c.TypeError,z=c.document,j=c.process,H=T.f,V=H,$=!!(z&&z.createEvent&&c.dispatchEvent),U="unhandledrejection",W=function(e){var t;return!(!b(e)||!g(t=e.then))&&t},q=function(e,t){var n,o,r,s=t.value,i=1==t.state,a=i?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{a?(i||(2===t.rejection&&J(t),t.rejection=1),!0===a?n=s:(u&&u.enter(),n=a(s),u&&(u.exit(),r=!0)),n===e.promise?c(F("Promise-chain cycle")):(o=W(n))?d(o,n,l,c):l(n)):c(s)}catch(e){u&&!r&&u.exit(),c(e)}},K=function(e,t){e.notified||(e.notified=!0,w((function(){for(var n,o=e.reactions;n=o.get();)q(n,e);e.notified=!1,t&&!e.rejection&&Y(e)})))},G=function(e,t,n){var o,r;$?((o=z.createEvent("Event")).promise=t,o.reason=n,o.initEvent(e,!1,!0),c.dispatchEvent(o)):o={promise:t,reason:n},!R&&(r=c["on"+e])?r(o):e===U&&C("Unhandled promise rejection",n)},Y=function(e){d(x,c,(function(){var t,n=e.facade,o=e.value;if(X(e)&&(t=_((function(){l?j.emit("unhandledRejection",o,n):G(U,n,o)})),e.rejection=l||X(e)?2:1,t.error))throw t.value}))},X=function(e){return 1!==e.rejection&&!e.parent},J=function(e){d(x,c,(function(){var t=e.facade;l?j.emit("rejectionHandled",t):G("rejectionhandled",t,e.value)}))},Q=function(e,t,n){return function(o){e(t,o,n)}},Z=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,K(e,!0))},ee=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw F("Promise can't be resolved itself");var o=W(t);o?w((function(){var n={done:!1};try{d(o,t,Q(ee,n,e),Q(Z,n,e))}catch(t){Z(n,t,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(t){Z({done:!1},t,e)}}};if(D&&(I=(B=function(e){v(this,I),f(e),d(o,this);var t=N(this);try{e(Q(ee,t),Q(Z,t))}catch(e){Z(t,e)}}).prototype,(o=function(e){P(this,{type:A,done:!1,notified:!1,parent:!1,reactions:new S,rejection:!1,state:0,value:void 0})}).prototype=u(I,"then",(function(e,t){var n=N(this),o=H(y(this,B));return n.parent=!0,o.ok=!g(e)||e,o.fail=g(t)&&t,o.domain=l?j.domain:void 0,0==n.state?n.reactions.add(o):w((function(){q(o,n)})),o.promise})),r=function(){var e=new o,t=N(e);this.promise=e,this.resolve=Q(ee,t),this.reject=Q(Z,t)},T.f=H=function(e){return e===B||undefined===e?new r(e):V(e)},!a&&g(E)&&L!==Object.prototype)){s=L.then,M||u(L,"then",(function(e,t){var n=this;return new B((function(e,t){d(s,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete L.constructor}catch(e){}h&&h(L,I)}i({global:!0,constructor:!0,wrap:!0,forced:D},{Promise:B}),m(B,A,!1,!0),p(A)},8674:(e,t,n)=>{n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:(e,t,n)=>{"use strict";var o=n(2109),r=n(6916),s=n(9662),i=n(8523),a=n(2534),l=n(408);o({target:"Promise",stat:!0,forced:n(612)},{race:function(e){var t=this,n=i.f(t),o=n.reject,c=a((function(){var i=s(t.resolve);l(e,(function(e){r(i,t,e).then(n.resolve,o)}))}));return c.error&&o(c.value),n.promise}})},683:(e,t,n)=>{"use strict";var o=n(2109),r=n(6916),s=n(8523);o({target:"Promise",stat:!0,forced:n(3702).CONSTRUCTOR},{reject:function(e){var t=s.f(this);return r(t.reject,void 0,e),t.promise}})},6294:(e,t,n)=>{"use strict";var o=n(2109),r=n(5005),s=n(1913),i=n(2492),a=n(3702).CONSTRUCTOR,l=n(9478),c=r("Promise"),d=s&&!a;o({target:"Promise",stat:!0,forced:s||a},{resolve:function(e){return l(d&&this===c?i:this,e)}})},2419:(e,t,n)=>{var o=n(2109),r=n(5005),s=n(2104),i=n(7065),a=n(9483),l=n(9670),c=n(111),d=n(30),u=n(7293),h=r("Reflect","construct"),m=Object.prototype,p=[].push,f=u((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),g=!u((function(){h((function(){}))})),b=f||g;o({target:"Reflect",stat:!0,forced:b,sham:b},{construct:function(e,t){a(e),l(t);var n=arguments.length<3?e:a(arguments[2]);if(g&&!f)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];return s(p,o,t),new(s(i,e,o))}var r=n.prototype,u=d(c(r)?r:m),b=s(e,u,t);return c(b)?b:u}})},4916:(e,t,n)=>{"use strict";var o=n(2109),r=n(2261);o({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},8783:(e,t,n)=>{"use strict";var o=n(8710).charAt,r=n(1340),s=n(9909),i=n(654),a="String Iterator",l=s.set,c=s.getterFor(a);i(String,"String",(function(e){l(this,{type:a,string:r(e),index:0})}),(function(){var e,t=c(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=o(n,r),t.index+=e.length,{value:e,done:!1})}))},4723:(e,t,n)=>{"use strict";var o=n(6916),r=n(7007),s=n(9670),i=n(7466),a=n(1340),l=n(4488),c=n(8173),d=n(1530),u=n(7651);r("match",(function(e,t,n){return[function(t){var n=l(this),r=null==t?void 0:c(t,e);return r?o(r,t,n):new RegExp(t)[e](a(n))},function(e){var o=s(this),r=a(e),l=n(t,o,r);if(l.done)return l.value;if(!o.global)return u(o,r);var c=o.unicode;o.lastIndex=0;for(var h,m=[],p=0;null!==(h=u(o,r));){var f=a(h[0]);m[p]=f,""===f&&(o.lastIndex=d(r,i(o.lastIndex),c)),p++}return 0===p?null:m}]}))},5306:(e,t,n)=>{"use strict";var o=n(2104),r=n(6916),s=n(1702),i=n(7007),a=n(7293),l=n(9670),c=n(614),d=n(9303),u=n(7466),h=n(1340),m=n(4488),p=n(1530),f=n(8173),g=n(647),b=n(7651),v=n(5112)("replace"),y=Math.max,x=Math.min,w=s([].concat),C=s([].push),_=s("".indexOf),S=s("".slice),k="$0"==="a".replace(/./,"$0"),E=!!/./[v]&&""===/./[v]("a","$0");i("replace",(function(e,t,n){var s=E?"$":"$0";return[function(e,n){var o=m(this),s=null==e?void 0:f(e,v);return s?r(s,e,o,n):r(t,h(o),e,n)},function(e,r){var i=l(this),a=h(e);if("string"==typeof r&&-1===_(r,s)&&-1===_(r,"$<")){var m=n(t,i,a,r);if(m.done)return m.value}var f=c(r);f||(r=h(r));var v=i.global;if(v){var k=i.unicode;i.lastIndex=0}for(var E=[];;){var O=b(i,a);if(null===O)break;if(C(E,O),!v)break;""===h(O[0])&&(i.lastIndex=p(a,u(i.lastIndex),k))}for(var T,A="",D=0,R=0;R<E.length;R++){for(var M=h((O=E[R])[0]),N=y(x(d(O.index),a.length),0),P=[],L=1;L<O.length;L++)C(P,void 0===(T=O[L])?T:String(T));var B=O.groups;if(f){var I=w([M],P,N,a);void 0!==B&&C(I,B);var F=h(o(r,void 0,I))}else F=g(M,a,N,P,B,r);N>=D&&(A+=S(a,D,N)+F,D=N+M.length)}return A+S(a,D)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!k||E)},2443:(e,t,n)=>{n(7235)("asyncIterator")},4032:(e,t,n)=>{"use strict";var o=n(2109),r=n(7854),s=n(6916),i=n(1702),a=n(1913),l=n(9781),c=n(133),d=n(7293),u=n(2597),h=n(7976),m=n(9670),p=n(5656),f=n(4948),g=n(1340),b=n(9114),v=n(30),y=n(1956),x=n(8006),w=n(1156),C=n(5181),_=n(1236),S=n(3070),k=n(6048),E=n(5296),O=n(8052),T=n(2309),A=n(6200),D=n(3501),R=n(9711),M=n(5112),N=n(6061),P=n(7235),L=n(6532),B=n(8003),I=n(9909),F=n(2092).forEach,z=A("hidden"),j="Symbol",H=I.set,V=I.getterFor(j),$=Object.prototype,U=r.Symbol,W=U&&U.prototype,q=r.TypeError,K=r.QObject,G=_.f,Y=S.f,X=w.f,J=E.f,Q=i([].push),Z=T("symbols"),ee=T("op-symbols"),te=T("wks"),ne=!K||!K.prototype||!K.prototype.findChild,oe=l&&d((function(){return 7!=v(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(e,t,n){var o=G($,t);o&&delete $[t],Y(e,t,n),o&&e!==$&&Y($,t,o)}:Y,re=function(e,t){var n=Z[e]=v(W);return H(n,{type:j,tag:e,description:t}),l||(n.description=t),n},se=function(e,t,n){e===$&&se(ee,t,n),m(e);var o=f(t);return m(n),u(Z,o)?(n.enumerable?(u(e,z)&&e[z][o]&&(e[z][o]=!1),n=v(n,{enumerable:b(0,!1)})):(u(e,z)||Y(e,z,b(1,{})),e[z][o]=!0),oe(e,o,n)):Y(e,o,n)},ie=function(e,t){m(e);var n=p(t),o=y(n).concat(de(n));return F(o,(function(t){l&&!s(ae,n,t)||se(e,t,n[t])})),e},ae=function(e){var t=f(e),n=s(J,this,t);return!(this===$&&u(Z,t)&&!u(ee,t))&&(!(n||!u(this,t)||!u(Z,t)||u(this,z)&&this[z][t])||n)},le=function(e,t){var n=p(e),o=f(t);if(n!==$||!u(Z,o)||u(ee,o)){var r=G(n,o);return!r||!u(Z,o)||u(n,z)&&n[z][o]||(r.enumerable=!0),r}},ce=function(e){var t=X(p(e)),n=[];return F(t,(function(e){u(Z,e)||u(D,e)||Q(n,e)})),n},de=function(e){var t=e===$,n=X(t?ee:p(e)),o=[];return F(n,(function(e){!u(Z,e)||t&&!u($,e)||Q(o,Z[e])})),o};c||(O(W=(U=function(){if(h(W,this))throw q("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=R(e),n=function(e){this===$&&s(n,ee,e),u(this,z)&&u(this[z],t)&&(this[z][t]=!1),oe(this,t,b(1,e))};return l&&ne&&oe($,t,{configurable:!0,set:n}),re(t,e)}).prototype,"toString",(function(){return V(this).tag})),O(U,"withoutSetter",(function(e){return re(R(e),e)})),E.f=ae,S.f=se,k.f=ie,_.f=le,x.f=w.f=ce,C.f=de,N.f=function(e){return re(M(e),e)},l&&(Y(W,"description",{configurable:!0,get:function(){return V(this).description}}),a||O($,"propertyIsEnumerable",ae,{unsafe:!0}))),o({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:U}),F(y(te),(function(e){P(e)})),o({target:j,stat:!0,forced:!c},{useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),o({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(e,t){return void 0===t?v(e):ie(v(e),t)},defineProperty:se,defineProperties:ie,getOwnPropertyDescriptor:le}),o({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ce}),L(),B(U,j),D[z]=!0},1817:(e,t,n)=>{"use strict";var o=n(2109),r=n(9781),s=n(7854),i=n(1702),a=n(2597),l=n(614),c=n(7976),d=n(1340),u=n(3070).f,h=n(9920),m=s.Symbol,p=m&&m.prototype;if(r&&l(m)&&(!("description"in p)||void 0!==m().description)){var f={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=c(p,this)?new m(e):void 0===e?m():m(e);return""===e&&(f[t]=!0),t};h(g,m),g.prototype=p,p.constructor=g;var b="Symbol(test)"==String(m("test")),v=i(p.toString),y=i(p.valueOf),x=/^Symbol\((.*)\)[^)]+$/,w=i("".replace),C=i("".slice);u(p,"description",{configurable:!0,get:function(){var e=y(this),t=v(e);if(a(f,e))return"";var n=b?C(t,7,-1):w(t,x,"$1");return""===n?void 0:n}}),o({global:!0,constructor:!0,forced:!0},{Symbol:g})}},763:(e,t,n)=>{var o=n(2109),r=n(5005),s=n(2597),i=n(1340),a=n(2309),l=n(735),c=a("string-to-symbol-registry"),d=a("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=i(e);if(s(c,t))return c[t];var n=r("Symbol")(t);return c[t]=n,d[n]=t,n}})},2165:(e,t,n)=>{n(7235)("iterator")},2526:(e,t,n)=>{n(4032),n(763),n(6620),n(8862),n(9660)},6620:(e,t,n)=>{var o=n(2109),r=n(2597),s=n(2190),i=n(6330),a=n(2309),l=n(735),c=a("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!l},{keyFor:function(e){if(!s(e))throw TypeError(i(e)+" is not a symbol");if(r(c,e))return c[e]}})},9341:(e,t,n)=>{var o=n(5005),r=n(7235),s=n(8003);r("toStringTag"),s(o("Symbol"),"Symbol")},4747:(e,t,n)=>{var o=n(7854),r=n(8324),s=n(8509),i=n(8533),a=n(8880),l=function(e){if(e&&e.forEach!==i)try{a(e,"forEach",i)}catch(t){e.forEach=i}};for(var c in r)r[c]&&l(o[c]&&o[c].prototype);l(s)},3948:(e,t,n)=>{var o=n(7854),r=n(8324),s=n(8509),i=n(6992),a=n(8880),l=n(5112),c=l("iterator"),d=l("toStringTag"),u=i.values,h=function(e,t){if(e){if(e[c]!==u)try{a(e,c,u)}catch(t){e[c]=u}if(e[d]||a(e,d,t),r[t])for(var n in i)if(e[n]!==i[n])try{a(e,n,i[n])}catch(t){e[n]=i[n]}}};for(var m in r)h(o[m]&&o[m].prototype,m);h(s,"DOMTokenList")},5556:(e,t,n)=>{"use strict";n(6992);var o=n(2109),r=n(7854),s=n(6916),i=n(1702),a=n(9781),l=n(590),c=n(8052),d=n(9190),u=n(8003),h=n(4994),m=n(9909),p=n(5787),f=n(614),g=n(2597),b=n(9974),v=n(648),y=n(9670),x=n(111),w=n(1340),C=n(30),_=n(9114),S=n(8554),k=n(1246),E=n(8053),O=n(5112),T=n(4362),A=O("iterator"),D="URLSearchParams",R="URLSearchParamsIterator",M=m.set,N=m.getterFor(D),P=m.getterFor(R),L=Object.getOwnPropertyDescriptor,B=function(e){if(!a)return r[e];var t=L(r,e);return t&&t.value},I=B("fetch"),F=B("Request"),z=B("Headers"),j=F&&F.prototype,H=z&&z.prototype,V=r.RegExp,$=r.TypeError,U=r.decodeURIComponent,W=r.encodeURIComponent,q=i("".charAt),K=i([].join),G=i([].push),Y=i("".replace),X=i([].shift),J=i([].splice),Q=i("".split),Z=i("".slice),ee=/\+/g,te=Array(4),ne=function(e){return te[e-1]||(te[e-1]=V("((?:%[\\da-f]{2}){"+e+"})","gi"))},oe=function(e){try{return U(e)}catch(t){return e}},re=function(e){var t=Y(e,ee," "),n=4;try{return U(t)}catch(e){for(;n;)t=Y(t,ne(n--),oe);return t}},se=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ae=function(e){return ie[e]},le=function(e){return Y(W(e),se,ae)},ce=h((function(e,t){M(this,{type:R,iterator:S(N(e).entries),kind:t})}),"Iterator",(function(){var e=P(this),t=e.kind,n=e.iterator.next(),o=n.value;return n.done||(n.value="keys"===t?o.key:"values"===t?o.value:[o.key,o.value]),n}),!0),de=function(e){this.entries=[],this.url=null,void 0!==e&&(x(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===q(e,0)?Z(e,1):e:w(e)))};de.prototype={type:D,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,o,r,i,a,l,c=k(e);if(c)for(n=(t=S(e,c)).next;!(o=s(n,t)).done;){if(i=(r=S(y(o.value))).next,(a=s(i,r)).done||(l=s(i,r)).done||!s(i,r).done)throw $("Expected sequence with length 2");G(this.entries,{key:w(a.value),value:w(l.value)})}else for(var d in e)g(e,d)&&G(this.entries,{key:d,value:w(e[d])})},parseQuery:function(e){if(e)for(var t,n,o=Q(e,"&"),r=0;r<o.length;)(t=o[r++]).length&&(n=Q(t,"="),G(this.entries,{key:re(X(n)),value:re(K(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],o=0;o<t.length;)e=t[o++],G(n,le(e.key)+"="+le(e.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ue=function(){p(this,he);var e=arguments.length>0?arguments[0]:void 0;M(this,new de(e))},he=ue.prototype;if(d(he,{append:function(e,t){E(arguments.length,2);var n=N(this);G(n.entries,{key:w(e),value:w(t)}),n.updateURL()},delete:function(e){E(arguments.length,1);for(var t=N(this),n=t.entries,o=w(e),r=0;r<n.length;)n[r].key===o?J(n,r,1):r++;t.updateURL()},get:function(e){E(arguments.length,1);for(var t=N(this).entries,n=w(e),o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){E(arguments.length,1);for(var t=N(this).entries,n=w(e),o=[],r=0;r<t.length;r++)t[r].key===n&&G(o,t[r].value);return o},has:function(e){E(arguments.length,1);for(var t=N(this).entries,n=w(e),o=0;o<t.length;)if(t[o++].key===n)return!0;return!1},set:function(e,t){E(arguments.length,1);for(var n,o=N(this),r=o.entries,s=!1,i=w(e),a=w(t),l=0;l<r.length;l++)(n=r[l]).key===i&&(s?J(r,l--,1):(s=!0,n.value=a));s||G(r,{key:i,value:a}),o.updateURL()},sort:function(){var e=N(this);T(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=N(this).entries,o=b(e,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)o((t=n[r++]).value,t.key,this)},keys:function(){return new ce(this,"keys")},values:function(){return new ce(this,"values")},entries:function(){return new ce(this,"entries")}},{enumerable:!0}),c(he,A,he.entries,{name:"entries"}),c(he,"toString",(function(){return N(this).serialize()}),{enumerable:!0}),u(ue,D),o({global:!0,constructor:!0,forced:!l},{URLSearchParams:ue}),!l&&f(z)){var me=i(H.has),pe=i(H.set),fe=function(e){if(x(e)){var t,n=e.body;if(v(n)===D)return t=e.headers?new z(e.headers):new z,me(t,"content-type")||pe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),C(e,{body:_(0,w(n)),headers:_(0,t)})}return e};if(f(I)&&o({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return I(e,arguments.length>1?fe(arguments[1]):{})}}),f(F)){var ge=function(e){return p(this,j),new F(e,arguments.length>1?fe(arguments[1]):{})};j.constructor=ge,ge.prototype=j,o({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ge})}}e.exports={URLSearchParams:ue,getState:N}},1637:(e,t,n)=>{n(5556)},8789:(e,t,n)=>{"use strict";n(8783);var o,r=n(2109),s=n(9781),i=n(590),a=n(7854),l=n(9974),c=n(1702),d=n(8052),u=n(7045),h=n(5787),m=n(2597),p=n(1574),f=n(8457),g=n(1589),b=n(8710).codeAt,v=n(3197),y=n(1340),x=n(8003),w=n(8053),C=n(5556),_=n(9909),S=_.set,k=_.getterFor("URL"),E=C.URLSearchParams,O=C.getState,T=a.URL,A=a.TypeError,D=a.parseInt,R=Math.floor,M=Math.pow,N=c("".charAt),P=c(/./.exec),L=c([].join),B=c(1..toString),I=c([].pop),F=c([].push),z=c("".replace),j=c([].shift),H=c("".split),V=c("".slice),$=c("".toLowerCase),U=c([].unshift),W="Invalid scheme",q="Invalid host",K="Invalid port",G=/[a-z]/i,Y=/[\d+-.a-z]/i,X=/\d/,J=/^0x/i,Q=/^[0-7]+$/,Z=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,oe=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,re=/[\t\n\r]/g,se=function(e){var t,n,o,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)U(t,e%256),e=R(e/256);return L(t,".")}if("object"==typeof e){for(t="",o=function(e){for(var t=null,n=1,o=null,r=0,s=0;s<8;s++)0!==e[s]?(r>n&&(t=o,n=r),o=null,r=0):(null===o&&(o=s),++r);return r>n&&(t=o,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),o===n?(t+=n?":":"::",r=!0):(t+=B(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ie={},ae=p({},ie,{" ":1,'"':1,"<":1,">":1,"`":1}),le=p({},ae,{"#":1,"?":1,"{":1,"}":1}),ce=p({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),de=function(e,t){var n=b(e,0);return n>32&&n<127&&!m(t,e)?e:encodeURIComponent(e)},ue={ftp:21,file:null,http:80,https:443,ws:80,wss:443},he=function(e,t){var n;return 2==e.length&&P(G,N(e,0))&&(":"==(n=N(e,1))||!t&&"|"==n)},me=function(e){var t;return e.length>1&&he(V(e,0,2))&&(2==e.length||"/"===(t=N(e,2))||"\\"===t||"?"===t||"#"===t)},pe=function(e){return"."===e||"%2e"===$(e)},fe={},ge={},be={},ve={},ye={},xe={},we={},Ce={},_e={},Se={},ke={},Ee={},Oe={},Te={},Ae={},De={},Re={},Me={},Ne={},Pe={},Le={},Be=function(e,t,n){var o,r,s,i=y(e);if(t){if(r=this.parse(i))throw A(r);this.searchParams=null}else{if(void 0!==n&&(o=new Be(n,!0)),r=this.parse(i,null,o))throw A(r);(s=O(new E)).bindURL(this),this.searchParams=s}};Be.prototype={type:"URL",parse:function(e,t,n){var r,s,i,a,l,c=this,d=t||fe,u=0,h="",p=!1,b=!1,v=!1;for(e=y(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=z(e,oe,"")),e=z(e,re,""),r=f(e);u<=r.length;){switch(s=r[u],d){case fe:if(!s||!P(G,s)){if(t)return W;d=be;continue}h+=$(s),d=ge;break;case ge:if(s&&(P(Y,s)||"+"==s||"-"==s||"."==s))h+=$(s);else{if(":"!=s){if(t)return W;h="",d=be,u=0;continue}if(t&&(c.isSpecial()!=m(ue,h)||"file"==h&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=h,t)return void(c.isSpecial()&&ue[c.scheme]==c.port&&(c.port=null));h="","file"==c.scheme?d=Te:c.isSpecial()&&n&&n.scheme==c.scheme?d=ve:c.isSpecial()?d=Ce:"/"==r[u+1]?(d=ye,u++):(c.cannotBeABaseURL=!0,F(c.path,""),d=Ne)}break;case be:if(!n||n.cannotBeABaseURL&&"#"!=s)return W;if(n.cannotBeABaseURL&&"#"==s){c.scheme=n.scheme,c.path=g(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,d=Le;break}d="file"==n.scheme?Te:xe;continue;case ve:if("/"!=s||"/"!=r[u+1]){d=xe;continue}d=_e,u++;break;case ye:if("/"==s){d=Se;break}d=Me;continue;case xe:if(c.scheme=n.scheme,s==o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query=n.query;else if("/"==s||"\\"==s&&c.isSpecial())d=we;else if("?"==s)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query="",d=Pe;else{if("#"!=s){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.path.length--,d=Me;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query=n.query,c.fragment="",d=Le}break;case we:if(!c.isSpecial()||"/"!=s&&"\\"!=s){if("/"!=s){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,d=Me;continue}d=Se}else d=_e;break;case Ce:if(d=_e,"/"!=s||"/"!=N(h,u+1))continue;u++;break;case _e:if("/"!=s&&"\\"!=s){d=Se;continue}break;case Se:if("@"==s){p&&(h="%40"+h),p=!0,i=f(h);for(var x=0;x<i.length;x++){var w=i[x];if(":"!=w||v){var C=de(w,ce);v?c.password+=C:c.username+=C}else v=!0}h=""}else if(s==o||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()){if(p&&""==h)return"Invalid authority";u-=f(h).length+1,h="",d=ke}else h+=s;break;case ke:case Ee:if(t&&"file"==c.scheme){d=De;continue}if(":"!=s||b){if(s==o||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()){if(c.isSpecial()&&""==h)return q;if(t&&""==h&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(h))return a;if(h="",d=Re,t)return;continue}"["==s?b=!0:"]"==s&&(b=!1),h+=s}else{if(""==h)return q;if(a=c.parseHost(h))return a;if(h="",d=Oe,t==Ee)return}break;case Oe:if(!P(X,s)){if(s==o||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()||t){if(""!=h){var _=D(h,10);if(_>65535)return K;c.port=c.isSpecial()&&_===ue[c.scheme]?null:_,h=""}if(t)return;d=Re;continue}return K}h+=s;break;case Te:if(c.scheme="file","/"==s||"\\"==s)d=Ae;else{if(!n||"file"!=n.scheme){d=Me;continue}if(s==o)c.host=n.host,c.path=g(n.path),c.query=n.query;else if("?"==s)c.host=n.host,c.path=g(n.path),c.query="",d=Pe;else{if("#"!=s){me(L(g(r,u),""))||(c.host=n.host,c.path=g(n.path),c.shortenPath()),d=Me;continue}c.host=n.host,c.path=g(n.path),c.query=n.query,c.fragment="",d=Le}}break;case Ae:if("/"==s||"\\"==s){d=De;break}n&&"file"==n.scheme&&!me(L(g(r,u),""))&&(he(n.path[0],!0)?F(c.path,n.path[0]):c.host=n.host),d=Me;continue;case De:if(s==o||"/"==s||"\\"==s||"?"==s||"#"==s){if(!t&&he(h))d=Me;else if(""==h){if(c.host="",t)return;d=Re}else{if(a=c.parseHost(h))return a;if("localhost"==c.host&&(c.host=""),t)return;h="",d=Re}continue}h+=s;break;case Re:if(c.isSpecial()){if(d=Me,"/"!=s&&"\\"!=s)continue}else if(t||"?"!=s)if(t||"#"!=s){if(s!=o&&(d=Me,"/"!=s))continue}else c.fragment="",d=Le;else c.query="",d=Pe;break;case Me:if(s==o||"/"==s||"\\"==s&&c.isSpecial()||!t&&("?"==s||"#"==s)){if(".."===(l=$(l=h))||"%2e."===l||".%2e"===l||"%2e%2e"===l?(c.shortenPath(),"/"==s||"\\"==s&&c.isSpecial()||F(c.path,"")):pe(h)?"/"==s||"\\"==s&&c.isSpecial()||F(c.path,""):("file"==c.scheme&&!c.path.length&&he(h)&&(c.host&&(c.host=""),h=N(h,0)+":"),F(c.path,h)),h="","file"==c.scheme&&(s==o||"?"==s||"#"==s))for(;c.path.length>1&&""===c.path[0];)j(c.path);"?"==s?(c.query="",d=Pe):"#"==s&&(c.fragment="",d=Le)}else h+=de(s,le);break;case Ne:"?"==s?(c.query="",d=Pe):"#"==s?(c.fragment="",d=Le):s!=o&&(c.path[0]+=de(s,ie));break;case Pe:t||"#"!=s?s!=o&&("'"==s&&c.isSpecial()?c.query+="%27":c.query+="#"==s?"%23":de(s,ie)):(c.fragment="",d=Le);break;case Le:s!=o&&(c.fragment+=de(s,ae))}u++}},parseHost:function(e){var t,n,o;if("["==N(e,0)){if("]"!=N(e,e.length-1))return q;if(t=function(e){var t,n,o,r,s,i,a,l=[0,0,0,0,0,0,0,0],c=0,d=null,u=0,h=function(){return N(e,u)};if(":"==h()){if(":"!=N(e,1))return;u+=2,d=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=n=0;n<4&&P(ee,h());)t=16*t+D(h(),16),u++,n++;if("."==h()){if(0==n)return;if(u-=n,c>6)return;for(o=0;h();){if(r=null,o>0){if(!("."==h()&&o<4))return;u++}if(!P(X,h()))return;for(;P(X,h());){if(s=D(h(),10),null===r)r=s;else{if(0==r)return;r=10*r+s}if(r>255)return;u++}l[c]=256*l[c]+r,2!=++o&&4!=o||c++}if(4!=o)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;l[c++]=t}else{if(null!==d)return;u++,d=++c}}if(null!==d)for(i=c-d,c=7;0!=c&&i>0;)a=l[c],l[c--]=l[d+i-1],l[d+--i]=a;else if(8!=c)return;return l}(V(e,1,-1)),!t)return q;this.host=t}else if(this.isSpecial()){if(e=v(e),P(te,e))return q;if(t=function(e){var t,n,o,r,s,i,a,l=H(e,".");if(l.length&&""==l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=[],o=0;o<t;o++){if(""==(r=l[o]))return e;if(s=10,r.length>1&&"0"==N(r,0)&&(s=P(J,r)?16:8,r=V(r,8==s?1:2)),""===r)i=0;else{if(!P(10==s?Z:8==s?Q:ee,r))return e;i=D(r,s)}F(n,i)}for(o=0;o<t;o++)if(i=n[o],o==t-1){if(i>=M(256,5-t))return null}else if(i>255)return null;for(a=I(n),o=0;o<n.length;o++)a+=n[o]*M(256,3-o);return a}(e),null===t)return q;this.host=t}else{if(P(ne,e))return q;for(t="",n=f(e),o=0;o<n.length;o++)t+=de(n[o],ie);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return m(ue,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&he(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,o=e.password,r=e.host,s=e.port,i=e.path,a=e.query,l=e.fragment,c=t+":";return null!==r?(c+="//",e.includesCredentials()&&(c+=n+(o?":"+o:"")+"@"),c+=se(r),null!==s&&(c+=":"+s)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?i[0]:i.length?"/"+L(i,"/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw A(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Ie(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+se(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",fe)},getUsername:function(){return this.username},setUsername:function(e){var t=f(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=de(t[n],ce)}},getPassword:function(){return this.password},setPassword:function(e){var t=f(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=de(t[n],ce)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?se(e):se(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,ke)},getHostname:function(){var e=this.host;return null===e?"":se(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Ee)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=y(e))?this.port=null:this.parse(e,Oe))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+L(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Re))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=y(e))?this.query=null:("?"==N(e,0)&&(e=V(e,1)),this.query="",this.parse(e,Pe)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=y(e))?("#"==N(e,0)&&(e=V(e,1)),this.fragment="",this.parse(e,Le)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ie=function(e){var t=h(this,Fe),n=w(arguments.length,1)>1?arguments[1]:void 0,o=S(t,new Be(e,!1,n));s||(t.href=o.serialize(),t.origin=o.getOrigin(),t.protocol=o.getProtocol(),t.username=o.getUsername(),t.password=o.getPassword(),t.host=o.getHost(),t.hostname=o.getHostname(),t.port=o.getPort(),t.pathname=o.getPathname(),t.search=o.getSearch(),t.searchParams=o.getSearchParams(),t.hash=o.getHash())},Fe=Ie.prototype,ze=function(e,t){return{get:function(){return k(this)[e]()},set:t&&function(e){return k(this)[t](e)},configurable:!0,enumerable:!0}};if(s&&(u(Fe,"href",ze("serialize","setHref")),u(Fe,"origin",ze("getOrigin")),u(Fe,"protocol",ze("getProtocol","setProtocol")),u(Fe,"username",ze("getUsername","setUsername")),u(Fe,"password",ze("getPassword","setPassword")),u(Fe,"host",ze("getHost","setHost")),u(Fe,"hostname",ze("getHostname","setHostname")),u(Fe,"port",ze("getPort","setPort")),u(Fe,"pathname",ze("getPathname","setPathname")),u(Fe,"search",ze("getSearch","setSearch")),u(Fe,"searchParams",ze("getSearchParams")),u(Fe,"hash",ze("getHash","setHash"))),d(Fe,"toJSON",(function(){return k(this).serialize()}),{enumerable:!0}),d(Fe,"toString",(function(){return k(this).serialize()}),{enumerable:!0}),T){var je=T.createObjectURL,He=T.revokeObjectURL;je&&d(Ie,"createObjectURL",l(je,T)),He&&d(Ie,"revokeObjectURL",l(He,T))}x(Ie,"URL"),r({global:!0,constructor:!0,forced:!i,sham:!s},{URL:Ie})},285:(e,t,n)=>{n(8789)},9755:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(o,r){"use strict";var s=[],i=Object.getPrototypeOf,a=s.slice,l=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},c=s.push,d=s.indexOf,u={},h=u.toString,m=u.hasOwnProperty,p=m.toString,f=p.call(Object),g={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},y=o.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var o,r,s=(n=n||y).createElement("script");if(s.text=e,t)for(o in x)(r=t[o]||t.getAttribute&&t.getAttribute(o))&&s.setAttribute(o,r);n.head.appendChild(s).parentNode.removeChild(s)}function C(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[h.call(e)]||"object":typeof e}var _="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function k(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!b(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:_,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:s.sort,splice:s.splice},S.extend=S.fn.extend=function(){var e,t,n,o,r,s,i=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[a]||{},a++),"object"==typeof i||b(i)||(i={}),a===l&&(i=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)o=e[t],"__proto__"!==t&&i!==o&&(c&&o&&(S.isPlainObject(o)||(r=Array.isArray(o)))?(n=i[t],s=r&&!Array.isArray(n)?[]:r||S.isPlainObject(n)?n:{},r=!1,i[t]=S.extend(c,s,o)):void 0!==o&&(i[t]=o));return i},S.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=i(e))||"function"==typeof(n=m.call(t,"constructor")&&t.constructor)&&p.call(n)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,o=0;if(k(e))for(n=e.length;o<n&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(k(Object(e))?S.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,o=0,r=e.length;o<n;o++)e[r++]=t[o];return e.length=r,e},grep:function(e,t,n){for(var o=[],r=0,s=e.length,i=!n;r<s;r++)!t(e[r],r)!==i&&o.push(e[r]);return o},map:function(e,t,n){var o,r,s=0,i=[];if(k(e))for(o=e.length;s<o;s++)null!=(r=t(e[s],s,n))&&i.push(r);else for(s in e)null!=(r=t(e[s],s,n))&&i.push(r);return l(i)},guid:1,support:g}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=s[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var E=function(e){var t,n,o,r,s,i,a,l,c,d,u,h,m,p,f,g,b,v,y,x="sizzle"+1*new Date,w=e.document,C=0,_=0,S=le(),k=le(),E=le(),O=le(),T=function(e,t){return e===t&&(u=!0),0},A={}.hasOwnProperty,D=[],R=D.pop,M=D.push,N=D.push,P=D.slice,L=function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\[[\\x20\\t\\r\\n\\f]*("+F+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+I+"*\\]",j=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",H=new RegExp(I+"+","g"),V=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),$=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),W=new RegExp(I+"|>"),q=new RegExp(j),K=new RegExp("^"+F+"$"),G={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},se=function(){h()},ie=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{N.apply(D=P.call(w.childNodes),w.childNodes),D[w.childNodes.length].nodeType}catch(e){N={apply:D.length?function(e,t){M.apply(e,P.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}function ae(e,t,o,r){var s,a,c,d,u,p,b,v=t&&t.ownerDocument,w=t?t.nodeType:9;if(o=o||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return o;if(!r&&(h(t),t=t||m,f)){if(11!==w&&(u=Z.exec(e)))if(s=u[1]){if(9===w){if(!(c=t.getElementById(s)))return o;if(c.id===s)return o.push(c),o}else if(v&&(c=v.getElementById(s))&&y(t,c)&&c.id===s)return o.push(c),o}else{if(u[2])return N.apply(o,t.getElementsByTagName(e)),o;if((s=u[3])&&n.getElementsByClassName&&t.getElementsByClassName)return N.apply(o,t.getElementsByClassName(s)),o}if(n.qsa&&!O[e+" "]&&(!g||!g.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(b=e,v=t,1===w&&(W.test(e)||U.test(e))){for((v=ee.test(e)&&be(t.parentNode)||t)===t&&n.scope||((d=t.getAttribute("id"))?d=d.replace(oe,re):t.setAttribute("id",d=x)),a=(p=i(e)).length;a--;)p[a]=(d?"#"+d:":scope")+" "+ye(p[a]);b=p.join(",")}try{return N.apply(o,v.querySelectorAll(b)),o}catch(t){O(e,!0)}finally{d===x&&t.removeAttribute("id")}}}return l(e.replace(V,"$1"),t,o,r)}function le(){var e=[];return function t(n,r){return e.push(n+" ")>o.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ce(e){return e[x]=!0,e}function de(e){var t=m.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),r=n.length;r--;)o.attrHandle[n[r]]=t}function he(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function me(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(n,o){for(var r,s=e([],n.length,t),i=s.length;i--;)n[r=s[i]]&&(n[r]=!(o[r]=n[r]))}))}))}function be(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},s=ae.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},h=ae.setDocument=function(e){var t,r,i=e?e.ownerDocument||e:w;return i!=m&&9===i.nodeType&&i.documentElement?(p=(m=i).documentElement,f=!s(m),w!=m&&(r=m.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",se,!1):r.attachEvent&&r.attachEvent("onunload",se)),n.scope=de((function(e){return p.appendChild(e).appendChild(m.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=de((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=de((function(e){return e.appendChild(m.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(m.getElementsByClassName),n.getById=de((function(e){return p.appendChild(e).id=x,!m.getElementsByName||!m.getElementsByName(x).length})),n.getById?(o.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},o.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var n=t.getElementById(e);return n?[n]:[]}}):(o.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},o.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var n,o,r,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(r=t.getElementsByName(e),o=0;s=r[o++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),o.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,o=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&o.push(n);return o}return s},o.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&f)return t.getElementsByClassName(e)},b=[],g=[],(n.qsa=Q.test(m.querySelectorAll))&&(de((function(e){var t;p.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+B+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),(t=m.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),de((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=m.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Q.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&de((function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),b.push("!=",j)})),g=g.length&&new RegExp(g.join("|")),b=b.length&&new RegExp(b.join("|")),t=Q.test(p.compareDocumentPosition),y=t||Q.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return u=!0,0;var o=!e.compareDocumentPosition-!t.compareDocumentPosition;return o||(1&(o=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===o?e==m||e.ownerDocument==w&&y(w,e)?-1:t==m||t.ownerDocument==w&&y(w,t)?1:d?L(d,e)-L(d,t):0:4&o?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,o=0,r=e.parentNode,s=t.parentNode,i=[e],a=[t];if(!r||!s)return e==m?-1:t==m?1:r?-1:s?1:d?L(d,e)-L(d,t):0;if(r===s)return he(e,t);for(n=e;n=n.parentNode;)i.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;i[o]===a[o];)o++;return o?he(i[o],a[o]):i[o]==w?-1:a[o]==w?1:0},m):m},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&f&&!O[t+" "]&&(!b||!b.test(t))&&(!g||!g.test(t)))try{var o=v.call(e,t);if(o||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return o}catch(e){O(t,!0)}return ae(t,m,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=m&&h(e),y(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=m&&h(e);var r=o.attrHandle[t.toLowerCase()],s=r&&A.call(o.attrHandle,t.toLowerCase())?r(e,t,!f):void 0;return void 0!==s?s:n.attributes||!f?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ae.escape=function(e){return(e+"").replace(oe,re)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,o=[],r=0,s=0;if(u=!n.detectDuplicates,d=!n.sortStable&&e.slice(0),e.sort(T),u){for(;t=e[s++];)t===e[s]&&(r=o.push(s));for(;r--;)e.splice(o[r],1)}return d=null,e},r=ae.getText=function(e){var t,n="",o=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[o++];)n+=r(t);return n},o=ae.selectors={cacheLength:50,createPseudo:ce,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=i(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+I+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(o){var r=ae.attr(o,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,o,r){var s="nth"!==e.slice(0,3),i="last"!==e.slice(-4),a="of-type"===t;return 1===o&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,h,m,p,f=s!==i?"nextSibling":"previousSibling",g=t.parentNode,b=a&&t.nodeName.toLowerCase(),v=!l&&!a,y=!1;if(g){if(s){for(;f;){for(h=t;h=h[f];)if(a?h.nodeName.toLowerCase()===b:1===h.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[i?g.firstChild:g.lastChild],i&&v){for(y=(m=(c=(d=(u=(h=g)[x]||(h[x]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===C&&c[1])&&c[2],h=m&&g.childNodes[m];h=++m&&h&&h[f]||(y=m=0)||p.pop();)if(1===h.nodeType&&++y&&h===t){d[e]=[C,m,y];break}}else if(v&&(y=m=(c=(d=(u=(h=t)[x]||(h[x]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===C&&c[1]),!1===y)for(;(h=++m&&h&&h[f]||(y=m=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==b:1!==h.nodeType)||!++y||(v&&((d=(u=h[x]||(h[x]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]=[C,y]),h!==t)););return(y-=r)===o||y%o==0&&y/o>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var o,s=r(e,t),i=s.length;i--;)e[o=L(e,s[i])]=!(n[o]=s[i])})):function(e){return r(e,0,n)}):r}},pseudos:{not:ce((function(e){var t=[],n=[],o=a(e.replace(V,"$1"));return o[x]?ce((function(e,t,n,r){for(var s,i=o(e,null,r,[]),a=e.length;a--;)(s=i[a])&&(e[a]=!(t[a]=s))})):function(e,r,s){return t[0]=e,o(t,null,s,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return ae(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||r(t)).indexOf(e)>-1}})),lang:ce((function(e){return K.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=f?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var o=n<0?n+t:n>t?t:n;--o>=0;)e.push(o);return e})),gt:ge((function(e,t,n){for(var o=n<0?n+t:n;++o<t;)e.push(o);return e}))}},o.pseudos.nth=o.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[t]=me(t);for(t in{submit:!0,reset:!0})o.pseudos[t]=pe(t);function ve(){}function ye(e){for(var t=0,n=e.length,o="";t<n;t++)o+=e[t].value;return o}function xe(e,t,n){var o=t.dir,r=t.next,s=r||o,i=n&&"parentNode"===s,a=_++;return t.first?function(t,n,r){for(;t=t[o];)if(1===t.nodeType||i)return e(t,n,r);return!1}:function(t,n,l){var c,d,u,h=[C,a];if(l){for(;t=t[o];)if((1===t.nodeType||i)&&e(t,n,l))return!0}else for(;t=t[o];)if(1===t.nodeType||i)if(d=(u=t[x]||(t[x]={}))[t.uniqueID]||(u[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[o]||t;else{if((c=d[s])&&c[0]===C&&c[1]===a)return h[2]=c[2];if(d[s]=h,h[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,o){for(var r=e.length;r--;)if(!e[r](t,n,o))return!1;return!0}:e[0]}function Ce(e,t,n,o,r){for(var s,i=[],a=0,l=e.length,c=null!=t;a<l;a++)(s=e[a])&&(n&&!n(s,o,r)||(i.push(s),c&&t.push(a)));return i}function _e(e,t,n,o,r,s){return o&&!o[x]&&(o=_e(o)),r&&!r[x]&&(r=_e(r,s)),ce((function(s,i,a,l){var c,d,u,h=[],m=[],p=i.length,f=s||function(e,t,n){for(var o=0,r=t.length;o<r;o++)ae(e,t[o],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?f:Ce(f,h,e,a,l),b=n?r||(s?e:p||o)?[]:i:g;if(n&&n(g,b,a,l),o)for(c=Ce(b,m),o(c,[],a,l),d=c.length;d--;)(u=c[d])&&(b[m[d]]=!(g[m[d]]=u));if(s){if(r||e){if(r){for(c=[],d=b.length;d--;)(u=b[d])&&c.push(g[d]=u);r(null,b=[],c,l)}for(d=b.length;d--;)(u=b[d])&&(c=r?L(s,u):h[d])>-1&&(s[c]=!(i[c]=u))}}else b=Ce(b===i?b.splice(p,b.length):b),r?r(null,i,b,l):N.apply(i,b)}))}function Se(e){for(var t,n,r,s=e.length,i=o.relative[e[0].type],a=i||o.relative[" "],l=i?1:0,d=xe((function(e){return e===t}),a,!0),u=xe((function(e){return L(t,e)>-1}),a,!0),h=[function(e,n,o){var r=!i&&(o||n!==c)||((t=n).nodeType?d(e,n,o):u(e,n,o));return t=null,r}];l<s;l++)if(n=o.relative[e[l].type])h=[xe(we(h),n)];else{if((n=o.filter[e[l].type].apply(null,e[l].matches))[x]){for(r=++l;r<s&&!o.relative[e[r].type];r++);return _e(l>1&&we(h),l>1&&ye(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(V,"$1"),n,l<r&&Se(e.slice(l,r)),r<s&&Se(e=e.slice(r)),r<s&&ye(e))}h.push(n)}return we(h)}return ve.prototype=o.filters=o.pseudos,o.setFilters=new ve,i=ae.tokenize=function(e,t){var n,r,s,i,a,l,c,d=k[e+" "];if(d)return t?0:d.slice(0);for(a=e,l=[],c=o.preFilter;a;){for(i in n&&!(r=$.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=U.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(V," ")}),a=a.slice(n.length)),o.filter)!(r=G[i].exec(a))||c[i]&&!(r=c[i](r))||(n=r.shift(),s.push({value:n,type:i,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):k(e,l).slice(0)},a=ae.compile=function(e,t){var n,r=[],s=[],a=E[e+" "];if(!a){for(t||(t=i(e)),n=t.length;n--;)(a=Se(t[n]))[x]?r.push(a):s.push(a);a=E(e,function(e,t){var n=t.length>0,r=e.length>0,s=function(s,i,a,l,d){var u,p,g,b=0,v="0",y=s&&[],x=[],w=c,_=s||r&&o.find.TAG("*",d),S=C+=null==w?1:Math.random()||.1,k=_.length;for(d&&(c=i==m||i||d);v!==k&&null!=(u=_[v]);v++){if(r&&u){for(p=0,i||u.ownerDocument==m||(h(u),a=!f);g=e[p++];)if(g(u,i||m,a)){l.push(u);break}d&&(C=S)}n&&((u=!g&&u)&&b--,s&&y.push(u))}if(b+=v,n&&v!==b){for(p=0;g=t[p++];)g(y,x,i,a);if(s){if(b>0)for(;v--;)y[v]||x[v]||(x[v]=R.call(l));x=Ce(x)}N.apply(l,x),d&&!s&&x.length>0&&b+t.length>1&&ae.uniqueSort(l)}return d&&(C=S,c=w),y};return n?ce(s):s}(s,r)),a.selector=e}return a},l=ae.select=function(e,t,n,r){var s,l,c,d,u,h="function"==typeof e&&e,m=!r&&i(e=h.selector||e);if(n=n||[],1===m.length){if((l=m[0]=m[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&f&&o.relative[l[1].type]){if(!(t=(o.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(s=G.needsContext.test(e)?0:l.length;s--&&(c=l[s],!o.relative[d=c.type]);)if((u=o.find[d])&&(r=u(c.matches[0].replace(te,ne),ee.test(l[0].type)&&be(t.parentNode)||t))){if(l.splice(s,1),!(e=r.length&&ye(l)))return N.apply(n,r),n;break}}return(h||a(e,m))(r,t,!f,n,!t||ee.test(e)&&be(t.parentNode)||t),n},n.sortStable=x.split("").sort(T).join("")===x,n.detectDuplicates=!!u,h(),n.sortDetached=de((function(e){return 1&e.compareDocumentPosition(m.createElement("fieldset"))})),de((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&de((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),de((function(e){return null==e.getAttribute("disabled")}))||ue(B,(function(e,t,n){var o;if(!n)return!0===e[t]?t.toLowerCase():(o=e.getAttributeNode(t))&&o.specified?o.value:null})),ae}(o);S.find=E,S.expr=E.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=E.uniqueSort,S.text=E.getText,S.isXMLDoc=E.isXML,S.contains=E.contains,S.escapeSelector=E.escape;var O=function(e,t,n){for(var o=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&S(e).is(n))break;o.push(e)}return o},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=S.expr.match.needsContext;function D(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(e,t,n){return b(t)?S.grep(e,(function(e,o){return!!t.call(e,o,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?S.grep(e,(function(e){return d.call(t,e)>-1!==n})):S.filter(t,e,n)}S.filter=function(e,t,n){var o=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===o.nodeType?S.find.matchesSelector(o,e)?[o]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,o=this.length,r=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<o;t++)if(S.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<o;t++)S.find(e,r[t],n);return o>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(M(this,e||[],!1))},not:function(e){return this.pushStack(M(this,e||[],!0))},is:function(e){return!!M(this,"string"==typeof e&&A.test(e)?S(e):e||[],!1).length}});var N,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var o,r;if(!e)return this;if(n=n||N,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:P.exec(e))||!o[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(o[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),R.test(o[1])&&S.isPlainObject(t))for(o in t)b(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(r=y.getElementById(o[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,N=S(y);var L=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,o=0,r=this.length,s=[],i="string"!=typeof e&&S(e);if(!A.test(e))for(;o<r;o++)for(n=this[o];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?S.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?d.call(S(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O(e,"parentNode")},parentsUntil:function(e,t,n){return O(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return O(e,"nextSibling")},prevAll:function(e){return O(e,"previousSibling")},nextUntil:function(e,t,n){return O(e,"nextSibling",n)},prevUntil:function(e,t,n){return O(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(D(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,o){var r=S.map(this,t,n);return"Until"!==e.slice(-5)&&(o=n),o&&"string"==typeof o&&(r=S.filter(o,r)),this.length>1&&(B[e]||S.uniqueSort(r),L.test(e)&&r.reverse()),this.pushStack(r)}}));var F=/[^\x20\t\r\n\f]+/g;function z(e){return e}function j(e){throw e}function H(e,t,n,o){var r;try{e&&b(r=e.promise)?r.call(e).done(t).fail(n):e&&b(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(o))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(F)||[],(function(e,n){t[n]=!0})),t}(e):S.extend({},e);var t,n,o,r,s=[],i=[],a=-1,l=function(){for(r=r||e.once,o=t=!0;i.length;a=-1)for(n=i.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(a=s.length-1,i.push(n)),function t(n){S.each(n,(function(n,o){b(o)?e.unique&&c.has(o)||s.push(o):o&&o.length&&"string"!==C(o)&&t(o)}))}(arguments),n&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){for(var n;(n=S.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(e){return e?S.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=i=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=i=[],n||t||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],i.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!o}};return c},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,o){var r=b(e[o[4]])&&e[o[4]];s[o[1]]((function(){var e=r&&r.apply(this,arguments);e&&b(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,r){var s=0;function i(e,t,n,r){return function(){var a=this,l=arguments,c=function(){var o,c;if(!(e<s)){if((o=n.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");c=o&&("object"==typeof o||"function"==typeof o)&&o.then,b(c)?r?c.call(o,i(s,t,z,r),i(s,t,j,r)):(s++,c.call(o,i(s,t,z,r),i(s,t,j,r),i(s,t,z,t.notifyWith))):(n!==z&&(a=void 0,l=[o]),(r||t.resolveWith)(a,l))}},d=r?c:function(){try{c()}catch(o){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(o,d.stackTrace),e+1>=s&&(n!==j&&(a=void 0,l=[o]),t.rejectWith(a,l))}};e?d():(S.Deferred.getStackHook&&(d.stackTrace=S.Deferred.getStackHook()),o.setTimeout(d))}}return S.Deferred((function(o){t[0][3].add(i(0,o,b(r)?r:z,o.notifyWith)),t[1][3].add(i(0,o,b(e)?e:z)),t[2][3].add(i(0,o,b(n)?n:j))})).promise()},promise:function(e){return null!=e?S.extend(e,r):r}},s={};return S.each(t,(function(e,o){var i=o[2],a=o[5];r[o[1]]=i.add,a&&i.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),i.add(o[3].fire),s[o[0]]=function(){return s[o[0]+"With"](this===s?void 0:this,arguments),this},s[o[0]+"With"]=i.fireWith})),r.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,o=Array(n),r=a.call(arguments),s=S.Deferred(),i=function(e){return function(n){o[e]=this,r[e]=arguments.length>1?a.call(arguments):n,--t||s.resolveWith(o,r)}};if(t<=1&&(H(e,s.done(i(n)).resolve,s.reject,!t),"pending"===s.state()||b(r[n]&&r[n].then)))return s.then();for(;n--;)H(r[n],i(n),s.reject);return s.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){o.console&&o.console.warn&&e&&V.test(e.name)&&o.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){o.setTimeout((function(){throw e}))};var $=S.Deferred();function U(){y.removeEventListener("DOMContentLoaded",U),o.removeEventListener("load",U),S.ready()}S.fn.ready=function(e){return $.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||$.resolveWith(y,[S]))}}),S.ready.then=$.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?o.setTimeout(S.ready):(y.addEventListener("DOMContentLoaded",U),o.addEventListener("load",U));var W=function(e,t,n,o,r,s,i){var a=0,l=e.length,c=null==n;if("object"===C(n))for(a in r=!0,n)W(e,t,a,n[a],!0,s,i);else if(void 0!==o&&(r=!0,b(o)||(i=!0),c&&(i?(t.call(e,o),t=null):(c=t,t=function(e,t,n){return c.call(S(e),n)})),t))for(;a<l;a++)t(e[a],n,i?o:o.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):s},q=/^-ms-/,K=/-([a-z])/g;function G(e,t){return t.toUpperCase()}function Y(e){return e.replace(q,"ms-").replace(K,G)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=S.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var o,r=this.cache(e);if("string"==typeof t)r[Y(t)]=n;else for(o in t)r[Y(o)]=t[o];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,o=e[this.expando];if(void 0!==o){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in o?[t]:t.match(F)||[]).length;for(;n--;)delete o[t[n]]}(void 0===t||S.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Q=new J,Z=new J,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var o;if(void 0===n&&1===e.nodeType)if(o="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(o))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,o,r,s=this[0],i=s&&s.attributes;if(void 0===e){if(this.length&&(r=Z.get(s),1===s.nodeType&&!Q.get(s,"hasDataAttrs"))){for(n=i.length;n--;)i[n]&&0===(o=i[n].name).indexOf("data-")&&(o=Y(o.slice(5)),ne(s,o,r[o]));Q.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){Z.set(this,e)})):W(this,(function(t){var n;if(s&&void 0===t)return void 0!==(n=Z.get(s,e))||void 0!==(n=ne(s,e))?n:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var o;if(e)return t=(t||"fx")+"queue",o=Q.get(e,t),n&&(!o||Array.isArray(n)?o=Q.access(e,t,S.makeArray(n)):o.push(n)),o||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),o=n.length,r=n.shift(),s=S._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),o--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,(function(){S.dequeue(e,t)}),s)),!o&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:S.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,o=1,r=S.Deferred(),s=this,i=this.length,a=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=Q.get(s[i],e+"queueHooks"))&&n.empty&&(o++,n.empty.add(a));return a(),r.promise(t)}});var oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+oe+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],ie=y.documentElement,ae=function(e){return S.contains(e.ownerDocument,e)},le={composed:!0};ie.getRootNode&&(ae=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===S.css(e,"display")};function de(e,t,n,o){var r,s,i=20,a=o?function(){return o.cur()}:function(){return S.css(e,t,"")},l=a(),c=n&&n[3]||(S.cssNumber[t]?"":"px"),d=e.nodeType&&(S.cssNumber[t]||"px"!==c&&+l)&&re.exec(S.css(e,t));if(d&&d[3]!==c){for(l/=2,c=c||d[3],d=+l||1;i--;)S.style(e,t,d+c),(1-s)*(1-(s=a()/l||.5))<=0&&(i=0),d/=s;d*=2,S.style(e,t,d+c),n=n||[]}return n&&(d=+d||+l||0,r=n[1]?d+(n[1]+1)*n[2]:+n[2],o&&(o.unit=c,o.start=d,o.end=r)),r}var ue={};function he(e){var t,n=e.ownerDocument,o=e.nodeName,r=ue[o];return r||(t=n.body.appendChild(n.createElement(o)),r=S.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ue[o]=r,r)}function me(e,t){for(var n,o,r=[],s=0,i=e.length;s<i;s++)(o=e[s]).style&&(n=o.style.display,t?("none"===n&&(r[s]=Q.get(o,"display")||null,r[s]||(o.style.display="")),""===o.style.display&&ce(o)&&(r[s]=he(o))):"none"!==n&&(r[s]="none",Q.set(o,"display",n)));for(s=0;s<i;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}S.fn.extend({show:function(){return me(this,!0)},hide:function(){return me(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?S(this).show():S(this).hide()}))}});var pe,fe,ge=/^(?:checkbox|radio)$/i,be=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;pe=y.createDocumentFragment().appendChild(y.createElement("div")),(fe=y.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),pe.appendChild(fe),g.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",g.option=!!pe.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&D(e,t)?S.merge([e],n):n}function we(e,t){for(var n=0,o=e.length;n<o;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,g.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var Ce=/<|&#?\w+;/;function _e(e,t,n,o,r){for(var s,i,a,l,c,d,u=t.createDocumentFragment(),h=[],m=0,p=e.length;m<p;m++)if((s=e[m])||0===s)if("object"===C(s))S.merge(h,s.nodeType?[s]:s);else if(Ce.test(s)){for(i=i||u.appendChild(t.createElement("div")),a=(be.exec(s)||["",""])[1].toLowerCase(),l=ye[a]||ye._default,i.innerHTML=l[1]+S.htmlPrefilter(s)+l[2],d=l[0];d--;)i=i.lastChild;S.merge(h,i.childNodes),(i=u.firstChild).textContent=""}else h.push(t.createTextNode(s));for(u.textContent="",m=0;s=h[m++];)if(o&&S.inArray(s,o)>-1)r&&r.push(s);else if(c=ae(s),i=xe(u.appendChild(s),"script"),c&&we(i),n)for(d=0;s=i[d++];)ve.test(s.type||"")&&n.push(s);return u}var Se=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Ee(){return!1}function Oe(e,t){return e===function(){try{return y.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,n,o,r,s){var i,a;if("object"==typeof t){for(a in"string"!=typeof n&&(o=o||n,n=void 0),t)Te(e,a,n,o,t[a],s);return e}if(null==o&&null==r?(r=n,o=n=void 0):null==r&&("string"==typeof n?(r=o,o=void 0):(r=o,o=n,n=void 0)),!1===r)r=Ee;else if(!r)return e;return 1===s&&(i=r,r=function(e){return S().off(e),i.apply(this,arguments)},r.guid=i.guid||(i.guid=S.guid++)),e.each((function(){S.event.add(this,t,r,o,n)}))}function Ae(e,t,n){n?(Q.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var o,r,s=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=a.call(arguments),Q.set(this,t,s),o=n(this,t),this[t](),s!==(r=Q.get(this,t))||o?Q.set(this,t,!1):r={},s!==r)return e.stopImmediatePropagation(),e.preventDefault(),r&&r.value}else s.length&&(Q.set(this,t,{value:S.event.trigger(S.extend(s[0],S.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&S.event.add(e,t,ke)}S.event={global:{},add:function(e,t,n,o,r){var s,i,a,l,c,d,u,h,m,p,f,g=Q.get(e);if(X(e))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&S.find.matchesSelector(ie,r),n.guid||(n.guid=S.guid++),(l=g.events)||(l=g.events=Object.create(null)),(i=g.handle)||(i=g.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(F)||[""]).length;c--;)m=f=(a=Se.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),m&&(u=S.event.special[m]||{},m=(r?u.delegateType:u.bindType)||m,u=S.event.special[m]||{},d=S.extend({type:m,origType:f,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:p.join(".")},s),(h=l[m])||((h=l[m]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,o,p,i)||e.addEventListener&&e.addEventListener(m,i)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),S.event.global[m]=!0)},remove:function(e,t,n,o,r){var s,i,a,l,c,d,u,h,m,p,f,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(F)||[""]).length;c--;)if(m=f=(a=Se.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),m){for(u=S.event.special[m]||{},h=l[m=(o?u.delegateType:u.bindType)||m]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=s=h.length;s--;)d=h[s],!r&&f!==d.origType||n&&n.guid!==d.guid||a&&!a.test(d.namespace)||o&&o!==d.selector&&("**"!==o||!d.selector)||(h.splice(s,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));i&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,p,g.handle)||S.removeEvent(e,m,g.handle),delete l[m])}else for(m in l)S.event.remove(e,m+t[c],n,o,!0);S.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,o,r,s,i,a=new Array(arguments.length),l=S.event.fix(e),c=(Q.get(this,"events")||Object.create(null))[l.type]||[],d=S.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(i=S.event.handlers.call(this,l,c),t=0;(r=i[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(o=((S.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(l.result=o)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,o,r,s,i,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],i={},n=0;n<l;n++)void 0===i[r=(o=t[n]).selector+" "]&&(i[r]=o.needsContext?S(r,this).index(c)>-1:S.find(r,this,null,[c]).length),i[r]&&s.push(o);s.length&&a.push({elem:c,handlers:s})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&D(t,"input")&&Ae(t,"click",ke),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&D(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&D(t,"input")&&Q.get(t,"click")||D(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Oe),!1},trigger:function(){return Ae(this,e),!0},_default:function(){return!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,o=this,r=e.relatedTarget,s=e.handleObj;return r&&(r===o||S.contains(o,r))||(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,o){return Te(this,e,t,n,o)},one:function(e,t,n,o){return Te(this,e,t,n,o,1)},off:function(e,t,n){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,S(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each((function(){S.event.remove(this,e,n,t)}))}});var De=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return D(e,"table")&&D(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Be(e,t){var n,o,r,s,i,a;if(1===t.nodeType){if(Q.hasData(e)&&(a=Q.get(e).events))for(r in Q.remove(t,"handle events"),a)for(n=0,o=a[r].length;n<o;n++)S.event.add(t,r,a[r][n]);Z.hasData(e)&&(s=Z.access(e),i=S.extend({},s),Z.set(t,i))}}function Ie(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Fe(e,t,n,o){t=l(t);var r,s,i,a,c,d,u=0,h=e.length,m=h-1,p=t[0],f=b(p);if(f||h>1&&"string"==typeof p&&!g.checkClone&&Re.test(p))return e.each((function(r){var s=e.eq(r);f&&(t[0]=p.call(this,r,s.html())),Fe(s,t,n,o)}));if(h&&(s=(r=_e(t,e[0].ownerDocument,!1,e,o)).firstChild,1===r.childNodes.length&&(r=s),s||o)){for(a=(i=S.map(xe(r,"script"),Pe)).length;u<h;u++)c=r,u!==m&&(c=S.clone(c,!0,!0),a&&S.merge(i,xe(c,"script"))),n.call(e[u],c,u);if(a)for(d=i[i.length-1].ownerDocument,S.map(i,Le),u=0;u<a;u++)c=i[u],ve.test(c.type||"")&&!Q.access(c,"globalEval")&&S.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?S._evalUrl&&!c.noModule&&S._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d):w(c.textContent.replace(Me,""),c,d))}return e}function ze(e,t,n){for(var o,r=t?S.filter(t,e):e,s=0;null!=(o=r[s]);s++)n||1!==o.nodeType||S.cleanData(xe(o)),o.parentNode&&(n&&ae(o)&&we(xe(o,"script")),o.parentNode.removeChild(o));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var o,r,s,i,a=e.cloneNode(!0),l=ae(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(i=xe(a),o=0,r=(s=xe(e)).length;o<r;o++)Ie(s[o],i[o]);if(t)if(n)for(s=s||xe(e),i=i||xe(a),o=0,r=s.length;o<r;o++)Be(s[o],i[o]);else Be(e,a);return(i=xe(a,"script")).length>0&&we(i,!l&&xe(e,"script")),a},cleanData:function(e){for(var t,n,o,r=S.event.special,s=0;void 0!==(n=e[s]);s++)if(X(n)){if(t=n[Q.expando]){if(t.events)for(o in t.events)r[o]?S.event.remove(n,o):S.removeEvent(n,o,t.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),S.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return W(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Fe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return Fe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(xe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return W(this,(function(e){var t=this[0]||{},n=0,o=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!ye[(be.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<o;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(xe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(xe(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,o=[],r=S(e),s=r.length-1,i=0;i<=s;i++)n=i===s?this:this.clone(!0),S(r[i])[t](n),c.apply(o,n.get());return this.pushStack(o)}}));var je=new RegExp("^("+oe+")(?!px)[a-z%]+$","i"),He=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=o),t.getComputedStyle(e)},Ve=function(e,t,n){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in o=n.call(e),t)e.style[r]=s[r];return o},$e=new RegExp(se.join("|"),"i");function Ue(e,t,n){var o,r,s,i,a=e.style;return(n=n||He(e))&&(""!==(i=n.getPropertyValue(t)||n[t])||ae(e)||(i=S.style(e,t)),!g.pixelBoxStyles()&&je.test(i)&&$e.test(t)&&(o=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=i,i=n.width,a.width=o,a.minWidth=r,a.maxWidth=s)),void 0!==i?i+"":i}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(c).appendChild(d);var e=o.getComputedStyle(d);n="1%"!==e.top,l=12===t(e.marginLeft),d.style.right="60%",i=36===t(e.right),r=36===t(e.width),d.style.position="absolute",s=12===t(d.offsetWidth/3),ie.removeChild(c),d=null}}function t(e){return Math.round(parseFloat(e))}var n,r,s,i,a,l,c=y.createElement("div"),d=y.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===d.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),i},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=y.createElement("table"),t=y.createElement("tr"),n=y.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ie.appendChild(e).appendChild(t).appendChild(n),r=o.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,ie.removeChild(e)),a}}))}();var qe=["Webkit","Moz","ms"],Ke=y.createElement("div").style,Ge={};function Ye(e){var t=S.cssProps[e]||Ge[e];return t||(e in Ke?e:Ge[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=qe.length;n--;)if((e=qe[n]+t)in Ke)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Je=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var o=re.exec(t);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):t}function tt(e,t,n,o,r,s){var i="width"===t?1:0,a=0,l=0;if(n===(o?"border":"content"))return 0;for(;i<4;i+=2)"margin"===n&&(l+=S.css(e,n+se[i],!0,r)),o?("content"===n&&(l-=S.css(e,"padding"+se[i],!0,r)),"margin"!==n&&(l-=S.css(e,"border"+se[i]+"Width",!0,r))):(l+=S.css(e,"padding"+se[i],!0,r),"padding"!==n?l+=S.css(e,"border"+se[i]+"Width",!0,r):a+=S.css(e,"border"+se[i]+"Width",!0,r));return!o&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-a-.5))||0),l}function nt(e,t,n){var o=He(e),r=(!g.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,o),s=r,i=Ue(e,t,o),a="offset"+t[0].toUpperCase()+t.slice(1);if(je.test(i)){if(!n)return i;i="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&D(e,"tr")||"auto"===i||!parseFloat(i)&&"inline"===S.css(e,"display",!1,o))&&e.getClientRects().length&&(r="border-box"===S.css(e,"boxSizing",!1,o),(s=a in e)&&(i=e[a])),(i=parseFloat(i)||0)+tt(e,t,n||(r?"border":"content"),s,o,i)+"px"}function ot(e,t,n,o,r){return new ot.prototype.init(e,t,n,o,r)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,i,a=Y(t),l=Je.test(t),c=e.style;if(l||(t=Ye(a)),i=S.cssHooks[t]||S.cssHooks[a],void 0===n)return i&&"get"in i&&void 0!==(r=i.get(e,!1,o))?r:c[t];"string"===(s=typeof n)&&(r=re.exec(n))&&r[1]&&(n=de(e,t,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(S.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),i&&"set"in i&&void 0===(n=i.set(e,n,o))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,o){var r,s,i,a=Y(t);return Je.test(t)||(t=Ye(a)),(i=S.cssHooks[t]||S.cssHooks[a])&&"get"in i&&(r=i.get(e,!0,n)),void 0===r&&(r=Ue(e,t,o)),"normal"===r&&t in Ze&&(r=Ze[t]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,o){if(n)return!Xe.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,o):Ve(e,Qe,(function(){return nt(e,t,o)}))},set:function(e,n,o){var r,s=He(e),i=!g.scrollboxSize()&&"absolute"===s.position,a=(i||o)&&"border-box"===S.css(e,"boxSizing",!1,s),l=o?tt(e,t,o,a,s):0;return a&&i&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-tt(e,t,"border",!1,s)-.5)),l&&(r=re.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),et(0,n,l)}}})),S.cssHooks.marginLeft=We(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var o=0,r={},s="string"==typeof n?n.split(" "):[n];o<4;o++)r[e+se[o]+t]=s[o]||s[o-2]||s[0];return r}},"margin"!==e&&(S.cssHooks[e+t].set=et)})),S.fn.extend({css:function(e,t){return W(this,(function(e,t,n){var o,r,s={},i=0;if(Array.isArray(t)){for(o=He(e),r=t.length;i<r;i++)s[t[i]]=S.css(e,t[i],!1,o);return s}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=ot,ot.prototype={constructor:ot,init:function(e,t,n,o,r,s){this.elem=e,this.prop=n,this.easing=r||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=s||(S.cssNumber[n]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,n=ot.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Ye(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=ot.prototype.init,S.fx.step={};var rt,st,it=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function lt(){st&&(!1===y.hidden&&o.requestAnimationFrame?o.requestAnimationFrame(lt):o.setTimeout(lt,S.fx.interval),S.fx.tick())}function ct(){return o.setTimeout((function(){rt=void 0})),rt=Date.now()}function dt(e,t){var n,o=0,r={height:e};for(t=t?1:0;o<4;o+=2-t)r["margin"+(n=se[o])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function ut(e,t,n){for(var o,r=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),s=0,i=r.length;s<i;s++)if(o=r[s].call(n,t,e))return o}function ht(e,t,n){var o,r,s=0,i=ht.prefilters.length,a=S.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=rt||ct(),n=Math.max(0,c.startTime+c.duration-t),o=1-(n/c.duration||0),s=0,i=c.tweens.length;s<i;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,n]),o<1&&i?n:(i||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var o=S.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(o),o},stop:function(t){var n=0,o=t?c.tweens.length:0;if(r)return this;for(r=!0;n<o;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),d=c.props;for(!function(e,t){var n,o,r,s,i;for(n in e)if(r=t[o=Y(n)],s=e[n],Array.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==o&&(e[o]=s,delete e[n]),(i=S.cssHooks[o])&&"expand"in i)for(n in s=i.expand(s),delete e[o],s)n in e||(e[n]=s[n],t[n]=r);else t[o]=r}(d,c.opts.specialEasing);s<i;s++)if(o=ht.prefilters[s].call(c,e,d,c.opts))return b(o.stop)&&(S._queueHooks(c.elem,c.opts.queue).stop=o.stop.bind(o)),o;return S.map(d,ut,c),b(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}S.Animation=S.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return de(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){b(e)?(t=e,e=["*"]):e=e.match(F);for(var n,o=0,r=e.length;o<r;o++)n=e[o],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var o,r,s,i,a,l,c,d,u="width"in t||"height"in t,h=this,m={},p=e.style,f=e.nodeType&&ce(e),g=Q.get(e,"fxshow");for(o in n.queue||(null==(i=S._queueHooks(e,"fx")).unqueued&&(i.unqueued=0,a=i.empty.fire,i.empty.fire=function(){i.unqueued||a()}),i.unqueued++,h.always((function(){h.always((function(){i.unqueued--,S.queue(e,"fx").length||i.empty.fire()}))}))),t)if(r=t[o],it.test(r)){if(delete t[o],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[o])continue;f=!0}m[o]=g&&g[o]||S.style(e,o)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(m))for(o in u&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=Q.get(e,"display")),"none"===(d=S.css(e,"display"))&&(c?d=c:(me([e],!0),c=e.style.display||c,d=S.css(e,"display"),me([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===S.css(e,"float")&&(l||(h.done((function(){p.display=c})),null==c&&(d=p.display,c="none"===d?"":d)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,m)l||(g?"hidden"in g&&(f=g.hidden):g=Q.access(e,"fxshow",{display:c}),s&&(g.hidden=!f),f&&me([e],!0),h.done((function(){for(o in f||me([e]),Q.remove(e,"fxshow"),m)S.style(e,o,m[o])}))),l=ut(f?g[o]:0,o,h),o in g||(g[o]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),S.speed=function(e,t,n){var o=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return S.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in S.fx.speeds?o.duration=S.fx.speeds[o.duration]:o.duration=S.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){b(o.old)&&o.old.call(this),o.queue&&S.dequeue(this,o.queue)},o},S.fn.extend({fadeTo:function(e,t,n,o){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,o)},animate:function(e,t,n,o){var r=S.isEmptyObject(e),s=S.speed(t,n,o),i=function(){var t=ht(this,S.extend({},e),s);(r||Q.get(this,"finish"))&&t.stop(!0)};return i.finish=i,r||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(e,t,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",s=S.timers,i=Q.get(this);if(r)i[r]&&i[r].stop&&o(i[r]);else for(r in i)i[r]&&i[r].stop&&at.test(r)&&o(i[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),o=n[e+"queue"],r=n[e+"queueHooks"],s=S.timers,i=o?o.length:0;for(n.finish=!0,S.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<i;t++)o[t]&&o[t].finish&&o[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,o,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(dt(t,!0),e,o,r)}})),S.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,o){return this.animate(t,e,n,o)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),rt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){st||(st=!0,lt())},S.fx.stop=function(){st=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=o.setTimeout(t,e);n.stop=function(){o.clearTimeout(r)}}))},function(){var e=y.createElement("input"),t=y.createElement("select").appendChild(y.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=y.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var mt,pt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return W(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var o,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?S.prop(e,t,n):(1===s&&S.isXMLDoc(e)||(r=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(o=r.get(e,t))?o:null==(o=S.find.attr(e,t))?void 0:o)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&D(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,o=0,r=t&&t.match(F);if(r&&1===e.nodeType)for(;n=r[o++];)e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=pt[t]||S.find.attr;pt[t]=function(e,t,o){var r,s,i=t.toLowerCase();return o||(s=pt[i],pt[i]=r,r=null!=n(e,t,o)?i:null,pt[i]=s),r}}));var ft=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function bt(e){return(e.match(F)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(F)||[]}S.fn.extend({prop:function(e,t){return W(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var o,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&S.isXMLDoc(e)||(t=S.propFix[t]||t,r=S.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:e[t]=n:r&&"get"in r&&null!==(o=r.get(e,t))?o:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,o,r,s,i,a,l=0;if(b(e))return this.each((function(t){S(this).addClass(e.call(this,t,vt(this)))}));if((t=yt(e)).length)for(;n=this[l++];)if(r=vt(n),o=1===n.nodeType&&" "+bt(r)+" "){for(i=0;s=t[i++];)o.indexOf(" "+s+" ")<0&&(o+=s+" ");r!==(a=bt(o))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,o,r,s,i,a,l=0;if(b(e))return this.each((function(t){S(this).removeClass(e.call(this,t,vt(this)))}));if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;n=this[l++];)if(r=vt(n),o=1===n.nodeType&&" "+bt(r)+" "){for(i=0;s=t[i++];)for(;o.indexOf(" "+s+" ")>-1;)o=o.replace(" "+s+" "," ");r!==(a=bt(o))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,o="string"===n||Array.isArray(e);return"boolean"==typeof t&&o?t?this.addClass(e):this.removeClass(e):b(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,vt(this),t),t)})):this.each((function(){var t,r,s,i;if(o)for(r=0,s=S(this),i=yt(e);t=i[r++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==n||((t=vt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,o=0;for(t=" "+e+" ";n=this[o++];)if(1===n.nodeType&&(" "+bt(vt(n))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(e){var t,n,o,r=this[0];return arguments.length?(o=b(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=o?e.call(this,n,S(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=S.map(r,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=S.valHooks[r.type]||S.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(xt,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:bt(S.text(e))}},select:{get:function(e){var t,n,o,r=e.options,s=e.selectedIndex,i="select-one"===e.type,a=i?null:[],l=i?s+1:r.length;for(o=s<0?l:i?s:0;o<l;o++)if(((n=r[o]).selected||o===s)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(t=S(n).val(),i)return t;a.push(t)}return a},set:function(e,t){for(var n,o,r=e.options,s=S.makeArray(t),i=r.length;i--;)((o=r[i]).selected=S.inArray(S.valHooks.option.get(o),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},g.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in o;var wt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var s,i,a,l,c,d,u,h,p=[n||y],f=m.call(e,"type")?e.type:e,g=m.call(e,"namespace")?e.namespace.split("."):[];if(i=h=a=n=n||y,3!==n.nodeType&&8!==n.nodeType&&!wt.test(f+S.event.triggered)&&(f.indexOf(".")>-1&&(g=f.split("."),f=g.shift(),g.sort()),c=f.indexOf(":")<0&&"on"+f,(e=e[S.expando]?e:new S.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),u=S.event.special[f]||{},r||!u.trigger||!1!==u.trigger.apply(n,t))){if(!r&&!u.noBubble&&!v(n)){for(l=u.delegateType||f,wt.test(l+f)||(i=i.parentNode);i;i=i.parentNode)p.push(i),a=i;a===(n.ownerDocument||y)&&p.push(a.defaultView||a.parentWindow||o)}for(s=0;(i=p[s++])&&!e.isPropagationStopped();)h=i,e.type=s>1?l:u.bindType||f,(d=(Q.get(i,"events")||Object.create(null))[e.type]&&Q.get(i,"handle"))&&d.apply(i,t),(d=c&&i[c])&&d.apply&&X(i)&&(e.result=d.apply(i,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(p.pop(),t)||!X(n)||c&&b(n[f])&&!v(n)&&((a=n[c])&&(n[c]=null),S.event.triggered=f,e.isPropagationStopped()&&h.addEventListener(f,Ct),n[f](),e.isPropagationStopped()&&h.removeEventListener(f,Ct),S.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var o=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(o,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),g.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var o=this.ownerDocument||this.document||this,r=Q.access(o,t);r||o.addEventListener(e,n,!0),Q.access(o,t,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,r=Q.access(o,t)-1;r?Q.access(o,t,r):(o.removeEventListener(e,n,!0),Q.remove(o,t))}}}));var _t=o.location,St={guid:Date.now()},kt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new o.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Et=/\[\]$/,Ot=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,o){var r;if(Array.isArray(t))S.each(t,(function(t,r){n||Et.test(e)?o(e,r):Dt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,o)}));else if(n||"object"!==C(t))o(e,t);else for(r in t)Dt(e+"["+r+"]",t[r],n,o)}S.param=function(e,t){var n,o=[],r=function(e,t){var n=b(t)?t():t;o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){r(this.name,this.value)}));else for(n in e)Dt(n,e[n],t,r);return o.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&At.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var Rt=/%20/g,Mt=/#.*$/,Nt=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Bt=/^\/\//,It={},Ft={},zt="*/".concat("*"),jt=y.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var o,r=0,s=t.toLowerCase().match(F)||[];if(b(n))for(;o=s[r++];)"+"===o[0]?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(n)):(e[o]=e[o]||[]).push(n)}}function Vt(e,t,n,o){var r={},s=e===Ft;function i(a){var l;return r[a]=!0,S.each(e[a]||[],(function(e,a){var c=a(t,n,o);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),i(c),!1)})),l}return i(t.dataTypes[0])||!r["*"]&&i("*")}function $t(e,t){var n,o,r=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:o||(o={}))[n]=t[n]);return o&&S.extend(!0,e,o),e}jt.href=_t.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ht(It),ajaxTransport:Ht(Ft),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,s,i,a,l,c,d,u,h,m=S.ajaxSetup({},t),p=m.context||m,f=m.context&&(p.nodeType||p.jquery)?S(p):S.event,g=S.Deferred(),b=S.Callbacks("once memory"),v=m.statusCode||{},x={},w={},C="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(c){if(!i)for(i={};t=Pt.exec(s);)i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)_.always(e[_.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||C;return n&&n.abort(t),k(0,t),this}};if(g.promise(_),m.url=((e||m.url||_t.href)+"").replace(Bt,_t.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(F)||[""],null==m.crossDomain){l=y.createElement("a");try{l.href=m.url,l.href=l.href,m.crossDomain=jt.protocol+"//"+jt.host!=l.protocol+"//"+l.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=S.param(m.data,m.traditional)),Vt(It,m,t,_),c)return _;for(u in(d=S.event&&m.global)&&0==S.active++&&S.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Lt.test(m.type),r=m.url.replace(Mt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Rt,"+")):(h=m.url.slice(r.length),m.data&&(m.processData||"string"==typeof m.data)&&(r+=(kt.test(r)?"&":"?")+m.data,delete m.data),!1===m.cache&&(r=r.replace(Nt,"$1"),h=(kt.test(r)?"&":"?")+"_="+St.guid+++h),m.url=r+h),m.ifModified&&(S.lastModified[r]&&_.setRequestHeader("If-Modified-Since",S.lastModified[r]),S.etag[r]&&_.setRequestHeader("If-None-Match",S.etag[r])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&_.setRequestHeader("Content-Type",m.contentType),_.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+zt+"; q=0.01":""):m.accepts["*"]),m.headers)_.setRequestHeader(u,m.headers[u]);if(m.beforeSend&&(!1===m.beforeSend.call(p,_,m)||c))return _.abort();if(C="abort",b.add(m.complete),_.done(m.success),_.fail(m.error),n=Vt(Ft,m,t,_)){if(_.readyState=1,d&&f.trigger("ajaxSend",[_,m]),c)return _;m.async&&m.timeout>0&&(a=o.setTimeout((function(){_.abort("timeout")}),m.timeout));try{c=!1,n.send(x,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,t,i,l){var u,h,y,x,w,C=t;c||(c=!0,a&&o.clearTimeout(a),n=void 0,s=l||"",_.readyState=e>0?4:0,u=e>=200&&e<300||304===e,i&&(x=function(e,t,n){for(var o,r,s,i,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}i||(i=r)}s=s||i}if(s)return s!==l[0]&&l.unshift(s),n[s]}(m,_,i)),!u&&S.inArray("script",m.dataTypes)>-1&&S.inArray("json",m.dataTypes)<0&&(m.converters["text script"]=function(){}),x=function(e,t,n,o){var r,s,i,a,l,c={},d=e.dataTypes.slice();if(d[1])for(i in e.converters)c[i.toLowerCase()]=e.converters[i];for(s=d.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(i=c[l+" "+s]||c["* "+s]))for(r in c)if((a=r.split(" "))[1]===s&&(i=c[l+" "+a[0]]||c["* "+a[0]])){!0===i?i=c[r]:!0!==c[r]&&(s=a[0],d.unshift(a[1]));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(e){return{state:"parsererror",error:i?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(m,x,_,u),u?(m.ifModified&&((w=_.getResponseHeader("Last-Modified"))&&(S.lastModified[r]=w),(w=_.getResponseHeader("etag"))&&(S.etag[r]=w)),204===e||"HEAD"===m.type?C="nocontent":304===e?C="notmodified":(C=x.state,h=x.data,u=!(y=x.error))):(y=C,!e&&C||(C="error",e<0&&(e=0))),_.status=e,_.statusText=(t||C)+"",u?g.resolveWith(p,[h,C,_]):g.rejectWith(p,[_,C,y]),_.statusCode(v),v=void 0,d&&f.trigger(u?"ajaxSuccess":"ajaxError",[_,m,u?h:y]),b.fireWith(p,[_,C]),d&&(f.trigger("ajaxComplete",[_,m]),--S.active||S.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,o,r){return b(n)&&(r=r||o,o=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:r,data:n,success:o},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return b(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=b(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new o.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Wt=S.ajaxSettings.xhr();g.cors=!!Wt&&"withCredentials"in Wt,g.ajax=Wt=!!Wt,S.ajaxTransport((function(e){var t,n;if(g.cors||Wt&&!e.crossDomain)return{send:function(r,s){var i,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)a[i]=e.xhrFields[i];for(i in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(i,r[i]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Ut[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&o.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(o,r){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){n&&n()}}}));var qt,Kt=[],Gt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||S.expando+"_"+St.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var r,s,i,a=!1!==e.jsonp&&(Gt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Gt,"$1"+r):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return i||S.error(r+" was not called"),i[0]},e.dataTypes[0]="json",s=o[r],o[r]=function(){i=arguments},n.always((function(){void 0===s?S(o).removeProp(r):o[r]=s,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),i&&b(s)&&s(i[0]),i=s=void 0})),"script"})),g.createHTMLDocument=((qt=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qt.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((o=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(o)):t=y),s=!n&&[],(r=R.exec(e))?[t.createElement(r[1])]:(r=_e([e],t,s),s&&s.length&&S(s).remove(),S.merge([],r.childNodes)));var o,r,s},S.fn.load=function(e,t,n){var o,r,s,i=this,a=e.indexOf(" ");return a>-1&&(o=bt(e.slice(a)),e=e.slice(0,a)),b(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),i.length>0&&S.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){s=arguments,i.html(o?S("<div>").append(S.parseHTML(e)).find(o):e)})).always(n&&function(e,t){i.each((function(){n.apply(this,s||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var o,r,s,i,a,l,c=S.css(e,"position"),d=S(e),u={};"static"===c&&(e.style.position="relative"),a=d.offset(),s=S.css(e,"top"),l=S.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(i=(o=d.position()).top,r=o.left):(i=parseFloat(s)||0,r=parseFloat(l)||0),b(t)&&(t=t.call(e,n,S.extend({},a))),null!=t.top&&(u.top=t.top-a.top+i),null!=t.left&&(u.left=t.left-a.left+r),"using"in t?t.using.call(e,u):d.css(u)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,o=this[0];return o?o.getClientRects().length?(t=o.getBoundingClientRect(),n=o.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,o=this[0],r={top:0,left:0};if("fixed"===S.css(o,"position"))t=o.getBoundingClientRect();else{for(t=this.offset(),n=o.ownerDocument,e=o.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==o&&1===e.nodeType&&((r=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),r.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-S.css(o,"marginTop",!0),left:t.left-r.left-S.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||ie}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(o){return W(this,(function(e,o,r){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===r)return s?s[t]:e[o];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):e[o]=r}),e,o,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=We(g.pixelPosition,(function(e,n){if(n)return n=Ue(e,t),je.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,o){S.fn[o]=function(r,s){var i=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return W(this,(function(t,n,r){var s;return v(t)?0===o.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===r?S.css(t,n,a):S.style(t,n,r,a)}),t,i?r:void 0,i)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,o){return this.on(t,e,n,o)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Yt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,o,r;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return o=a.call(arguments,2),r=function(){return e.apply(t||this,o.concat(a.call(arguments)))},r.guid=e.guid=e.guid||S.guid++,r},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=D,S.isFunction=b,S.isWindow=v,S.camelCase=Y,S.type=C,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Yt,"")},void 0===(n=function(){return S}.apply(t,[]))||(e.exports=n);var Xt=o.jQuery,Jt=o.$;return S.noConflict=function(e){return o.$===S&&(o.$=Jt),e&&o.jQuery===S&&(o.jQuery=Xt),S},void 0===r&&(o.jQuery=o.$=S),S}))},4349:function(e,t,n){var o,r,s;r=[n(9755)],void 0===(s="function"==typeof(o=function(e){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=e.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},t.prototype.option=function(t){e.extend(this.options,t)},t.prototype.imageCountLabel=function(e,t){return this.options.albumLabel.replace(/%1/g,e).replace(/%2/g,t)},t.prototype.init=function(){var t=this;e(document).ready((function(){t.enable(),t.build()}))},t.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",(function(n){return t.start(e(n.currentTarget)),!1}))},t.prototype.build=function(){if(!(e("#lightbox").length>0)){var t=this;e('<div id="lightboxOverlay" tabindex="-1" class="lightboxOverlay"></div><div id="lightbox" tabindex="-1" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" alt=""/><div class="lb-nav"><a class="lb-prev" aria-label="Previous image" href="" ></a><a class="lb-next" aria-label="Next image" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",(function(){return t.end(),!1})),this.$lightbox.hide().on("click",(function(n){"lightbox"===e(n.target).attr("id")&&t.end()})),this.$outerContainer.on("click",(function(n){return"lightbox"===e(n.target).attr("id")&&t.end(),!1})),this.$lightbox.find(".lb-prev").on("click",(function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1})),this.$lightbox.find(".lb-next").on("click",(function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1})),this.$nav.on("mousedown",(function(e){3===e.which&&(t.$nav.css("pointer-events","none"),t.$lightbox.one("contextmenu",(function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(t),0)})))})),this.$lightbox.find(".lb-loader, .lb-close").on("click",(function(){return t.end(),!1}))}},t.prototype.start=function(t){var n=this,o=e(window);o.on("resize",e.proxy(this.sizeOverlay,this)),this.sizeOverlay(),this.album=[];var r=0;function s(e){n.album.push({alt:e.attr("data-alt"),link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var i,a=t.attr("data-lightbox");if(a){i=e(t.prop("tagName")+'[data-lightbox="'+a+'"]');for(var l=0;l<i.length;l=++l)s(e(i[l])),i[l]===t[0]&&(r=l)}else if("lightbox"===t.attr("rel"))s(t);else{i=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var c=0;c<i.length;c=++c)s(e(i[c])),i[c]===t[0]&&(r=c)}var d=o.scrollTop()+this.options.positionFromTop,u=o.scrollLeft();this.$lightbox.css({top:d+"px",left:u+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&e("body").addClass("lb-disable-scrolling"),this.changeImage(r)},t.prototype.changeImage=function(t){var n=this,o=this.album[t].link,r=o.split(".").slice(-1)[0],s=this.$lightbox.find(".lb-image");this.disableKeyboardNav(),this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var i=new Image;i.onload=function(){var a,l,c,d,u,h;s.attr({alt:n.album[t].alt,src:o}),e(i),s.width(i.width),s.height(i.height),h=e(window).width(),u=e(window).height(),d=h-n.containerPadding.left-n.containerPadding.right-n.imageBorderWidth.left-n.imageBorderWidth.right-20,c=u-n.containerPadding.top-n.containerPadding.bottom-n.imageBorderWidth.top-n.imageBorderWidth.bottom-n.options.positionFromTop-70,"svg"===r&&(s.width(d),s.height(c)),n.options.fitImagesInViewport?(n.options.maxWidth&&n.options.maxWidth<d&&(d=n.options.maxWidth),n.options.maxHeight&&n.options.maxHeight<c&&(c=n.options.maxHeight)):(d=n.options.maxWidth||i.width||d,c=n.options.maxHeight||i.height||c),(i.width>d||i.height>c)&&(i.width/d>i.height/c?(l=d,a=parseInt(i.height/(i.width/l),10),s.width(l),s.height(a)):(a=c,l=parseInt(i.width/(i.height/a),10),s.width(l),s.height(a))),n.sizeContainer(s.width(),s.height())},i.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){var t=this;setTimeout((function(){t.$overlay.width(e(document).width()).height(e(document).height())}),0)},t.prototype.sizeContainer=function(e,t){var n=this,o=this.$outerContainer.outerWidth(),r=this.$outerContainer.outerHeight(),s=e+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,i=t+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;function a(){n.$lightbox.find(".lb-dataContainer").width(s),n.$lightbox.find(".lb-prevLink").height(i),n.$lightbox.find(".lb-nextLink").height(i),n.$overlay.focus(),n.showImage()}o!==s||r!==i?this.$outerContainer.animate({width:s,height:i},this.options.resizeDuration,"swing",(function(){a()})):a()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=!!this.options.alwaysShowNavOnTouchDevices}catch(e){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var e=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var t=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?t.text(this.album[this.currentImageIndex].title):t.html(this.album[this.currentImageIndex].title),t.fadeIn("fast")}if(this.album.length>1&&this.options.showImageNumberLabel){var n=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(n).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,(function(){return e.sizeOverlay()}))},t.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&((new Image).src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){this.$lightbox.on("keyup.keyboard",e.proxy(this.keyboardAction,this)),this.$overlay.on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){this.$lightbox.off(".keyboard"),this.$overlay.off(".keyboard")},t.prototype.keyboardAction=function(e){var t=27,n=37,o=39,r=e.keyCode;r===t?(e.stopPropagation(),this.end()):r===n?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):r===o&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),this.options.disableScrolling&&e("body").removeClass("lb-disable-scrolling")},new t})?o.apply(t,r):o)||(e.exports=s)},7009:(e,t,n)=>{var o=n(9755),r=n(9755);!function(e,t,n,r){function s(t,n){this.settings=null,this.options=e.extend({},s.Defaults,n),this.$element=e(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},e.each(["onResize","onThrottledResize"],e.proxy((function(t,n){this._handlers[n]=e.proxy(this[n],this)}),this)),e.each(s.Plugins,e.proxy((function(e,t){this._plugins[e.charAt(0).toLowerCase()+e.slice(1)]=new t(this)}),this)),e.each(s.Workers,e.proxy((function(t,n){this._pipe.push({filter:n.filter,run:e.proxy(n.run,this)})}),this)),this.setup(),this.initialize()}s.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},s.Width={Default:"default",Inner:"inner",Outer:"outer"},s.Type={Event:"event",State:"state"},s.Plugins={},s.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(e){var t=this.settings.margin||"",n=!this.settings.autoWidth,o=this.settings.rtl,r={width:"auto","margin-left":o?t:"","margin-right":o?"":t};!n&&this.$stage.children().css(r),e.css=r}},{filter:["width","items","settings"],run:function(e){var t=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,n=null,o=this._items.length,r=!this.settings.autoWidth,s=[];for(e.items={merge:!1,width:t};o--;)n=this._mergers[o],n=this.settings.mergeFit&&Math.min(n,this.settings.items)||n,e.items.merge=n>1||e.items.merge,s[o]=r?t*n:this._items[o].width();this._widths=s}},{filter:["items","settings"],run:function(){var t=[],n=this._items,o=this.settings,r=Math.max(2*o.items,4),s=2*Math.ceil(n.length/2),i=o.loop&&n.length?o.rewind?r:Math.max(r,s):0,a="",l="";for(i/=2;i>0;)t.push(this.normalize(t.length/2,!0)),a+=n[t[t.length-1]][0].outerHTML,t.push(this.normalize(n.length-1-(t.length-1)/2,!0)),l=n[t[t.length-1]][0].outerHTML+l,i-=1;this._clones=t,e(a).addClass("cloned").appendTo(this.$stage),e(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var e=this.settings.rtl?1:-1,t=this._clones.length+this._items.length,n=-1,o=0,r=0,s=[];++n<t;)o=s[n-1]||0,r=this._widths[this.relative(n)]+this.settings.margin,s.push(o+r*e);this._coordinates=s}},{filter:["width","items","settings"],run:function(){var e=this.settings.stagePadding,t=this._coordinates,n={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};this.$stage.css(n)}},{filter:["width","items","settings"],run:function(e){var t=this._coordinates.length,n=!this.settings.autoWidth,o=this.$stage.children();if(n&&e.items.merge)for(;t--;)e.css.width=this._widths[this.relative(t)],o.eq(t).css(e.css);else n&&(e.css.width=e.items.width,o.css(e.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(e){e.current=e.current?this.$stage.children().index(e.current):0,e.current=Math.max(this.minimum(),Math.min(this.maximum(),e.current)),this.reset(e.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,n,o,r=this.settings.rtl?1:-1,s=2*this.settings.stagePadding,i=this.coordinates(this.current())+s,a=i+this.width()*r,l=[];for(n=0,o=this._coordinates.length;n<o;n++)e=this._coordinates[n-1]||0,t=Math.abs(this._coordinates[n])+s*r,(this.op(e,"<=",i)&&this.op(e,">",a)||this.op(t,"<",i)&&this.op(t,">",a))&&l.push(n);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],s.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=e("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(e("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},s.prototype.initializeItems=function(){var t=this.$element.find(".owl-item");if(t.length)return this._items=t.get().map((function(t){return e(t)})),this._mergers=this._items.map((function(){return 1})),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},s.prototype.initialize=function(){var e,t,n;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(e=this.$element.find("img"),t=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:r,n=this.$element.children(t).width(),e.length&&n<=0&&this.preloadAutoWidthImages(e));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},s.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},s.prototype.setup=function(){var t=this.viewport(),n=this.options.responsive,o=-1,r=null;n?(e.each(n,(function(e){e<=t&&e>o&&(o=Number(e))})),"function"==typeof(r=e.extend({},this.options,n[o])).stagePadding&&(r.stagePadding=r.stagePadding()),delete r.responsive,r.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+o))):r=e.extend({},this.options),this.trigger("change",{property:{name:"settings",value:r}}),this._breakpoint=o,this.settings=r,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},s.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},s.prototype.prepare=function(t){var n=this.trigger("prepare",{content:t});return n.data||(n.data=e("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:n.data}),n.data},s.prototype.update=function(){for(var t=0,n=this._pipe.length,o=e.proxy((function(e){return this[e]}),this._invalidated),r={};t<n;)(this._invalidated.all||e.grep(this._pipe[t].filter,o).length>0)&&this._pipe[t].run(r),t++;this._invalidated={},!this.is("valid")&&this.enter("valid")},s.prototype.width=function(e){switch(e=e||s.Width.Default){case s.Width.Inner:case s.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},s.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},s.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},s.prototype.onResize=function(){return!!this._items.length&&(this._width!==this.$element.width()&&(!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))))},s.prototype.registerEventHandlers=function(){e.support.transition&&this.$stage.on(e.support.transition.end+".owl.core",e.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(t,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",(function(){return!1}))),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",e.proxy(this.onDragEnd,this)))},s.prototype.onDragStart=function(t){var o=null;3!==t.which&&(e.support.transform?o={x:(o=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===o.length?12:4],y:o[16===o.length?13:5]}:(o=this.$stage.position(),o={x:this.settings.rtl?o.left+this.$stage.width()-this.width()+this.settings.margin:o.left,y:o.top}),this.is("animating")&&(e.support.transform?this.animate(o.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=e(t.target),this._drag.stage.start=o,this._drag.stage.current=o,this._drag.pointer=this.pointer(t),e(n).on("mouseup.owl.core touchend.owl.core",e.proxy(this.onDragEnd,this)),e(n).one("mousemove.owl.core touchmove.owl.core",e.proxy((function(t){var o=this.difference(this._drag.pointer,this.pointer(t));e(n).on("mousemove.owl.core touchmove.owl.core",e.proxy(this.onDragMove,this)),Math.abs(o.x)<Math.abs(o.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))}),this)))},s.prototype.onDragMove=function(e){var t=null,n=null,o=null,r=this.difference(this._drag.pointer,this.pointer(e)),s=this.difference(this._drag.stage.start,r);this.is("dragging")&&(e.preventDefault(),this.settings.loop?(t=this.coordinates(this.minimum()),n=this.coordinates(this.maximum()+1)-t,s.x=((s.x-t)%n+n)%n+t):(t=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),n=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),o=this.settings.pullDrag?-1*r.x/5:0,s.x=Math.max(Math.min(s.x,t+o),n+o)),this._drag.stage.current=s,this.animate(s.x))},s.prototype.onDragEnd=function(t){var o=this.difference(this._drag.pointer,this.pointer(t)),r=this._drag.stage.current,s=o.x>0^this.settings.rtl?"left":"right";e(n).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==o.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(r.x,0!==o.x?s:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=s,(Math.abs(o.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",(function(){return!1}))),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},s.prototype.closest=function(t,n){var o=-1,s=this.width(),i=this.coordinates();return this.settings.freeDrag||e.each(i,e.proxy((function(e,a){return"left"===n&&t>a-30&&t<a+30?o=e:"right"===n&&t>a-s-30&&t<a-s+30?o=e+1:this.op(t,"<",a)&&this.op(t,">",i[e+1]!==r?i[e+1]:a-s)&&(o="left"===n?e+1:e),-1===o}),this)),this.settings.loop||(this.op(t,">",i[this.minimum()])?o=t=this.minimum():this.op(t,"<",i[this.maximum()])&&(o=t=this.maximum())),o},s.prototype.animate=function(t){var n=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),n&&(this.enter("animating"),this.trigger("translate")),e.support.transform3d&&e.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):n?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,e.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},s.prototype.is=function(e){return this._states.current[e]&&this._states.current[e]>0},s.prototype.current=function(e){if(e===r)return this._current;if(0===this._items.length)return r;if(e=this.normalize(e),this._current!==e){var t=this.trigger("change",{property:{name:"position",value:e}});t.data!==r&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},s.prototype.invalidate=function(t){return"string"===e.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),e.map(this._invalidated,(function(e,t){return t}))},s.prototype.reset=function(e){(e=this.normalize(e))!==r&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},s.prototype.normalize=function(e,t){var n=this._items.length,o=t?0:this._clones.length;return!this.isNumeric(e)||n<1?e=r:(e<0||e>=n+o)&&(e=((e-o/2)%n+n)%n+o/2),e},s.prototype.relative=function(e){return e-=this._clones.length/2,this.normalize(e,!0)},s.prototype.maximum=function(e){var t,n,o,r=this.settings,s=this._coordinates.length;if(r.loop)s=this._clones.length/2+this._items.length-1;else if(r.autoWidth||r.merge){if(t=this._items.length)for(n=this._items[--t].width(),o=this.$element.width();t--&&!((n+=this._items[t].width()+this.settings.margin)>o););s=t+1}else s=r.center?this._items.length-1:this._items.length-r.items;return e&&(s-=this._clones.length/2),Math.max(s,0)},s.prototype.minimum=function(e){return e?0:this._clones.length/2},s.prototype.items=function(e){return e===r?this._items.slice():(e=this.normalize(e,!0),this._items[e])},s.prototype.mergers=function(e){return e===r?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},s.prototype.clones=function(t){var n=this._clones.length/2,o=n+this._items.length,s=function(e){return e%2==0?o+e/2:n-(e+1)/2};return t===r?e.map(this._clones,(function(e,t){return s(t)})):e.map(this._clones,(function(e,n){return e===t?s(n):null}))},s.prototype.speed=function(e){return e!==r&&(this._speed=e),this._speed},s.prototype.coordinates=function(t){var n,o=1,s=t-1;return t===r?e.map(this._coordinates,e.proxy((function(e,t){return this.coordinates(t)}),this)):(this.settings.center?(this.settings.rtl&&(o=-1,s=t+1),n=this._coordinates[t],n+=(this.width()-n+(this._coordinates[s]||0))/2*o):n=this._coordinates[s]||0,n=Math.ceil(n))},s.prototype.duration=function(e,t,n){return 0===n?0:Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(n||this.settings.smartSpeed)},s.prototype.to=function(e,t){var n=this.current(),o=null,r=e-this.relative(n),s=(r>0)-(r<0),i=this._items.length,a=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(r)>i/2&&(r+=-1*s*i),(o=(((e=n+r)-a)%i+i)%i+a)!==e&&o-r<=l&&o-r>0&&(n=o-r,e=o,this.reset(n))):e=this.settings.rewind?(e%(l+=1)+l)%l:Math.max(a,Math.min(l,e)),this.speed(this.duration(n,e,t)),this.current(e),this.isVisible()&&this.update()},s.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},s.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},s.prototype.onTransitionEnd=function(e){if(e!==r&&(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},s.prototype.viewport=function(){var o;return this.options.responsiveBaseElement!==t?o=e(this.options.responsiveBaseElement).width():t.innerWidth?o=t.innerWidth:n.documentElement&&n.documentElement.clientWidth?o=n.documentElement.clientWidth:console.warn("Can not detect viewport width."),o},s.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof o?t:e(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter((function(){return 1===this.nodeType})).each(e.proxy((function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)}),this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},s.prototype.add=function(t,n){var s=this.relative(this._current);n=n===r?this._items.length:this.normalize(n,!0),t=t instanceof o?t:e(t),this.trigger("add",{content:t,position:n}),t=this.prepare(t),0===this._items.length||n===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[n-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[n].before(t),this._items.splice(n,0,t),this._mergers.splice(n,0,1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[s]&&this.reset(this._items[s].index()),this.invalidate("items"),this.trigger("added",{content:t,position:n})},s.prototype.remove=function(e){(e=this.normalize(e,!0))!==r&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},s.prototype.preloadAutoWidthImages=function(t){t.each(e.proxy((function(t,n){this.enter("pre-loading"),n=e(n),e(new Image).one("load",e.proxy((function(e){n.attr("src",e.target.src),n.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()}),this)).attr("src",n.attr("src")||n.attr("data-src")||n.attr("data-src-retina"))}),this))},s.prototype.destroy=function(){for(var o in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),e(n).off(".owl.core"),!1!==this.settings.responsive&&(t.clearTimeout(this.resizeTimer),this.off(t,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[o].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},s.prototype.op=function(e,t,n){var o=this.settings.rtl;switch(t){case"<":return o?e>n:e<n;case">":return o?e<n:e>n;case">=":return o?e<=n:e>=n;case"<=":return o?e>=n:e<=n}},s.prototype.on=function(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on"+t,n)},s.prototype.off=function(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on"+t,n)},s.prototype.trigger=function(t,n,o,r,i){var a={item:{count:this._items.length,index:this.current()}},l=e.camelCase(e.grep(["on",t,o],(function(e){return e})).join("-").toLowerCase()),c=e.Event([t,"owl",o||"carousel"].join(".").toLowerCase(),e.extend({relatedTarget:this},a,n));return this._supress[t]||(e.each(this._plugins,(function(e,t){t.onTrigger&&t.onTrigger(c)})),this.register({type:s.Type.Event,name:t}),this.$element.trigger(c),this.settings&&"function"==typeof this.settings[l]&&this.settings[l].call(this,c)),c},s.prototype.enter=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy((function(e,t){this._states.current[t]===r&&(this._states.current[t]=0),this._states.current[t]++}),this))},s.prototype.leave=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy((function(e,t){this._states.current[t]--}),this))},s.prototype.register=function(t){if(t.type===s.Type.Event){if(e.event.special[t.name]||(e.event.special[t.name]={}),!e.event.special[t.name].owl){var n=e.event.special[t.name]._default;e.event.special[t.name]._default=function(e){return!n||!n.apply||e.namespace&&-1!==e.namespace.indexOf("owl")?e.namespace&&e.namespace.indexOf("owl")>-1:n.apply(this,arguments)},e.event.special[t.name].owl=!0}}else t.type===s.Type.State&&(this._states.tags[t.name]?this._states.tags[t.name]=this._states.tags[t.name].concat(t.tags):this._states.tags[t.name]=t.tags,this._states.tags[t.name]=e.grep(this._states.tags[t.name],e.proxy((function(n,o){return e.inArray(n,this._states.tags[t.name])===o}),this)))},s.prototype.suppress=function(t){e.each(t,e.proxy((function(e,t){this._supress[t]=!0}),this))},s.prototype.release=function(t){e.each(t,e.proxy((function(e,t){delete this._supress[t]}),this))},s.prototype.pointer=function(e){var n={x:null,y:null};return(e=(e=e.originalEvent||e||t.event).touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY),n},s.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))},s.prototype.difference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.fn.owlCarousel=function(t){var n=Array.prototype.slice.call(arguments,1);return this.each((function(){var o=e(this),r=o.data("owl.carousel");r||(r=new s(this,"object"==typeof t&&t),o.data("owl.carousel",r),e.each(["next","prev","to","destroy","refresh","replace","add","remove"],(function(t,n){r.register({type:s.Type.Event,name:n}),r.$element.on(n+".owl.carousel.core",e.proxy((function(e){e.namespace&&e.relatedTarget!==this&&(this.suppress([n]),r[n].apply(this,[].slice.call(arguments,1)),this.release([n]))}),r))}))),"string"==typeof t&&"_"!==t.charAt(0)&&r[t].apply(r,n)}))},e.fn.owlCarousel.Constructor=s}(window.Zepto||r,window,document),function(e,t,n,o){var r=function(t){this._core=t,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoRefresh&&this.watch()}),this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers)};r.Defaults={autoRefresh:!0,autoRefreshInterval:500},r.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=t.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},r.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},r.prototype.destroy=function(){var e,n;for(e in t.clearInterval(this._interval),this._handlers)this._core.$element.off(e,this._handlers[e]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=r}(window.Zepto||r,window,document),function(e,t,n,o){var r=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":e.proxy((function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type)){var n=this._core.settings,o=n.center&&Math.ceil(n.items/2)||n.items,r=n.center&&-1*o||0,s=(t.property&&undefined!==t.property.value?t.property.value:this._core.current())+r,i=this._core.clones().length,a=e.proxy((function(e,t){this.load(t)}),this);for(n.lazyLoadEager>0&&(o+=n.lazyLoadEager,n.loop&&(s-=n.lazyLoadEager,o++));r++<o;)this.load(i/2+this._core.relative(s)),i&&e.each(this._core.clones(this._core.relative(s)),a),s++}}),this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers)};r.Defaults={lazyLoad:!1,lazyLoadEager:0},r.prototype.load=function(n){var o=this._core.$stage.children().eq(n),r=o&&o.find(".owl-lazy");!r||e.inArray(o.get(0),this._loaded)>-1||(r.each(e.proxy((function(n,o){var r,s=e(o),i=t.devicePixelRatio>1&&s.attr("data-src-retina")||s.attr("data-src")||s.attr("data-srcset");this._core.trigger("load",{element:s,url:i},"lazy"),s.is("img")?s.one("load.owl.lazy",e.proxy((function(){s.css("opacity",1),this._core.trigger("loaded",{element:s,url:i},"lazy")}),this)).attr("src",i):s.is("source")?s.one("load.owl.lazy",e.proxy((function(){this._core.trigger("loaded",{element:s,url:i},"lazy")}),this)).attr("srcset",i):((r=new Image).onload=e.proxy((function(){s.css({"background-image":'url("'+i+'")',opacity:"1"}),this._core.trigger("loaded",{element:s,url:i},"lazy")}),this),r.src=i)}),this)),this._loaded.push(o.get(0)))},r.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Lazy=r}(window.Zepto||r,window,document),function(e,t,n,o){var r=function(n){this._core=n,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&this.update()}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&"position"===e.property.name&&this.update()}),this),"loaded.owl.lazy":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()}),this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var o=this;e(t).on("load",(function(){o._core.settings.autoHeight&&o.update()})),e(t).resize((function(){o._core.settings.autoHeight&&(null!=o._intervalId&&clearTimeout(o._intervalId),o._intervalId=setTimeout((function(){o.update()}),250))}))};r.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},r.prototype.update=function(){var t=this._core._current,n=t+this._core.settings.items,o=this._core.settings.lazyLoad,r=this._core.$stage.children().toArray().slice(t,n),s=[],i=0;e.each(r,(function(t,n){s.push(e(n).height())})),(i=Math.max.apply(null,s))<=1&&o&&this._previousHeight&&(i=this._previousHeight),this._previousHeight=i,this._core.$stage.parent().height(i).addClass(this._core.settings.autoHeightClass)},r.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoHeight=r}(window.Zepto||r,window,document),function(e,t,n,o){var r=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})}),this),"resize.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()}),this),"refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()}),this),"prepared.owl.carousel":e.proxy((function(t){if(t.namespace){var n=e(t.content).find(".owl-video");n.length&&(n.css("display","none"),this.fetch(n,e(t.content)))}}),this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy((function(e){this.play(e)}),this))};r.Defaults={video:!1,videoHeight:!1,videoWidth:!1},r.prototype.fetch=function(e,t){var n=e.attr("data-vimeo-id")?"vimeo":e.attr("data-vzaar-id")?"vzaar":"youtube",o=e.attr("data-vimeo-id")||e.attr("data-youtube-id")||e.attr("data-vzaar-id"),r=e.attr("data-width")||this._core.settings.videoWidth,s=e.attr("data-height")||this._core.settings.videoHeight,i=e.attr("href");if(!i)throw new Error("Missing video URL.");if((o=i.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)n="youtube";else if(o[3].indexOf("vimeo")>-1)n="vimeo";else{if(!(o[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");n="vzaar"}o=o[6],this._videos[i]={type:n,id:o,width:r,height:s},t.attr("data-video",i),this.thumbnail(e,this._videos[i])},r.prototype.thumbnail=function(t,n){var o,r,s=n.width&&n.height?"width:"+n.width+"px;height:"+n.height+"px;":"",i=t.find("img"),a="src",l="",c=this._core.settings,d=function(n){'<div class="owl-video-play-icon"></div>',o=c.lazyLoad?e("<div/>",{class:"owl-video-tn "+l,srcType:n}):e("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url("+n+")"}),t.after(o),t.after('<div class="owl-video-play-icon"></div>')};if(t.wrap(e("<div/>",{class:"owl-video-wrapper",style:s})),this._core.settings.lazyLoad&&(a="data-src",l="owl-lazy"),i.length)return d(i.attr(a)),i.remove(),!1;"youtube"===n.type?(r="//img.youtube.com/vi/"+n.id+"/hqdefault.jpg",d(r)):"vimeo"===n.type?e.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+n.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){r=e[0].thumbnail_large,d(r)}}):"vzaar"===n.type&&e.ajax({type:"GET",url:"//vzaar.com/api/videos/"+n.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){r=e.framegrab_url,d(r)}})},r.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},r.prototype.play=function(t){var n,o=e(t.target).closest("."+this._core.settings.itemClass),r=this._videos[o.attr("data-video")],s=r.width||"100%",i=r.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),o=this._core.items(this._core.relative(o.index())),this._core.reset(o.index()),(n=e('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",i),n.attr("width",s),"youtube"===r.type?n.attr("src","//www.youtube.com/embed/"+r.id+"?autoplay=1&rel=0&v="+r.id):"vimeo"===r.type?n.attr("src","//player.vimeo.com/video/"+r.id+"?autoplay=1"):"vzaar"===r.type&&n.attr("src","//view.vzaar.com/"+r.id+"/player?autoplay=true"),e(n).wrap('<div class="owl-video-frame" />').insertAfter(o.find(".owl-video")),this._playing=o.addClass("owl-video-playing"))},r.prototype.isInFullScreen=function(){var t=n.fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},r.prototype.destroy=function(){var e,t;for(e in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=r}(window.Zepto||r,window,document),function(e,t,n,o){var r=function(t){this.core=t,this.core.options=e.extend({},r.Defaults,this.core.options),this.swapping=!0,this.previous=o,this.next=o,this.handlers={"change.owl.carousel":e.proxy((function(e){e.namespace&&"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)}),this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":e.proxy((function(e){e.namespace&&(this.swapping="translated"==e.type)}),this),"translate.owl.carousel":e.proxy((function(e){e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()}),this)},this.core.$element.on(this.handlers)};r.Defaults={animateOut:!1,animateIn:!1},r.prototype.swap=function(){if(1===this.core.settings.items&&e.support.animation&&e.support.transition){this.core.speed(0);var t,n=e.proxy(this.clear,this),o=this.core.$stage.children().eq(this.previous),r=this.core.$stage.children().eq(this.next),s=this.core.settings.animateIn,i=this.core.settings.animateOut;this.core.current()!==this.previous&&(i&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),o.one(e.support.animation.end,n).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(i)),s&&r.one(e.support.animation.end,n).addClass("animated owl-animated-in").addClass(s))}},r.prototype.clear=function(t){e(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},r.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Animate=r}(window.Zepto||r,window,document),function(e,t,n,o){var r=function(t){this._core=t,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":e.proxy((function(e){e.namespace&&"settings"===e.property.name?this._core.settings.autoplay?this.play():this.stop():e.namespace&&"position"===e.property.name&&this._paused&&(this._time=0)}),this),"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoplay&&this.play()}),this),"play.owl.autoplay":e.proxy((function(e,t,n){e.namespace&&this.play(t,n)}),this),"stop.owl.autoplay":e.proxy((function(e){e.namespace&&this.stop()}),this),"mouseover.owl.autoplay":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"mouseleave.owl.autoplay":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()}),this),"touchstart.owl.core":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"touchend.owl.core":e.proxy((function(){this._core.settings.autoplayHoverPause&&this.play()}),this)},this._core.$element.on(this._handlers),this._core.options=e.extend({},r.Defaults,this._core.options)};r.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},r.prototype._next=function(o){this._call=t.setTimeout(e.proxy(this._next,this,o),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||n.hidden||this._core.next(o||this._core.settings.autoplaySpeed)},r.prototype.read=function(){return(new Date).getTime()-this._time},r.prototype.play=function(n,o){var r;this._core.is("rotating")||this._core.enter("rotating"),n=n||this._core.settings.autoplayTimeout,r=Math.min(this._time%(this._timeout||n),n),this._paused?(this._time=this.read(),this._paused=!1):t.clearTimeout(this._call),this._time+=this.read()%n-r,this._timeout=n,this._call=t.setTimeout(e.proxy(this._next,this,o),n-r)},r.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,t.clearTimeout(this._call),this._core.leave("rotating"))},r.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,t.clearTimeout(this._call))},r.prototype.destroy=function(){var e,t;for(e in this.stop(),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.autoplay=r}(window.Zepto||r,window,document),function(e,t,n,o){"use strict";var r=function(t){this._core=t,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":e.proxy((function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+e(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")}),this),"added.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,0,this._templates.pop())}),this),"remove.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,1)}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&"position"==e.property.name&&this.draw()}),this),"initialized.owl.carousel":e.proxy((function(e){e.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))}),this),"refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))}),this)},this._core.options=e.extend({},r.Defaults,this._core.options),this.$element.on(this._handlers)};r.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},r.prototype.initialize=function(){var t,n=this._core.settings;for(t in this._controls.$relative=(n.navContainer?e(n.navContainer):e("<div>").addClass(n.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=e("<"+n.navElement+">").addClass(n.navClass[0]).html(n.navText[0]).prependTo(this._controls.$relative).on("click",e.proxy((function(e){this.prev(n.navSpeed)}),this)),this._controls.$next=e("<"+n.navElement+">").addClass(n.navClass[1]).html(n.navText[1]).appendTo(this._controls.$relative).on("click",e.proxy((function(e){this.next(n.navSpeed)}),this)),n.dotsData||(this._templates=[e('<button role="button">').addClass(n.dotClass).append(e("<span>")).prop("outerHTML")]),this._controls.$absolute=(n.dotsContainer?e(n.dotsContainer):e("<div>").addClass(n.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",e.proxy((function(t){var o=e(t.target).parent().is(this._controls.$absolute)?e(t.target).index():e(t.target).parent().index();t.preventDefault(),this.to(o,n.dotsSpeed)}),this)),this._overrides)this._core[t]=e.proxy(this[t],this)},r.prototype.destroy=function(){var e,t,n,o,r;for(e in r=this._core.settings,this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)"$relative"===t&&r.navContainer?this._controls[t].html(""):this._controls[t].remove();for(o in this.overides)this._core[o]=this._overrides[o];for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},r.prototype.update=function(){var e,t,n=this._core.clones().length/2,o=n+this._core.items().length,r=this._core.maximum(!0),s=this._core.settings,i=s.center||s.autoWidth||s.dotsData?1:s.dotsEach||s.items;if("page"!==s.slideBy&&(s.slideBy=Math.min(s.slideBy,s.items)),s.dots||"page"==s.slideBy)for(this._pages=[],e=n,t=0,0;e<o;e++){if(t>=i||0===t){if(this._pages.push({start:Math.min(r,e-n),end:e-n+i-1}),Math.min(r,e-n)===r)break;t=0}t+=this._core.mergers(this._core.relative(e))}},r.prototype.draw=function(){var t,n=this._core.settings,o=this._core.items().length<=n.items,r=this._core.relative(this._core.current()),s=n.loop||n.rewind;this._controls.$relative.toggleClass("disabled",!n.nav||o),n.nav&&(this._controls.$previous.toggleClass("disabled",!s&&r<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!s&&r>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!n.dots||o),n.dots&&(t=this._pages.length-this._controls.$absolute.children().length,n.dotsData&&0!==t?this._controls.$absolute.html(this._templates.join("")):t>0?this._controls.$absolute.append(new Array(t+1).join(this._templates[0])):t<0&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(e.inArray(this.current(),this._pages)).addClass("active"))},r.prototype.onTrigger=function(t){var n=this._core.settings;t.page={index:e.inArray(this.current(),this._pages),count:this._pages.length,size:n&&(n.center||n.autoWidth||n.dotsData?1:n.dotsEach||n.items)}},r.prototype.current=function(){var t=this._core.relative(this._core.current());return e.grep(this._pages,e.proxy((function(e,n){return e.start<=t&&e.end>=t}),this)).pop()},r.prototype.getPosition=function(t){var n,o,r=this._core.settings;return"page"==r.slideBy?(n=e.inArray(this.current(),this._pages),o=this._pages.length,t?++n:--n,n=this._pages[(n%o+o)%o].start):(n=this._core.relative(this._core.current()),o=this._core.items().length,t?n+=r.slideBy:n-=r.slideBy),n},r.prototype.next=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},r.prototype.prev=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},r.prototype.to=function(t,n,o){var r;!o&&this._pages.length?(r=this._pages.length,e.proxy(this._overrides.to,this._core)(this._pages[(t%r+r)%r].start,n)):e.proxy(this._overrides.to,this._core)(t,n)},e.fn.owlCarousel.Constructor.Plugins.Navigation=r}(window.Zepto||r,window,document),function(e,t,n,o){"use strict";var r=function(n){this._core=n,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":e.proxy((function(n){n.namespace&&"URLHash"===this._core.settings.startPosition&&e(t).trigger("hashchange.owl.navigation")}),this),"prepared.owl.carousel":e.proxy((function(t){if(t.namespace){var n=e(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!n)return;this._hashes[n]=t.content}}),this),"changed.owl.carousel":e.proxy((function(n){if(n.namespace&&"position"===n.property.name){var o=this._core.items(this._core.relative(this._core.current())),r=e.map(this._hashes,(function(e,t){return e===o?t:null})).join();if(!r||t.location.hash.slice(1)===r)return;t.location.hash=r}}),this)},this._core.options=e.extend({},r.Defaults,this._core.options),this.$element.on(this._handlers),e(t).on("hashchange.owl.navigation",e.proxy((function(e){var n=t.location.hash.substring(1),o=this._core.$stage.children(),r=this._hashes[n]&&o.index(this._hashes[n]);undefined!==r&&r!==this._core.current()&&this._core.to(this._core.relative(r),!1,!0)}),this))};r.Defaults={URLhashListener:!1},r.prototype.destroy=function(){var n,o;for(n in e(t).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(n,this._handlers[n]);for(o in Object.getOwnPropertyNames(this))"function"!=typeof this[o]&&(this[o]=null)},e.fn.owlCarousel.Constructor.Plugins.Hash=r}(window.Zepto||r,window,document),function(e,t,n,o){var r=e("<support>").get(0).style,s="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},a=function(){return!!d("transform")},l=function(){return!!d("perspective")},c=function(){return!!d("animation")};function d(t,n){var o=!1,i=t.charAt(0).toUpperCase()+t.slice(1);return e.each((t+" "+s.join(i+" ")+i).split(" "),(function(e,t){if(undefined!==r[t])return o=!n||t,!1})),o}function u(e){return d(e,!0)}(function(){return!!d("transition")})()&&(e.support.transition=new String(u("transition")),e.support.transition.end=i.transition.end[e.support.transition]),c()&&(e.support.animation=new String(u("animation")),e.support.animation.end=i.animation.end[e.support.animation]),a()&&(e.support.transform=new String(u("transform")),e.support.transform3d=l())}(window.Zepto||r,window,document)},8190:(e,t,n)=>{n(7440)},7440:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");e.add("code",(e=>((e=>{e.addCommand("mceCodeEditor",(()=>{(e=>{const t=(e=>e.getContent({source_view:!0}))(e);e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:t},onSubmit:t=>{((e,t)=>{e.focus(),e.undoManager.transact((()=>{e.setContent(t)})),e.selection.setCursorLocation(),e.nodeChanged()})(e,t.getData().code),t.close()}})})(e)}))})(e),(e=>{const t=()=>e.execCommand("mceCodeEditor");e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:t}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:t})})(e),{})))}()},1080:(e,t,n)=>{n(4844)},4844:()=>{!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>({isFullscreen:()=>null!==e.get()}),o=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(s=String).prototype,o.isPrototypeOf(n)||(null===(i=r.constructor)||void 0===i?void 0:i.name)===s.name)?"string":t;var n,o;var r,s,i})(t)===e,r=e=>t=>typeof t===e,s=o("string"),i=o("array"),a=(l=null,e=>l===e);var l;const c=r("boolean"),d=e=>!(e=>null==e)(e),u=r("function"),h=r("number"),m=()=>{},p=e=>()=>e;function f(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const g=p(!1),b=p(!0);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const y=t=>{const n=e(v.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(v.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:e=>{o(),n.set(v.some(e))}}},x=()=>y((e=>e.unbind())),w=Array.prototype.push,C=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const n=e[r];o[r]=t(n,r)}return o},_=(e,t)=>{for(let n=0,o=e.length;n<o;n++){t(e[n],n)}},S=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const r=e[o];t(r,o)&&n.push(r)}return n},k=(e,t)=>((e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const r=e[o];if(t(r,o))return v.some(r);if(n(r,o))break}return v.none()})(e,t,g),E=(e,t)=>(e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);w.apply(t,e[n])}return t})(C(e,t)),O=e=>((e,t)=>t>=0&&t<e.length?v.some(e[t]):v.none())(e,0),T=Object.keys,A=(e,t)=>-1!==e.indexOf(t),D=e=>void 0!==e.style&&u(e.style.getPropertyValue),R=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},M={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return R(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return R(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return R(n)},fromDom:R,fromPoint:(e,t,n)=>v.from(e.dom.elementFromPoint(t,n)).map(R)};"undefined"!=typeof window?window:Function("return this;")();const N=e=>t=>(e=>e.dom.nodeType)(t)===e,P=N(1),L=N(3),B=N(9),I=N(11),F=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},z=e=>M.fromDom(e.dom.ownerDocument),j=e=>(e=>v.from(e.dom.parentNode).map(M.fromDom))(e).map(H).map((t=>S(t,(t=>{return n=t,!(e.dom===n.dom);var n})))).getOr([]),H=e=>C(e.dom.childNodes,M.fromDom),V=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode),$=p(V),U=V?e=>M.fromDom(e.dom.getRootNode()):e=>B(e)?e:z(e),W=e=>{const t=U(e);return I(n=t)&&d(n.dom.host)?v.some(t):v.none();var n},q=e=>M.fromDom(e.dom.host),K=e=>d(e.dom.shadowRoot),G=e=>{const t=L(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return W(M.fromDom(t)).fold((()=>n.body.contains(t)),(o=G,r=q,e=>o(r(e))));var o,r},Y=(e,t,n)=>{((e,t,n)=>{if(!(s(n)||c(n)||h(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(e.dom,t,n)},X=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},J=(e,t)=>{e.dom.removeAttribute(t)},Q=(e,t)=>{const n=e.dom;((e,t)=>{const n=T(e);for(let o=0,r=n.length;o<r;o++){const r=n[o];t(e[r],r)}})(t,((e,t)=>{((e,t,n)=>{if(!s(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);D(e)&&e.style.setProperty(t,n)})(n,t,e)}))},Z=(e,t)=>D(e)?e.style.getPropertyValue(t):"",ee=e=>{const t=M.fromDom((e=>{if($()&&d(e.target)){const t=M.fromDom(e.target);if(P(t)&&K(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return O(t)}}return v.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=(s=o,i=n,(...e)=>s(i.apply(null,e)));var s,i;return((e,t,n,o,r,s,i)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:s,raw:i}))(t,e.clientX,e.clientY,n,o,r,e)},te=(e,t,n,o,r)=>{const s=((e,t)=>n=>{e(n)&&t(ee(n))})(n,o);return e.dom.addEventListener(t,s,r),{unbind:f(ne,e,t,s,r)}},ne=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},oe=b,re=(e,t,n)=>((e,t,n,o)=>te(e,t,n,o,!1))(e,t,oe,n),se=()=>ie(0,0),ie=(e,t)=>({major:e,minor:t}),ae={nu:ie,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?se():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}})(e,t);if(!n)return{major:0,minor:0};const o=e=>Number(t.replace(n,"$"+e));return ie(o(1),o(2))})(e,n)},unknown:se},le=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return v.none()})(t.brands,(t=>{const n=t.brand.toLowerCase();return k(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:ae.nu(parseInt(t.version,10),0)})))})),ce=(e,t)=>{const n=String(t).toLowerCase();return k(e,(e=>e.search(n)))},de=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ue=e=>t=>A(t,e),he=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>A(e,"edge/")&&A(e,"chrome")&&A(e,"safari")&&A(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,de],search:e=>A(e,"chrome")&&!A(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>A(e,"msie")||A(e,"trident")},{name:"Opera",versionRegexes:[de,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ue("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ue("firefox")},{name:"Safari",versionRegexes:[de,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(A(e,"safari")||A(e,"mobile/"))&&A(e,"applewebkit")}],me=[{name:"Windows",search:ue("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>A(e,"iphone")||A(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ue("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ue("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ue("linux"),versionRegexes:[]},{name:"Solaris",search:ue("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ue("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ue("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],pe={browsers:p(he),oses:p(me)},fe="Edge",ge="Chromium",be="Opera",ve="Firefox",ye="Safari",xe=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(fe),isChromium:o(ge),isIE:o("IE"),isOpera:o(be),isFirefox:o(ve),isSafari:o(ye)}},we={unknown:()=>xe({current:void 0,version:ae.unknown()}),nu:xe,edge:p(fe),chromium:p(ge),ie:p("IE"),opera:p(be),firefox:p(ve),safari:p(ye)},Ce="Windows",_e="Android",Se="Linux",ke="macOS",Ee="Solaris",Oe="FreeBSD",Te="ChromeOS",Ae=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(Ce),isiOS:o("iOS"),isAndroid:o(_e),isMacOS:o(ke),isLinux:o(Se),isSolaris:o(Ee),isFreeBSD:o(Oe),isChromeOS:o(Te)}},De={unknown:()=>Ae({current:void 0,version:ae.unknown()}),nu:Ae,windows:p(Ce),ios:p("iOS"),android:p(_e),linux:p(Se),macos:p(ke),solaris:p(Ee),freebsd:p(Oe),chromeos:p(Te)},Re=(e,t,n)=>{const o=pe.browsers(),r=pe.oses(),s=t.bind((e=>le(o,e))).orThunk((()=>((e,t)=>ce(e,t).map((e=>{const n=ae.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(we.unknown,we.nu),i=((e,t)=>ce(e,t).map((e=>{const n=ae.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(De.unknown,De.nu),a=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),s=e.isiOS()&&!r,i=e.isiOS()||e.isAndroid(),a=i||o("(pointer:coarse)"),l=r||!s&&i&&o("(min-device-width:768px)"),c=s||i&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:p(r),isiPhone:p(s),isTablet:p(l),isPhone:p(c),isTouch:p(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:p(d),isDesktop:p(u)}})(i,s,e,n);return{browser:s,os:i,deviceType:a}},Me=e=>window.matchMedia(e).matches;let Ne=(e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)})((()=>Re(navigator.userAgent,v.from(navigator.userAgentData),Me)));const Pe=(e,t)=>({left:e,top:t,translate:(n,o)=>Pe(e+n,t+o)}),Le=Pe,Be=e=>{const t=void 0===e?window:e;return Ne().browser.isFirefox()?v.none():v.from(t.visualViewport)},Ie=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Fe=e=>{const t=void 0===e?window:e,n=t.document,o=(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Le(n,o)})(M.fromDom(n));return Be(t).fold((()=>{const e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return Ie(o.left,o.top,n,r)}),(e=>Ie(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)))},ze=(e,t,n)=>Be(n).map((n=>{const o=e=>t(ee(e));return n.addEventListener(e,o),{unbind:()=>n.removeEventListener(e,o)}})).getOrThunk((()=>({unbind:m})));var je=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),He=tinymce.util.Tools.resolve("tinymce.Env");const Ve=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t})},$e=(Ue="fullscreen_native",e=>e.options.get(Ue));var Ue;const We=e=>{const t=M.fromDom(e.getElement());return W(t).map(q).getOrThunk((()=>(e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return M.fromDom(t)})(z(t))))},qe=e=>{return e.dom===(void 0!==(t=z(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},Ke=(e,t,n)=>S(((e,t)=>{const n=u(t)?t:g;let o=e.dom;const r=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){const e=o.parentNode,t=M.fromDom(e);if(r.push(t),!0===n(t))break;o=e}return r})(e,n),t),Ge=e=>((e,t)=>{const n=void 0===t?document:t.dom;return 1!==(o=n).nodeType&&9!==o.nodeType&&11!==o.nodeType||0===o.childElementCount?[]:C(n.querySelectorAll(e),M.fromDom);var o})(e),Ye=(e,t,n)=>Ke(e,(e=>F(e,t)),n),Xe=(e,t)=>((e,t)=>S(j(e),t))(e,(e=>F(e,t))),Je="data-ephox-mobile-fullscreen-style",Qe="position:absolute!important;",Ze="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",et=He.os.isAndroid(),tt=e=>{const t=((e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||G(e)?o:Z(n,t)})(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},nt=je.DOM,ot=Be().fold((()=>({bind:m,unbind:m})),(e=>{const t=(()=>{const e=y(m);return{...e,on:t=>e.get().each(t)}})(),n=x(),o=x(),r=((e,t)=>{let n=null;return{cancel:()=>{a(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{a(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}})((()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((()=>{t.on((t=>Q(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})))}))}),50);return{bind:e=>{t.set(e),r.throttle(),n.set(ze("resize",r.throttle)),o.set(ze("scroll",r.throttle))},unbind:()=>{t.on((()=>{n.clear(),o.clear()})),t.clear()}}})),rt=(e,t)=>{const n=document.body,o=document.documentElement,r=e.getContainer(),s=M.fromDom(r),i=We(e),a=t.get(),l=M.fromDom(e.getBody()),c=He.deviceType.isTouch(),d=r.style,u=e.iframeElement.style,h=e=>{e(n,"tox-fullscreen"),e(o,"tox-fullscreen"),e(r,"tox-fullscreen"),W(s).map((e=>q(e).dom)).each((t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")}))},m=()=>{c&&(e=>{const t=Ge("["+Je+"]");_(t,(t=>{const n=X(t,Je);"no-styles"!==n?Q(t,e.parseStyle(n)):J(t,"style"),J(t,Je)}))})(e.dom),h(nt.removeClass),ot.unbind(),v.from(t.get()).each((e=>e.fullscreenChangeHandler.unbind()))};if(a)a.fullscreenChangeHandler.unbind(),$e(e)&&qe(i)&&(e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})(z(i)),u.width=a.iframeWidth,u.height=a.iframeHeight,d.width=a.containerWidth,d.height=a.containerHeight,d.top=a.containerTop,d.left=a.containerLeft,m(),p=a.scrollPos,window.scrollTo(p.x,p.y),t.set(null),Ve(e,!1),e.off("remove",m);else{const n=re(z(i),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(n=>{$e(e)&&(qe(i)||null===t.get()||rt(e,t))})),o={scrollPos:Fe(window),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:u.width,iframeHeight:u.height,fullscreenChangeHandler:n};c&&((e,t,n)=>{const o=t=>n=>{const o=X(n,"style"),r=void 0===o?"no-styles":o.trim();r!==t&&(Y(n,Je,r),Q(n,e.parseStyle(t)))},r=Ye(t,"*"),s=E(r,(e=>Xe(e,"*:not(.tox-silver-sink)"))),i=tt(n);_(s,o("display:none!important;")),_(r,o(Qe+Ze+i)),o((!0===et?"":Qe)+Ze+i)(t)})(e.dom,s,l),u.width=u.height="100%",d.width=d.height="",h(nt.addClass),ot.bind(s),e.on("remove",m),t.set(o),$e(e)&&(e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(i),Ve(e,!0)}var p},st=(e,t)=>n=>{n.setActive(null!==t.get());const o=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",o),()=>e.off("FullscreenStateChanged",o)};t.add("fullscreen",(t=>{const o=e(null);return t.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(t),((e,t)=>{e.addCommand("mceFullScreen",(()=>{rt(e,t)}))})(t,o),((e,t)=>{const n=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:st(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:st(e,t)})})(t,o),t.addShortcut("Meta+Shift+F","","mceFullScreen")),n(o)}))}()},4446:(e,t,n)=>{n(8495)},8495:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");const o=e=>t=>t.options.get(e),r=o("content_style"),s=o("content_css_cors"),i=o("body_class"),a=o("body_id"),l=e=>{const o=(e=>{var o;let l="";const c=e.dom.encode,d=null!==(o=r(e))&&void 0!==o?o:"";l+='<base href="'+c(e.documentBaseURI.getURI())+'">';const u=s(e)?' crossorigin="anonymous"':"";n.each(e.contentCSS,(t=>{l+='<link type="text/css" rel="stylesheet" href="'+c(e.documentBaseURI.toAbsolute(t))+'"'+u+">"})),d&&(l+='<style type="text/css">'+d+"</style>");const h=a(e),m=i(e),p='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(t.os.isMacOS()||t.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",f=e.getBody().dir,g=f?' dir="'+c(f)+'"':"";return"<!DOCTYPE html><html><head>"+l+'</head><body id="'+c(h)+'" class="mce-content-body '+c(m)+'"'+g+">"+e.getContent()+p+"</body></html>"})(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:o}}).focus("close")};e.add("preview",(e=>{(e=>{e.addCommand("mcePreview",(()=>{l(e)}))})(e),(e=>{const t=()=>e.execCommand("mcePreview");e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:t}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:t})})(e)}))}()},1768:()=>{!function(){"use strict";const e=Object.getPrototypeOf,t=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},n=e=>n=>(e=>{const n=typeof e;return null===e?"null":"object"===n&&Array.isArray(e)?"array":"object"===n&&t(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":n})(n)===e,o=e=>t=>typeof t===e,r=e=>t=>e===t,s=n("string"),i=n("object"),a=n=>((n,o)=>i(n)&&t(n,o,((t,n)=>e(t)===n)))(n,Object),l=n("array"),c=r(null),d=o("boolean"),u=r(void 0),h=e=>null==e,m=e=>!h(e),p=o("function"),f=o("number"),g=(e,t)=>{if(l(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},b=()=>{},v=(e,t)=>(...n)=>e(t.apply(null,n)),y=e=>()=>e,x=e=>e,w=(e,t)=>e===t;function C(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const _=e=>t=>!e(t),S=e=>()=>{throw new Error(e)},k=e=>e(),E=y(!1),O=y(!0);var T=tinymce.util.Tools.resolve("tinymce.ThemeManager");class A{constructor(e,t){this.tag=e,this.value=t}static some(e){return new A(!0,e)}static none(){return A.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?A.some(e(this.value)):A.none()}bind(e){return this.tag?e(this.value):A.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:A.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?A.some(e):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const D=Array.prototype.slice,R=Array.prototype.indexOf,M=Array.prototype.push,N=(e,t)=>R.call(e,t),P=(e,t)=>{const n=N(e,t);return-1===n?A.none():A.some(n)},L=(e,t)=>N(e,t)>-1,B=(e,t)=>{for(let n=0,o=e.length;n<o;n++){if(t(e[n],n))return!0}return!1},I=(e,t)=>{const n=[];for(let o=0;o<e;o++)n.push(t(o));return n},F=(e,t)=>{const n=[];for(let o=0;o<e.length;o+=t){const r=D.call(e,o,o+t);n.push(r)}return n},z=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const n=e[r];o[r]=t(n,r)}return o},j=(e,t)=>{for(let n=0,o=e.length;n<o;n++){t(e[n],n)}},H=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];(t(s,r)?n:o).push(s)}return{pass:n,fail:o}},V=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const r=e[o];t(r,o)&&n.push(r)}return n},$=(e,t,n)=>(((e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)})(e,((e,o)=>{n=t(n,e,o)})),n),U=(e,t,n)=>(j(e,((e,o)=>{n=t(n,e,o)})),n),W=(e,t)=>((e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const r=e[o];if(t(r,o))return A.some(r);if(n(r,o))break}return A.none()})(e,t,E),q=(e,t)=>{for(let n=0,o=e.length;n<o;n++){if(t(e[n],n))return A.some(n)}return A.none()},K=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!l(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);M.apply(t,e[n])}return t},G=(e,t)=>K(z(e,t)),Y=(e,t)=>{for(let n=0,o=e.length;n<o;++n){if(!0!==t(e[n],n))return!1}return!0},X=e=>{const t=D.call(e,0);return t.reverse(),t},J=(e,t)=>V(e,(e=>!L(t,e))),Q=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const r=e[o];n[String(r)]=t(r,o)}return n},Z=e=>[e],ee=(e,t)=>{const n=D.call(e,0);return n.sort(t),n},te=(e,t)=>t>=0&&t<e.length?A.some(e[t]):A.none(),ne=e=>te(e,0),oe=e=>te(e,e.length-1),re=p(Array.from)?Array.from:e=>D.call(e),se=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return A.none()},ie=Object.keys,ae=Object.hasOwnProperty,le=(e,t)=>{const n=ie(e);for(let o=0,r=n.length;o<r;o++){const r=n[o];t(e[r],r)}},ce=(e,t)=>de(e,((e,n)=>({k:n,v:t(e,n)}))),de=(e,t)=>{const n={};return le(e,((e,o)=>{const r=t(e,o);n[r.k]=r.v})),n},ue=e=>(t,n)=>{e[n]=t},he=(e,t,n,o)=>(le(e,((e,r)=>{(t(e,r)?n:o)(e,r)})),{}),me=(e,t)=>{const n=[];return le(e,((e,o)=>{n.push(t(e,o))})),n},pe=(e,t)=>{const n=ie(e);for(let o=0,r=n.length;o<r;o++){const r=n[o],s=e[r];if(t(s,r,e))return A.some(s)}return A.none()},fe=e=>me(e,x),ge=(e,t)=>be(e,t)?A.from(e[t]):A.none(),be=(e,t)=>ae.call(e,t),ve=(e,t)=>be(e,t)&&void 0!==e[t]&&null!==e[t],ye=(e,t,n=w)=>e.exists((e=>n(e,t))),xe=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},we=(e,t,n)=>e.isSome()&&t.isSome()?A.some(n(e.getOrDie(),t.getOrDie())):A.none(),Ce=(e,t)=>e?A.some(t):A.none(),_e=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Se=(e,t)=>-1!==e.indexOf(t),ke=(e,t)=>_e(e,t,0),Ee=(e,t)=>_e(e,t,e.length-t.length),Oe=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),Te=e=>e.length>0,Ae=e=>void 0!==e.style&&p(e.style.getPropertyValue),De=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Re={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return De(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return De(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return De(n)},fromDom:De,fromPoint:(e,t,n)=>A.from(e.dom.elementFromPoint(t,n)).map(De)};"undefined"!=typeof window?window:Function("return this;")();const Me=e=>e.dom.nodeName.toLowerCase(),Ne=e=>t=>(e=>e.dom.nodeType)(t)===e,Pe=Ne(1),Le=Ne(3),Be=Ne(9),Ie=Ne(11),Fe=e=>t=>Pe(t)&&Me(t)===e,ze=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},je=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,He=(e,t)=>e.dom===t.dom,Ve=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},$e=e=>Re.fromDom(e.dom.ownerDocument),Ue=e=>Be(e)?e:$e(e),We=e=>Re.fromDom(Ue(e).dom.documentElement),qe=e=>Re.fromDom(Ue(e).dom.defaultView),Ke=e=>A.from(e.dom.parentNode).map(Re.fromDom),Ge=e=>A.from(e.dom.parentElement).map(Re.fromDom),Ye=e=>A.from(e.dom.offsetParent).map(Re.fromDom),Xe=e=>z(e.dom.childNodes,Re.fromDom),Je=(e,t)=>{const n=e.dom.childNodes;return A.from(n[t]).map(Re.fromDom)},Qe=(e,t)=>({element:e,offset:t}),Ze=(e,t)=>{const n=Xe(e);return n.length>0&&t<n.length?Qe(n[t],0):Qe(e,t)},et=e=>Ie(e)&&m(e.dom.host),tt=p(Element.prototype.attachShadow)&&p(Node.prototype.getRootNode),nt=y(tt),ot=tt?e=>Re.fromDom(e.dom.getRootNode()):Ue,rt=e=>et(e)?e:Re.fromDom(Ue(e).dom.body),st=e=>{const t=ot(e);return et(t)?A.some(t):A.none()},it=e=>Re.fromDom(e.dom.host),at=e=>m(e.dom.shadowRoot),lt=e=>{const t=Le(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return st(Re.fromDom(t)).fold((()=>n.body.contains(t)),(o=lt,r=it,e=>o(r(e))));var o,r},ct=()=>dt(Re.fromDom(document)),dt=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return Re.fromDom(t)},ut=(e,t,n)=>{if(!(s(n)||d(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ht=(e,t,n)=>{ut(e.dom,t,n)},mt=(e,t)=>{const n=e.dom;le(t,((e,t)=>{ut(n,t,e)}))},pt=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},ft=(e,t)=>A.from(pt(e,t)),gt=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},bt=(e,t)=>{e.dom.removeAttribute(t)},vt=(e,t,n)=>{if(!s(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Ae(e)&&e.style.setProperty(t,n)},yt=(e,t)=>{Ae(e)&&e.style.removeProperty(t)},xt=(e,t,n)=>{const o=e.dom;vt(o,t,n)},wt=(e,t)=>{const n=e.dom;le(t,((e,t)=>{vt(n,t,e)}))},Ct=(e,t)=>{const n=e.dom;le(t,((e,t)=>{e.fold((()=>{yt(n,t)}),(e=>{vt(n,t,e)}))}))},_t=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||lt(e)?o:St(n,t)},St=(e,t)=>Ae(e)?e.style.getPropertyValue(t):"",kt=(e,t)=>{const n=e.dom,o=St(n,t);return A.from(o).filter((e=>e.length>0))},Et=e=>{const t={},n=e.dom;if(Ae(n))for(let e=0;e<n.style.length;e++){const o=n.style.item(e);t[o]=n.style[o]}return t},Ot=(e,t,n)=>{const o=Re.fromTag(e);xt(o,t,n);return kt(o,t).isSome()},Tt=(e,t)=>{const n=e.dom;yt(n,t),ye(ft(e,"style").map(Oe),"")&&bt(e,"style")},At=e=>e.dom.offsetWidth,Dt=(e,t)=>{const n=n=>{const o=t(n);if(o<=0||null===o){const t=_t(n,e);return parseFloat(t)||0}return o},o=(e,t)=>U(t,((t,n)=>{const o=_t(e,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?t:t+r}),0);return{set:(t,n)=>{if(!f(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const o=t.dom;Ae(o)&&(o.style[e]=n+"px")},get:n,getOuter:n,aggregate:o,max:(e,t,n)=>{const r=o(e,n);return t>r?t-r:0}}},Rt=Dt("height",(e=>{const t=e.dom;return lt(e)?t.getBoundingClientRect().height:t.offsetHeight})),Mt=e=>Rt.get(e),Nt=e=>Rt.getOuter(e),Pt=(e,t)=>({left:e,top:t,translate:(n,o)=>Pt(e+n,t+o)}),Lt=Pt,Bt=(e,t)=>void 0!==e?e:void 0!==t?t:0,It=e=>{const t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return Lt(n.offsetLeft,n.offsetTop);const s=Bt(null==o?void 0:o.pageYOffset,r.scrollTop),i=Bt(null==o?void 0:o.pageXOffset,r.scrollLeft),a=Bt(r.clientTop,n.clientTop),l=Bt(r.clientLeft,n.clientLeft);return Ft(e).translate(i-l,s-a)},Ft=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Lt(n.offsetLeft,n.offsetTop):lt(e)?(e=>{const t=e.getBoundingClientRect();return Lt(t.left,t.top)})(t):Lt(0,0)},zt=Dt("width",(e=>e.dom.offsetWidth)),jt=e=>zt.get(e),Ht=e=>zt.getOuter(e),Vt=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},$t=()=>Ut(0,0),Ut=(e,t)=>({major:e,minor:t}),Wt={nu:Ut,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?$t():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}})(e,t);if(!n)return{major:0,minor:0};const o=e=>Number(t.replace(n,"$"+e));return Ut(o(1),o(2))})(e,n)},unknown:$t},qt=(e,t)=>{const n=String(t).toLowerCase();return W(e,(e=>e.search(n)))},Kt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gt=e=>t=>Se(t,e),Yt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Se(e,"edge/")&&Se(e,"chrome")&&Se(e,"safari")&&Se(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Kt],search:e=>Se(e,"chrome")&&!Se(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Se(e,"msie")||Se(e,"trident")},{name:"Opera",versionRegexes:[Kt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gt("firefox")},{name:"Safari",versionRegexes:[Kt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Se(e,"safari")||Se(e,"mobile/"))&&Se(e,"applewebkit")}],Xt=[{name:"Windows",search:Gt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Se(e,"iphone")||Se(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gt("linux"),versionRegexes:[]},{name:"Solaris",search:Gt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Jt={browsers:y(Yt),oses:y(Xt)},Qt="Edge",Zt="Chromium",en="Opera",tn="Firefox",nn="Safari",on=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(Qt),isChromium:o(Zt),isIE:o("IE"),isOpera:o(en),isFirefox:o(tn),isSafari:o(nn)}},rn={unknown:()=>on({current:void 0,version:Wt.unknown()}),nu:on,edge:y(Qt),chromium:y(Zt),ie:y("IE"),opera:y(en),firefox:y(tn),safari:y(nn)},sn="Windows",an="Android",ln="Linux",cn="macOS",dn="Solaris",un="FreeBSD",hn="ChromeOS",mn=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(sn),isiOS:o("iOS"),isAndroid:o(an),isMacOS:o(cn),isLinux:o(ln),isSolaris:o(dn),isFreeBSD:o(un),isChromeOS:o(hn)}},pn={unknown:()=>mn({current:void 0,version:Wt.unknown()}),nu:mn,windows:y(sn),ios:y("iOS"),android:y(an),linux:y(ln),macos:y(cn),solaris:y(dn),freebsd:y(un),chromeos:y(hn)},fn=(e,t,n)=>{const o=Jt.browsers(),r=Jt.oses(),s=t.bind((e=>((e,t)=>se(t.brands,(t=>{const n=t.brand.toLowerCase();return W(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Wt.nu(parseInt(t.version,10),0)})))})))(o,e))).orThunk((()=>((e,t)=>qt(e,t).map((e=>{const n=Wt.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(rn.unknown,rn.nu),i=((e,t)=>qt(e,t).map((e=>{const n=Wt.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(pn.unknown,pn.nu),a=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),s=e.isiOS()&&!r,i=e.isiOS()||e.isAndroid(),a=i||o("(pointer:coarse)"),l=r||!s&&i&&o("(min-device-width:768px)"),c=s||i&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:y(r),isiPhone:y(s),isTablet:y(l),isPhone:y(c),isTouch:y(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:y(d),isDesktop:y(u)}})(i,s,e,n);return{browser:s,os:i,deviceType:a}},gn=e=>window.matchMedia(e).matches;let bn=Vt((()=>fn(navigator.userAgent,A.from(navigator.userAgentData),gn)));const vn=()=>bn(),yn=e=>{const t=Re.fromDom((e=>{if(nt()&&m(e.target)){const t=Re.fromDom(e.target);if(Pe(t)&&at(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return ne(t)}}return A.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=v(o,n);return((e,t,n,o,r,s,i)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:s,raw:i}))(t,e.clientX,e.clientY,n,o,r,e)},xn=(e,t,n,o,r)=>{const s=((e,t)=>n=>{e(n)&&t(yn(n))})(n,o);return e.dom.addEventListener(t,s,r),{unbind:C(wn,e,t,s,r)}},wn=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},Cn=(e,t)=>{Ke(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},_n=(e,t)=>{const n=(e=>A.from(e.dom.nextSibling).map(Re.fromDom))(e);n.fold((()=>{Ke(e).each((e=>{kn(e,t)}))}),(e=>{Cn(e,t)}))},Sn=(e,t)=>{const n=(e=>Je(e,0))(e);n.fold((()=>{kn(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},kn=(e,t)=>{e.dom.appendChild(t.dom)},En=(e,t)=>{j(t,(t=>{kn(e,t)}))},On=e=>{e.dom.textContent="",j(Xe(e),(e=>{Tn(e)}))},Tn=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},An=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Lt(n,o)},Dn=(e,t,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Rn=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Mn=e=>{const t=void 0===e?window:e,n=t.document,o=An(Re.fromDom(n));return(e=>{const t=void 0===e?window:e;return vn().browser.isFirefox()?A.none():A.from(t.visualViewport)})(t).fold((()=>{const e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return Rn(o.left,o.top,n,r)}),(e=>Rn(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)))},Nn=()=>Re.fromDom(document),Pn=(e,t)=>e.view(t).fold(y([]),(t=>{const n=e.owner(t),o=Pn(e,n);return[t].concat(o)}));var Ln=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?A.none():A.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(Re.fromDom)},owner:e=>$e(e)});const Bn=e=>{const t=Nn(),n=An(t),o=((e,t)=>{const n=t.owner(e),o=Pn(t,n);return A.some(o)})(e,Ln);return o.fold(C(It,e),(t=>{const o=Ft(e),r=$(t,((e,t)=>{const n=Ft(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return Lt(r.left+o.left+n.left,r.top+o.top+n.top)}))},In=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Fn=e=>{const t=It(e),n=Ht(e),o=Nt(e);return In(t.left,t.top,n,o)},zn=e=>{const t=Bn(e),n=Ht(e),o=Nt(e);return In(t.left,t.top,n,o)},jn=()=>Mn(window),Hn=e=>{const t=t=>t(e),n=y(e),o=()=>r,r={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:O,isError:E,map:t=>$n.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:t=>{t(e)},toOptional:()=>A.some(e)};return r},Vn=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:E,isError:O,map:t,mapError:t=>$n.error(t(e)),bind:t,exists:E,forall:O,getOr:x,or:x,getOrThunk:k,orThunk:k,getOrDie:S(String(e)),each:b,toOptional:A.none};return n},$n={value:Hn,error:Vn,fromOption:(e,t)=>e.fold((()=>Vn(t)),Hn)};var Un;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Un||(Un={}));const Wn=(e,t,n)=>e.stype===Un.Error?t(e.serror):n(e.svalue),qn=e=>({stype:Un.Value,svalue:e}),Kn=e=>({stype:Un.Error,serror:e}),Gn=e=>e.fold(Kn,qn),Yn=e=>Wn(e,$n.error,$n.value),Xn=qn,Jn=e=>{const t=[],n=[];return j(e,(e=>{Wn(e,(e=>n.push(e)),(e=>t.push(e)))})),{values:t,errors:n}},Qn=Kn,Zn=(e,t)=>e.stype===Un.Value?t(e.svalue):e,eo=(e,t)=>e.stype===Un.Error?t(e.serror):e,to=(e,t)=>e.stype===Un.Value?{stype:Un.Value,svalue:t(e.svalue)}:e,no=(e,t)=>e.stype===Un.Error?{stype:Un.Error,serror:t(e.serror)}:e,oo=Wn,ro=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),so=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},io=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const t in r)be(r,t)&&(n[t]=e(n[t],r[t]))}return n},ao=io(((e,t)=>a(e)&&a(t)?ao(e,t):t)),lo=io(((e,t)=>t)),co=e=>({tag:"defaultedThunk",process:e}),uo=e=>co(y(e)),ho=e=>({tag:"mergeWithThunk",process:e}),mo=e=>v(Qn,K)(e),po=e=>{const t=Jn(e);return t.errors.length>0?mo(t.errors):Xn(t.values)},fo=e=>i(e)&&ie(e).length>100?" removed due to size":JSON.stringify(e,null,2),go=(e,t)=>Qn([{path:e,getErrorInfo:t}]),bo=e=>({extract:(t,n)=>eo(e(n),(e=>((e,t)=>go(e,y(t)))(t,e))),toString:y("val")}),vo=bo(Xn),yo=(e,t,n,o)=>ge(t,n).fold((()=>((e,t,n)=>go(e,(()=>'Could not find valid *required* value for "'+t+'" in '+fo(n))))(e,n,t)),o),xo=(e,t,n,o)=>o(ge(e,t).getOrThunk((()=>n(e)))),wo=(e,t,n,o,r)=>{const s=e=>r.extract(t.concat([o]),e),i=e=>e.fold((()=>Xn(A.none())),(e=>{const n=r.extract(t.concat([o]),e);return to(n,A.some)}));switch(e.tag){case"required":return yo(t,n,o,s);case"defaultedThunk":return xo(n,o,e.process,s);case"option":return((e,t,n)=>n(ge(e,t)))(n,o,i);case"defaultedOptionThunk":return((e,t,n,o)=>o(ge(e,t).map((t=>!0===t?n(e):t))))(n,o,e.process,i);case"mergeWithThunk":return xo(n,o,y({}),(t=>{const o=ao(e.process(n),t);return s(o)}))}},Co=e=>({extract:(t,n)=>e().extract(t,n),toString:()=>e().toString()}),_o=e=>ie(((e,t)=>{const n={};return he(e,t,ue(n),b),n})(e,m)),So=e=>{const t=ko(e),n=$(e,((e,t)=>so(t,(t=>ao(e,{[t]:!0})),y(e))),{});return{extract:(e,o)=>{const r=d(o)?[]:_o(o),s=V(r,(e=>!ve(n,e)));return 0===s.length?t.extract(e,o):((e,t)=>go(e,(()=>"There are unsupported fields: ["+t.join(", ")+"] specified")))(e,s)},toString:t.toString}},ko=e=>({extract:(t,n)=>((e,t,n)=>{const o={},r=[];for(const s of n)so(s,((n,s,i,a)=>{const l=wo(i,e,t,n,a);oo(l,(e=>{r.push(...e)}),(e=>{o[s]=e}))}),((e,n)=>{o[e]=n(t)}));return r.length>0?Qn(r):Xn(o)})(t,n,e),toString:()=>{const t=z(e,(e=>so(e,((e,t,n,o)=>e+" -> "+o.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),Eo=e=>({extract:(t,n)=>{const o=z(n,((n,o)=>e.extract(t.concat(["["+o+"]"]),n)));return po(o)},toString:()=>"array("+e.toString()+")"}),Oo=e=>({extract:(t,n)=>{const o=[];for(const r of e){const e=r.extract(t,n);if(e.stype===Un.Value)return e;o.push(e)}return po(o)},toString:()=>"oneOf("+z(e,(e=>e.toString())).join(", ")+")"}),To=(e,t)=>({extract:(n,o)=>{const r=ie(o),s=((t,n)=>Eo(bo(e)).extract(t,n))(n,r);return Zn(s,(e=>{const r=z(e,(e=>ro(e,e,{tag:"required",process:{}},t)));return ko(r).extract(n,o)}))},toString:()=>"setOf("+t.toString()+")"}),Ao=v(Eo,ko),Do=y(vo),Ro=(e,t)=>bo((n=>{const o=typeof n;return e(n)?Xn(n):Qn(`Expected type: ${t} but got: ${o}`)})),Mo=Ro(f,"number"),No=Ro(s,"string"),Po=Ro(d,"boolean"),Lo=Ro(p,"function"),Bo=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((t=>Bo(e[t])));default:return!1}},Io=bo((e=>Bo(e)?Xn(e):Qn("Expected value to be acceptable for sending via postMessage"))),Fo=(e,t,n,o)=>ge(n,o).fold((()=>((e,t,n)=>go(e,(()=>'The chosen schema: "'+n+'" did not exist in branches: '+fo(t))))(e,n,o)),(n=>n.extract(e.concat(["branch: "+o]),t))),zo=(e,t)=>({extract:(n,o)=>ge(o,e).fold((()=>((e,t)=>go(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(n,e)),(e=>Fo(n,o,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+ie(t)}),jo=e=>bo((t=>e(t).fold(Qn,Xn))),Ho=(e,t)=>To((t=>Gn(e(t))),t),Vo=(e,t,n)=>Yn(((e,t,n)=>{const o=t.extract([e],n);return no(o,(e=>({input:n,errors:e})))})(e,t,n)),$o=e=>e.fold((e=>{throw new Error(Wo(e))}),x),Uo=(e,t,n)=>$o(Vo(e,t,n)),Wo=e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:y("... (only showing first ten failures)")}]):e;return z(t,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))})(e.errors).join("\n")+"\n\nInput object: "+fo(e.input),qo=(e,t)=>zo(e,ce(t,ko)),Ko=ro,Go=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Yo=e=>jo((t=>L(e,t)?$n.value(t):$n.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`))),Xo=e=>Ko(e,e,{tag:"required",process:{}},Do()),Jo=(e,t)=>Ko(e,e,{tag:"required",process:{}},t),Qo=e=>Jo(e,Mo),Zo=e=>Jo(e,No),er=(e,t)=>Ko(e,e,{tag:"required",process:{}},Yo(t)),tr=e=>Jo(e,Lo),nr=(e,t)=>Ko(e,e,{tag:"required",process:{}},ko(t)),or=(e,t)=>Ko(e,e,{tag:"required",process:{}},Ao(t)),rr=(e,t)=>Ko(e,e,{tag:"required",process:{}},Eo(t)),sr=e=>Ko(e,e,{tag:"option",process:{}},Do()),ir=(e,t)=>Ko(e,e,{tag:"option",process:{}},t),ar=e=>ir(e,Mo),lr=e=>ir(e,No),cr=(e,t)=>ir(e,Yo(t)),dr=e=>ir(e,Lo),ur=(e,t)=>ir(e,Eo(t)),hr=(e,t)=>ir(e,ko(t)),mr=(e,t)=>Ko(e,e,uo(t),Do()),pr=(e,t,n)=>Ko(e,e,uo(t),n),fr=(e,t)=>pr(e,t,Mo),gr=(e,t)=>pr(e,t,No),br=(e,t,n)=>pr(e,t,Yo(n)),vr=(e,t)=>pr(e,t,Po),yr=(e,t)=>pr(e,t,Lo),xr=(e,t,n)=>pr(e,t,Eo(n)),wr=(e,t,n)=>pr(e,t,ko(n)),Cr=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},_r=e=>{if(!l(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return j(e,((o,r)=>{const s=ie(o);if(1!==s.length)throw new Error("one and only one name per case");const i=s[0],a=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!l(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...n)=>{const o=n.length;if(o!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:e=>{const o=ie(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!Y(t,(e=>L(o,e))))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),n};_r([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Sr=(e,t)=>((e,t)=>{const n={};return le(e,((e,o)=>{L(t,o)||(n[o]=e)})),n})(e,t),kr=(e,t)=>((e,t)=>({[e]:t}))(e,t),Er=e=>(e=>{const t={};return j(e,(e=>{t[e.key]=e.value})),t})(e),Or=(e,t)=>{const n=(e=>{const t=[],n=[];return j(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{n.push(e)}))})),{errors:t,values:n}})(e);return n.errors.length>0?(o=n.errors,$n.error(K(o))):((e,t)=>0===e.length?$n.value(t):$n.value(ao(t,lo.apply(void 0,e))))(n.values,t);var o},Tr=e=>p(e)?e:E,Ar=(e,t,n)=>{let o=e.dom;const r=Tr(n);for(;o.parentNode;){o=o.parentNode;const e=Re.fromDom(o),n=t(e);if(n.isSome())return n;if(r(e))break}return A.none()},Dr=(e,t,n)=>{const o=t(e),r=Tr(n);return o.orThunk((()=>r(e)?A.none():Ar(e,t,r)))},Rr=(e,t)=>He(e.element,t.event.target),Mr={can:O,abort:E,run:b},Nr=e=>{if(!ve(e,"can")&&!ve(e,"abort")&&!ve(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...Mr,...e}},Pr=e=>{const t=((e,t)=>(...n)=>U(e,((e,o)=>e&&t(o).apply(void 0,n)),!0))(e,(e=>e.can)),n=((e,t)=>(...n)=>U(e,((e,o)=>e||t(o).apply(void 0,n)),!1))(e,(e=>e.abort));return{can:t,abort:n,run:(...t)=>{j(e,(e=>{e.run.apply(void 0,t)}))}}},Lr=y,Br=Lr("touchstart"),Ir=Lr("touchmove"),Fr=Lr("touchend"),zr=Lr("touchcancel"),jr=Lr("mousedown"),Hr=Lr("mousemove"),Vr=Lr("mouseout"),$r=Lr("mouseup"),Ur=Lr("mouseover"),Wr=Lr("focusin"),qr=Lr("focusout"),Kr=Lr("keydown"),Gr=Lr("keyup"),Yr=Lr("input"),Xr=Lr("change"),Jr=Lr("click"),Qr=Lr("transitioncancel"),Zr=Lr("transitionend"),es=Lr("transitionstart"),ts=Lr("selectstart"),ns=e=>y("alloy."+e),os={tap:ns("tap")},rs=ns("focus"),ss=ns("blur.post"),is=ns("paste.post"),as=ns("receive"),ls=ns("execute"),cs=ns("focus.item"),ds=os.tap,us=ns("longpress"),hs=ns("sandbox.close"),ms=ns("typeahead.cancel"),ps=ns("system.init"),fs=ns("system.touchmove"),gs=ns("system.touchend"),bs=ns("system.scroll"),vs=ns("system.resize"),ys=ns("system.attached"),xs=ns("system.detached"),ws=ns("system.dismissRequested"),Cs=ns("system.repositionRequested"),_s=ns("focusmanager.shifted"),Ss=ns("slotcontainer.visibility"),ks=ns("change.tab"),Es=ns("dismiss.tab"),Os=ns("highlight"),Ts=ns("dehighlight"),As=(e,t)=>{Ns(e,e.element,t,{})},Ds=(e,t,n)=>{Ns(e,e.element,t,n)},Rs=e=>{As(e,ls())},Ms=(e,t,n)=>{Ns(e,t,n,{})},Ns=(e,t,n,o)=>{const r={target:t,...o};e.getSystem().triggerEvent(n,t,r)},Ps=(e,t,n,o)=>{e.getSystem().triggerEvent(n,t,o.event)},Ls=e=>Er(e),Bs=(e,t)=>({key:e,value:Nr({abort:t})}),Is=e=>({key:e,value:Nr({run:(e,t)=>{t.event.prevent()}})}),Fs=(e,t)=>({key:e,value:Nr({run:t})}),zs=(e,t,n)=>({key:e,value:Nr({run:(e,o)=>{t.apply(void 0,[e,o].concat(n))}})}),js=e=>t=>({key:e,value:Nr({run:(e,n)=>{Rr(e,n)&&t(e,n)}})}),Hs=(e,t,n)=>((e,t)=>Fs(e,((n,o)=>{n.getSystem().getByUid(t).each((t=>{Ps(t,t.element,e,o)}))})))(e,t.partUids[n]),Vs=(e,t)=>Fs(e,((e,n)=>{const o=n.event,r=e.getSystem().getByDom(o.target).getOrThunk((()=>Dr(o.target,(t=>e.getSystem().getByDom(t).toOptional()),E).getOr(e)));t(e,r,n)})),$s=e=>Fs(e,((e,t)=>{t.cut()})),Us=e=>Fs(e,((e,t)=>{t.stop()})),Ws=(e,t)=>js(e)(t),qs=js(ys()),Ks=js(xs()),Gs=js(ps()),Ys=(e=>t=>Fs(e,t))(ls()),Xs=e=>e.dom.innerHTML,Js=(e,t)=>{const n=$e(e).dom,o=Re.fromDom(n.createDocumentFragment()),r=((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Xe(Re.fromDom(n))})(t,n);En(o,r),On(e),kn(e,o)},Qs=e=>((e,t)=>Re.fromDom(e.dom.cloneNode(t)))(e,!1),Zs=e=>{if(et(e))return"#shadow-root";return(e=>{const t=Re.fromTag("div"),n=Re.fromDom(e.dom.cloneNode(!0));return kn(t,n),Xs(t)})(Qs(e))},ei=e=>Zs(e),ti=Ls([((e,t)=>({key:e,value:Nr({can:t})}))(rs(),((e,t)=>{const n=t.event,o=n.originator,r=n.target;return!((e,t,n)=>He(t,e.element)&&!He(t,n))(e,o,r)||(console.warn(rs()+" did not get interpreted by the desired target. \nOriginator: "+ei(o)+"\nTarget: "+ei(r)+"\nCheck the "+rs()+" event handlers"),!1)}))]);var ni=Object.freeze({__proto__:null,events:ti});let oi=0;const ri=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return oi++,e+"_"+n+oi+String(t)},si=y("alloy-id-"),ii=y("data-alloy-id"),ai=si(),li=ii(),ci=(e,t)=>{Object.defineProperty(e.dom,li,{value:t,writable:!0})},di=e=>{const t=Pe(e)?e.dom[li]:null;return A.from(t)},ui=e=>ri(e),hi=x,mi=e=>{const t=t=>`The component must be in a context to execute: ${t}`+(e?"\n"+ei(e().element)+" is not in context.":""),n=e=>()=>{throw new Error(t(e))},o=e=>()=>{console.warn(t(e))};return{debugInfo:y("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:n("build"),buildOrPatch:n("buildOrPatch"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:E}},pi=mi(),fi=e=>z(e,(e=>Ee(e,"/*")?e.substring(0,e.length-"/*".length):e)),gi=(e,t)=>{const n=e.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),s=n.substring(r+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:fi(s)}),e},bi=ri("alloy-premade"),vi=e=>(Object.defineProperty(e.element.dom,bi,{value:e.uid,writable:!0}),kr(bi,e)),yi=e=>ge(e,bi),xi=e=>((e,t)=>{const n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),s=n.substring(r+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:fi(s.slice(1))}),e})(((t,...n)=>e(t.getApis(),t,...n)),e),wi={init:()=>Ci({readState:y("No State required")})},Ci=e=>e,_i=(e,t)=>{const n={};return le(e,((e,o)=>{le(e,((e,r)=>{const s=ge(n,r).getOr([]);n[r]=s.concat([t(o,e)])}))})),n},Si=e=>({classes:u(e.classes)?[]:e.classes,attributes:u(e.attributes)?{}:e.attributes,styles:u(e.styles)?{}:e.styles}),ki=e=>e.cHandler,Ei=(e,t)=>({name:e,handler:t}),Oi=(e,t)=>{const n={};return j(e,(e=>{n[e.name()]=e.handlers(t)})),n},Ti=(e,t,n,o)=>{const r=((e,t,n)=>{const o={...n,...Oi(t,e)};return _i(o,Ei)})(e,n,o);return Ri(r,t)},Ai=e=>{const t=(e=>p(e)?{can:O,abort:E,run:e}:e)(e);return(e,n,...o)=>{const r=[e,n].concat(o);t.abort.apply(void 0,r)?n.stop():t.can.apply(void 0,r)&&t.run.apply(void 0,r)}},Di=(e,t,n)=>{const o=t[n];return o?((e,t,n,o)=>{try{const r=ee(n,((n,r)=>{const s=n[t],i=r[t],a=o.indexOf(s),l=o.indexOf(i);if(-1===a)throw new Error("The ordering for "+e+" does not have an entry for "+s+".\nOrder specified: "+JSON.stringify(o,null,2));if(-1===l)throw new Error("The ordering for "+e+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(o,null,2));return a<l?-1:l<a?1:0}));return $n.value(r)}catch(e){return $n.error([e])}})("Event: "+n,"name",e,o).map((e=>{const t=z(e,(e=>e.handler));return Pr(t)})):((e,t)=>$n.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(z(t,(e=>e.name)),null,2)]))(n,e)},Ri=(e,t)=>{const n=me(e,((e,n)=>(1===e.length?$n.value(e[0].handler):Di(e,t,n)).map((o=>{const r=Ai(o),s=e.length>1?V(t[n],(t=>B(e,(e=>e.name===t)))).join(" > "):e[0].name;return kr(n,((e,t)=>({handler:e,purpose:t}))(r,s))}))));return Or(n,{})},Mi="alloy.base.behaviour",Ni=ko([Ko("dom","dom",{tag:"required",process:{}},ko([Xo("tag"),mr("styles",{}),mr("classes",[]),mr("attributes",{}),sr("value"),sr("innerHtml")])),Xo("components"),Xo("uid"),mr("events",{}),mr("apis",{}),Ko("eventOrder","eventOrder",(e=>ho(y(e)))({[ls()]:["disabling",Mi,"toggling","typeaheadevents"],[rs()]:[Mi,"focusing","keying"],[ps()]:[Mi,"disabling","toggling","representing"],[Yr()]:[Mi,"representing","streaming","invalidating"],[xs()]:[Mi,"representing","item-events","tooltipping"],[jr()]:["focusing",Mi,"item-type-events"],[Br()]:["focusing",Mi,"item-type-events"],[Ur()]:["item-type-events","tooltipping"],[as()]:["receiving","reflecting","tooltipping"]}),Do()),sr("domModification")]),Pi=e=>e.events,Li=(e,t)=>{const n=pt(e,t);return void 0===n||""===n?[]:n.split(" ")},Bi=e=>void 0!==e.dom.classList,Ii=e=>Li(e,"class"),Fi=(e,t)=>((e,t,n)=>{const o=Li(e,t).concat([n]);return ht(e,t,o.join(" ")),!0})(e,"class",t),zi=(e,t)=>((e,t,n)=>{const o=V(Li(e,t),(e=>e!==n));return o.length>0?ht(e,t,o.join(" ")):bt(e,t),!1})(e,"class",t),ji=(e,t)=>{Bi(e)?e.dom.classList.add(t):Fi(e,t)},Hi=(e,t)=>{if(Bi(e)){e.dom.classList.remove(t)}else zi(e,t);(e=>{0===(Bi(e)?e.dom.classList:Ii(e)).length&&bt(e,"class")})(e)},Vi=(e,t)=>Bi(e)&&e.dom.classList.contains(t),$i=(e,t)=>{j(t,(t=>{ji(e,t)}))},Ui=(e,t)=>{j(t,(t=>{Hi(e,t)}))},Wi=e=>Bi(e)?(e=>{const t=e.dom.classList,n=new Array(t.length);for(let e=0;e<t.length;e++){const o=t.item(e);null!==o&&(n[e]=o)}return n})(e):Ii(e),qi=e=>e.dom.value,Ki=(e,t)=>{if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},Gi=(e,t,n)=>{n.fold((()=>kn(e,t)),(e=>{He(e,t)||(Cn(e,t),Tn(e))}))},Yi=(e,t,n)=>{const o=z(t,n),r=Xe(e);return j(r.slice(o.length),Tn),o},Xi=(e,t,n,o)=>{const r=Je(e,t),s=o(n,r),i=((e,t,n)=>Je(e,t).map((e=>{if(n.exists((t=>!He(t,e)))){const t=n.map(Me).getOr("span"),o=Re.fromTag(t);return Cn(e,o),o}return e})))(e,t,r);return Gi(e,s.element,i),s},Ji=(e,t)=>{const n=ie(e),o=ie(t),r=J(o,n),s=((e,t)=>{const n={},o={};return he(e,t,ue(n),ue(o)),{t:n,f:o}})(e,((e,n)=>!be(t,n)||e!==t[n])).t;return{toRemove:r,toSet:s}},Qi=(e,t)=>{const{class:n,style:o,...r}=(e=>U(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))(t),{toSet:s,toRemove:i}=Ji(e.attributes,r),a=Et(t),{toSet:l,toRemove:c}=Ji(e.styles,a),d=Wi(t),u=J(d,e.classes),h=J(e.classes,d);return j(i,(e=>bt(t,e))),mt(t,s),$i(t,h),Ui(t,u),j(c,(e=>Tt(t,e))),wt(t,l),e.innerHtml.fold((()=>{const n=e.domChildren;((e,t)=>{Yi(e,t,((t,n)=>{const o=Je(e,n);return Gi(e,t,o),t}))})(t,n)}),(e=>{Js(t,e)})),(()=>{const n=t;e.value.filter((e=>e!==qi(n))).each((e=>Ki(n,e)))})(),t},Zi=(e,t)=>{const n=t.filter((t=>Me(t)===e.tag&&!(e=>e.innerHtml.isSome()&&e.domChildren.length>0)(e)&&!(e=>be(e.dom,bi))(t))).bind((t=>((e,t)=>{try{const n=Qi(e,t);return A.some(n)}catch(e){return A.none()}})(e,t))).getOrThunk((()=>(e=>{const t=Re.fromTag(e.tag);mt(t,e.attributes),$i(t,e.classes),wt(t,e.styles),e.innerHtml.each((e=>Js(t,e)));const n=e.domChildren;return En(t,n),e.value.each((e=>{Ki(t,e)})),t})(e)));return ci(n,e.uid),n},ea=(e,t)=>((e,t)=>{const n=z(t,(e=>hr(e.name(),[Xo("config"),mr("state",wi)]))),o=Vo("component.behaviours",ko(n),e.behaviours).fold((t=>{throw new Error(Wo(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))}),x);return{list:t,data:ce(o,(e=>{const t=e.map((e=>({config:e.config,state:e.state.init(e.config)})));return y(t)}))}})(e,t),ta=e=>{const t=(e=>{const t=ge(e,"behaviours").getOr({});return G(ie(t),(e=>{const n=t[e];return m(n)?[n.me]:[]}))})(e);return ea(e,t)},na=(e,t,n)=>{const o={...(r=e).dom,uid:r.uid,domChildren:z(r.components,(e=>e.element))};var r;const s=(e=>e.domModification.fold((()=>Si({})),Si))(e),i={"alloy.base.modification":s},a=t.length>0?((e,t,n,o)=>{const r={...t};j(n,(t=>{r[t.name()]=t.exhibit(e,o)}));const s=_i(r,((e,t)=>({name:e,modification:t}))),i=e=>$(e,((e,t)=>({...t.modification,...e})),{}),a=$(s.classes,((e,t)=>t.modification.concat(e)),[]),l=i(s.attributes),c=i(s.styles);return Si({classes:a,attributes:l,styles:c})})(n,i,t,o):s;return l=o,c=a,{...l,attributes:{...l.attributes,...c.attributes},styles:{...l.styles,...c.styles},classes:l.classes.concat(c.classes)};var l,c},oa=(e,t)=>{const n=()=>h,o=Cr(pi),r=$o((e=>Vo("custom.definition",Ni,e))(e)),s=ta(e),i=(e=>e.list)(s),a=(e=>e.data)(s),l=na(r,i,a),c=Zi(l,t),d=((e,t,n)=>{const o={"alloy.base.behaviour":Pi(e)};return Ti(n,e.eventOrder,t,o).getOrDie()})(r,i,a),u=Cr(r.components),h={uid:e.uid,getSystem:o.get,config:t=>{const n=a;return(p(n[t.name()])?n[t.name()]:()=>{throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:e=>p(a[e.name()]),spec:e,readState:e=>a[e]().map((e=>e.state.readState())).getOr("not enabled"),getApis:()=>r.apis,connect:e=>{o.set(e)},disconnect:()=>{o.set(mi(n))},element:c,syncComponents:()=>{const e=Xe(c),t=G(e,(e=>o.get().getByDom(e).fold((()=>[]),Z)));u.set(t)},components:u.get,events:d};return h},ra=(e,t)=>{const{events:n,...o}=hi(e),r=((e,t)=>{const n=ge(e,"components").getOr([]);return t.fold((()=>z(n,ca)),(e=>z(n,((t,n)=>la(t,Je(e,n))))))})(o,t),s={...o,events:{...ni,...n},components:r};return $n.value(oa(s,t))},sa=e=>{const t=Re.fromText(e);return ia({element:t})},ia=e=>{const t=Uo("external.component",So([Xo("element"),sr("uid")]),e),n=Cr(mi()),o=t.uid.getOrThunk((()=>ui("external")));ci(t.element,o);const r={uid:o,getSystem:n.get,config:A.none,hasConfigured:E,connect:e=>{n.set(e)},disconnect:()=>{n.set(mi((()=>r)))},getApis:()=>({}),element:t.element,spec:e,readState:y("No state"),syncComponents:b,components:y([]),events:{}};return vi(r)},aa=ui,la=(e,t)=>yi(e).getOrThunk((()=>{const n=(e=>be(e,"uid"))(e)?e:{uid:aa(""),...e};return ra(n,t).getOrDie()})),ca=e=>la(e,A.none()),da=vi;var ua=(e,t,n,o,r)=>e(n,o)?A.some(n):p(r)&&r(n)?A.none():t(n,o,r);const ha=(e,t,n)=>{let o=e.dom;const r=p(n)?n:E;for(;o.parentNode;){o=o.parentNode;const e=Re.fromDom(o);if(t(e))return A.some(e);if(r(e))break}return A.none()},ma=(e,t,n)=>ua(((e,t)=>t(e)),ha,e,t,n),pa=(e,t,n)=>ma(e,t,n).isSome(),fa=(e,t,n)=>ha(e,(e=>ze(e,t)),n),ga=(e,t)=>((e,t)=>W(e.dom.childNodes,(e=>t(Re.fromDom(e)))).map(Re.fromDom))(e,(e=>ze(e,t))),ba=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return je(n)?A.none():A.from(n.querySelector(e)).map(Re.fromDom)})(t,e),va=(e,t,n)=>ua(((e,t)=>ze(e,t)),fa,e,t,n),ya="aria-controls",xa=()=>{const e=ri(ya);return{id:e,link:t=>{ht(t,ya,e)},unlink:e=>{bt(e,ya)}}},wa=(e,t)=>(e=>ma(e,(e=>{if(!Pe(e))return!1;const t=pt(e,"id");return void 0!==t&&t.indexOf(ya)>-1})).bind((e=>{const t=pt(e,"id"),n=ot(e);return ba(n,`[${ya}="${t}"]`)})))(t).exists((t=>Ca(e,t))),Ca=(e,t)=>pa(t,(t=>He(t,e.element)),E)||wa(e,t),_a="unknown";var Sa;!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(Sa||(Sa={}));const ka=Cr({}),Ea=(e,t,n)=>{switch(ge(ka.get(),e).orThunk((()=>{const t=ie(ka.get());return se(t,(t=>e.indexOf(t)>-1?A.some(ka.get()[t]):A.none()))})).getOr(Sa.NORMAL)){case Sa.NORMAL:return n(Aa());case Sa.LOGGING:{const o=((e,t)=>{const n=[],o=(new Date).getTime();return{logEventCut:(e,t,o)=>{n.push({outcome:"cut",target:t,purpose:o})},logEventStopped:(e,t,o)=>{n.push({outcome:"stopped",target:t,purpose:o})},logNoParent:(e,t,o)=>{n.push({outcome:"no-parent",target:t,purpose:o})},logEventNoHandlers:(e,t)=>{n.push({outcome:"no-handlers-left",target:t})},logEventResponse:(e,t,o)=>{n.push({outcome:"response",purpose:o,target:t})},write:()=>{const r=(new Date).getTime();L(["mousemove","mouseover","mouseout",ps()],e)||console.log(e,{event:e,time:r-o,target:t.dom,sequence:z(n,(e=>L(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+ei(e.target)+")":e.outcome))})}}})(e,t),r=n(o);return o.write(),r}case Sa.STOP:return!0}},Oa=["alloy/data/Fields","alloy/debugging/Debugging"],Ta=(e,t,n)=>Ea(e,t,n),Aa=y({logEventCut:b,logEventStopped:b,logNoParent:b,logEventNoHandlers:b,logEventResponse:b,write:b}),Da=y([Xo("menu"),Xo("selectedMenu")]),Ra=y([Xo("item"),Xo("selectedItem")]);y(ko(Ra().concat(Da())));const Ma=y(ko(Ra())),Na=nr("initSize",[Xo("numColumns"),Xo("numRows")]),Pa=()=>nr("markers",[Xo("backgroundMenu")].concat(Da()).concat(Ra())),La=e=>nr("markers",z(e,Xo)),Ba=(e,t,n)=>((()=>{const e=new Error;if(void 0!==e.stack){const t=e.stack.split("\n");return W(t,(e=>e.indexOf("alloy")>0&&!B(Oa,(t=>e.indexOf(t)>-1)))).getOr(_a)}})(),Ko(t,t,n,jo((e=>$n.value(((...t)=>e.apply(void 0,t))))))),Ia=e=>Ba(0,e,uo(b)),Fa=e=>Ba(0,e,uo(A.none)),za=e=>Ba(0,e,{tag:"required",process:{}}),ja=e=>Ba(0,e,{tag:"required",process:{}}),Ha=(e,t)=>Go(e,y(t)),Va=e=>Go(e,x),$a=y(Na),Ua=(e,t,n,o,r,s,i,a=!1)=>({x:e,y:t,bubble:n,direction:o,placement:r,restriction:s,label:`${i}-${r}`,alwaysFit:a}),Wa=_r([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),qa=Wa.southeast,Ka=Wa.southwest,Ga=Wa.northeast,Ya=Wa.northwest,Xa=Wa.south,Ja=Wa.north,Qa=Wa.east,Za=Wa.west,el=(e,t,n,o)=>{const r=e+t;return r>o?n:r<n?o:r},tl=(e,t,n)=>Math.min(Math.max(e,t),n),nl=(e,t)=>Q(["left","right","top","bottom"],(n=>ge(t,n).map((t=>((e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}})(e,t))))),ol="layout",rl=e=>e.x,sl=(e,t)=>e.x+e.width/2-t.width/2,il=(e,t)=>e.x+e.width-t.width,al=(e,t)=>e.y-t.height,ll=e=>e.y+e.height,cl=(e,t)=>e.y+e.height/2-t.height/2,dl=(e,t,n)=>Ua(rl(e),ll(e),n.southeast(),qa(),"southeast",nl(e,{left:1,top:3}),ol),ul=(e,t,n)=>Ua(il(e,t),ll(e),n.southwest(),Ka(),"southwest",nl(e,{right:0,top:3}),ol),hl=(e,t,n)=>Ua(rl(e),al(e,t),n.northeast(),Ga(),"northeast",nl(e,{left:1,bottom:2}),ol),ml=(e,t,n)=>Ua(il(e,t),al(e,t),n.northwest(),Ya(),"northwest",nl(e,{right:0,bottom:2}),ol),pl=(e,t,n)=>Ua(sl(e,t),al(e,t),n.north(),Ja(),"north",nl(e,{bottom:2}),ol),fl=(e,t,n)=>Ua(sl(e,t),ll(e),n.south(),Xa(),"south",nl(e,{top:3}),ol),gl=(e,t,n)=>Ua((e=>e.x+e.width)(e),cl(e,t),n.east(),Qa(),"east",nl(e,{left:0}),ol),bl=(e,t,n)=>Ua(((e,t)=>e.x-t.width)(e,t),cl(e,t),n.west(),Za(),"west",nl(e,{right:1}),ol),vl=()=>[dl,ul,hl,ml,fl,pl,gl,bl],yl=()=>[ul,dl,ml,hl,fl,pl,gl,bl],xl=()=>[hl,ml,dl,ul,pl,fl],wl=()=>[ml,hl,ul,dl,pl,fl],Cl=()=>[dl,ul,hl,ml,fl,pl],_l=()=>[ul,dl,ml,hl,fl,pl];var Sl=Object.freeze({__proto__:null,events:e=>Ls([Fs(as(),((t,n)=>{const o=e.channels,r=ie(o),s=n,i=((e,t)=>t.universal?e:V(e,(e=>L(t.channels,e))))(r,s);j(i,(e=>{const n=o[e],r=n.schema,i=Uo("channel["+e+"] data\nReceiver: "+ei(t.element),r,s.data);n.onReceive(t,i)}))}))])}),kl=[Jo("channels",Ho($n.value,So([za("onReceive"),mr("schema",Do())])))];const El=(e,t,n)=>Gs(((o,r)=>{n(o,e,t)})),Ol=(e,t,n)=>((e,t,n)=>{const o=n.toString(),r=o.indexOf(")")+1,s=o.indexOf("("),i=o.substring(s+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:fi(i.slice(0,1).concat(i.slice(3)))}),e})(((o,...r)=>{const s=[o].concat(r);return o.config({name:y(e)}).fold((()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)}),(e=>{const n=Array.prototype.slice.call(s,1);return t.apply(void 0,[o,e.config,e.state].concat(n))}))}),n,t),Tl=e=>({key:e,value:void 0}),Al=(e,t,n,o,r,s,i)=>{const a=e=>ve(e,n)?e[n]():A.none(),l=ce(r,((e,t)=>Ol(n,e,t))),c={...ce(s,((e,t)=>gi(e,t))),...l,revoke:C(Tl,n),config:t=>{const o=Uo(n+"-config",e,t);return{key:n,value:{config:o,me:c,configAsRaw:Vt((()=>Uo(n+"-config",e,t))),initialConfig:t,state:i}}},schema:y(t),exhibit:(e,t)=>we(a(e),ge(o,"exhibit"),((e,n)=>n(t,e.config,e.state))).getOrThunk((()=>Si({}))),name:y(n),handlers:e=>a(e).map((e=>ge(o,"events").getOr((()=>({})))(e.config,e.state))).getOr({})};return c},Dl=e=>Er(e),Rl=So([Xo("fields"),Xo("name"),mr("active",{}),mr("apis",{}),mr("state",wi),mr("extra",{})]),Ml=e=>{const t=Uo("Creating behaviour: "+e.name,Rl,e);return((e,t,n,o,r,s)=>{const i=So(e),a=hr(t,[(l="config",c=e,ir(l,So(c)))]);var l,c;return Al(i,a,t,n,o,r,s)})(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Nl=So([Xo("branchKey"),Xo("branches"),Xo("name"),mr("active",{}),mr("apis",{}),mr("state",wi),mr("extra",{})]),Pl=e=>{const t=Uo("Creating behaviour: "+e.name,Nl,e);return((e,t,n,o,r,s)=>{const i=e,a=hr(t,[ir("config",e)]);return Al(i,a,t,n,o,r,s)})(qo(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},Ll=y(void 0),Bl=Ml({fields:kl,name:"receiving",active:Sl});var Il=Object.freeze({__proto__:null,exhibit:(e,t)=>Si({classes:[],styles:t.useFixed()?{}:{position:"relative"}})});const Fl=e=>e.dom.focus(),zl=e=>{const t=ot(e).dom;return e.dom===t.activeElement},jl=(e=Nn())=>A.from(e.dom.activeElement).map(Re.fromDom),Hl=e=>jl(ot(e)).filter((t=>e.dom.contains(t.dom))),Vl=(e,t)=>{const n=ot(t),o=jl(n).bind((e=>{const n=t=>He(e,t);return n(t)?A.some(t):((e,t)=>{const n=e=>{for(let o=0;o<e.childNodes.length;o++){const r=Re.fromDom(e.childNodes[o]);if(t(r))return A.some(r);const s=n(e.childNodes[o]);if(s.isSome())return s}return A.none()};return n(e.dom)})(t,n)})),r=e(t);return o.each((e=>{jl(n).filter((t=>He(t,e))).fold((()=>{Fl(e)}),b)})),r},$l=(e,t,n,o,r)=>{const s=e=>e+"px";return{position:e,left:t.map(s),top:n.map(s),right:o.map(s),bottom:r.map(s)}},Ul=(e,t)=>{Ct(e,(e=>({...e,position:A.some(e.position)}))(t))},Wl=_r([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),ql=(e,t,n,o,r,s)=>{const i=t.rect,a=i.x-n,l=i.y-o,c=r-(a+i.width),d=s-(l+i.height),u=A.some(a),h=A.some(l),m=A.some(c),p=A.some(d),f=A.none();return((e,t,n,o,r,s,i,a,l)=>e.fold(t,n,o,r,s,i,a,l))(t.direction,(()=>$l(e,u,h,f,f)),(()=>$l(e,f,h,m,f)),(()=>$l(e,u,f,f,p)),(()=>$l(e,f,f,m,p)),(()=>$l(e,u,h,f,f)),(()=>$l(e,u,f,f,p)),(()=>$l(e,u,h,f,f)),(()=>$l(e,f,h,m,f)))},Kl=(e,t)=>e.fold((()=>{const e=t.rect;return $l("absolute",A.some(e.x),A.some(e.y),A.none(),A.none())}),((e,n,o,r)=>ql("absolute",t,e,n,o,r)),((e,n,o,r)=>ql("fixed",t,e,n,o,r))),Gl=(e,t)=>{const n=C(Bn,t),o=e.fold(n,n,(()=>{const e=An();return Bn(t).translate(-e.left,-e.top)})),r=Ht(t),s=Nt(t);return In(o.left,o.top,r,s)},Yl=(e,t)=>t.fold((()=>e.fold(jn,jn,In)),(t=>e.fold(t,t,(()=>{const n=t(),o=Xl(e,n.x,n.y);return In(o.left,o.top,n.width,n.height)})))),Xl=(e,t,n)=>{const o=Lt(t,n);return e.fold(y(o),y(o),(()=>{const e=An();return o.translate(-e.left,-e.top)}))};Wl.none;const Jl=Wl.relative,Ql=Wl.fixed,Zl=(e,t)=>((e,t)=>({anchorBox:e,origin:t}))(e,t),ec="data-alloy-placement",tc=e=>ft(e,ec),nc=_r([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),oc=(e,t,n,o)=>{const r=e.bubble,s=r.offset,i=((e,t,n)=>{const o=(o,r)=>t[o].map((t=>{const s="top"===o||"bottom"===o,i=s?n.top:n.left,a=("left"===o||"top"===o?Math.max:Math.min)(t,r)+i;return s?tl(a,e.y,e.bottom):tl(a,e.x,e.right)})).getOr(r),r=o("left",e.x),s=o("top",e.y),i=o("right",e.right),a=o("bottom",e.bottom);return In(r,s,i-r,a-s)})(o,e.restriction,s),a=e.x+s.left,l=e.y+s.top,c=In(a,l,t,n),{originInBounds:d,sizeInBounds:u,visibleW:h,visibleH:m}=((e,t)=>{const{x:n,y:o,right:r,bottom:s}=t,{x:i,y:a,right:l,bottom:c,width:d,height:u}=e;return{originInBounds:i>=n&&i<=r&&a>=o&&a<=s,sizeInBounds:l<=r&&l>=n&&c<=s&&c>=o,visibleW:Math.min(d,i>=n?r-i:l-n),visibleH:Math.min(u,a>=o?s-a:c-o)}})(c,i),p=d&&u,f=p?c:((e,t)=>{const{x:n,y:o,right:r,bottom:s}=t,{x:i,y:a,width:l,height:c}=e,d=Math.max(n,r-l),u=Math.max(o,s-c),h=tl(i,n,d),m=tl(a,o,u),p=Math.min(h+l,r)-h,f=Math.min(m+c,s)-m;return In(h,m,p,f)})(c,i),g=f.width>0&&f.height>0,{maxWidth:b,maxHeight:v}=((e,t,n)=>{const o=y(t.bottom-n.y),r=y(n.bottom-t.y),s=((e,t,n,o)=>e.fold(t,t,o,o,t,o,n,n))(e,r,r,o),i=y(t.right-n.x),a=y(n.right-t.x),l=((e,t,n,o)=>e.fold(t,o,t,o,n,n,t,o))(e,a,a,i);return{maxWidth:l,maxHeight:s}})(e.direction,f,o),x={rect:f,maxHeight:v,maxWidth:b,direction:e.direction,placement:e.placement,classes:{on:r.classesOn,off:r.classesOff},layout:e.label,testY:l};return p||e.alwaysFit?nc.fit(x):nc.nofit(x,h,m,g)},rc=e=>{const t=Cr(A.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(A.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(A.some(e))}}},sc=()=>rc((e=>e.unbind())),ic=()=>{const e=rc(b);return{...e,on:t=>e.get().each(t)}},ac=O,lc=(e,t,n)=>((e,t,n,o)=>xn(e,t,n,o,!1))(e,t,ac,n),cc=(e,t,n)=>((e,t,n,o)=>xn(e,t,n,o,!0))(e,t,ac,n),dc=yn,uc=["top","bottom","right","left"],hc="data-alloy-transition-timer",mc=(e,t)=>((e,t)=>Y(t,(t=>Vi(e,t))))(e,t.classes),pc=(e,t)=>{const n=e=>parseFloat(e).toFixed(3);return pe(t,((t,o)=>!((e,t,n=w)=>we(e,t,n).getOr(e.isNone()&&t.isNone()))(e[o].map(n),t.map(n)))).isSome()},fc=(e,t)=>{const n=sc(),o=sc();let r;const i=t=>{var n;const o=null!==(n=t.raw.pseudoElement)&&void 0!==n?n:"";return He(t.target,e)&&!Te(o)&&L(uc,t.raw.propertyName)},a=s=>{if(h(s)||i(s)){n.clear(),o.clear();const i=null==s?void 0:s.raw.type;(h(i)||i===Zr())&&(clearTimeout(r),bt(e,hc),Ui(e,t.classes))}},l=lc(e,es(),(t=>{i(t)&&(l.unbind(),n.set(lc(e,Zr(),a)),o.set(lc(e,Qr(),a)))})),c=(e=>{const t=t=>{const n=_t(e,t).split(/\s*,\s*/);return V(n,Te)},n=e=>{if(s(e)&&/^[\d.]+/.test(e)){const t=parseFloat(e);return Ee(e,"ms")?t:1e3*t}return 0},o=t("transition-delay"),r=t("transition-duration");return U(r,((e,t,r)=>{const s=n(o[r])+n(t);return Math.max(e,s)}),0)})(e);requestAnimationFrame((()=>{r=setTimeout(a,c+17),ht(e,hc,r)}))},gc=(e,t,n,o,r,s)=>{const i=((e,t,n)=>n.exists((n=>{const o=e.mode;return"all"===o||n[o]!==t[o]})))(o,r,s);if(i||mc(e,o)){xt(e,"position",n.position);const s=Gl(t,e),a=Kl(t,{...r,rect:s}),l=Q(uc,(e=>a[e]));pc(n,l)&&(Ct(e,l),i&&((e,t)=>{$i(e,t.classes),ft(e,hc).each((t=>{clearTimeout(parseInt(t,10)),bt(e,hc)})),fc(e,t)})(e,o),At(e))}else Ui(e,o.classes)},bc=(e,t,n,o)=>{Tt(t,"max-height"),Tt(t,"max-width");const r={width:Ht(s=t),height:Nt(s)};var s;return((e,t,n,o,r,s)=>{const i=o.width,a=o.height,l=(t,l,c,d,u)=>{const h=t(n,o,r,e,s),m=oc(h,i,a,s);return m.fold(y(m),((e,t,n,o)=>(u===o?n>d||t>c:!u&&o)?m:nc.nofit(l,c,d,u)))},c=U(t,((e,t)=>{const n=C(l,t);return e.fold(y(e),n)}),nc.nofit({rect:n,maxHeight:o.height,maxWidth:o.width,direction:qa(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:n.y},-1,-1,!1));return c.fold(x,x)})(t,o.preference,e,r,n,o.bounds)},vc=(e,t)=>{((e,t)=>{ht(e,ec,t)})(e,t.placement)},yc=(e,t)=>{((e,t)=>{const n=Rt.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);xt(e,"max-height",n+"px")})(e,Math.floor(t))},xc=y(((e,t)=>{yc(e,t),wt(e,{"overflow-x":"hidden","overflow-y":"auto"})})),wc=y(((e,t)=>{yc(e,t)})),Cc=(e,t,n)=>void 0===e[t]?n:e[t],_c=(e,t,n,o)=>{const r=bc(e,t,n,o);return((e,t,n)=>{const o=Kl(n.origin,t);n.transition.each((r=>{gc(e,n.origin,o,r,t,n.lastPlacement)})),Ul(e,o)})(t,r,o),vc(t,r),((e,t)=>{const n=t.classes;Ui(e,n.off),$i(e,n.on)})(t,r),((e,t,n)=>{(0,n.maxHeightFunction)(e,t.maxHeight)})(t,r,o),((e,t,n)=>{(0,n.maxWidthFunction)(e,t.maxWidth)})(t,r,o),{layout:r.layout,placement:r.placement}},Sc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],kc=(e,t,n,o=1)=>{const r=e*o,s=t*o,i=e=>ge(n,e).getOr([]),a=(e,t,n)=>{const o=J(Sc,n);return{offset:Lt(e,t),classesOn:G(n,i),classesOff:G(o,i)}};return{southeast:()=>a(-e,t,["top","alignLeft"]),southwest:()=>a(e,t,["top","alignRight"]),south:()=>a(-e/2,t,["top","alignCentre"]),northeast:()=>a(-e,-t,["bottom","alignLeft"]),northwest:()=>a(e,-t,["bottom","alignRight"]),north:()=>a(-e/2,-t,["bottom","alignCentre"]),east:()=>a(e,-t/2,["valignCentre","left"]),west:()=>a(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>a(r,s,["top","alignLeft","inset"]),insetNorthwest:()=>a(-r,s,["top","alignRight","inset"]),insetNorth:()=>a(-r/2,s,["top","alignCentre","inset"]),insetSoutheast:()=>a(r,-s,["bottom","alignLeft","inset"]),insetSouthwest:()=>a(-r,-s,["bottom","alignRight","inset"]),insetSouth:()=>a(-r/2,-s,["bottom","alignCentre","inset"]),insetEast:()=>a(-r,-s/2,["valignCentre","right","inset"]),insetWest:()=>a(r,-s/2,["valignCentre","left","inset"])}},Ec=()=>kc(0,0,{}),Oc=x,Tc=(e,t)=>n=>"rtl"===Ac(n)?t:e,Ac=e=>"rtl"===_t(e,"direction")?"rtl":"ltr";var Dc;!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(Dc||(Dc={}));const Rc="data-alloy-vertical-dir",Mc=e=>pa(e,(e=>Pe(e)&&pt(e,"data-alloy-vertical-dir")===Dc.BottomToTop)),Nc=()=>hr("layouts",[Xo("onLtr"),Xo("onRtl"),sr("onBottomLtr"),sr("onBottomRtl")]),Pc=(e,t,n,o,r,s,i)=>{const a=i.map(Mc).getOr(!1),l=t.layouts.map((t=>t.onLtr(e))),c=t.layouts.map((t=>t.onRtl(e))),d=a?t.layouts.bind((t=>t.onBottomLtr.map((t=>t(e))))).or(l).getOr(r):l.getOr(n),u=a?t.layouts.bind((t=>t.onBottomRtl.map((t=>t(e))))).or(c).getOr(s):c.getOr(o);return Tc(d,u)(e)};var Lc=[Xo("hotspot"),sr("bubble"),mr("overrides",{}),Nc(),Ha("placement",((e,t,n)=>{const o=t.hotspot,r=Gl(n,o.element),s=Pc(e.element,t,Cl(),_l(),xl(),wl(),A.some(t.hotspot.element));return A.some(Oc({anchorBox:r,bubble:t.bubble.getOr(Ec()),overrides:t.overrides,layouts:s,placer:A.none()}))}))];var Bc=[Xo("x"),Xo("y"),mr("height",0),mr("width",0),mr("bubble",Ec()),mr("overrides",{}),Nc(),Ha("placement",((e,t,n)=>{const o=Xl(n,t.x,t.y),r=In(o.left,o.top,t.width,t.height),s=Pc(e.element,t,vl(),yl(),vl(),yl(),A.none());return A.some(Oc({anchorBox:r,bubble:t.bubble,overrides:t.overrides,layouts:s,placer:A.none()}))}))];const Ic=_r([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Fc=e=>e.fold(x,((e,t,n)=>e.translate(-t,-n))),zc=e=>e.fold(x,x),jc=e=>U(e,((e,t)=>e.translate(t.left,t.top)),Lt(0,0)),Hc=e=>{const t=z(e,zc);return jc(t)},Vc=Ic.screen,$c=Ic.absolute,Uc=(e,t,n)=>{const o=$e(e.element),r=An(o),s=((e,t,n)=>{const o=qe(n.root).dom;return A.from(o.frameElement).map(Re.fromDom).filter((t=>{const n=$e(t),o=$e(e.element);return He(n,o)})).map(It)})(e,0,n).getOr(r);return $c(s,r.left,r.top)},Wc=(e,t,n,o)=>{const r=Vc(Lt(e,t));return A.some(((e,t,n)=>({point:e,width:t,height:n}))(r,n,o))},qc=(e,t,n,o,r)=>e.map((e=>{const s=[t,e.point],i=(a=()=>Hc(s),l=()=>Hc(s),c=()=>(e=>{const t=z(e,Fc);return jc(t)})(s),o.fold(a,l,c));var a,l,c;const d=((e,t,n,o)=>({x:e,y:t,width:n,height:o}))(i.left,i.top,e.width,e.height),u=n.showAbove?xl():Cl(),h=n.showAbove?wl():_l(),m=Pc(r,n,u,h,u,h,A.none());return Oc({anchorBox:d,bubble:n.bubble.getOr(Ec()),overrides:n.overrides,layouts:m,placer:A.none()})}));var Kc=[Xo("node"),Xo("root"),sr("bubble"),Nc(),mr("overrides",{}),mr("showAbove",!1),Ha("placement",((e,t,n)=>{const o=Uc(e,0,t);return t.node.filter(lt).bind((r=>{const s=r.dom.getBoundingClientRect(),i=Wc(s.left,s.top,s.width,s.height),a=t.node.getOr(e.element);return qc(i,o,t,n,a)}))}))];const Gc=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),Yc=_r([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Xc=(Yc.before,Yc.on,Yc.after,e=>e.fold(x,x,x)),Jc=_r([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Qc={domRange:Jc.domRange,relative:Jc.relative,exact:Jc.exact,exactFromRange:e=>Jc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>Re.fromDom(e.startContainer),relative:(e,t)=>Xc(e),exact:(e,t,n,o)=>e}))(e);return qe(t)},range:Gc},Zc=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold((e=>{r.setStartBefore(e.dom)}),((e,t)=>{r.setStart(e.dom,t)}),(e=>{r.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(o,n),o},ed=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},td=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),nd=_r([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),od=(e,t,n)=>t(Re.fromDom(n.startContainer),n.startOffset,Re.fromDom(n.endContainer),n.endOffset),rd=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:y(e),rtl:A.none}),relative:(t,n)=>({ltr:Vt((()=>Zc(e,t,n))),rtl:Vt((()=>A.some(Zc(e,n,t))))}),exact:(t,n,o,r)=>({ltr:Vt((()=>ed(e,t,n,o,r))),rtl:Vt((()=>A.some(ed(e,o,r,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>nd.rtl(Re.fromDom(e.endContainer),e.endOffset,Re.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>od(0,nd.ltr,n)));return od(0,nd.ltr,n)})(0,n)},sd=(e,t)=>rd(e,t).match({ltr:(t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},rtl:(t,n,o,r)=>{const s=e.document.createRange();return s.setStart(o.dom,r),s.setEnd(t.dom,n),s}});nd.ltr,nd.rtl;const id=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return je(n)?[]:z(n.querySelectorAll(e),Re.fromDom)})(t,e),ad=(e,t,n,o)=>{const r=((e,t,n,o)=>{const r=$e(e).dom.createRange();return r.setStart(e.dom,t),r.setEnd(n.dom,o),r})(e,t,n,o),s=He(e,n)&&t===o;return r.collapsed&&!s},ld=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return A.some(Gc(Re.fromDom(t.startContainer),t.startOffset,Re.fromDom(n.endContainer),n.endOffset))}return A.none()},cd=e=>{if(null===e.anchorNode||null===e.focusNode)return ld(e);{const t=Re.fromDom(e.anchorNode),n=Re.fromDom(e.focusNode);return ad(t,e.anchorOffset,n,e.focusOffset)?A.some(Gc(t,e.anchorOffset,n,e.focusOffset)):ld(e)}},dd=e=>(e=>A.from(e.getSelection()))(e).filter((e=>e.rangeCount>0)).bind(cd),ud=(e,t)=>(e=>{const t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?A.some(n).map(td):A.none()})(sd(e,t)),hd=(e,t)=>(e=>{const t=e.getBoundingClientRect();return t.width>0||t.height>0?A.some(t).map(td):A.none()})(sd(e,t)),md=((e,t)=>{const n=t=>e(t)?A.from(t.dom.nodeValue):A.none();return{get:o=>{if(!e(o))throw new Error("Can only get "+t+" value of a "+t+" node");return n(o).getOr("")},getOption:n,set:(n,o)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o}}})(Le,"text"),pd=(e,t)=>({element:e,offset:t}),fd=(e,t)=>{const n=Xe(e);if(0===n.length)return pd(e,t);if(t<n.length)return pd(n[t],0);{const e=n[n.length-1],t=Le(e)?(e=>md.get(e))(e).length:Xe(e).length;return pd(e,t)}},gd=(e,t)=>Le(e)?pd(e,t):fd(e,t),bd=(e,t)=>t.getSelection.getOrThunk((()=>()=>dd(e)))().map((e=>{const t=gd(e.start,e.soffset),n=gd(e.finish,e.foffset);return Qc.range(t.element,t.offset,n.element,n.offset)}));var vd=[sr("getSelection"),Xo("root"),sr("bubble"),Nc(),mr("overrides",{}),mr("showAbove",!1),Ha("placement",((e,t,n)=>{const o=qe(t.root).dom,r=Uc(e,0,t),s=bd(o,t).bind((e=>{const t=hd(o,Qc.exactFromRange(e)).orThunk((()=>{const t=Re.fromText("\ufeff");Cn(e.start,t);const n=ud(o,Qc.exact(t,0,t,1));return Tn(t),n}));return t.bind((e=>Wc(e.left,e.top,e.width,e.height)))})),i=bd(o,t).bind((e=>Pe(e.start)?A.some(e.start):Ge(e.start))).getOr(e.element);return qc(s,r,t,n,i)}))];const yd="link-layout",xd=e=>e.x+e.width,wd=(e,t)=>e.x-t.width,Cd=(e,t)=>e.y-t.height+e.height,_d=e=>e.y,Sd=(e,t,n)=>Ua(xd(e),_d(e),n.southeast(),qa(),"southeast",nl(e,{left:0,top:2}),yd),kd=(e,t,n)=>Ua(wd(e,t),_d(e),n.southwest(),Ka(),"southwest",nl(e,{right:1,top:2}),yd),Ed=(e,t,n)=>Ua(xd(e),Cd(e,t),n.northeast(),Ga(),"northeast",nl(e,{left:0,bottom:3}),yd),Od=(e,t,n)=>Ua(wd(e,t),Cd(e,t),n.northwest(),Ya(),"northwest",nl(e,{right:1,bottom:3}),yd),Td=()=>[Sd,kd,Ed,Od],Ad=()=>[kd,Sd,Od,Ed];var Dd=[Xo("item"),Nc(),mr("overrides",{}),Ha("placement",((e,t,n)=>{const o=Gl(n,t.item.element),r=Pc(e.element,t,Td(),Ad(),Td(),Ad(),A.none());return A.some(Oc({anchorBox:o,bubble:Ec(),overrides:t.overrides,layouts:r,placer:A.none()}))}))],Rd=qo("type",{selection:vd,node:Kc,hotspot:Lc,submenu:Dd,makeshift:Bc});const Md=[rr("classes",No),br("mode","all",["all","layout","placement"])],Nd=[mr("useFixed",E),sr("getBounds")],Pd=[Jo("anchor",Rd),hr("transition",Md)],Ld=(e,t,n,o,r,s,i)=>((e,t,n,o,r,s,i,a)=>{const l=Cc(i,"maxHeightFunction",xc()),c=Cc(i,"maxWidthFunction",b),d=e.anchorBox,u=e.origin,h={bounds:Yl(u,s),origin:u,preference:o,maxHeightFunction:l,maxWidthFunction:c,lastPlacement:r,transition:a};return _c(d,t,n,h)})(Zl(n.anchorBox,t),r.element,n.bubble,n.layouts,s,o,n.overrides,i),Bd=(e,t,n,o,r,s)=>{const i=s.map(Fn);return Id(e,t,n,o,r,i)},Id=(e,t,n,o,r,s)=>{const i=Uo("placement.info",ko(Pd),r),a=i.anchor,l=o.element,c=n.get(o.uid);Vl((()=>{xt(l,"position","fixed");const r=kt(l,"visibility");xt(l,"visibility","hidden");const d=t.useFixed()?(()=>{const e=document.documentElement;return Ql(0,0,e.clientWidth,e.clientHeight)})():(e=>{const t=It(e.element),n=e.element.dom.getBoundingClientRect();return Jl(t.left,t.top,n.width,n.height)})(e),u=a.placement,h=s.map(y).or(t.getBounds);u(e,a,d).each((t=>{const r=t.placer.getOr(Ld)(e,d,t,h,o,c,i.transition);n.set(o.uid,r)})),r.fold((()=>{Tt(l,"visibility")}),(e=>{xt(l,"visibility",e)})),kt(l,"left").isNone()&&kt(l,"top").isNone()&&kt(l,"right").isNone()&&kt(l,"bottom").isNone()&&ye(kt(l,"position"),"fixed")&&Tt(l,"position")}),l)};var Fd=Object.freeze({__proto__:null,position:(e,t,n,o,r)=>{Bd(e,t,n,o,r,A.none())},positionWithin:Bd,positionWithinBounds:Id,getMode:(e,t,n)=>t.useFixed()?"fixed":"absolute",reset:(e,t,n,o)=>{const r=o.element;j(["position","left","right","top","bottom"],(e=>Tt(r,e))),(e=>{bt(e,ec)})(r),n.clear(o.uid)}});const zd=Ml({fields:Nd,name:"positioning",active:Il,apis:Fd,state:Object.freeze({__proto__:null,init:()=>{let e={};return Ci({readState:()=>e,clear:t=>{m(t)?delete e[t]:e={}},set:(t,n)=>{e[t]=n},get:t=>ge(e,t)})}})}),jd=e=>e.getSystem().isConnected(),Hd=e=>{As(e,xs());const t=e.components();j(t,Hd)},Vd=e=>{const t=e.components();j(t,Vd),As(e,ys())},$d=(e,t)=>{e.getSystem().addToWorld(t),lt(e.element)&&Vd(t)},Ud=e=>{Hd(e),e.getSystem().removeFromWorld(e)},Wd=(e,t)=>{kn(e.element,t.element)},qd=(e,t,n)=>{const o=e.components();(e=>{j(e.components(),(e=>Tn(e.element))),On(e.element),e.syncComponents()})(e);const r=n(t),s=J(o,r);j(s,(t=>{Hd(t),e.getSystem().removeFromWorld(t)})),j(r,(t=>{jd(t)?Wd(e,t):(e.getSystem().addToWorld(t),Wd(e,t),lt(e.element)&&Vd(t))})),e.syncComponents()},Kd=(e,t)=>{Gd(e,t,kn)},Gd=(e,t,n)=>{e.getSystem().addToWorld(t),n(e.element,t.element),lt(e.element)&&Vd(t),e.syncComponents()},Yd=e=>{Hd(e),Tn(e.element),e.getSystem().removeFromWorld(e)},Xd=e=>{const t=Ke(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()));Yd(e),t.each((e=>{e.syncComponents()}))},Jd=e=>{const t=e.components();j(t,Yd),On(e.element),e.syncComponents()},Qd=(e,t)=>{Zd(e,t,kn)},Zd=(e,t,n)=>{n(e,t.element);const o=Xe(t.element);j(o,(e=>{t.getByDom(e).each(Vd)}))},eu=e=>{const t=Xe(e.element);j(t,(t=>{e.getByDom(t).each(Hd)})),Tn(e.element)},tu=(e,t,n,o)=>{n.get().each((t=>{Jd(e)}));const r=t.getAttachPoint(e);Kd(r,e);const s=e.getSystem().build(o);return Kd(e,s),n.set(s),s},nu=(e,t,n,o)=>{const r=tu(e,t,n,o);return t.onOpen(e,r),r},ou=(e,t,n)=>{n.get().each((o=>{Jd(e),Xd(e),t.onClose(e,o),n.clear()}))},ru=(e,t,n)=>n.isOpen(),su=(e,t,n)=>{const o=t.getAttachPoint(e);xt(e.element,"position",zd.getMode(o)),((e,t,n,o)=>{kt(e.element,t).fold((()=>{bt(e.element,n)}),(t=>{ht(e.element,n,t)})),xt(e.element,t,o)})(e,"visibility",t.cloakVisibilityAttr,"hidden")},iu=(e,t,n)=>{(e=>B(["top","left","right","bottom"],(t=>kt(e,t).isSome())))(e.element)||Tt(e.element,"position"),((e,t,n)=>{ft(e.element,n).fold((()=>Tt(e.element,t)),(n=>xt(e.element,t,n)))})(e,"visibility",t.cloakVisibilityAttr)};var au=Object.freeze({__proto__:null,cloak:su,decloak:iu,open:nu,openWhileCloaked:(e,t,n,o,r)=>{su(e,t),nu(e,t,n,o),r(),iu(e,t)},close:ou,isOpen:ru,isPartOf:(e,t,n,o)=>ru(0,0,n)&&n.get().exists((n=>t.isPartOf(e,n,o))),getState:(e,t,n)=>n.get(),setContent:(e,t,n,o)=>n.get().map((()=>tu(e,t,n,o)))});var lu=Object.freeze({__proto__:null,events:(e,t)=>Ls([Fs(hs(),((n,o)=>{ou(n,e,t)}))])}),cu=[Ia("onOpen"),Ia("onClose"),Xo("isPartOf"),Xo("getAttachPoint"),mr("cloakVisibilityAttr","data-precloak-visibility")];var du=Object.freeze({__proto__:null,init:()=>{const e=ic(),t=y("not-implemented");return Ci({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const uu=Ml({fields:cu,name:"sandboxing",active:lu,apis:au,state:du}),hu=y("dismiss.popups"),mu=y("reposition.popups"),pu=y("mouse.released"),fu=So([mr("isExtraPart",E),hr("fireEventInstead",[mr("event",ws())])]),gu=e=>{const t=Uo("Dismissal",fu,e);return{[hu()]:{schema:So([Xo("target")]),onReceive:(e,n)=>{if(uu.isOpen(e)){uu.isPartOf(e,n.target)||t.isExtraPart(e,n.target)||t.fireEventInstead.fold((()=>uu.close(e)),(t=>As(e,t.event)))}}}}},bu=So([hr("fireEventInstead",[mr("event",Cs())]),tr("doReposition")]),vu=e=>{const t=Uo("Reposition",bu,e);return{[mu()]:{onReceive:e=>{uu.isOpen(e)&&t.fireEventInstead.fold((()=>t.doReposition(e)),(t=>As(e,t.event)))}}}},yu=(e,t,n)=>{t.store.manager.onLoad(e,t,n)},xu=(e,t,n)=>{t.store.manager.onUnload(e,t,n)};var wu=Object.freeze({__proto__:null,onLoad:yu,onUnload:xu,setValue:(e,t,n,o)=>{t.store.manager.setValue(e,t,n,o)},getValue:(e,t,n)=>t.store.manager.getValue(e,t,n),getState:(e,t,n)=>n});var Cu=Object.freeze({__proto__:null,events:(e,t)=>{const n=e.resetOnDom?[qs(((n,o)=>{yu(n,e,t)})),Ks(((n,o)=>{xu(n,e,t)}))]:[El(e,t,yu)];return Ls(n)}});const _u=()=>{const e=Cr(null);return Ci({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},Su=()=>{const e=Cr({}),t=Cr({});return Ci({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),lookup:n=>ge(e.get(),n).orThunk((()=>ge(t.get(),n))),update:n=>{const o=e.get(),r=t.get(),s={},i={};j(n,(e=>{s[e.value]=e,ge(e,"meta").each((t=>{ge(t,"text").each((t=>{i[t]=e}))}))})),e.set({...o,...s}),t.set({...r,...i})},clear:()=>{e.set({}),t.set({})}})};var ku=Object.freeze({__proto__:null,memory:_u,dataset:Su,manual:()=>Ci({readState:b}),init:e=>e.store.manager.state(e)});const Eu=(e,t,n,o)=>{const r=t.store;n.update([o]),r.setValue(e,o),t.onSetValue(e,o)};var Ou=[sr("initialValue"),Xo("getFallbackEntry"),Xo("getDataKey"),Xo("setValue"),Ha("manager",{setValue:Eu,getValue:(e,t,n)=>{const o=t.store,r=o.getDataKey(e);return n.lookup(r).getOrThunk((()=>o.getFallbackEntry(r)))},onLoad:(e,t,n)=>{t.store.initialValue.each((o=>{Eu(e,t,n,o)}))},onUnload:(e,t,n)=>{n.clear()},state:Su})];var Tu=[Xo("getValue"),mr("setValue",b),sr("initialValue"),Ha("manager",{setValue:(e,t,n,o)=>{t.store.setValue(e,o),t.onSetValue(e,o)},getValue:(e,t,n)=>t.store.getValue(e),onLoad:(e,t,n)=>{t.store.initialValue.each((n=>{t.store.setValue(e,n)}))},onUnload:b,state:wi.init})];var Au=[sr("initialValue"),Ha("manager",{setValue:(e,t,n,o)=>{n.set(o),t.onSetValue(e,o)},getValue:(e,t,n)=>n.get(),onLoad:(e,t,n)=>{t.store.initialValue.each((e=>{n.isNotSet()&&n.set(e)}))},onUnload:(e,t,n)=>{n.clear()},state:_u})],Du=[pr("store",{mode:"memory"},qo("mode",{memory:Au,manual:Tu,dataset:Ou})),Ia("onSetValue"),mr("resetOnDom",!1)];const Ru=Ml({fields:Du,name:"representing",active:Cu,apis:wu,extra:{setValueFrom:(e,t)=>{const n=Ru.getValue(t);Ru.setValue(e,n)}},state:ku}),Mu=(e,t)=>wr(e,{},z(t,(t=>{return n=t.name(),o="Cannot configure "+t.name()+" for "+e,Ko(n,n,{tag:"option",process:{}},bo((e=>Qn("The field: "+n+" is forbidden. "+o))));var n,o})).concat([Go("dump",x)])),Nu=e=>e.dump,Pu=(e,t)=>({...Dl(t),...e.dump}),Lu=Mu,Bu=Pu,Iu="placeholder",Fu=_r([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),zu=e=>be(e,"uiType"),ju=(e,t,n,o)=>zu(n)&&n.uiType===Iu?((e,t,n,o)=>e.exists((e=>e!==n.owner))?Fu.single(!0,y(n)):ge(o,n.name).fold((()=>{throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+ie(o)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))}),(e=>e.replace())))(e,0,n,o):Fu.single(!1,y(n)),Hu=(e,t,n,o)=>ju(e,0,n,o).fold(((r,s)=>{const i=zu(n)?s(t,n.config,n.validated):s(t),a=ge(i,"components").getOr([]),l=G(a,(n=>Hu(e,t,n,o)));return[{...i,components:l}]}),((e,o)=>{if(zu(n)){const e=o(t,n.config,n.validated);return n.validated.preprocess.getOr(x)(e)}return o(t)})),Vu=(e,t,n,o)=>{const r=ce(o,((e,t)=>((e,t)=>{let n=!1;return{name:y(e),required:()=>t.fold(((e,t)=>e),((e,t)=>e)),used:()=>n,replace:()=>{if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t}}})(t,e))),s=((e,t,n,o)=>G(n,(n=>Hu(e,t,n,o))))(e,t,n,r);return le(r,(n=>{if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),s},$u=Fu.single,Uu=Fu.multiple,Wu=y(Iu),qu=_r([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ku=mr("factory",{sketch:x}),Gu=mr("schema",[]),Yu=Xo("name"),Xu=Ko("pname","pname",co((e=>"<alloy."+ri(e.name)+">")),Do()),Ju=Go("schema",(()=>[sr("preprocess")])),Qu=mr("defaults",y({})),Zu=mr("overrides",y({})),eh=ko([Ku,Gu,Yu,Xu,Qu,Zu]),th=ko([Ku,Gu,Yu,Qu,Zu]),nh=ko([Ku,Gu,Yu,Xu,Qu,Zu]),oh=ko([Ku,Ju,Yu,Xo("unit"),Xu,Qu,Zu]),rh=e=>e.fold(A.some,A.none,A.some,A.some),sh=e=>{const t=e=>e.name;return e.fold(t,t,t,t)},ih=(e,t)=>n=>{const o=Uo("Converting part type",t,n);return e(o)},ah=ih(qu.required,eh),lh=ih(qu.external,th),ch=ih(qu.optional,nh),dh=ih(qu.group,oh),uh=y("entirety");var hh=Object.freeze({__proto__:null,required:ah,external:lh,optional:ch,group:dh,asNamedPart:rh,name:sh,asCommon:e=>e.fold(x,x,x,x),original:uh});const mh=(e,t,n,o)=>ao(t.defaults(e,n,o),n,{uid:e.partUids[t.name]},t.overrides(e,n,o)),ph=(e,t)=>{const n={};return j(t,(t=>{rh(t).each((t=>{const o=fh(e,t.pname);n[t.name]=n=>{const r=Uo("Part: "+t.name+" in "+e,ko(t.schema),n);return{...o,config:n,validated:r}}}))})),n},fh=(e,t)=>({uiType:Wu(),owner:e,name:t}),gh=(e,t,n)=>({uiType:Wu(),owner:e,name:t,config:n,validated:{}}),bh=e=>G(e,(e=>e.fold(A.none,A.some,A.none,A.none).map((e=>nr(e.name,e.schema.concat([Va(uh())])))).toArray())),vh=e=>z(e,sh),yh=(e,t,n)=>((e,t,n)=>{const o={},r={};return j(n,(e=>{e.fold((e=>{o[e.pname]=$u(!0,((t,n,o)=>e.factory.sketch(mh(t,e,n,o))))}),(e=>{const n=t.parts[e.name];r[e.name]=y(e.factory.sketch(mh(t,e,n[uh()]),n))}),(e=>{o[e.pname]=$u(!1,((t,n,o)=>e.factory.sketch(mh(t,e,n,o))))}),(e=>{o[e.pname]=Uu(!0,((t,n,o)=>{const r=t[e.name];return z(r,(n=>e.factory.sketch(ao(e.defaults(t,n,o),n,e.overrides(t,n)))))}))}))})),{internals:y(o),externals:y(r)}})(0,t,n),xh=(e,t,n)=>Vu(A.some(e),t,t.components,n),wh=(e,t,n)=>{const o=t.partUids[n];return e.getSystem().getByUid(o).toOptional()},Ch=(e,t,n)=>wh(e,t,n).getOrDie("Could not find part: "+n),_h=(e,t,n)=>{const o={},r=t.partUids,s=e.getSystem();return j(n,(e=>{o[e]=y(s.getByUid(r[e]))})),o},Sh=(e,t)=>{const n=e.getSystem();return ce(t.partUids,((e,t)=>y(n.getByUid(e))))},kh=e=>ie(e.partUids),Eh=(e,t,n)=>{const o={},r=t.partUids,s=e.getSystem();return j(n,(e=>{o[e]=y(s.getByUid(r[e]).getOrDie())})),o},Oh=(e,t)=>{const n=vh(t);return Er(z(n,(t=>({key:t,value:e+"-"+t}))))},Th=e=>Ko("partUids","partUids",ho((t=>Oh(t.uid,e))),Do());var Ah=Object.freeze({__proto__:null,generate:ph,generateOne:gh,schemas:bh,names:vh,substitutes:yh,components:xh,defaultUids:Oh,defaultUidsSchema:Th,getAllParts:Sh,getAllPartNames:kh,getPart:wh,getPartOrDie:Ch,getParts:_h,getPartsOrDie:Eh});const Dh=(e,t,n,o,r)=>{const s=((e,t)=>(e.length>0?[nr("parts",e)]:[]).concat([Xo("uid"),mr("dom",{}),mr("components",[]),Va("originalSpec"),mr("debug.sketcher",{})]).concat(t))(o,r);return Uo(e+" [SpecSchema]",So(s.concat(t)),n)},Rh=(e,t,n,o,r)=>{const s=Mh(r),i=bh(n),a=Th(n),l=Dh(e,t,s,i,[a]),c=yh(0,l,n);return o(l,xh(e,l,c.internals()),s,c.externals())},Mh=e=>(e=>be(e,"uid"))(e)?e:{...e,uid:ui("uid")},Nh=So([Xo("name"),Xo("factory"),Xo("configFields"),mr("apis",{}),mr("extraApis",{})]),Ph=So([Xo("name"),Xo("factory"),Xo("configFields"),Xo("partFields"),mr("apis",{}),mr("extraApis",{})]),Lh=e=>{const t=Uo("Sketcher for "+e.name,Nh,e),n=ce(t.apis,xi),o=ce(t.extraApis,((e,t)=>gi(e,t)));return{name:t.name,configFields:t.configFields,sketch:e=>((e,t,n,o)=>{const r=Mh(o);return n(Dh(e,t,r,[],[]),r)})(t.name,t.configFields,t.factory,e),...n,...o}},Bh=e=>{const t=Uo("Sketcher for "+e.name,Ph,e),n=ph(t.name,t.partFields),o=ce(t.apis,xi),r=ce(t.extraApis,((e,t)=>gi(e,t)));return{name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:e=>Rh(t.name,t.configFields,t.partFields,t.factory,e),parts:n,...o,...r}},Ih=e=>Fe("input")(e)&&"radio"!==pt(e,"type")||Fe("textarea")(e);var Fh=Object.freeze({__proto__:null,getCurrent:(e,t,n)=>t.find(e)});const zh=[Xo("find")],jh=Ml({fields:zh,name:"composing",apis:Fh}),Hh=["input","button","textarea","select"],Vh=(e,t,n)=>{(t.disabled()?Gh:Yh)(e,t)},$h=(e,t)=>!0===t.useNative&&L(Hh,Me(e.element)),Uh=e=>{ht(e.element,"disabled","disabled")},Wh=e=>{bt(e.element,"disabled")},qh=e=>{ht(e.element,"aria-disabled","true")},Kh=e=>{ht(e.element,"aria-disabled","false")},Gh=(e,t,n)=>{t.disableClass.each((t=>{ji(e.element,t)}));($h(e,t)?Uh:qh)(e),t.onDisabled(e)},Yh=(e,t,n)=>{t.disableClass.each((t=>{Hi(e.element,t)}));($h(e,t)?Wh:Kh)(e),t.onEnabled(e)},Xh=(e,t)=>$h(e,t)?(e=>gt(e.element,"disabled"))(e):(e=>"true"===pt(e.element,"aria-disabled"))(e);var Jh=Object.freeze({__proto__:null,enable:Yh,disable:Gh,isDisabled:Xh,onLoad:Vh,set:(e,t,n,o)=>{(o?Gh:Yh)(e,t)}});var Qh=Object.freeze({__proto__:null,exhibit:(e,t)=>Si({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>Ls([Bs(ls(),((t,n)=>Xh(t,e))),El(e,t,Vh)])}),Zh=[yr("disabled",E),mr("useNative",!0),sr("disableClass"),Ia("onDisabled"),Ia("onEnabled")];const em=Ml({fields:Zh,name:"disabling",active:Qh,apis:Jh}),tm=(e,t,n,o)=>{const r=id(e.element,"."+t.highlightClass);j(r,(n=>{B(o,(e=>e.element===n))||(Hi(n,t.highlightClass),e.getSystem().getByDom(n).each((n=>{t.onDehighlight(e,n),As(n,Ts())})))}))},nm=(e,t,n,o)=>{tm(e,t,0,[o]),om(e,t,n,o)||(ji(o.element,t.highlightClass),t.onHighlight(e,o),As(o,Os()))},om=(e,t,n,o)=>Vi(o.element,t.highlightClass),rm=(e,t,n,o)=>{const r=id(e.element,"."+t.itemClass);return A.from(r[o]).fold((()=>$n.error(new Error("No element found with index "+o))),e.getSystem().getByDom)},sm=(e,t,n)=>ba(e.element,"."+t.itemClass).bind((t=>e.getSystem().getByDom(t).toOptional())),im=(e,t,n)=>{const o=id(e.element,"."+t.itemClass);return(o.length>0?A.some(o[o.length-1]):A.none()).bind((t=>e.getSystem().getByDom(t).toOptional()))},am=(e,t,n,o)=>{const r=id(e.element,"."+t.itemClass),s=q(r,(e=>Vi(e,t.highlightClass)));return s.bind((t=>{const n=el(t,o,0,r.length-1);return e.getSystem().getByDom(r[n]).toOptional()}))},lm=(e,t,n)=>{const o=id(e.element,"."+t.itemClass);return xe(z(o,(t=>e.getSystem().getByDom(t).toOptional())))};var cm=Object.freeze({__proto__:null,dehighlightAll:(e,t,n)=>tm(e,t,0,[]),dehighlight:(e,t,n,o)=>{om(e,t,n,o)&&(Hi(o.element,t.highlightClass),t.onDehighlight(e,o),As(o,Ts()))},highlight:nm,highlightFirst:(e,t,n)=>{sm(e,t).each((o=>{nm(e,t,n,o)}))},highlightLast:(e,t,n)=>{im(e,t).each((o=>{nm(e,t,n,o)}))},highlightAt:(e,t,n,o)=>{rm(e,t,n,o).fold((e=>{throw e}),(o=>{nm(e,t,n,o)}))},highlightBy:(e,t,n,o)=>{const r=lm(e,t);W(r,o).each((o=>{nm(e,t,n,o)}))},isHighlighted:om,getHighlighted:(e,t,n)=>ba(e.element,"."+t.highlightClass).bind((t=>e.getSystem().getByDom(t).toOptional())),getFirst:sm,getLast:im,getPrevious:(e,t,n)=>am(e,t,0,-1),getNext:(e,t,n)=>am(e,t,0,1),getCandidates:lm}),dm=[Xo("highlightClass"),Xo("itemClass"),Ia("onHighlight"),Ia("onDehighlight")];const um=Ml({fields:dm,name:"highlighting",apis:cm}),hm=[8],mm=[9],pm=[13],fm=[27],gm=[32],bm=[37],vm=[38],ym=[39],xm=[40],wm=(e,t,n)=>{const o=X(e.slice(0,t)),r=X(e.slice(t+1));return W(o.concat(r),n)},Cm=(e,t,n)=>{const o=X(e.slice(0,t));return W(o,n)},_m=(e,t,n)=>{const o=e.slice(0,t),r=e.slice(t+1);return W(r.concat(o),n)},Sm=(e,t,n)=>{const o=e.slice(t+1);return W(o,n)},km=e=>t=>{const n=t.raw;return L(e,n.which)},Em=e=>t=>Y(e,(e=>e(t))),Om=e=>!0===e.raw.shiftKey,Tm=e=>!0===e.raw.ctrlKey,Am=_(Om),Dm=(e,t)=>({matches:e,classification:t}),Rm=(e,t,n)=>{t.exists((e=>n.exists((t=>He(t,e)))))||Ds(e,_s(),{prevFocus:t,newFocus:n})},Mm=()=>{const e=e=>Hl(e.element);return{get:e,set:(t,n)=>{const o=e(t);t.getSystem().triggerFocus(n,t.element);const r=e(t);Rm(t,o,r)}}},Nm=()=>{const e=e=>um.getHighlighted(e).map((e=>e.element));return{get:e,set:(t,n)=>{const o=e(t);t.getSystem().getByDom(n).fold(b,(e=>{um.highlight(t,e)}));const r=e(t);Rm(t,o,r)}}};var Pm;!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(Pm||(Pm={}));const Lm=(e,t,n,o,r)=>{const s=(e,t,n,o,r)=>((e,t)=>{const n=W(e,(e=>e.matches(t)));return n.map((e=>e.classification))})(n(e,t,o,r),t.event).bind((n=>n(e,t,o,r))),i={schema:()=>e.concat([mr("focusManager",Mm()),pr("focusInside","onFocus",jo((e=>L(["onFocus","onEnterOrSpace","onApi"],e)?$n.value(e):$n.error("Invalid value for focusInside")))),Ha("handler",i),Ha("state",t),Ha("sendFocusIn",r)]),processKey:s,toEvents:(e,t)=>{const i=e.focusInside!==Pm.OnFocusMode?A.none():r(e).map((n=>Fs(rs(),((o,r)=>{n(o,e,t),r.stop()})))),a=[Fs(Kr(),((o,i)=>{s(o,i,n,e,t).fold((()=>{((n,o)=>{const s=km(gm.concat(pm))(o.event);e.focusInside===Pm.OnEnterOrSpaceMode&&s&&Rr(n,o)&&r(e).each((r=>{r(n,e,t),o.stop()}))})(o,i)}),(e=>{i.stop()}))})),Fs(Gr(),((n,r)=>{s(n,r,o,e,t).each((e=>{r.stop()}))}))];return Ls(i.toArray().concat(a))}};return i},Bm=e=>{const t=[sr("onEscape"),sr("onEnter"),mr("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),mr("firstTabstop",0),mr("useTabstopAt",O),sr("visibilitySelector")].concat([e]),n=(e,t)=>{const n=e.visibilitySelector.bind((e=>va(t,e))).getOr(t);return Mt(n)>0},o=(e,t,o)=>{((e,t)=>{const o=id(e.element,t.selector),r=V(o,(e=>n(t,e)));return A.from(r[t.firstTabstop])})(e,t).each((n=>{t.focusManager.set(e,n)}))},r=(e,t,o,r,s)=>s(t,o,(e=>((e,t)=>n(e,t)&&e.useTabstopAt(t))(r,e))).fold((()=>r.cyclic?A.some(!0):A.none()),(t=>(r.focusManager.set(e,t),A.some(!0)))),s=(e,t,n,o)=>{const s=id(e.element,n.selector);return((e,t)=>t.focusManager.get(e).bind((e=>va(e,t.selector))))(e,n).bind((t=>q(s,C(He,t)).bind((t=>r(e,s,t,n,o)))))},i=y([Dm(Em([Om,km(mm)]),((e,t,n)=>{const o=n.cyclic?wm:Cm;return s(e,0,n,o)})),Dm(km(mm),((e,t,n)=>{const o=n.cyclic?_m:Sm;return s(e,0,n,o)})),Dm(km(fm),((e,t,n)=>n.onEscape.bind((n=>n(e,t))))),Dm(Em([Am,km(pm)]),((e,t,n)=>n.onEnter.bind((n=>n(e,t)))))]),a=y([]);return Lm(t,wi.init,i,a,(()=>A.some(o)))};var Im=Bm(Go("cyclic",E)),Fm=Bm(Go("cyclic",O));const zm=(e,t,n)=>Ih(n)&&km(gm)(t.event)?A.none():((e,t,n)=>(Ms(e,n,ls()),A.some(!0)))(e,0,n),jm=(e,t)=>A.some(!0),Hm=[mr("execute",zm),mr("useSpace",!1),mr("useEnter",!0),mr("useControlEnter",!1),mr("useDown",!1)],Vm=(e,t,n)=>n.execute(e,t,e.element);var $m=Lm(Hm,wi.init,((e,t,n,o)=>{const r=n.useSpace&&!Ih(e.element)?gm:[],s=n.useEnter?pm:[],i=n.useDown?xm:[],a=r.concat(s).concat(i);return[Dm(km(a),Vm)].concat(n.useControlEnter?[Dm(Em([Tm,km(pm)]),Vm)]:[])}),((e,t,n,o)=>n.useSpace&&!Ih(e.element)?[Dm(km(gm),jm)]:[]),(()=>A.none()));const Um=()=>{const e=ic();return Ci({readState:()=>e.get().map((e=>({numRows:String(e.numRows),numColumns:String(e.numColumns)}))).getOr({numRows:"?",numColumns:"?"}),setGridSize:(t,n)=>{e.set({numRows:t,numColumns:n})},getNumRows:()=>e.get().map((e=>e.numRows)),getNumColumns:()=>e.get().map((e=>e.numColumns))})};var Wm=Object.freeze({__proto__:null,flatgrid:Um,init:e=>e.state(e)});const qm=e=>(t,n,o,r)=>{const s=e(t.element);return Xm(s,t,n,o,r)},Km=(e,t)=>{const n=Tc(e,t);return qm(n)},Gm=(e,t)=>{const n=Tc(t,e);return qm(n)},Ym=e=>(t,n,o,r)=>Xm(e,t,n,o,r),Xm=(e,t,n,o,r)=>o.focusManager.get(t).bind((n=>e(t.element,n,o,r))).map((e=>(o.focusManager.set(t,e),!0))),Jm=Ym,Qm=Ym,Zm=Ym,ep=e=>!(e=>e.offsetWidth<=0&&e.offsetHeight<=0)(e.dom),tp=(e,t,n)=>{const o=id(e,n);return((e,t)=>q(e,t).map((t=>({index:t,candidates:e}))))(V(o,ep),(e=>He(e,t)))},np=(e,t)=>q(e,(e=>He(t,e))),op=(e,t,n,o)=>o(Math.floor(t/n),t%n).bind((t=>{const o=t.row*n+t.column;return o>=0&&o<e.length?A.some(e[o]):A.none()})),rp=(e,t,n,o,r)=>op(e,t,o,((t,s)=>{const i=t===n-1?e.length-t*o:o,a=el(s,r,0,i-1);return A.some({row:t,column:a})})),sp=(e,t,n,o,r)=>op(e,t,o,((t,s)=>{const i=el(t,r,0,n-1),a=i===n-1?e.length-i*o:o,l=tl(s,0,a-1);return A.some({row:i,column:l})})),ip=[Xo("selector"),mr("execute",zm),Fa("onEscape"),mr("captureTab",!1),$a()],ap=(e,t,n)=>{ba(e.element,t.selector).each((n=>{t.focusManager.set(e,n)}))},lp=e=>(t,n,o,r)=>tp(t,n,o.selector).bind((t=>e(t.candidates,t.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns)))),cp=(e,t,n)=>n.captureTab?A.some(!0):A.none(),dp=lp(((e,t,n,o)=>rp(e,t,n,o,-1))),up=lp(((e,t,n,o)=>rp(e,t,n,o,1))),hp=lp(((e,t,n,o)=>sp(e,t,n,o,-1))),mp=lp(((e,t,n,o)=>sp(e,t,n,o,1))),pp=y([Dm(km(bm),Km(dp,up)),Dm(km(ym),Gm(dp,up)),Dm(km(vm),Jm(hp)),Dm(km(xm),Qm(mp)),Dm(Em([Om,km(mm)]),cp),Dm(Em([Am,km(mm)]),cp),Dm(km(fm),((e,t,n)=>n.onEscape(e,t))),Dm(km(gm.concat(pm)),((e,t,n,o)=>((e,t)=>t.focusManager.get(e).bind((e=>va(e,t.selector))))(e,n).bind((o=>n.execute(e,t,o)))))]),fp=y([Dm(km(gm),jm)]);var gp=Lm(ip,Um,pp,fp,(()=>A.some(ap)));const bp=(e,t,n,o)=>{const r=(e,t,n)=>{const s=el(t,o,0,n.length-1);return s===e?A.none():(i=n[s],"button"===Me(i)&&"disabled"===pt(i,"disabled")?r(e,s,n):A.from(n[s]));var i};return tp(e,n,t).bind((e=>{const t=e.index,n=e.candidates;return r(t,t,n)}))},vp=[Xo("selector"),mr("getInitial",A.none),mr("execute",zm),Fa("onEscape"),mr("executeOnMove",!1),mr("allowVertical",!0)],yp=(e,t,n)=>((e,t)=>t.focusManager.get(e).bind((e=>va(e,t.selector))))(e,n).bind((o=>n.execute(e,t,o))),xp=(e,t,n)=>{t.getInitial(e).orThunk((()=>ba(e.element,t.selector))).each((n=>{t.focusManager.set(e,n)}))},wp=(e,t,n)=>bp(e,n.selector,t,-1),Cp=(e,t,n)=>bp(e,n.selector,t,1),_p=e=>(t,n,o,r)=>e(t,n,o,r).bind((()=>o.executeOnMove?yp(t,n,o):A.some(!0))),Sp=(e,t,n)=>n.onEscape(e,t),kp=y([Dm(km(gm),jm)]);var Ep=Lm(vp,wi.init,((e,t,n,o)=>{const r=bm.concat(n.allowVertical?vm:[]),s=ym.concat(n.allowVertical?xm:[]);return[Dm(km(r),_p(Km(wp,Cp))),Dm(km(s),_p(Gm(wp,Cp))),Dm(km(pm),yp),Dm(km(gm),yp),Dm(km(fm),Sp)]}),kp,(()=>A.some(xp)));const Op=(e,t,n)=>A.from(e[t]).bind((e=>A.from(e[n]).map((e=>({rowIndex:t,columnIndex:n,cell:e}))))),Tp=(e,t,n,o)=>{const r=e[t].length,s=el(n,o,0,r-1);return Op(e,t,s)},Ap=(e,t,n,o)=>{const r=el(n,o,0,e.length-1),s=e[r].length,i=tl(t,0,s-1);return Op(e,r,i)},Dp=(e,t,n,o)=>{const r=e[t].length,s=tl(n+o,0,r-1);return Op(e,t,s)},Rp=(e,t,n,o)=>{const r=tl(n+o,0,e.length-1),s=e[r].length,i=tl(t,0,s-1);return Op(e,r,i)},Mp=[nr("selectors",[Xo("row"),Xo("cell")]),mr("cycles",!0),mr("previousSelector",A.none),mr("execute",zm)],Np=(e,t,n)=>{t.previousSelector(e).orThunk((()=>{const n=t.selectors;return ba(e.element,n.cell)})).each((n=>{t.focusManager.set(e,n)}))},Pp=(e,t)=>(n,o,r)=>{const s=r.cycles?e:t;return va(o,r.selectors.row).bind((e=>{const t=id(e,r.selectors.cell);return np(t,o).bind((t=>{const o=id(n,r.selectors.row);return np(o,e).bind((e=>{const n=((e,t)=>z(e,(e=>id(e,t.selectors.cell))))(o,r);return s(n,e,t).map((e=>e.cell))}))}))}))},Lp=Pp(((e,t,n)=>Tp(e,t,n,-1)),((e,t,n)=>Dp(e,t,n,-1))),Bp=Pp(((e,t,n)=>Tp(e,t,n,1)),((e,t,n)=>Dp(e,t,n,1))),Ip=Pp(((e,t,n)=>Ap(e,n,t,-1)),((e,t,n)=>Rp(e,n,t,-1))),Fp=Pp(((e,t,n)=>Ap(e,n,t,1)),((e,t,n)=>Rp(e,n,t,1))),zp=y([Dm(km(bm),Km(Lp,Bp)),Dm(km(ym),Gm(Lp,Bp)),Dm(km(vm),Jm(Ip)),Dm(km(xm),Qm(Fp)),Dm(km(gm.concat(pm)),((e,t,n)=>Hl(e.element).bind((o=>n.execute(e,t,o)))))]),jp=y([Dm(km(gm),jm)]);var Hp=Lm(Mp,wi.init,zp,jp,(()=>A.some(Np)));const Vp=[Xo("selector"),mr("execute",zm),mr("moveOnTab",!1)],$p=(e,t,n)=>n.focusManager.get(e).bind((o=>n.execute(e,t,o))),Up=(e,t,n)=>{ba(e.element,t.selector).each((n=>{t.focusManager.set(e,n)}))},Wp=(e,t,n)=>bp(e,n.selector,t,-1),qp=(e,t,n)=>bp(e,n.selector,t,1),Kp=y([Dm(km(vm),Zm(Wp)),Dm(km(xm),Zm(qp)),Dm(Em([Om,km(mm)]),((e,t,n,o)=>n.moveOnTab?Zm(Wp)(e,t,n,o):A.none())),Dm(Em([Am,km(mm)]),((e,t,n,o)=>n.moveOnTab?Zm(qp)(e,t,n,o):A.none())),Dm(km(pm),$p),Dm(km(gm),$p)]),Gp=y([Dm(km(gm),jm)]);var Yp=Lm(Vp,wi.init,Kp,Gp,(()=>A.some(Up)));const Xp=[Fa("onSpace"),Fa("onEnter"),Fa("onShiftEnter"),Fa("onLeft"),Fa("onRight"),Fa("onTab"),Fa("onShiftTab"),Fa("onUp"),Fa("onDown"),Fa("onEscape"),mr("stopSpaceKeyup",!1),sr("focusIn")];var Jp=Lm(Xp,wi.init,((e,t,n)=>[Dm(km(gm),n.onSpace),Dm(Em([Am,km(pm)]),n.onEnter),Dm(Em([Om,km(pm)]),n.onShiftEnter),Dm(Em([Om,km(mm)]),n.onShiftTab),Dm(Em([Am,km(mm)]),n.onTab),Dm(km(vm),n.onUp),Dm(km(xm),n.onDown),Dm(km(bm),n.onLeft),Dm(km(ym),n.onRight),Dm(km(gm),n.onSpace),Dm(km(fm),n.onEscape)]),((e,t,n)=>n.stopSpaceKeyup?[Dm(km(gm),jm)]:[]),(e=>e.focusIn));const Qp=Im.schema(),Zp=Fm.schema(),ef=Ep.schema(),tf=gp.schema(),nf=Hp.schema(),of=$m.schema(),rf=Yp.schema(),sf=Jp.schema();const af=Pl({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Qp,cyclic:Zp,flow:ef,flatgrid:tf,matrix:nf,execution:of,menu:rf,special:sf}),name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,n)=>{t.sendFocusIn(t).fold((()=>{e.getSystem().triggerFocus(e.element,e.element)}),(o=>{o(e,t,n)}))},setGridSize:(e,t,n,o,r)=>{(e=>ve(e,"setGridSize"))(n)?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Wm}),lf=(e,t)=>{Vl((()=>{qd(e,t,(()=>z(t,e.getSystem().build)))}),e.element)},cf=(e,t)=>{Vl((()=>{((e,t,n)=>{const o=e.components(),r=G(t,(e=>yi(e).toArray()));j(o,(e=>{L(r,e)||Ud(e)}));const s=n(t),i=J(o,s);j(i,(e=>{jd(e)&&Ud(e)})),j(s,(t=>{jd(t)||$d(e,t)})),e.syncComponents()})(e,t,(()=>((e,t,n)=>Yi(e,t,((t,o)=>Xi(e,o,t,n))))(e.element,t,e.getSystem().buildOrPatch)))}),e.element)},df=(e,t,n,o)=>{Ud(t);const r=Xi(e.element,n,o,e.getSystem().buildOrPatch);$d(e,r),e.syncComponents()},uf=(e,t,n)=>{const o=e.getSystem().build(n);Gd(e,o,t)},hf=(e,t,n,o)=>{Xd(t),uf(e,((e,t)=>((e,t,n)=>{Je(e,n).fold((()=>{kn(e,t)}),(e=>{Cn(e,t)}))})(e,t,n)),o)},mf=(e,t)=>e.components(),pf=(e,t,n,o,r)=>{const s=mf(e);return A.from(s[o]).map((n=>(r.fold((()=>Xd(n)),(r=>{(t.reuseDom?df:hf)(e,n,o,r)})),n)))};var ff=Object.freeze({__proto__:null,append:(e,t,n,o)=>{uf(e,kn,o)},prepend:(e,t,n,o)=>{uf(e,Sn,o)},remove:(e,t,n,o)=>{const r=mf(e),s=W(r,(e=>He(o.element,e.element)));s.each(Xd)},replaceAt:pf,replaceBy:(e,t,n,o,r)=>{const s=mf(e);return q(s,o).bind((n=>pf(e,t,0,n,r)))},set:(e,t,n,o)=>(t.reuseDom?cf:lf)(e,o),contents:mf});const gf=Ml({fields:[vr("reuseDom",!0)],name:"replacing",apis:ff}),bf=(e,t)=>{const n=((e,t)=>{const n=Ls(t);return Ml({fields:[Xo("enabled")],name:e,active:{events:y(n)}})})(e,t);return{key:e,value:{config:{},me:n,configAsRaw:y({}),initialConfig:{},state:wi}}},vf=(e,t)=>{t.ignore||(Fl(e.element),t.onFocus(e))};var yf=Object.freeze({__proto__:null,focus:vf,blur:(e,t)=>{t.ignore||(e=>{e.dom.blur()})(e.element)},isFocused:e=>zl(e.element)});var xf=Object.freeze({__proto__:null,exhibit:(e,t)=>{const n=t.ignore?{}:{attributes:{tabindex:"-1"}};return Si(n)},events:e=>Ls([Fs(rs(),((t,n)=>{vf(t,e),n.stop()}))].concat(e.stopMousedown?[Fs(jr(),((e,t)=>{t.event.prevent()}))]:[]))}),wf=[Ia("onFocus"),mr("stopMousedown",!1),mr("ignore",!1)];const Cf=Ml({fields:wf,name:"focusing",active:xf,apis:yf}),_f=(e,t,n)=>{const o=t.aria;o.update(e,o,n.get())},Sf=(e,t,n)=>{t.toggleClass.each((t=>{n.get()?ji(e.element,t):Hi(e.element,t)}))},kf=(e,t,n)=>{Tf(e,t,n,!n.get())},Ef=(e,t,n)=>{n.set(!0),Sf(e,t,n),_f(e,t,n)},Of=(e,t,n)=>{n.set(!1),Sf(e,t,n),_f(e,t,n)},Tf=(e,t,n,o)=>{(o?Ef:Of)(e,t,n)},Af=(e,t,n)=>{Tf(e,t,n,t.selected)};var Df=Object.freeze({__proto__:null,onLoad:Af,toggle:kf,isOn:(e,t,n)=>n.get(),on:Ef,off:Of,set:Tf});var Rf=Object.freeze({__proto__:null,exhibit:()=>Si({}),events:(e,t)=>{const n=(o=e,r=t,s=kf,Ys((e=>{s(e,o,r)})));var o,r,s;const i=El(e,t,Af);return Ls(K([e.toggleOnExecute?[n]:[],[i]]))}});const Mf=(e,t,n)=>{ht(e.element,"aria-expanded",n)};var Nf=[mr("selected",!1),sr("toggleClass"),mr("toggleOnExecute",!0),pr("aria",{mode:"none"},qo("mode",{pressed:[mr("syncWithExpanded",!1),Ha("update",((e,t,n)=>{ht(e.element,"aria-pressed",n),t.syncWithExpanded&&Mf(e,t,n)}))],checked:[Ha("update",((e,t,n)=>{ht(e.element,"aria-checked",n)}))],expanded:[Ha("update",Mf)],selected:[Ha("update",((e,t,n)=>{ht(e.element,"aria-selected",n)}))],none:[Ha("update",b)]}))];const Pf=Ml({fields:Nf,name:"toggling",active:Rf,apis:Df,state:(Lf=!1,{init:()=>{const e=Cr(Lf);return{get:()=>e.get(),set:t=>e.set(t),clear:()=>e.set(Lf),readState:()=>e.get()}}})});var Lf;const Bf=()=>{const e=(e,t)=>{t.stop(),Rs(e)};return[Fs(Jr(),e),Fs(ds(),e),$s(Br()),$s(jr())]},If=e=>Ls(K([e.map((e=>Ys(((t,n)=>{e(t),n.stop()})))).toArray(),Bf()])),Ff="alloy.item-hover",zf="alloy.item-focus",jf=e=>{(Hl(e.element).isNone()||Cf.isFocused(e))&&(Cf.isFocused(e)||Cf.focus(e),Ds(e,Ff,{item:e}))},Hf=e=>{Ds(e,zf,{item:e})},Vf=y(Ff),$f=y(zf),Uf=[Xo("data"),Xo("components"),Xo("dom"),mr("hasSubmenu",!1),sr("toggling"),Lu("itemBehaviours",[Pf,Cf,af,Ru]),mr("ignoreFocus",!1),mr("domModification",{}),Ha("builder",(e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:e.toggling.isSome()?"menuitemcheckbox":"menuitem",...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Bu(e.itemBehaviours,[e.toggling.fold(Pf.revoke,(e=>Pf.config({aria:{mode:"checked"},...e}))),Cf.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:e=>{Hf(e)}}),af.config({mode:"execution"}),Ru.config({store:{mode:"memory",initialValue:e.data}}),bf("item-type-events",[...Bf(),Fs(Ur(),jf),Fs(cs(),Cf.focus)])]),components:e.components,eventOrder:e.eventOrder}))),mr("eventOrder",{})],Wf=[Xo("dom"),Xo("components"),Ha("builder",(e=>({dom:e.dom,components:e.components,events:Ls([Us(cs())])})))],qf=y("item-widget"),Kf=y([ah({name:"widget",overrides:e=>({behaviours:Dl([Ru.config({store:{mode:"manual",getValue:t=>e.data,setValue:b}})])})})]),Gf=[Xo("uid"),Xo("data"),Xo("components"),Xo("dom"),mr("autofocus",!1),mr("ignoreFocus",!1),Lu("widgetBehaviours",[Ru,Cf,af]),mr("domModification",{}),Th(Kf()),Ha("builder",(e=>{const t=yh(qf(),e,Kf()),n=xh(qf(),e,t.internals()),o=t=>wh(t,e,"widget").map((e=>(af.focusIn(e),e))),r=(t,n)=>Ih(n.event.target)?A.none():e.autofocus?(n.setSource(t.element),A.none()):A.none();return{dom:e.dom,components:n,domModification:e.domModification,events:Ls([Ys(((e,t)=>{o(e).each((e=>{t.stop()}))})),Fs(Ur(),jf),Fs(cs(),((t,n)=>{e.autofocus?o(t):Cf.focus(t)}))]),behaviours:Bu(e.widgetBehaviours,[Ru.config({store:{mode:"memory",initialValue:e.data}}),Cf.config({ignore:e.ignoreFocus,onFocus:e=>{Hf(e)}}),af.config({mode:"special",focusIn:e.autofocus?e=>{o(e)}:Ll(),onLeft:r,onRight:r,onEscape:(t,n)=>Cf.isFocused(t)||e.autofocus?e.autofocus?(n.setSource(t.element),A.none()):A.none():(Cf.focus(t),A.some(!0))})])}}))],Yf=qo("type",{widget:Gf,item:Uf,separator:Wf}),Xf=y([dh({factory:{sketch:e=>{const t=Uo("menu.spec item",Yf,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>be(t,"uid")?t:{...t,uid:ui("item")},overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),Jf=y([Xo("value"),Xo("items"),Xo("dom"),Xo("components"),mr("eventOrder",{}),Mu("menuBehaviours",[um,Ru,jh,af]),pr("movement",{mode:"menu",moveOnTab:!0},qo("mode",{grid:[$a(),Ha("config",((e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager})))],matrix:[Ha("config",((e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}))),Xo("rowSelector")],menu:[mr("moveOnTab",!0),Ha("config",((e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager})))]})),Jo("markers",Ma()),mr("fakeFocus",!1),mr("focusManager",Mm()),Ia("onHighlight")]),Qf=y("alloy.menu-focus"),Zf=Bh({name:"Menu",configFields:Jf(),partFields:Xf(),factory:(e,t,n,o)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Pu(e.menuBehaviours,[um.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),Ru.config({store:{mode:"memory",initialValue:e.value}}),jh.config({find:A.some}),af.config(e.movement.config(e,e.movement))]),events:Ls([Fs($f(),((e,t)=>{const n=t.event;e.getSystem().getByDom(n.target).each((n=>{um.highlight(e,n),t.stop(),Ds(e,Qf(),{menu:e,item:n})}))})),Fs(Vf(),((e,t)=>{const n=t.event.item;um.highlight(e,n)}))]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),eg=(e,t,n,o)=>ge(n,o).bind((o=>ge(e,o).bind((o=>{const r=eg(e,t,n,o);return A.some([o].concat(r))})))).getOr([]),tg=(e,t)=>{const n={};le(e,((e,t)=>{j(e,(e=>{n[e]=t}))}));const o=t,r=de(t,((e,t)=>({k:e,v:t})));const s=ce(r,((e,t)=>[t].concat(eg(n,o,r,t))));return ce(n,(e=>ge(s,e).getOr([e])))},ng=e=>"prepared"===e.type?A.some(e.menu):A.none(),og={init:()=>{const e=Cr({}),t=Cr({}),n=Cr({}),o=ic(),r=Cr({}),s=(t,n,o)=>i(t).bind((r=>(t=>pe(e.get(),((e,n)=>e===t)))(t).bind((e=>n(e).map((e=>({triggeredMenu:r,triggeringItem:e,triggeringPath:o}))))))),i=e=>a(e).bind(ng),a=e=>ge(t.get(),e),l=t=>ge(e.get(),t);return{setMenuBuilt:(e,n)=>{t.set({...t.get(),[e]:{type:"prepared",menu:n}})},setContents:(s,i,a,l)=>{o.set(s),e.set(a),t.set(i),r.set(l);const c=tg(l,a);n.set(c)},expand:t=>ge(e.get(),t).map((e=>{const o=ge(n.get(),t).getOr([]);return[e].concat(o)})),refresh:e=>ge(n.get(),e),collapse:e=>ge(n.get(),e).bind((e=>e.length>1?A.some(e.slice(1)):A.none())),lookupMenu:a,lookupItem:l,otherMenus:e=>{const t=r.get();return J(ie(t),e)},getPrimary:()=>o.get().bind(i),getMenus:()=>t.get(),clear:()=>{e.set({}),t.set({}),n.set({}),o.clear()},isClear:()=>o.get().isNone(),getTriggeringPath:(e,t)=>{const r=V(l(e).toArray(),(e=>i(e).isSome()));return ge(n.get(),e).bind((e=>{const n=X(r.concat(e));return(e=>{const t=[];for(let n=0;n<e.length;n++){const o=e[n];if(!o.isSome())return A.none();t.push(o.getOrDie())}return A.some(t)})(G(n,((e,r)=>s(e,t,n.slice(0,r+1)).fold((()=>ye(o.get(),e)?[]:[A.none()]),(e=>[A.some(e)])))))}))}}},extractPreparedMenu:ng},rg=y("collapse-item"),sg=Lh({name:"TieredMenu",configFields:[ja("onExecute"),ja("onEscape"),za("onOpenMenu"),za("onOpenSubmenu"),Ia("onRepositionMenu"),Ia("onCollapseMenu"),mr("highlightImmediately",!0),nr("data",[Xo("primary"),Xo("menus"),Xo("expansions")]),mr("fakeFocus",!1),Ia("onHighlight"),Ia("onHover"),Pa(),Xo("dom"),mr("navigateOnHover",!0),mr("stayInDom",!1),Mu("tmenuBehaviours",[af,um,jh,gf]),mr("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:(e,t)=>{const n=ic(),o=og.init(),r=t=>{const n=((t,n,o)=>ce(o,((o,r)=>{const s=()=>Zf.sketch({...o,value:r,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:e.onHighlight,focusManager:e.fakeFocus?Nm():Mm()});return r===n?{type:"prepared",menu:t.getSystem().build(s())}:{type:"notbuilt",nbMenu:s}})))(t,e.data.primary,e.data.menus),r=i();return o.setContents(e.data.primary,n,e.data.expansions,r),o.getPrimary()},s=e=>Ru.getValue(e).value,i=t=>ce(e.data.menus,((e,t)=>G(e.items,(e=>"separator"===e.type?[]:[e.data.value])))),a=(e,t)=>{um.highlight(e,t),um.getHighlighted(t).orThunk((()=>um.getFirst(t))).each((t=>{Ms(e,t.element,cs())}))},l=(e,t)=>xe(z(t,(t=>e.lookupMenu(t).bind((e=>"prepared"===e.type?A.some(e.menu):A.none()))))),c=(t,n,o)=>{const r=l(n,n.otherMenus(o));j(r,(n=>{Ui(n.element,[e.markers.backgroundMenu]),e.stayInDom||gf.remove(t,n)}))},d=(t,o)=>{const r=(t=>n.get().getOrThunk((()=>{const o={},r=id(t.element,`.${e.markers.item}`),i=V(r,(e=>"true"===pt(e,"aria-haspopup")));return j(i,(e=>{t.getSystem().getByDom(e).each((e=>{const t=s(e);o[t]=e}))})),n.set(o),o})))(t);le(r,((e,t)=>{const n=L(o,t);ht(e.element,"aria-expanded",n)}))},u=(t,n,o)=>A.from(o[0]).bind((r=>n.lookupMenu(r).bind((r=>{if("notbuilt"===r.type)return A.none();{const s=r.menu,i=l(n,o.slice(1));return j(i,(t=>{ji(t.element,e.markers.backgroundMenu)})),lt(s.element)||gf.append(t,da(s)),Ui(s.element,[e.markers.backgroundMenu]),a(t,s),c(t,n,o),A.some(s)}}))));let h;!function(e){e[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent"}(h||(h={}));const m=(t,n,r=h.HighlightSubmenu)=>{if(n.hasConfigured(em)&&em.isDisabled(n))return A.some(n);{const i=s(n);return o.expand(i).bind((s=>(d(t,s),A.from(s[0]).bind((i=>o.lookupMenu(i).bind((a=>{const l=((e,t,n)=>{if("notbuilt"===n.type){const r=e.getSystem().build(n.nbMenu());return o.setMenuBuilt(t,r),r}return n.menu})(t,i,a);return lt(l.element)||gf.append(t,da(l)),e.onOpenSubmenu(t,n,l,X(s)),r===h.HighlightSubmenu?(um.highlightFirst(l),u(t,o,s)):(um.dehighlightAll(l),A.some(n))})))))))}},p=(t,n)=>{const r=s(n);return o.collapse(r).bind((r=>(d(t,r),u(t,o,r).map((o=>(e.onCollapseMenu(t,n,o),o))))))},f=t=>(n,o)=>va(o.getSource(),"."+e.markers.item).bind((e=>n.getSystem().getByDom(e).toOptional().bind((e=>t(n,e).map(O))))),g=Ls([Fs(Qf(),((e,t)=>{const n=t.event.item;o.lookupItem(s(n)).each((()=>{const n=t.event.menu;um.highlight(e,n);const r=s(t.event.item);o.refresh(r).each((t=>c(e,o,t)))}))})),Ys(((t,n)=>{const o=n.event.target;t.getSystem().getByDom(o).each((n=>{0===s(n).indexOf("collapse-item")&&p(t,n),m(t,n,h.HighlightSubmenu).fold((()=>{e.onExecute(t,n)}),b)}))})),qs(((t,n)=>{r(t).each((n=>{gf.append(t,da(n)),e.onOpenMenu(t,n),e.highlightImmediately&&a(t,n)}))}))].concat(e.navigateOnHover?[Fs(Vf(),((t,n)=>{const r=n.event.item;((e,t)=>{const n=s(t);o.refresh(n).bind((t=>(d(e,t),u(e,o,t))))})(t,r),m(t,r,h.HighlightParent),e.onHover(t,r)}))]:[])),v=e=>um.getHighlighted(e).bind(um.getHighlighted),y={collapseMenu:e=>{v(e).each((t=>{p(e,t)}))},highlightPrimary:e=>{o.getPrimary().each((t=>{a(e,t)}))},repositionMenus:t=>{const n=o.getPrimary().bind((e=>v(t).bind((e=>{const t=s(e),n=fe(o.getMenus()),r=xe(z(n,og.extractPreparedMenu));return o.getTriggeringPath(t,(e=>((e,t,n)=>se(t,(e=>{if(!e.getSystem().isConnected())return A.none();const t=um.getCandidates(e);return W(t,(e=>s(e)===n))})))(0,r,e)))})).map((t=>({primary:e,triggeringPath:t})))));n.fold((()=>{(e=>A.from(e.components()[0]).filter((e=>"menu"===pt(e.element,"role"))))(t).each((n=>{e.onRepositionMenu(t,n,[])}))}),(({primary:n,triggeringPath:o})=>{e.onRepositionMenu(t,n,o)}))}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Pu(e.tmenuBehaviours,[af.config({mode:"special",onRight:f(((e,t)=>Ih(t.element)?A.none():m(e,t,h.HighlightSubmenu))),onLeft:f(((e,t)=>Ih(t.element)?A.none():p(e,t))),onEscape:f(((t,n)=>p(t,n).orThunk((()=>e.onEscape(t,n).map((()=>t)))))),focusIn:(e,t)=>{o.getPrimary().each((t=>{Ms(e,t.element,cs())}))}}),um.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),jh.config({find:e=>um.getHighlighted(e)}),gf.config({})]),eventOrder:e.eventOrder,apis:y,events:g}},extraApis:{tieredData:(e,t,n)=>({primary:e,menus:t,expansions:n}),singleData:(e,t)=>({primary:e,menus:kr(e,t),expansions:{}}),collapseItem:e=>({value:ri(rg()),meta:{text:e}})}}),ig=Lh({name:"InlineView",configFields:[Xo("lazySink"),Ia("onShow"),Ia("onHide"),dr("onEscape"),Mu("inlineBehaviours",[uu,Ru,Bl]),hr("fireDismissalEventInstead",[mr("event",ws())]),hr("fireRepositionEventInstead",[mr("event",Cs())]),mr("getRelated",A.none),mr("isExtraPart",E),mr("eventOrder",A.none)],factory:(e,t)=>{const n=(e,t,n,r)=>{o(e,t,n,(()=>r.map((e=>Fn(e)))))},o=(t,n,o,r)=>{const s=e.lazySink(t).getOrDie();uu.openWhileCloaked(t,n,(()=>zd.positionWithinBounds(s,t,o,r()))),Ru.setValue(t,A.some({mode:"position",config:o,getBounds:r}))},r=(t,n,o,r)=>{const s=((e,t,n,o,r)=>{const s=()=>e.lazySink(t),i="horizontal"===o.type?{layouts:{onLtr:()=>Cl(),onRtl:()=>_l()}}:{},a=e=>(e=>2===e.length)(e)?i:{};return sg.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightImmediately:o.menu.highlightImmediately,onEscape:()=>(uu.close(t),e.onEscape.map((e=>e(t))),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(e,t)=>{zd.positionWithinBounds(s().getOrDie(),t,n,r())},onOpenSubmenu:(e,t,n,o)=>{const r=s().getOrDie();zd.position(r,n,{anchor:{type:"submenu",item:t,...a(o)}})},onRepositionMenu:(e,t,o)=>{const i=s().getOrDie();zd.positionWithinBounds(i,t,n,r()),j(o,(e=>{const t=a(e.triggeringPath);zd.position(i,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem,...t}})}))}})})(e,t,n,o,r);uu.open(t,s),Ru.setValue(t,A.some({mode:"menu",menu:s}))},s=t=>{uu.isOpen(t)&&Ru.getValue(t).each((n=>{switch(n.mode){case"menu":uu.getState(t).each(sg.repositionMenus);break;case"position":const o=e.lazySink(t).getOrDie();zd.positionWithinBounds(o,t,n.config,n.getBounds())}}))},i={setContent:(e,t)=>{uu.setContent(e,t)},showAt:(e,t,o)=>{n(e,t,o,A.none())},showWithin:n,showWithinBounds:o,showMenuAt:(e,t,n)=>{r(e,t,n,A.none)},showMenuWithinBounds:r,hide:e=>{uu.isOpen(e)&&(Ru.setValue(e,A.none()),uu.close(e))},getContent:e=>uu.getState(e),reposition:s,isOpen:uu.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Pu(e.inlineBehaviours,[uu.config({isPartOf:(t,n,o)=>Ca(n,o)||((t,n)=>e.getRelated(t).exists((e=>Ca(e,n))))(t,o),getAttachPoint:t=>e.lazySink(t).getOrDie(),onOpen:t=>{e.onShow(t)},onClose:t=>{e.onHide(t)}}),Ru.config({store:{mode:"memory",initialValue:A.none()}}),Bl.config({channels:{...gu({isExtraPart:t.isExtraPart,...e.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})}),...vu({...e.fireRepositionEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({}),doReposition:s})}})]),eventOrder:e.eventOrder,apis:i}},apis:{showAt:(e,t,n,o)=>{e.showAt(t,n,o)},showWithin:(e,t,n,o,r)=>{e.showWithin(t,n,o,r)},showWithinBounds:(e,t,n,o,r)=>{e.showWithinBounds(t,n,o,r)},showMenuAt:(e,t,n,o)=>{e.showMenuAt(t,n,o)},showMenuWithinBounds:(e,t,n,o,r)=>{e.showMenuWithinBounds(t,n,o,r)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,n)=>{e.setContent(t,n)},reposition:(e,t)=>{e.reposition(t)}}});var ag=tinymce.util.Tools.resolve("tinymce.util.Delay");const lg=Lh({name:"Button",factory:e=>{const t=If(e.action),n=e.dom.tag,o=t=>ge(e.dom,"attributes").bind((e=>ge(e,t)));return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Bu(e.buttonBehaviours,[Cf.config({}),af.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:(()=>{if("button"===n){return{type:o("type").getOr("button"),...o("role").map((e=>({role:e}))).getOr({})}}return{role:o("role").getOr("button")}})()},eventOrder:e.eventOrder}},configFields:[mr("uid",void 0),Xo("dom"),mr("components",[]),Lu("buttonBehaviours",[Cf,af]),sr("action"),sr("role"),mr("eventOrder",{})]}),cg=e=>{const t=(e=>void 0!==e.uid)(e)&&ve(e,"uid")?e.uid:ui("memento");return{get:e=>e.getSystem().getByUid(t).getOrDie(),getOpt:e=>e.getSystem().getByUid(t).toOptional(),asSpec:()=>({...e,uid:t})}};var dg=tinymce.util.Tools.resolve("tinymce.util.I18n");const ug={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},hg="temporary-placeholder",mg=e=>()=>ge(e,hg).getOr("!not found!"),pg=(e,t)=>{const n=e.toLowerCase();if(dg.isRtl()){const e=((e,t)=>Ee(e,t)?e:((e,t)=>e+t)(e,t))(n,"-rtl");return be(t,e)?e:n}return n},fg=(e,t)=>ge(t,pg(e,t)),gg=(e,t)=>{const n=t();return fg(e,n).getOrThunk(mg(n))},bg=()=>bf("add-focusable",[qs((e=>{ga(e.element,"svg").each((e=>ht(e,"focusable","false")))}))]),vg=(e,t,n,o)=>{var r,s;const i=(e=>!!dg.isRtl()&&be(ug,e))(t)?["tox-icon--flip"]:[],a=ge(n,pg(t,n)).or(o).getOrThunk(mg(n));return{dom:{tag:e.tag,attributes:null!==(r=e.attributes)&&void 0!==r?r:{},classes:e.classes.concat(i),innerHtml:a},behaviours:Dl([...null!==(s=e.behaviours)&&void 0!==s?s:[],bg()])}},yg=(e,t,n,o=A.none())=>vg(t,e,n(),o),xg={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},wg=Lh({name:"Notification",factory:e=>{const t=cg({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Dl([gf.config({})])}),n=e=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${e}%`}}}),o=e=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${e}%`}}),r=cg({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},o(0)],behaviours:Dl([gf.config({})])}),s={updateProgress:(e,t)=>{e.getSystem().isConnected()&&r.getOpt(e).each((e=>{gf.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(t)]},o(t)])}))},updateText:(e,n)=>{if(e.getSystem().isConnected()){const o=t.get(e);gf.set(o,[sa(n)])}}},i=K([e.icon.toArray(),e.level.toArray(),e.level.bind((e=>A.from(xg[e]))).toArray()]),a=cg(lg.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[yg("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:t=>{e.onAction(t)}})),l=((e,t,n)=>{const o=n(),r=W(e,(e=>be(o,pg(e,o))));return vg(t,r.getOr(hg),o,A.none())})(i,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),c=[l,{dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:Dl([gf.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map((e=>["tox-notification","tox-notification--in",`tox-notification--${e}`])).getOr(["tox-notification","tox-notification--in"])},behaviours:Dl([Cf.config({}),bf("notification-events",[Fs(Wr(),(e=>{a.getOpt(e).each(Cf.focus)}))])]),components:c.concat(e.progress?[r.asSpec()]:[]).concat(e.closeButton?[a.asSpec()]:[]),apis:s}},configFields:[sr("level"),Xo("progress"),Xo("icon"),Xo("onAction"),Xo("text"),Xo("iconProvider"),Xo("translationProvider"),vr("closeButton",!0)],apis:{updateProgress:(e,t,n)=>{e.updateProgress(t,n)},updateText:(e,t,n)=>{e.updateText(t,n)}}});var Cg,_g,Sg=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),kg=tinymce.util.Tools.resolve("tinymce.EditorManager"),Eg=tinymce.util.Tools.resolve("tinymce.Env");!function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"}(Cg||(Cg={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(_g||(_g={}));const Og=e=>t=>t.options.get(e),Tg=e=>t=>A.from(e(t)),Ag=e=>{const t=Eg.deviceType.isPhone(),n=Eg.deviceType.isTablet()||t,o=e.options.register,r=e=>s(e)||!1===e,i=e=>s(e)||f(e);o("skin",{processor:e=>s(e)||!1===e,default:"oxide"}),o("skin_url",{processor:"string"}),o("height",{processor:i,default:Math.max(e.getElement().offsetHeight,400)}),o("width",{processor:i,default:Sg.DOM.getStyle(e.getElement(),"width")}),o("min_height",{processor:"number",default:100}),o("min_width",{processor:"number"}),o("max_height",{processor:"number"}),o("max_width",{processor:"number"}),o("style_formats",{processor:"object[]"}),o("style_formats_merge",{processor:"boolean",default:!1}),o("style_formats_autohide",{processor:"boolean",default:!1}),o("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),o("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),o("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),o("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),o("content_langs",{processor:"object[]"}),o("removed_menuitems",{processor:"string",default:""}),o("menubar",{processor:e=>s(e)||d(e),default:!t}),o("menu",{processor:"object",default:{}}),o("toolbar",{processor:e=>d(e)||s(e)||l(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),I(9,(e=>{o("toolbar"+(e+1),{processor:"string"})})),o("toolbar_mode",{processor:"string",default:n?"scrolling":"floating"}),o("toolbar_groups",{processor:"object",default:{}}),o("toolbar_location",{processor:"string",default:_g.auto}),o("toolbar_persist",{processor:"boolean",default:!1}),o("toolbar_sticky",{processor:"boolean",default:e.inline}),o("toolbar_sticky_offset",{processor:"number",default:0}),o("fixed_toolbar_container",{processor:"string",default:""}),o("fixed_toolbar_container_target",{processor:"object"}),o("file_picker_callback",{processor:"function"}),o("file_picker_validator_handler",{processor:"function"}),o("file_picker_types",{processor:"string"}),o("typeahead_urls",{processor:"boolean",default:!0}),o("anchor_top",{processor:r,default:"#top"}),o("anchor_bottom",{processor:r,default:"#bottom"}),o("draggable_modal",{processor:"boolean",default:!1}),o("statusbar",{processor:"boolean",default:!0}),o("elementpath",{processor:"boolean",default:!0}),o("branding",{processor:"boolean",default:!0}),o("resize",{processor:e=>"both"===e||d(e),default:!Eg.deviceType.isTouch()})},Dg=Og("readonly"),Rg=Og("height"),Mg=Og("width"),Ng=Tg(Og("min_width")),Pg=Tg(Og("min_height")),Lg=Tg(Og("max_width")),Bg=Tg(Og("max_height")),Ig=Tg(Og("style_formats")),Fg=Og("style_formats_merge"),zg=Og("style_formats_autohide"),jg=Og("content_langs"),Hg=Og("removed_menuitems"),Vg=Og("toolbar_mode"),$g=Og("toolbar_groups"),Ug=Og("toolbar_location"),Wg=Og("fixed_toolbar_container"),qg=Og("fixed_toolbar_container_target"),Kg=Og("toolbar_persist"),Gg=Og("toolbar_sticky_offset"),Yg=Og("menubar"),Xg=Og("toolbar"),Jg=Og("file_picker_callback"),Qg=Og("file_picker_validator_handler"),Zg=Og("file_picker_types"),eb=Og("typeahead_urls"),tb=Og("anchor_top"),nb=Og("anchor_bottom"),ob=Og("draggable_modal"),rb=Og("statusbar"),sb=Og("elementpath"),ib=Og("branding"),ab=Og("resize"),lb=Og("paste_as_text"),cb=e=>!1===e.options.get("skin"),db=e=>!1!==e.options.get("menubar"),ub=e=>{const t=e.options.get("skin_url");if(cb(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{const t=e.options.get("skin");return kg.baseURL+"/skins/ui/"+t}},hb=e=>e.options.get("line_height_formats").split(" "),mb=e=>{const t=Xg(e),n=s(t),o=l(t)&&t.length>0;return!fb(e)&&(o||n||!0===t)},pb=e=>{const t=I(9,(t=>e.options.get("toolbar"+(t+1)))),n=V(t,s);return Ce(n.length>0,n)},fb=e=>pb(e).fold((()=>{const t=Xg(e);return g(t,s)&&t.length>0}),O),gb=e=>Ug(e)===_g.bottom,bb=e=>{if(!e.inline)return A.none();const t=Wg(e);if(t.length>0)return ba(ct(),t);const n=qg(e);return m(n)?A.some(Re.fromDom(n)):A.none()},vb=e=>e.inline&&bb(e).isSome(),yb=e=>bb(e).getOrThunk((()=>rt(ot(Re.fromDom(e.getElement()))))),xb=e=>e.inline&&!db(e)&&!mb(e)&&!fb(e),wb=e=>(e.options.get("toolbar_sticky")||e.inline)&&!vb(e)&&!xb(e),Cb=e=>{const t=e.options.get("menu");return ce(t,(e=>({...e,items:e.items})))};var _b=Object.freeze({__proto__:null,get ToolbarMode(){return Cg},get ToolbarLocation(){return _g},register:Ag,getSkinUrl:ub,isReadOnly:Dg,isSkinDisabled:cb,getHeightOption:Rg,getWidthOption:Mg,getMinWidthOption:Ng,getMinHeightOption:Pg,getMaxWidthOption:Lg,getMaxHeightOption:Bg,getUserStyleFormats:Ig,shouldMergeStyleFormats:Fg,shouldAutoHideStyleFormats:zg,getLineHeightFormats:hb,getContentLanguages:jg,getRemovedMenuItems:Hg,isMenubarEnabled:db,isMultipleToolbars:fb,isToolbarEnabled:mb,isToolbarPersist:Kg,getMultipleToolbarsOption:pb,getUiContainer:yb,useFixedContainer:vb,getToolbarMode:Vg,isDraggableModal:ob,isDistractionFree:xb,isStickyToolbar:wb,getStickyToolbarOffset:Gg,getToolbarLocation:Ug,isToolbarLocationBottom:gb,getToolbarGroups:$g,getMenus:Cb,getMenubar:Yg,getToolbar:Xg,getFilePickerCallback:Jg,getFilePickerTypes:Zg,useTypeaheadUrls:eb,getAnchorTop:tb,getAnchorBottom:nb,getFilePickerValidatorHandler:Qg,useStatusBar:rb,useElementPath:sb,useBranding:ib,getResize:ab,getPasteAsText:lb});const Sb="[data-mce-autocompleter]",kb=e=>va(e,Sb),Eb=(e,t)=>{const n=(e,t)=>{Ds(e,Kr(),{raw:t})},o=()=>e.getView().bind(um.getHighlighted);t.on("keydown",(t=>{const r=t.which;e.isActive()&&(e.isMenuOpen()?13===r?(o().each(Rs),t.preventDefault()):40===r?(o().fold((()=>{e.getView().each(um.highlightFirst)}),(e=>{n(e,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==r&&38!==r&&39!==r||o().each((e=>{n(e,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==r&&38!==r&&40!==r||e.cancelIfNecessary())})),t.on("NodeChange",(t=>{e.isActive()&&!e.isProcessingAction()&&kb(Re.fromDom(t.element)).isNone()&&e.cancelIfNecessary()}))};var Ob;!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(Ob||(Ob={}));var Tb=Ob;const Ab="tox-menu-nav__js",Db="tox-collection__item",Rb="tox-swatch",Mb={normal:Ab,color:Rb},Nb="tox-collection__item--enabled",Pb="tox-collection__item-icon",Lb="tox-collection__item-label",Bb="tox-collection__item-caret",Ib="tox-collection__item--active",Fb="tox-collection__item-container",zb="tox-collection__item-container--row",jb=e=>ge(Mb,e).getOr(Ab),Hb=e=>"color"===e?"tox-swatches":"tox-menu",Vb=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Hb(e),tieredMenu:"tox-tiered-menu"}),$b=e=>{const t=Vb(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:jb(e)}},Ub=(e,t,n)=>{const o=Vb(n);return{tag:"div",classes:K([[o.menu,`tox-menu-${t}-column`],e?[o.hasIcons]:[]])}},Wb=[Zf.parts.items({})],qb=(e,t,n)=>{const o=Vb(n);return{dom:{tag:"div",classes:K([[o.tieredMenu]])},markers:$b(n)}},Kb=(e,t)=>n=>{const o=F(n,t);return z(o,(t=>({dom:e,components:t})))},Gb=(e,t)=>{const n=[];let o=[];return j(e,((e,r)=>{t(e,r)?(o.length>0&&n.push(o),o=[],(be(e.dom,"innerHtml")||e.components.length>0)&&o.push(e)):o.push(e)})),o.length>0&&n.push(o),z(n,(e=>({dom:{tag:"div",classes:["tox-collection__group"]},components:e})))},Yb=(e,t,n=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Zf.parts.items({preprocess:n=>"auto"!==e&&e>1?Kb({tag:"div",classes:["tox-collection__group"]},e)(n):Gb(n,((e,n)=>"separator"===t[n].type))})]}),Xb=e=>B(e,(e=>"icon"in e&&void 0!==e.icon)),Jb=e=>(console.error(Wo(e)),console.log(e),A.none()),Qb=(e,t,n,o,r)=>{const s=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Zf.parts.items({preprocess:e=>Gb(e,((e,t)=>"separator"===i[t].type))})]});var i;return{value:e,dom:s.dom,components:s.components,items:n}},Zb=(e,t,n,o,r)=>{if("color"===r){const t=(e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Zf.parts.items({preprocess:"auto"!==e?Kb({tag:"div",classes:["tox-swatches__row"]},e):x})]}]}))(o);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===r&&"auto"===o){const t=Yb(o,n);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===r&&1===o){const t=Yb(1,n);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===r){const t=Yb(o,n);return{value:e,dom:t.dom,components:t.components,items:n}}if("listpreview"===r&&"auto"!==o){const t=(e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Zf.parts.items({preprocess:Kb({tag:"div",classes:["tox-collection__group"]},e)})]}))(o);return{value:e,dom:t.dom,components:t.components,items:n}}return{value:e,dom:Ub(t,o,r),components:Wb,items:n}},ev=Zo("type"),tv=Zo("name"),nv=Zo("label"),ov=Zo("text"),rv=Zo("title"),sv=Zo("icon"),iv=Zo("value"),av=tr("fetch"),lv=tr("getSubmenuItems"),cv=tr("onAction"),dv=tr("onItemAction"),uv=yr("onSetup",(()=>b)),hv=lr("name"),mv=lr("text"),pv=lr("icon"),fv=lr("tooltip"),gv=lr("label"),bv=lr("shortcut"),vv=dr("select"),yv=vr("active",!1),xv=vr("borderless",!1),wv=vr("enabled",!0),Cv=vr("primary",!1),_v=e=>mr("columns",e),Sv=mr("meta",{}),kv=yr("onAction",b),Ev=e=>gr("type",e),Ov=e=>Ko("name","name",co((()=>ri(`${e}-name`))),No),Tv=ko([ev,mv]),Av=ko([Ev("autocompleteitem"),yv,wv,Sv,iv,mv,pv]),Dv=[wv,fv,pv,mv,uv],Rv=ko([ev,cv].concat(Dv)),Mv=e=>Vo("toolbarbutton",Rv,e),Nv=[yv].concat(Dv),Pv=ko(Nv.concat([ev,cv])),Lv=e=>Vo("ToggleButton",Pv,e),Bv=[yr("predicate",E),br("scope","node",["node","editor"]),br("position","selection",["node","selection","line"])],Iv=Dv.concat([Ev("contextformbutton"),Cv,cv,Go("original",x)]),Fv=Nv.concat([Ev("contextformbutton"),Cv,cv,Go("original",x)]),zv=Dv.concat([Ev("contextformbutton")]),jv=Nv.concat([Ev("contextformtogglebutton")]),Hv=qo("type",{contextformbutton:Iv,contextformtogglebutton:Fv}),Vv=ko([Ev("contextform"),yr("initValue",y("")),gv,rr("commands",Hv),ir("launch",qo("type",{contextformbutton:zv,contextformtogglebutton:jv}))].concat(Bv)),$v=ko([Ev("contexttoolbar"),Zo("items")].concat(Bv)),Uv=[ev,Zo("src"),lr("alt"),xr("classes",[],No)],Wv=ko(Uv),qv=[ev,ov,hv,xr("classes",["tox-collection__item-label"],No)],Kv=ko(qv),Gv=Co((()=>zo("type",{cardimage:Wv,cardtext:Kv,cardcontainer:Yv}))),Yv=ko([ev,gr("direction","horizontal"),gr("align","left"),gr("valign","middle"),rr("items",Gv)]),Xv=[wv,mv,bv,(Jv="menuitem",Ko("value","value",co((()=>ri(`${Jv}-value`))),Do())),Sv];var Jv;const Qv=ko([ev,gv,rr("items",Gv),uv,kv].concat(Xv)),Zv=ko([ev,yv,pv].concat(Xv)),ey=[ev,Zo("fancytype"),kv],ty=[mr("initData",{})].concat(ey),ny=[wr("initData",{},[vr("allowCustomColors",!0),ur("colors",Do())])].concat(ey),oy=qo("fancytype",{inserttable:ty,colorswatch:ny}),ry=ko([ev,uv,kv,pv].concat(Xv)),sy=ko([ev,lv,uv,pv].concat(Xv)),iy=ko([ev,pv,yv,uv,cv].concat(Xv)),ay=(e,t,n)=>{const o=id(e.element,"."+n);if(o.length>0){const e=q(o,(e=>{const n=e.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>t})).getOr(o.length);return A.some({numColumns:e,numRows:Math.ceil(o.length/e)})}return A.none()},ly=(e,t)=>Dl([bf(e,t)]),cy=e=>ly(ri("unnamed-events"),e),dy=ri("tooltip.exclusive"),uy=ri("tooltip.show"),hy=ri("tooltip.hide"),my=(e,t,n)=>{e.getSystem().broadcastOn([dy],{})};var py=Object.freeze({__proto__:null,hideAllExclusive:my,setComponents:(e,t,n,o)=>{n.getTooltip().each((e=>{e.getSystem().isConnected()&&gf.set(e,o)}))}});var fy=Object.freeze({__proto__:null,events:(e,t)=>{const n=n=>{t.getTooltip().each((o=>{Xd(o),e.onHide(n,o),t.clearTooltip()})),t.clearTimer()};return Ls(K([[Fs(uy,(n=>{t.resetTimer((()=>{(n=>{if(!t.isShowing()){my(n);const o=e.lazySink(n).getOrDie(),r=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Ls("normal"===e.mode?[Fs(Ur(),(e=>{As(n,uy)})),Fs(Vr(),(e=>{As(n,hy)}))]:[]),behaviours:Dl([gf.config({})])});t.setTooltip(r),Kd(o,r),e.onShow(n,r),zd.position(o,r,{anchor:e.anchor(n)})}})(n)}),e.delay)})),Fs(hy,(o=>{t.resetTimer((()=>{n(o)}),e.delay)})),Fs(as(),((e,t)=>{const o=t;o.universal||L(o.channels,dy)&&n(e)})),Ks((e=>{n(e)}))],"normal"===e.mode?[Fs(Wr(),(e=>{As(e,uy)})),Fs(ss(),(e=>{As(e,hy)})),Fs(Ur(),(e=>{As(e,uy)})),Fs(Vr(),(e=>{As(e,hy)}))]:[Fs(Os(),((e,t)=>{As(e,uy)})),Fs(Ts(),(e=>{As(e,hy)}))]]))}}),gy=[Xo("lazySink"),Xo("tooltipDom"),mr("exclusive",!0),mr("tooltipComponents",[]),mr("delay",300),br("mode","normal",["normal","follow-highlight"]),mr("anchor",(e=>({type:"hotspot",hotspot:e,layouts:{onLtr:y([fl,pl,dl,hl,ul,ml]),onRtl:y([fl,pl,dl,hl,ul,ml])}}))),Ia("onHide"),Ia("onShow")];const by=Ml({fields:gy,name:"tooltipping",active:fy,state:Object.freeze({__proto__:null,init:()=>{const e=ic(),t=ic(),n=()=>{e.on(clearTimeout)},o=y("not-implemented");return Ci({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:n,resetTimer:(t,o)=>{n(),e.set(setTimeout(t,o))},readState:o})}}),apis:py}),vy="silver.readonly",yy=ko([(xy="readonly",Jo(xy,Po))]);var xy;const wy=(e,t)=>{const n=e.outerContainer.element;t&&(e.mothership.broadcastOn([hu()],{target:n}),e.uiMothership.broadcastOn([hu()],{target:n})),e.mothership.broadcastOn([vy],{readonly:t}),e.uiMothership.broadcastOn([vy],{readonly:t})},Cy=(e,t)=>{e.on("init",(()=>{e.mode.isReadOnly()&&wy(t,!0)})),e.on("SwitchMode",(()=>wy(t,e.mode.isReadOnly()))),Dg(e)&&e.mode.set("readonly")},_y=()=>Bl.config({channels:{[vy]:{schema:yy,onReceive:(e,t)=>{em.set(e,t.readonly)}}}}),Sy=e=>em.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),ky=e=>em.config({disabled:e}),Ey=e=>em.config({disabled:e,disableClass:"tox-tbtn--disabled"}),Oy=e=>em.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),Ty=(e,t)=>{const n=e.getApi(t);return e=>{e(n)}},Ay=(e,t)=>qs((n=>{Ty(e,n)((n=>{const o=e.onSetup(n);p(o)&&t.set(o)}))})),Dy=(e,t)=>Ks((n=>Ty(e,n)(t.get()))),Ry=(e,t)=>Ys(((n,o)=>{Ty(e,n)(e.onAction),e.triggersSubmenu||t!==Tb.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&As(n,hs()),o.stop())})),My={[ls()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Ny=xe,Py=(e,t,n,o)=>{const r=Cr(b);return{type:"item",dom:t.dom,components:Ny(t.optComponents),data:e.data,eventOrder:My,hasSubmenu:e.triggersSubmenu,itemBehaviours:Dl([bf("item-events",[Ry(e,n),Ay(e,r),Dy(e,r)]),Sy((()=>!e.enabled||o.isDisabled())),_y(),gf.config({})].concat(e.itemBehaviours))}},Ly=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),By=e=>{const t=Eg.os.isMacOS()||Eg.os.isiOS(),n=t?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},o=e.split("+"),r=z(o,(e=>{const t=e.toLowerCase().trim();return be(n,t)?n[t]:e}));return t?r.join(""):r.join("+")},Iy=(e,t,n=[Pb])=>yg(e,{tag:"div",classes:n},t),Fy=e=>({dom:{tag:"div",classes:[Lb]},components:[sa(dg.translate(e))]}),zy=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),jy=(e,t)=>({dom:{tag:"div",classes:[Lb]},components:[{dom:{tag:e.tag,styles:e.styles},components:[sa(dg.translate(t))]}]}),Hy=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[sa(By(e))]}),Vy=e=>Iy("checkmark",e,["tox-collection__item-checkmark"]),$y=(e,t,n)=>{const o=e.ariaLabel,r=e.value,s=e.iconContent.map((e=>((e,t,n)=>{const o=t();return fg(e,o).or(n).getOrThunk(mg(o))})(e,t.icons,n)));return{dom:(()=>{const e=s.getOr(""),n=o.map((e=>({title:t.translate(e)}))).getOr({}),i={tag:"div",attributes:n,classes:["tox-swatch"]};return"custom"===r?{...i,tag:"button",classes:[...i.classes,"tox-swatches__picker-btn"],innerHtml:e}:"remove"===r?{...i,classes:[...i.classes,"tox-swatch--remove"],innerHtml:e}:{...i,attributes:{...i.attributes,"data-mce-color":r},styles:{"background-color":r}}})(),optComponents:[]}},Uy=e=>{const t=e.map((e=>({attributes:{title:dg.translate(e)}}))).getOr({});return{tag:"div",classes:[Ab,Db],...t}},Wy=(e,t,n,o=A.none())=>"color"===e.presets?$y(e,t,o):((e,t,n,o)=>{const r={tag:"div",classes:[Pb]},s=n?e.iconContent.map((e=>yg(e,r,t.icons,o))).orThunk((()=>A.some({dom:r}))):A.none(),i=e.checkMark,a=A.from(e.meta).fold((()=>Fy),(e=>be(e,"style")?C(jy,e.style):Fy)),l=e.htmlContent.fold((()=>e.textContent.map(a)),(e=>A.some(zy(e,[Lb]))));return{dom:Uy(e.ariaLabel),optComponents:[s,l,e.shortcutContent.map(Hy),i,e.caret]}})(e,t,n,o),qy=(e,t)=>ge(e,"tooltipWorker").map((e=>[by.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:e=>({type:"submenu",item:e,overrides:{maxHeightFunction:wc}}),mode:"follow-highlight",onShow:(t,n)=>{e((e=>{by.setComponents(t,[ia({element:Re.fromDom(e)})])}))}})])).getOr([]),Ky=(e,t)=>{const n=(e=>Sg.DOM.encode(e))(dg.translate(e));if(t.length>0){const e=new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t),"gi");return n.replace(e,(e=>`<span class="tox-autocompleter-highlight">${e}</span>`))}return n},Gy=(e,t)=>z(e,(e=>{switch(e.type){case"cardcontainer":return((e,t)=>{const n="vertical"===e.direction?"tox-collection__item-container--column":zb,o="left"===e.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[Fb,n,o,(()=>{switch(e.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:t}})(e,Gy(e.items,t));case"cardimage":return((e,t,n)=>({dom:{tag:"img",classes:t,attributes:{src:e,alt:n.getOr("")}}}))(e.src,e.classes,e.alt);case"cardtext":const n=e.name.exists((e=>L(t.cardText.highlightOn,e))),o=n?A.from(t.cardText.matchText).getOr(""):"";return zy(Ky(e.text,o),e.classes)}})),Yy=ph(qf(),Kf()),Xy=e=>({value:e}),Jy=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Qy=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Zy=e=>Jy.test(e)||Qy.test(e),ex=e=>((e,t)=>ke(e,t)?((e,t)=>e.substring(t))(e,t.length):e)(e,"#").toUpperCase(),tx=e=>{const t=(e=>{const t=e.value.replace(Jy,((e,t,n,o)=>t+t+n+n+o+o));return{value:t}})(e),n=Qy.exec(t.value);return null===n?["FFFFFF","FF","FF","FF"]:n},nx=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},ox=e=>{const t=nx(e.red)+nx(e.green)+nx(e.blue);return Xy(t)},rx=Math.min,sx=Math.max,ix=Math.round,ax=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,lx=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,cx=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),dx=e=>{const t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},ux=e=>{let t,n,o;const r=(e.hue||0)%360;let s=e.saturation/100,i=e.value/100;if(s=sx(0,rx(s,1)),i=sx(0,rx(i,1)),0===s)return t=n=o=ix(255*i),cx(t,n,o,1);const a=r/60,l=i*s,c=l*(1-Math.abs(a%2-1)),d=i-l;switch(Math.floor(a)){case 0:t=l,n=c,o=0;break;case 1:t=c,n=l,o=0;break;case 2:t=0,n=l,o=c;break;case 3:t=0,n=c,o=l;break;case 4:t=c,n=0,o=l;break;case 5:t=l,n=0,o=c;break;default:t=n=o=0}return t=ix(255*(t+d)),n=ix(255*(n+d)),o=ix(255*(o+d)),cx(t,n,o,1)},hx=e=>{const t=tx(e),n=parseInt(t[1],16),o=parseInt(t[2],16),r=parseInt(t[3],16);return cx(n,o,r,1)},mx=(e,t,n,o)=>{const r=parseInt(e,10),s=parseInt(t,10),i=parseInt(n,10),a=parseFloat(o);return cx(r,s,i,a)},px=e=>{if("transparent"===e)return A.some(cx(0,0,0,0));const t=ax.exec(e);if(null!==t)return A.some(mx(t[1],t[2],t[3],"1"));const n=lx.exec(e);return null!==n?A.some(mx(n[1],n[2],n[3],n[4])):A.none()},fx=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,gx=cx(255,0,0,1),bx=(e,t)=>e.dispatch("ResizeContent",t),vx=(e,t,n)=>({hue:e,saturation:t,value:n}),yx=e=>{let t=0,n=0,o=0;const r=e.red/255,s=e.green/255,i=e.blue/255,a=Math.min(r,Math.min(s,i)),l=Math.max(r,Math.max(s,i));if(a===l)return o=a,vx(0,0,100*o);return t=r===a?3:i===a?1:5,t=60*(t-(r===a?s-i:i===a?r-s:i-r)/(l-a)),n=(l-a)/l,o=l,vx(Math.round(t),Math.round(100*n),Math.round(100*o))},xx=e=>ox(ux(e)),wx=e=>{return(t=e,Zy(t)?A.some({value:ex(t)}):A.none()).orThunk((()=>px(e).map(ox))).getOrThunk((()=>{const t=document.createElement("canvas");t.height=1,t.width=1;const n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="#FFFFFF",n.fillStyle=e,n.fillRect(0,0,1,1);const o=n.getImageData(0,0,1,1).data,r=o[0],s=o[1],i=o[2],a=o[3];return ox(cx(r,s,i,a))}));var t};var Cx=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const _x="tinymce-custom-colors";const Sx=((e=10)=>{const t=Cx.getItem(_x),n=s(t)?JSON.parse(t):[],o=e-(r=n).length<0?r.slice(0,e):r;var r;const i=e=>{o.splice(e,1)};return{add:t=>{P(o,t).each(i),o.unshift(t),o.length>e&&o.pop(),Cx.setItem(_x,JSON.stringify(o))},state:()=>o.slice(0)}})(10),kx=e=>{const t=[];for(let n=0;n<e.length;n+=2)t.push({text:e[n+1],value:"#"+wx(e[n]).value,type:"choiceitem"});return t},Ex=e=>t=>t.options.get(e),Ox=Ex("color_cols"),Tx=Ex("custom_colors"),Ax=Ex("color_map"),Dx=e=>{Sx.add(e)},Rx="#000000",Mx=e=>{const t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[n,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]},Nx=(e,t,n,o)=>{if("custom"===n){zx(e)((n=>{n.each((n=>{Dx(n),e.execCommand("mceApplyTextcolor",t,n),o(n)}))}),Rx)}else"remove"===n?(o(""),e.execCommand("mceRemoveTextcolor",t)):(o(n),e.execCommand("mceApplyTextcolor",t,n))},Px=(e,t)=>e.concat(z(Sx.state(),(e=>({type:"choiceitem",text:e,value:e}))).concat(Mx(t))),Lx=(e,t)=>n=>{n(Px(e,t))},Bx=(e,t,n)=>{const o="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(o,n)},Ix=(e,t,n,o,r)=>{e.ui.registry.addSplitButton(t,{tooltip:o,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:t=>{const o=((e,t)=>{let n;return e.dom.getParents(e.selection.getStart(),(e=>{let o;(o=e.style["forecolor"===t?"color":"background-color"])&&(n=n||o)})),A.from(n)})(e,n);return o.bind((e=>px(e).map((e=>{const n=ox(e).value;return Se(t.toLowerCase(),n)})))).getOr(!1)},columns:Ox(e),fetch:Lx(Ax(e),Tx(e)),onAction:t=>{Nx(e,n,r.get(),b)},onItemAction:(o,s)=>{Nx(e,n,s,(n=>{r.set(n),((e,t)=>{e.dispatch("TextColorChange",t)})(e,{name:t,color:n})}))},onSetup:n=>{Bx(n,t,r.get());const o=e=>{e.name===t&&Bx(n,e.name,e.color)};return e.on("TextColorChange",o),()=>{e.off("TextColorChange",o)}}})},Fx=(e,t,n,o)=>{e.ui.registry.addNestedMenuItem(t,{text:o,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",onAction:t=>{Nx(e,n,t.value,b)}}]})},zx=e=>(t,n)=>{let o=!1;const r={colorpicker:n};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onAction:(e,t)=>{"hex-valid"===t.name&&(o=t.value)},onSubmit:n=>{const r=n.getData().colorpicker;o?(t(A.from(r)),n.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",r]))},onClose:b,onCancel:()=>{t(A.none())}})},jx=(e,t,n,o,r,s,i,a)=>{const l=Xb(t),c=Hx(t,n,o,"color"!==r?"normal":"color",s,i,a);return Zb(e,l,c,o,r)},Hx=(e,t,n,o,r,s,i)=>xe(z(e,(a=>{return"choiceitem"===a.type?(l=a,Vo("choicemenuitem",Zv,l)).fold(Jb,(l=>A.some(((e,t,n,o,r,s,i,a=!0)=>{const l=Wy({presets:n,textContent:t?e.text:A.none(),htmlContent:A.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:A.none(),checkMark:t?A.some(Vy(i.icons)):A.none(),caret:A.none(),value:e.value},i,a);return ao(Py({data:Ly(e),enabled:e.enabled,getApi:e=>({setActive:t=>{Pf.set(e,t)},isActive:()=>Pf.isOn(e),isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),onAction:t=>o(e.value),onSetup:e=>(e.setActive(r),b),triggersSubmenu:!1,itemBehaviours:[]},l,s,i),{toggling:{toggleClass:Nb,toggleOnExecute:!1,selected:e.active}})})(l,1===n,o,t,s(a.value),r,i,Xb(e))))):A.none();var l}))),Vx=(e,t)=>{const n=$b(t);if(1===e)return{mode:"menu",moveOnTab:!0};if("auto"===e)return{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}};return{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}},$x=(e,t)=>{const n=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold((()=>Px(t.colorinput.getColors(),n)),(e=>e.concat(Mx(n))))},Ux=ri("cell-over"),Wx=ri("cell-execute"),qx=(e,t,n)=>{const o=n=>Ds(n,Wx,{row:e,col:t}),r=(e,t)=>{t.stop(),o(e)};return ca({dom:{tag:"div",attributes:{role:"button","aria-labelledby":n}},behaviours:Dl([bf("insert-table-picker-cell",[Fs(Ur(),Cf.focus),Fs(ls(),o),Fs(Jr(),r),Fs(ds(),r)]),Pf.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Cf.config({onFocus:n=>Ds(n,Ux,{row:e,col:t})})])})},Kx=e=>G(e,(e=>z(e,da))),Gx=(e,t)=>sa(`${t}x${e}`),Yx={inserttable:e=>{const t=ri("size-label"),n=((e,t,n)=>{const o=[];for(let r=0;r<t;r++){const t=[];for(let o=0;o<n;o++)t.push(qx(r,o,e));o.push(t)}return o})(t,10,10),o=Gx(0,0),r=cg({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[o],behaviours:Dl([gf.config({})])});return{type:"widget",data:{value:ri("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Yy.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Kx(n).concat(r.asSpec()),behaviours:Dl([bf("insert-table-picker",[qs((e=>{gf.set(r.get(e),[o])})),Vs(Ux,((e,t,o)=>{const{row:s,col:i}=o.event;((e,t,n,o,r)=>{for(let s=0;s<o;s++)for(let o=0;o<r;o++)Pf.set(e[s][o],s<=t&&o<=n)})(n,s,i,10,10),gf.set(r.get(e),[Gx(s+1,i+1)])})),Vs(Wx,((t,n,o)=>{const{row:r,col:s}=o.event;e.onAction({numRows:r+1,numColumns:s+1}),As(t,hs())}))]),af.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,t)=>{const n=$x(e,t),o=t.colorinput.getColorCols(),r="color",s=jx(ri("menu-value"),n,(t=>{e.onAction({value:t})}),o,r,Tb.CLOSE_ON_EXECUTE,E,t.shared.providers),i={...s,markers:$b(r),movement:Vx(o,r)};return{type:"widget",data:{value:ri("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Yy.widget(Zf.sketch(i))]}}},Xx=(e,t,n,o,r,s,i,a=!0)=>{const l=Wy({presets:o,textContent:A.none(),htmlContent:n?e.text.map((e=>Ky(e,t))):A.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:e.value},i.providers,a,e.icon);return Py({data:Ly(e),enabled:e.enabled,getApi:y({}),onAction:t=>r(e.value,e.meta),onSetup:y(b),triggersSubmenu:!1,itemBehaviours:qy(e.meta,i)},l,s,i.providers)},Jx=e=>({type:"separator",dom:{tag:"div",classes:[Db,"tox-collection__group-heading"]},components:e.text.map(sa).toArray()}),Qx=(e,t,n,o=!0)=>{const r=Wy({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:A.none(),ariaLabel:e.text,caret:A.none(),checkMark:A.none(),shortcutContent:e.shortcut},n,o);return Py({data:Ly(e),getApi:e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t,n)},Zx=(e,t,n,o=!0,r=!1)=>{const s=r?(i=n.icons,Iy("chevron-down",i,[Bb])):(e=>Iy("chevron-right",e,[Bb]))(n.icons);var i;const a=Wy({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:A.none(),ariaLabel:e.text,caret:A.some(s),checkMark:A.none(),shortcutContent:e.shortcut},n,o);return Py({data:Ly(e),getApi:e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),enabled:e.enabled,onAction:b,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,t,n)},ew=(e,t,n,o=!0)=>{const r=Wy({iconContent:e.icon,textContent:e.text,htmlContent:A.none(),ariaLabel:e.text,checkMark:A.some(Vy(n.icons)),caret:A.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,o);return ao(Py({data:Ly(e),enabled:e.enabled,getApi:e=>({setActive:t=>{Pf.set(e,t)},isActive:()=>Pf.isOn(e),isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t,n),{toggling:{toggleClass:Nb,toggleOnExecute:!1,selected:e.active}})},tw=(e,t)=>ge(Yx,e.fancytype).map((n=>n(e,t))),nw=(e,t,n,o)=>{const r={dom:Uy(e.label),optComponents:[A.some({dom:{tag:"div",classes:[Fb,zb]},components:Gy(e.items,o)})]};return Py({data:Ly({text:A.none(),...e}),enabled:e.enabled,getApi:e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>{em.set(e,!t),j(id(e.element,"*"),(n=>{e.getSystem().getByDom(n).each((e=>{e.hasConfigured(em)&&em.set(e,!t)}))}))}}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(o.itemBehaviours).getOr([])},r,t,n.providers)};var ow;!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(ow||(ow={}));const rw=(e,t,n,o,r)=>{const s=n.shared.providers,i=e=>r?{...e,shortcut:A.none(),icon:e.text.isSome()?A.none():e.icon}:e;switch(e.type){case"menuitem":return(a=e,Vo("menuitem",ry,a)).fold(Jb,(e=>A.some(Qx(i(e),t,s,o))));case"nestedmenuitem":return(e=>Vo("nestedmenuitem",sy,e))(e).fold(Jb,(e=>A.some(Zx(i(e),t,s,o,r))));case"togglemenuitem":return(e=>Vo("togglemenuitem",iy,e))(e).fold(Jb,(e=>A.some(ew(i(e),t,s,o))));case"separator":return(e=>Vo("separatormenuitem",Tv,e))(e).fold(Jb,(e=>A.some(Jx(e))));case"fancymenuitem":return(e=>Vo("fancymenuitem",oy,e))(e).fold(Jb,(e=>tw(i(e),n)));default:return console.error("Unknown item in general menu",e),A.none()}var a},sw=(e,t,n,o,r,s,i)=>{const a=1===o,l=!a||Xb(e);return xe(z(e,(e=>{switch(e.type){case"separator":return(o=e,Vo("Autocompleter.Separator",Tv,o)).fold(Jb,(e=>A.some(Jx(e))));case"cardmenuitem":return(e=>Vo("cardmenuitem",Qv,e))(e).fold(Jb,(e=>A.some(nw({...e,onAction:t=>{e.onAction(t),n(e.value,e.meta)}},r,s,{itemBehaviours:qy(e.meta,s),cardText:{matchText:t,highlightOn:i}}))));default:return(e=>Vo("Autocompleter.Item",Av,e))(e).fold(Jb,(e=>A.some(Xx(e,t,a,"normal",n,r,s,l))))}var o})))},iw=(e,t,n,o,r)=>{const s=Xb(t),i=xe(z(t,(e=>{const t=e=>rw(e,n,o,(e=>r?!be(e,"text"):s)(e),r);return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t({...e,enabled:!1}):t(e)})));return(r?Qb:Zb)(e,s,i,1,"normal")},aw=e=>sg.singleData(e.value,e),lw=(e,t)=>{const n=Cr(!1),o=Cr(!1),r=ca(ig.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Dl([bf("dismissAutocompleter",[Fs(ws(),(()=>l()))])]),lazySink:t.getSink})),s=()=>ig.isOpen(r),i=o.get,a=()=>{s()&&ig.hide(r)},l=()=>e.execCommand("mceAutocompleterClose"),c=o=>{const r=se(o,(e=>A.from(e.columns))).getOr(1);return G(o,(o=>{const s=o.items;return sw(s,o.matchText,((t,r)=>{const s=e.selection.getRng();((e,t)=>kb(Re.fromDom(t.startContainer)).map((t=>{const n=e.createRng();return n.selectNode(t.dom),n})))(e.dom,s).each((s=>{const i={hide:()=>l(),reload:t=>{a(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:t})}};n.set(!0),o.onAction(i,s,t,r),n.set(!1)}))}),r,Tb.BUBBLE_TO_SANDBOX,t,o.highlightOn)}))},d=(t,n)=>{var o;(o=Re.fromDom(e.getBody()),ba(o,Sb)).each((o=>{const s=se(t,(e=>A.from(e.columns))).getOr(1);ig.showAt(r,Zf.sketch(((e,t,n,o)=>{const r=n===ow.ContentFocus?Nm():Mm(),s=Vx(t,o),i=$b(o);return{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:i.selectedItem,item:i.item},movement:s,fakeFocus:n===ow.ContentFocus,focusManager:r,menuBehaviours:cy("auto"!==t?[]:[qs(((e,t)=>{ay(e,4,i.item).each((({numColumns:t,numRows:n})=>{af.setGridSize(e,n,t)}))}))])}})(Zb("autocompleter-value",!0,n,s,"normal"),s,ow.ContentFocus,"normal")),{anchor:{type:"node",root:Re.fromDom(e.getBody()),node:A.from(o)}}),ig.getContent(r).each(um.highlightFirst)}))},u=e=>{const t=c(e);t.length>0?d(e,t):a()};e.on("AutocompleterStart",(({lookupData:e})=>{o.set(!0),n.set(!1),u(e)})),e.on("AutocompleterUpdate",(({lookupData:e})=>u(e))),e.on("AutocompleterEnd",(()=>{a(),o.set(!1),n.set(!1)}));const h={cancelIfNecessary:l,isMenuOpen:s,isActive:i,isProcessingAction:n.get,getView:()=>ig.getContent(r)};Eb(h,e)},cw=(e,t,n)=>va(e,t,n).isSome(),dw=(e,t)=>{let n=null;return{cancel:()=>{null!==n&&(clearTimeout(n),n=null)},schedule:(...o)=>{n=setTimeout((()=>{e.apply(null,o),n=null}),t)}}},uw=e=>{const t=e.raw;return void 0===t.touches||1!==t.touches.length?A.none():A.some(t.touches[0])},hw=e=>{const t=ic(),n=Cr(!1),o=dw((t=>{e.triggerEvent(us(),t),n.set(!0)}),400),r=Er([{key:Br(),value:e=>(uw(e).each((r=>{o.cancel();const s={x:r.clientX,y:r.clientY,target:e.target};o.schedule(e),n.set(!1),t.set(s)})),A.none())},{key:Ir(),value:e=>(o.cancel(),uw(e).each((e=>{t.on((n=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),o=Math.abs(e.clientY-t.y);return n>5||o>5})(e,n)&&t.clear()}))})),A.none())},{key:Fr(),value:r=>{o.cancel();return t.get().filter((e=>He(e.target,r.target))).map((t=>n.get()?(r.prevent(),!1):e.triggerEvent(ds(),r)))}}]);return{fireIfReady:(e,t)=>ge(r,t).bind((t=>t(e)))}},mw=(e,t)=>{const n={stopBackspace:!0,...t},o=hw(n),r=z(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(t=>lc(e,t,(e=>{o.fireIfReady(e,t).each((t=>{t&&e.kill()}));n.triggerEvent(t,e)&&e.kill()})))),s=ic(),i=lc(e,"paste",(e=>{o.fireIfReady(e,"paste").each((t=>{t&&e.kill()}));n.triggerEvent("paste",e)&&e.kill(),s.set(setTimeout((()=>{n.triggerEvent(is(),e)}),0))})),a=lc(e,"keydown",(e=>{n.triggerEvent("keydown",e)?e.kill():n.stopBackspace&&(e=>e.raw.which===hm[0]&&!L(["input","textarea"],Me(e.target))&&!cw(e.target,'[contenteditable="true"]'))(e)&&e.prevent()})),l=lc(e,"focusin",(e=>{n.triggerEvent("focusin",e)&&e.kill()})),c=ic(),d=lc(e,"focusout",(e=>{n.triggerEvent("focusout",e)&&e.kill(),c.set(setTimeout((()=>{n.triggerEvent(ss(),e)}),0))}));return{unbind:()=>{j(r,(e=>{e.unbind()})),a.unbind(),l.unbind(),d.unbind(),i.unbind(),s.on(clearTimeout),c.on(clearTimeout)}}},pw=(e,t)=>{const n=ge(e,"target").getOr(t);return Cr(n)},fw=_r([{stopped:[]},{resume:["element"]},{complete:[]}]),gw=(e,t,n,o,r,s)=>{const i=e(t,o),a=((e,t)=>{const n=Cr(!1),o=Cr(!1);return{stop:()=>{n.set(!0)},cut:()=>{o.set(!0)},isStopped:n.get,isCut:o.get,event:e,setSource:t.set,getSource:t.get}})(n,r);return i.fold((()=>(s.logEventNoHandlers(t,o),fw.complete())),(e=>{const n=e.descHandler;return ki(n)(a),a.isStopped()?(s.logEventStopped(t,e.element,n.purpose),fw.stopped()):a.isCut()?(s.logEventCut(t,e.element,n.purpose),fw.complete()):Ke(e.element).fold((()=>(s.logNoParent(t,e.element,n.purpose),fw.complete())),(o=>(s.logEventResponse(t,e.element,n.purpose),fw.resume(o))))}))},bw=(e,t,n,o,r,s)=>gw(e,t,n,o,r,s).fold(O,(o=>bw(e,t,n,o,r,s)),E),vw=(e,t,n)=>{const o=(e=>{const t=Cr(!1);return{stop:()=>{t.set(!0)},cut:b,isStopped:t.get,isCut:E,event:e,setSource:S("Cannot set source of a broadcasted event"),getSource:S("Cannot get source of a broadcasted event")}})(t);return j(e,(e=>{const t=e.descHandler;ki(t)(o)})),o.isStopped()},yw=(e,t,n,o,r)=>{const s=pw(n,o);return bw(e,t,n,o,s,r)},xw=()=>{const e={};return{registerId:(t,n,o)=>{le(o,((o,r)=>{const s=void 0!==e[r]?e[r]:{};s[n]=((e,t)=>{return n=C.apply(void 0,[e.handler].concat(t)),o=e.purpose,{cHandler:n,purpose:o};var n,o})(o,t),e[r]=s}))},unregisterId:t=>{le(e,((e,n)=>{be(e,t)&&delete e[t]}))},filterByType:t=>ge(e,t).map((e=>me(e,((e,t)=>((e,t)=>({id:e,descHandler:t}))(t,e))))).getOr([]),find:(t,n,o)=>ge(e,n).bind((e=>Dr(o,(t=>((e,t)=>di(t).bind((t=>ge(e,t))).map((e=>((e,t)=>({element:e,descHandler:t}))(t,e))))(e,t)),t)))}},ww=()=>{const e=xw(),t={},n=e=>{const t=e.element;return di(t).getOrThunk((()=>((e,t)=>{const n=ri(ai+e);return ci(t,n),n})("uid-",e.element)))},o=n=>{di(n.element).each((n=>{delete t[n],e.unregisterId(n)}))};return{find:(t,n,o)=>e.find(t,n,o),filter:t=>e.filterByType(t),register:r=>{const s=n(r);ve(t,s)&&((e,n)=>{const r=t[n];if(r!==e)throw new Error('The tagId "'+n+'" is already used by: '+ei(r.element)+"\nCannot use it for: "+ei(e.element)+"\nThe conflicting element is"+(lt(r.element)?" ":" not ")+"already in the DOM");o(e)})(r,s);const i=[r];e.registerId(i,s,r.events),t[s]=r},unregister:o,getById:e=>ge(t,e)}},Cw=Lh({name:"Container",factory:e=>{const{attributes:t,...n}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...t},...n},components:e.components,behaviours:Nu(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[mr("components",[]),Mu("containerBehaviours",[]),mr("events",{}),mr("domModification",{}),mr("eventOrder",{})]}),_w=e=>{const t=t=>Ke(e.element).fold(O,(e=>He(t,e))),n=ww(),o=(e,o)=>n.find(t,e,o),r=mw(e.element,{triggerEvent:(e,t)=>Ta(e,t.target,(n=>((e,t,n,o)=>yw(e,t,n,n.target,o))(o,e,t,n)))}),s={debugInfo:y("real"),triggerEvent:(e,t,n)=>{Ta(e,t,(r=>yw(o,e,n,t,r)))},triggerFocus:(e,t)=>{di(e).fold((()=>{Fl(e)}),(n=>{Ta(rs(),e,(n=>(((e,t,n,o,r)=>{const s=pw(n,o);gw(e,t,n,o,s,r)})(o,rs(),{originator:t,kill:b,prevent:b,target:e},e,n),!1)))}))},triggerEscape:(e,t)=>{s.triggerEvent("keydown",e.element,t.event)},getByUid:e=>p(e),getByDom:e=>f(e),build:ca,buildOrPatch:la,addToGui:e=>{l(e)},removeFromGui:e=>{c(e)},addToWorld:e=>{i(e)},removeFromWorld:e=>{a(e)},broadcast:e=>{u(e)},broadcastOn:(e,t)=>{h(e,t)},broadcastEvent:(e,t)=>{m(e,t)},isConnected:O},i=e=>{e.connect(s),Le(e.element)||(n.register(e),j(e.components(),i),s.triggerEvent(ps(),e.element,{target:e.element}))},a=e=>{Le(e.element)||(j(e.components(),a),n.unregister(e)),e.disconnect()},l=t=>{Kd(e,t)},c=e=>{Xd(e)},d=e=>{const t=n.filter(as());j(t,(t=>{const n=t.descHandler;ki(n)(e)}))},u=e=>{d({universal:!0,data:e})},h=(e,t)=>{d({universal:!1,channels:e,data:t})},m=(e,t)=>{const o=n.filter(e);return vw(o,t)},p=e=>n.getById(e).fold((()=>$n.error(new Error('Could not find component with uid: "'+e+'" in system.'))),$n.value),f=e=>{const t=di(e).getOr("not found");return p(t)};return i(e),{root:e,element:e.element,destroy:()=>{r.unbind(),Tn(e.element)},add:l,remove:c,getByUid:p,getByDom:f,addToWorld:i,removeFromWorld:a,broadcast:u,broadcastOn:h,broadcastEvent:m}},Sw=y([mr("prefix","form-field"),Mu("fieldBehaviours",[jh,Ru])]),kw=y([ch({schema:[Xo("dom")],name:"label"}),ch({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[Xo("text")],name:"aria-descriptor"}),ah({factory:{sketch:e=>{const t=Sr(e,["factory"]);return e.factory.sketch(t)}},schema:[Xo("factory")],name:"field"})]),Ew=Bh({name:"FormField",configFields:Sw(),partFields:kw(),factory:(e,t,n,o)=>{const r=Pu(e.fieldBehaviours,[jh.config({find:t=>wh(t,e,"field")}),Ru.config({store:{mode:"manual",getValue:e=>jh.getCurrent(e).bind(Ru.getValue),setValue:(e,t)=>{jh.getCurrent(e).each((e=>{Ru.setValue(e,t)}))}}})]),s=Ls([qs(((t,n)=>{const o=_h(t,e,["label","field","aria-descriptor"]);o.field().each((t=>{const n=ri(e.prefix);o.label().each((e=>{ht(e.element,"for",n),ht(t.element,"id",n)})),o["aria-descriptor"]().each((n=>{const o=ri(e.prefix);ht(n.element,"id",o),ht(t.element,"aria-describedby",o)}))}))}))]),i={getField:t=>wh(t,e,"field"),getLabel:t=>wh(t,e,"label")};return{uid:e.uid,dom:e.dom,components:t,behaviours:r,events:s,apis:i}},apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var Ow=Object.freeze({__proto__:null,exhibit:(e,t)=>Si({attributes:Er([{key:t.tabAttr,value:"true"}])})}),Tw=[mr("tabAttr","data-alloy-tabstop")];const Aw=Ml({fields:Tw,name:"tabstopping",active:Ow});var Dw=tinymce.util.Tools.resolve("tinymce.html.Entities");const Rw=(e,t,n,o)=>{const r=Mw(e,t,n,o);return Ew.sketch(r)},Mw=(e,t,n,o)=>({dom:Nw(n),components:e.toArray().concat([t]),fieldBehaviours:Dl(o)}),Nw=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),Pw=(e,t)=>Ew.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[sa(t.translate(e))]}),Lw=ri("form-component-change"),Bw=ri("form-close"),Iw=ri("form-cancel"),Fw=ri("form-action"),zw=ri("form-submit"),jw=ri("form-block"),Hw=ri("form-unblock"),Vw=ri("form-tabchange"),$w=ri("form-resize"),Uw=(e,t,n)=>{const o=e.label.map((e=>Pw(e,t))),r=e=>(t,n)=>{va(n.event.target,"[data-collection-item-value]").each((o=>{e(t,n,o,pt(o,"data-collection-item-value"))}))},s=r(((n,o,r,s)=>{o.stop(),t.isDisabled()||Ds(n,Fw,{name:e.name,value:s})})),i=[Fs(Ur(),r(((e,t,n)=>{Fl(n)}))),Fs(Jr(),s),Fs(ds(),s),Fs(Wr(),r(((e,t,n)=>{ba(e.element,"."+Ib).each((e=>{Hi(e,Ib)})),ji(n,Ib)}))),Fs(qr(),r((e=>{ba(e.element,"."+Ib).each((e=>{Hi(e,Ib)}))}))),Ys(r(((t,n,o,r)=>{Ds(t,Fw,{name:e.name,value:r})})))],a=(e,t)=>z(id(e.element,".tox-collection__item"),t),l=Ew.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:x},behaviours:Dl([em.config({disabled:t.isDisabled,onDisabled:e=>{a(e,(e=>{ji(e,"tox-collection__item--state-disabled"),ht(e,"aria-disabled",!0)}))},onEnabled:e=>{a(e,(e=>{Hi(e,"tox-collection__item--state-disabled"),bt(e,"aria-disabled")}))}}),_y(),gf.config({}),Ru.config({store:{mode:"memory",initialValue:n.getOr([])},onSetValue:(n,o)=>{((n,o)=>{const r=z(o,(n=>{const o=dg.translate(n.text),r=1===e.columns?`<div class="tox-collection__item-label">${o}</div>`:"",s=`<div class="tox-collection__item-icon">${n.icon}</div>`,i={_:" "," - ":" ","-":" "},a=o.replace(/\_| \- |\-/g,(e=>i[e]));return`<div class="tox-collection__item${t.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${Dw.encodeAllRaw(n.value)}" title="${a}" aria-label="${a}">${s}${r}</div>`})),s="auto"!==e.columns&&e.columns>1?F(r,e.columns):[r],i=z(s,(e=>`<div class="tox-collection__group">${e.join("")}</div>`));Js(n.element,i.join(""))})(n,o),"auto"===e.columns&&ay(n,5,"tox-collection__item").each((({numRows:e,numColumns:t})=>{af.setGridSize(n,e,t)})),As(n,$w)}}),Aw.config({}),af.config((c=e.columns,d="normal",1===c?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===c?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===d?".tox-swatches__row":".tox-collection__group",cell:"color"===d?".tox-swatch":`.${Db}`}})),bf("collection-events",i)]),eventOrder:{[ls()]:["disabling","alloy.base.behaviour","collection-events"]}});var c,d;return Rw(o,l,["tox-form__group--collection"],[])},Ww=y([sr("data"),mr("inputAttributes",{}),mr("inputStyles",{}),mr("tag","input"),mr("inputClasses",[]),Ia("onSetValue"),mr("styles",{}),mr("eventOrder",{}),Mu("inputBehaviours",[Ru,Cf]),mr("selectOnFocus",!0)]),qw=e=>Dl([Cf.config({onFocus:e.selectOnFocus?e=>{const t=e.element,n=qi(t);t.dom.setSelectionRange(0,n.length)}:b})]),Kw=e=>({...qw(e),...Pu(e.inputBehaviours,[Ru.config({store:{mode:"manual",...e.data.map((e=>({initialValue:e}))).getOr({}),getValue:e=>qi(e.element),setValue:(e,t)=>{qi(e.element)!==t&&Ki(e.element,t)}},onSetValue:e.onSetValue})])}),Gw=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),Yw=Lh({name:"Input",configFields:Ww(),factory:(e,t)=>({uid:e.uid,dom:Gw(e),components:[],behaviours:Kw(e),eventOrder:e.eventOrder})}),Xw=e=>{let t=A.none(),n=[];const o=e=>{r()?i(e):n.push(e)},r=()=>t.isSome(),s=e=>{j(e,i)},i=e=>{t.each((t=>{setTimeout((()=>{e(t)}),0)}))};return e((e=>{r()||(t=A.some(e),s(n),n=[])})),{get:o,map:e=>Xw((t=>{o((n=>{t(e(n))}))})),isReady:r}},Jw={nu:Xw,pure:e=>Xw((t=>{t(e)}))},Qw=e=>{setTimeout((()=>{throw e}),0)},Zw=e=>{const t=t=>{e().then(t,Qw)};return{map:t=>Zw((()=>e().then(t))),bind:t=>Zw((()=>e().then((e=>t(e).toPromise())))),anonBind:t=>Zw((()=>e().then((()=>t.toPromise())))),toLazy:()=>Jw.nu(t),toCached:()=>{let t=null;return Zw((()=>(null===t&&(t=e()),t)))},toPromise:e,get:t}},eC=e=>Zw((()=>new Promise(e))),tC=e=>Zw((()=>Promise.resolve(e))),nC=["input","textarea"],oC=e=>{const t=Me(e);return L(nC,t)},rC=(e,t)=>{const n=t.getRoot(e).getOr(e.element);Hi(n,t.invalidClass),t.notify.each((t=>{oC(e.element)&&ht(e.element,"aria-invalid",!1),t.getContainer(e).each((e=>{Js(e,t.validHtml)})),t.onValid(e)}))},sC=(e,t,n,o)=>{const r=t.getRoot(e).getOr(e.element);ji(r,t.invalidClass),t.notify.each((t=>{oC(e.element)&&ht(e.element,"aria-invalid",!0),t.getContainer(e).each((e=>{Js(e,o)})),t.onInvalid(e,o)}))},iC=(e,t,n)=>t.validator.fold((()=>tC($n.value(!0))),(t=>t.validate(e))),aC=(e,t,n)=>(t.notify.each((t=>{t.onValidate(e)})),iC(e,t).map((n=>e.getSystem().isConnected()?n.fold((n=>(sC(e,t,0,n),$n.error(n))),(n=>(rC(e,t),$n.value(n)))):$n.error("No longer in system"))));var lC=Object.freeze({__proto__:null,markValid:rC,markInvalid:sC,query:iC,run:aC,isInvalid:(e,t)=>{const n=t.getRoot(e).getOr(e.element);return Vi(n,t.invalidClass)}});var cC=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map((t=>Ls([Fs(t.onEvent,(t=>{aC(t,e).get(x)}))].concat(t.validateOnLoad?[qs((t=>{aC(t,e).get(b)}))]:[])))).getOr({})}),dC=[Xo("invalidClass"),mr("getRoot",A.none),hr("notify",[mr("aria","alert"),mr("getContainer",A.none),mr("validHtml",""),Ia("onValid"),Ia("onInvalid"),Ia("onValidate")]),hr("validator",[Xo("validate"),mr("onEvent","input"),mr("validateOnLoad",!0)])];const uC=Ml({fields:dC,name:"invalidating",active:cC,apis:lC,extra:{validation:e=>t=>{const n=Ru.getValue(t);return tC(e(n))}}});var hC=Object.freeze({__proto__:null,getCoupled:(e,t,n,o)=>n.getOrCreate(e,t,o)}),mC=[Jo("others",Ho($n.value,Do()))];var pC=Object.freeze({__proto__:null,init:()=>{const e={},t=y({});return Ci({readState:t,getOrCreate:(t,n,o)=>{const r=ie(n.others);if(r)return ge(e,o).getOrThunk((()=>{const r=ge(n.others,o).getOrDie("No information found for coupled component: "+o)(t),s=t.getSystem().build(r);return e[o]=s,s}));throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}});const fC=Ml({fields:mC,name:"coupling",apis:hC,state:pC}),gC=y("sink"),bC=y(ch({name:gC(),overrides:y({dom:{tag:"div"},behaviours:Dl([zd.config({useFixed:O})]),events:Ls([$s(Kr()),$s(jr()),$s(Jr())])})}));var vC;!function(e){e[e.HighlightFirst=0]="HighlightFirst",e[e.HighlightNone=1]="HighlightNone"}(vC||(vC={}));const yC=(e,t)=>{const n=e.getHotspot(t).getOr(t),o="hotspot",r=e.getAnchorOverrides();return e.layouts.fold((()=>({type:o,hotspot:n,overrides:r})),(e=>({type:o,hotspot:n,overrides:r,layouts:e})))},xC=(e,t,n,o,r,s,i)=>{const a=((e,t,n,o,r,s,i)=>{const a=((e,t,n)=>(0,e.fetch)(n).map(t))(e,t,o),l=SC(o,e);return a.map((e=>e.bind((e=>A.from(sg.sketch({...s.menu(),uid:ui(""),data:e,highlightImmediately:i===vC.HighlightFirst,onOpenMenu:(e,t)=>{const o=l().getOrDie();zd.position(o,t,{anchor:n}),uu.decloak(r)},onOpenSubmenu:(e,t,n)=>{const o=l().getOrDie();zd.position(o,n,{anchor:{type:"submenu",item:t}}),uu.decloak(r)},onRepositionMenu:(e,t,o)=>{const r=l().getOrDie();zd.position(r,t,{anchor:n}),j(o,(e=>{zd.position(r,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})}))},onEscape:()=>(Cf.focus(o),uu.close(r),A.some(!0))}))))))})(e,t,yC(e,n),n,o,r,i);return a.map((e=>(e.fold((()=>{uu.isOpen(o)&&uu.close(o)}),(e=>{uu.cloak(o),uu.open(o,e),s(o)})),o)))},wC=(e,t,n,o,r,s,i)=>(uu.close(o),tC(o)),CC=(e,t,n,o,r,s)=>{const i=fC.getCoupled(n,"sandbox");return(uu.isOpen(i)?wC:xC)(e,t,n,i,o,r,s)},_C=(e,t,n)=>{const o=jh.getCurrent(t).getOr(t),r=jt(e.element);n?xt(o.element,"min-width",r+"px"):((e,t)=>{zt.set(e,t)})(o.element,r)},SC=(e,t)=>e.getSystem().getByUid(t.uid+"-"+gC()).map((e=>()=>$n.value(e))).getOrThunk((()=>t.lazySink.fold((()=>()=>$n.error(new Error("No internal sink is specified, nor could an external sink be found"))),(t=>()=>t(e))))),kC=e=>{uu.getState(e).each((e=>{sg.repositionMenus(e)}))},EC=(e,t,n)=>{const o=xa(),r=SC(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Bu(e.sandboxBehaviours,[Ru.config({store:{mode:"memory",initialValue:t}}),uu.config({onOpen:(r,s)=>{const i=yC(e,t);o.link(t.element),e.matchWidth&&_C(i.hotspot,s,e.useMinWidth),e.onOpen(i,r,s),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,s)},onClose:(e,r)=>{o.unlink(t.element),void 0!==n&&void 0!==n.onClose&&n.onClose(e,r)},isPartOf:(e,n,o)=>Ca(n,o)||Ca(t,o),getAttachPoint:()=>r().getOrDie()}),jh.config({find:e=>uu.getState(e).bind((e=>jh.getCurrent(e)))}),Bl.config({channels:{...gu({isExtraPart:E}),...vu({doReposition:kC})}})])}},OC=e=>{const t=fC.getCoupled(e,"sandbox");kC(t)},TC=()=>[mr("sandboxClasses",[]),Lu("sandboxBehaviours",[jh,Bl,uu,Ru])],AC=y([Xo("dom"),Xo("fetch"),Ia("onOpen"),Fa("onExecute"),mr("getHotspot",A.some),mr("getAnchorOverrides",y({})),Nc(),Mu("dropdownBehaviours",[Pf,fC,af,Cf]),Xo("toggleClass"),mr("eventOrder",{}),sr("lazySink"),mr("matchWidth",!1),mr("useMinWidth",!1),sr("role")].concat(TC())),DC=y([lh({schema:[Pa()],name:"menu",defaults:e=>({onExecute:e.onExecute})}),bC()]),RC=Bh({name:"Dropdown",configFields:AC(),partFields:DC(),factory:(e,t,n,o)=>{const r=e=>{uu.getState(e).each((e=>{sg.highlightPrimary(e)}))},s={expand:t=>{Pf.isOn(t)||CC(e,x,t,o,b,vC.HighlightNone).get(b)},open:t=>{Pf.isOn(t)||CC(e,x,t,o,b,vC.HighlightFirst).get(b)},isOpen:Pf.isOn,close:t=>{Pf.isOn(t)&&CC(e,x,t,o,b,vC.HighlightFirst).get(b)},repositionMenus:e=>{Pf.isOn(e)&&OC(e)}},i=(e,t)=>(Rs(e),A.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.dropdownBehaviours,[Pf.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),fC.config({others:{sandbox:t=>EC(e,t,{onOpen:()=>Pf.on(t),onClose:()=>Pf.off(t)})}}),af.config({mode:"special",onSpace:i,onEnter:i,onDown:(e,t)=>{if(RC.isOpen(e)){const t=fC.getCoupled(e,"sandbox");r(t)}else RC.open(e);return A.some(!0)},onEscape:(e,t)=>RC.isOpen(e)?(RC.close(e),A.some(!0)):A.none()}),Cf.config({})]),events:If(A.some((t=>{CC(e,x,t,o,r,vC.HighlightFirst).get(b)}))),eventOrder:{...e.eventOrder,[ls()]:["disabling","toggling","alloy.base.behaviour"]},apis:s,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold((()=>({})),(e=>({role:e}))),..."button"===e.dom.tag?{type:(a="type",ge(e.dom,"attributes").bind((e=>ge(e,a)))).getOr("button")}:{}}}};var a},apis:{open:(e,t)=>e.open(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}});const MC=Ml({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Ls([Bs(ts(),O)]),exhibit:()=>Si({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),NC=ri("color-input-change"),PC=ri("color-swatch-change"),LC=ri("color-picker-cancel"),BC=(e,t,n,o)=>{const r=Ew.parts.field({factory:Yw,inputClasses:["tox-textfield"],data:o,onSetValue:e=>uC.run(e).get(b),inputBehaviours:Dl([em.config({disabled:t.providers.isDisabled}),_y(),Aw.config({}),uC.config({invalidClass:"tox-textbox-field-invalid",getRoot:e=>Ge(e.element),notify:{onValid:e=>{const t=Ru.getValue(e);Ds(e,NC,{color:t})}},validator:{validateOnLoad:!1,validate:e=>{const t=Ru.getValue(e);if(0===t.length)return tC($n.value(!0));{const e=Re.fromTag("span");xt(e,"background-color",t);const n=kt(e,"background-color").fold((()=>$n.error("blah")),(e=>$n.value(t)));return tC(n)}}}})]),selectOnFocus:!1}),s=e.label.map((e=>Pw(e,t.providers))),i=(e,t)=>{Ds(e,PC,{value:t})},a=cg(((e,t)=>RC.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Dl([ky(t.providers.isDisabled),_y(),MC.config({}),Aw.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:n=>eC((t=>e.fetch(t))).map((o=>A.from(aw(ao(jx(ri("menu-value"),o,(t=>{e.onItemAction(n,t)}),e.columns,e.presets,Tb.CLOSE_ON_EXECUTE,E,t.providers),{movement:Vx(e.columns,e.presets)}))))),parts:{menu:qb(0,0,e.presets)}}))({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ul,dl,fl],onLtr:()=>[dl,ul,fl]},components:[],fetch:Lx(n.getColors(),n.hasCustomColors()),columns:n.getColorCols(),presets:"color",onItemAction:(e,t)=>{a.getOpt(e).each((e=>{"custom"===t?n.colorPicker((t=>{t.fold((()=>As(e,LC)),(t=>{i(e,t),Dx(t)}))}),"#ffffff"):i(e,"remove"===t?"":t)}))}},t));return Ew.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:s.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,a.asSpec()]}]),fieldBehaviours:Dl([bf("form-field-events",[Fs(NC,((t,n)=>{a.getOpt(t).each((e=>{xt(e.element,"background-color",n.event.color)})),Ds(t,Lw,{name:e.name})})),Fs(PC,((e,t)=>{Ew.getField(e).each((n=>{Ru.setValue(n,t.event.value),jh.getCurrent(e).each(Cf.focus)}))})),Fs(LC,((e,t)=>{Ew.getField(e).each((t=>{jh.getCurrent(e).each(Cf.focus)}))}))])])})},IC=ch({schema:[Xo("dom")],name:"label"}),FC=e=>ch({name:e+"-edge",overrides:t=>t.model.manager.edgeActions[e].fold((()=>({})),(e=>({events:Ls([zs(Br(),((t,n,o)=>e(t,o)),[t]),zs(jr(),((t,n,o)=>e(t,o)),[t]),zs(Hr(),((t,n,o)=>{o.mouseIsDown.get()&&e(t,o)}),[t])])})))}),zC=FC("top-left"),jC=FC("top"),HC=FC("top-right"),VC=FC("right"),$C=FC("bottom-right"),UC=FC("bottom"),WC=FC("bottom-left"),qC=FC("left"),KC=ah({name:"thumb",defaults:y({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Ls([Hs(Br(),e,"spectrum"),Hs(Ir(),e,"spectrum"),Hs(Fr(),e,"spectrum"),Hs(jr(),e,"spectrum"),Hs(Hr(),e,"spectrum"),Hs($r(),e,"spectrum")])})}),GC=ah({schema:[Go("mouseIsDown",(()=>Cr(!1)))],name:"spectrum",overrides:e=>{const t=e.model.manager,n=(n,o)=>t.getValueFromEvent(o).map((o=>t.setValueFrom(n,e,o)));return{behaviours:Dl([af.config({mode:"special",onLeft:n=>t.onLeft(n,e),onRight:n=>t.onRight(n,e),onUp:n=>t.onUp(n,e),onDown:n=>t.onDown(n,e)}),Cf.config({})]),events:Ls([Fs(Br(),n),Fs(Ir(),n),Fs(jr(),n),Fs(Hr(),((t,o)=>{e.mouseIsDown.get()&&n(t,o)}))])}}});var YC=[IC,qC,VC,jC,UC,zC,HC,WC,$C,KC,GC];const XC=y("slider.change.value"),JC=e=>{const t=e.event.raw;if((e=>-1!==e.type.indexOf("touch"))(t)){const e=t;return void 0!==e.touches&&1===e.touches.length?A.some(e.touches[0]).map((e=>Lt(e.clientX,e.clientY))):A.none()}{const e=t;return void 0!==e.clientX?A.some(e).map((e=>Lt(e.clientX,e.clientY))):A.none()}},QC=e=>e.model.minX,ZC=e=>e.model.minY,e_=e=>e.model.minX-1,t_=e=>e.model.minY-1,n_=e=>e.model.maxX,o_=e=>e.model.maxY,r_=e=>e.model.maxX+1,s_=e=>e.model.maxY+1,i_=(e,t,n)=>t(e)-n(e),a_=e=>i_(e,n_,QC),l_=e=>i_(e,o_,ZC),c_=e=>a_(e)/2,d_=e=>l_(e)/2,u_=e=>e.stepSize,h_=e=>e.snapToGrid,m_=e=>e.snapStart,p_=e=>e.rounded,f_=(e,t)=>void 0!==e[t+"-edge"],g_=e=>f_(e,"left"),b_=e=>f_(e,"right"),v_=e=>f_(e,"top"),y_=e=>f_(e,"bottom"),x_=e=>e.model.value.get(),w_=(e,t)=>({x:e,y:t}),C_=(e,t)=>{Ds(e,XC(),{value:t})},__=(e,t,n,o)=>e<t?e:e>n?n:e===t?t-1:Math.max(t,e-o),S_=(e,t,n,o)=>e>n?e:e<t?t:e===n?n+1:Math.min(n,e+o),k_=(e,t,n)=>Math.max(t,Math.min(n,e)),E_=e=>{const{min:t,max:n,range:o,value:r,step:s,snap:i,snapStart:a,rounded:l,hasMinEdge:c,hasMaxEdge:d,minBound:u,maxBound:h,screenRange:m}=e,p=c?t-1:t,f=d?n+1:n;if(r<u)return p;if(r>h)return f;{const e=((e,t,n)=>Math.min(n,Math.max(e,t))-t)(r,u,h),c=k_(e/m*o+t,p,f);return i&&c>=t&&c<=n?((e,t,n,o,r)=>r.fold((()=>{const r=e-t,s=Math.round(r/o)*o;return k_(t+s,t-1,n+1)}),(t=>{const r=(e-t)%o,s=Math.round(r/o),i=Math.floor((e-t)/o),a=Math.floor((n-t)/o),l=t+Math.min(a,i+s)*o;return Math.max(t,l)})))(c,t,n,s,a):l?Math.round(c):c}},O_=e=>{const{min:t,max:n,range:o,value:r,hasMinEdge:s,hasMaxEdge:i,maxBound:a,maxOffset:l,centerMinEdge:c,centerMaxEdge:d}=e;return r<t?s?0:c:r>n?i?a:d:(r-t)/o*l},T_="top",A_="right",D_="bottom",R_="left",M_=e=>e.element.dom.getBoundingClientRect(),N_=(e,t)=>e[t],P_=e=>{const t=M_(e);return N_(t,R_)},L_=e=>{const t=M_(e);return N_(t,A_)},B_=e=>{const t=M_(e);return N_(t,T_)},I_=e=>{const t=M_(e);return N_(t,D_)},F_=e=>{const t=M_(e);return N_(t,"width")},z_=e=>{const t=M_(e);return N_(t,"height")},j_=(e,t,n)=>(e+t)/2-n,H_=(e,t)=>{const n=M_(e),o=M_(t),r=N_(n,R_),s=N_(n,A_),i=N_(o,R_);return j_(r,s,i)},V_=(e,t)=>{const n=M_(e),o=M_(t),r=N_(n,T_),s=N_(n,D_),i=N_(o,T_);return j_(r,s,i)},$_=(e,t)=>{Ds(e,XC(),{value:t})},U_=(e,t,n)=>{const o={min:QC(t),max:n_(t),range:a_(t),value:n,step:u_(t),snap:h_(t),snapStart:m_(t),rounded:p_(t),hasMinEdge:g_(t),hasMaxEdge:b_(t),minBound:P_(e),maxBound:L_(e),screenRange:F_(e)};return E_(o)},W_=e=>(t,n)=>((e,t,n)=>{const o=(e>0?S_:__)(x_(n),QC(n),n_(n),u_(n));return $_(t,o),A.some(o)})(e,t,n).map(O),q_=(e,t,n,o,r,s)=>{const i=((e,t,n,o,r)=>{const s=F_(e),i=o.bind((t=>A.some(H_(t,e)))).getOr(0),a=r.bind((t=>A.some(H_(t,e)))).getOr(s),l={min:QC(t),max:n_(t),range:a_(t),value:n,hasMinEdge:g_(t),hasMaxEdge:b_(t),minBound:P_(e),minOffset:0,maxBound:L_(e),maxOffset:s,centerMinEdge:i,centerMaxEdge:a};return O_(l)})(t,s,n,o,r);return P_(t)-P_(e)+i},K_=W_(-1),G_=W_(1),Y_=A.none,X_=A.none,J_={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(((e,t)=>{C_(e,r_(t))})),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(((e,t)=>{C_(e,e_(t))}))};var Q_=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const o=U_(e,t,n);return $_(e,o),o},setToMin:(e,t)=>{const n=QC(t);$_(e,n)},setToMax:(e,t)=>{const n=n_(t);$_(e,n)},findValueOfOffset:U_,getValueFromEvent:e=>JC(e).map((e=>e.left)),findPositionOfValue:q_,setPositionFromValue:(e,t,n,o)=>{const r=x_(n),s=q_(e,o.getSpectrum(e),r,o.getLeftEdge(e),o.getRightEdge(e),n),i=jt(t.element)/2;xt(t.element,"left",s-i+"px")},onLeft:K_,onRight:G_,onUp:Y_,onDown:X_,edgeActions:J_});const Z_=(e,t)=>{Ds(e,XC(),{value:t})},eS=(e,t,n)=>{const o={min:ZC(t),max:o_(t),range:l_(t),value:n,step:u_(t),snap:h_(t),snapStart:m_(t),rounded:p_(t),hasMinEdge:v_(t),hasMaxEdge:y_(t),minBound:B_(e),maxBound:I_(e),screenRange:z_(e)};return E_(o)},tS=e=>(t,n)=>((e,t,n)=>{const o=(e>0?S_:__)(x_(n),ZC(n),o_(n),u_(n));return Z_(t,o),A.some(o)})(e,t,n).map(O),nS=(e,t,n,o,r,s)=>{const i=((e,t,n,o,r)=>{const s=z_(e),i=o.bind((t=>A.some(V_(t,e)))).getOr(0),a=r.bind((t=>A.some(V_(t,e)))).getOr(s),l={min:ZC(t),max:o_(t),range:l_(t),value:n,hasMinEdge:v_(t),hasMaxEdge:y_(t),minBound:B_(e),minOffset:0,maxBound:I_(e),maxOffset:s,centerMinEdge:i,centerMaxEdge:a};return O_(l)})(t,s,n,o,r);return B_(t)-B_(e)+i},oS=A.none,rS=A.none,sS=tS(-1),iS=tS(1),aS={"top-left":A.none(),top:A.some(((e,t)=>{C_(e,t_(t))})),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(((e,t)=>{C_(e,s_(t))})),"bottom-left":A.none(),left:A.none()};var lS=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const o=eS(e,t,n);return Z_(e,o),o},setToMin:(e,t)=>{const n=ZC(t);Z_(e,n)},setToMax:(e,t)=>{const n=o_(t);Z_(e,n)},findValueOfOffset:eS,getValueFromEvent:e=>JC(e).map((e=>e.top)),findPositionOfValue:nS,setPositionFromValue:(e,t,n,o)=>{const r=x_(n),s=nS(e,o.getSpectrum(e),r,o.getTopEdge(e),o.getBottomEdge(e),n),i=Mt(t.element)/2;xt(t.element,"top",s-i+"px")},onLeft:oS,onRight:rS,onUp:sS,onDown:iS,edgeActions:aS});const cS=(e,t)=>{Ds(e,XC(),{value:t})},dS=(e,t)=>({x:e,y:t}),uS=(e,t)=>(n,o)=>((e,t,n,o)=>{const r=e>0?S_:__,s=t?x_(o).x:r(x_(o).x,QC(o),n_(o),u_(o)),i=t?r(x_(o).y,ZC(o),o_(o),u_(o)):x_(o).y;return cS(n,dS(s,i)),A.some(s)})(e,t,n,o).map(O),hS=uS(-1,!1),mS=uS(1,!1),pS=uS(-1,!0),fS=uS(1,!0),gS={"top-left":A.some(((e,t)=>{C_(e,w_(e_(t),t_(t)))})),top:A.some(((e,t)=>{C_(e,w_(c_(t),t_(t)))})),"top-right":A.some(((e,t)=>{C_(e,w_(r_(t),t_(t)))})),right:A.some(((e,t)=>{C_(e,w_(r_(t),d_(t)))})),"bottom-right":A.some(((e,t)=>{C_(e,w_(r_(t),s_(t)))})),bottom:A.some(((e,t)=>{C_(e,w_(c_(t),s_(t)))})),"bottom-left":A.some(((e,t)=>{C_(e,w_(e_(t),s_(t)))})),left:A.some(((e,t)=>{C_(e,w_(e_(t),d_(t)))}))};var bS=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const o=U_(e,t,n.left),r=eS(e,t,n.top),s=dS(o,r);return cS(e,s),s},setToMin:(e,t)=>{const n=QC(t),o=ZC(t);cS(e,dS(n,o))},setToMax:(e,t)=>{const n=n_(t),o=o_(t);cS(e,dS(n,o))},getValueFromEvent:e=>JC(e),setPositionFromValue:(e,t,n,o)=>{const r=x_(n),s=q_(e,o.getSpectrum(e),r.x,o.getLeftEdge(e),o.getRightEdge(e),n),i=nS(e,o.getSpectrum(e),r.y,o.getTopEdge(e),o.getBottomEdge(e),n),a=jt(t.element)/2,l=Mt(t.element)/2;xt(t.element,"left",s-a+"px"),xt(t.element,"top",i-l+"px")},onLeft:hS,onRight:mS,onUp:pS,onDown:fS,edgeActions:gS});const vS=Bh({name:"Slider",configFields:[mr("stepSize",1),mr("onChange",b),mr("onChoose",b),mr("onInit",b),mr("onDragStart",b),mr("onDragEnd",b),mr("snapToGrid",!1),mr("rounded",!0),sr("snapStart"),Jo("model",qo("mode",{x:[mr("minX",0),mr("maxX",100),Go("value",(e=>Cr(e.mode.minX))),Xo("getInitialValue"),Ha("manager",Q_)],y:[mr("minY",0),mr("maxY",100),Go("value",(e=>Cr(e.mode.minY))),Xo("getInitialValue"),Ha("manager",lS)],xy:[mr("minX",0),mr("maxX",100),mr("minY",0),mr("maxY",100),Go("value",(e=>Cr({x:e.mode.minX,y:e.mode.minY}))),Xo("getInitialValue"),Ha("manager",bS)]})),Mu("sliderBehaviours",[af,Ru]),Go("mouseIsDown",(()=>Cr(!1)))],partFields:YC,factory:(e,t,n,o)=>{const r=t=>Ch(t,e,"thumb"),s=t=>Ch(t,e,"spectrum"),i=t=>wh(t,e,"left-edge"),a=t=>wh(t,e,"right-edge"),l=t=>wh(t,e,"top-edge"),c=t=>wh(t,e,"bottom-edge"),d=e.model,u=d.manager,h=(t,n)=>{u.setPositionFromValue(t,n,e,{getLeftEdge:i,getRightEdge:a,getTopEdge:l,getBottomEdge:c,getSpectrum:s})},m=(e,t)=>{d.value.set(t);const n=r(e);h(e,n)},p=t=>{const n=e.mouseIsDown.get();e.mouseIsDown.set(!1),n&&wh(t,e,"thumb").each((n=>{const o=d.value.get();e.onChoose(t,n,o)}))},f=(t,n)=>{n.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,r(t))},g=(t,n)=>{n.stop(),e.onDragEnd(t,r(t)),p(t)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.sliderBehaviours,[af.config({mode:"special",focusIn:t=>wh(t,e,"spectrum").map(af.focusIn).map(O)}),Ru.config({store:{mode:"manual",getValue:e=>d.value.get(),setValue:m}}),Bl.config({channels:{[pu()]:{onReceive:p}}})]),events:Ls([Fs(XC(),((t,n)=>{((t,n)=>{m(t,n);const o=r(t);e.onChange(t,o,n),A.some(!0)})(t,n.event.value)})),qs(((t,n)=>{const o=d.getInitialValue();d.value.set(o);const i=r(t);h(t,i);const a=s(t);e.onInit(t,i,a,d.value.get())})),Fs(Br(),f),Fs(Fr(),g),Fs(jr(),f),Fs($r(),g)]),apis:{resetToMin:t=>{u.setToMin(t,e)},resetToMax:t=>{u.setToMax(t,e)},setValue:m,refresh:h},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,n)=>{e.setValue(t,n)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),yS=ri("rgb-hex-update"),xS=ri("slider-update"),wS=ri("palette-update"),CS="form",_S=[Mu("formBehaviours",[Ru])],SS=e=>"<alloy.field."+e+">",kS=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.formBehaviours,[Ru.config({store:{mode:"manual",getValue:t=>{const n=Sh(t,e);return ce(n,((e,t)=>e().bind((e=>{const n=jh.getCurrent(e);return o=n,r=new Error(`Cannot find a current component to extract the value from for form part '${t}': `+ei(e.element)),o.fold((()=>$n.error(r)),$n.value);var o,r})).map(Ru.getValue)))},setValue:(t,n)=>{le(n,((n,o)=>{wh(t,e,o).each((e=>{jh.getCurrent(e).each((e=>{Ru.setValue(e,n)}))}))}))}}})]),apis:{getField:(t,n)=>wh(t,e,n).bind(jh.getCurrent)}}),ES={getField:xi(((e,t,n)=>e.getField(t,n))),sketch:e=>{const t=(()=>{const e=[];return{field:(t,n)=>(e.push(t),gh(CS,SS(t),n)),record:y(e)}})(),n=e(t),o=t.record(),r=z(o,(e=>ah({name:e,pname:SS(e)})));return Rh(CS,_S,r,kS,n)}},OS=ri("valid-input"),TS=ri("invalid-input"),AS=ri("validating-input"),DS="colorcustom.rgb.",RS=(e,t,n,o)=>{const r=(n,o)=>uC.config({invalidClass:t("invalid"),notify:{onValidate:e=>{Ds(e,AS,{type:n})},onValid:e=>{Ds(e,OS,{type:n,value:Ru.getValue(e)})},onInvalid:e=>{Ds(e,TS,{type:n,value:Ru.getValue(e)})}},validator:{validate:t=>{const n=Ru.getValue(t),r=o(n)?$n.value(!0):$n.error(e("aria.input.invalid"));return tC(r)},validateOnLoad:!1}}),s=(n,o,s,i,a)=>{const l=e("colorcustom.rgb.range"),c=Ew.parts.label({dom:{tag:"label",attributes:{"aria-label":i}},components:[sa(s)]}),d=Ew.parts.field({data:a,factory:Yw,inputAttributes:{type:"text",..."hex"===o?{"aria-live":"polite"}:{}},inputClasses:[t("textfield")],inputBehaviours:Dl([r(o,n),Aw.config({})]),onSetValue:e=>{if(uC.isInvalid(e)){uC.run(e).get(b)}}}),u=[c,d],h="hex"!==o?[Ew.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:u.concat(h)}},i=(e,t)=>{const n=t.red,o=t.green,r=t.blue;Ru.setValue(e,{red:n,green:o,blue:r})},a=cg({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),l=(e,t)=>{a.getOpt(e).each((e=>{xt(e.element,"background-color","#"+t.value)}))},c=Lh({factory:()=>{const r={red:Cr(A.some(255)),green:Cr(A.some(255)),blue:Cr(A.some(255)),hex:Cr(A.some("ffffff"))},c=e=>r[e].get(),d=(e,t)=>{r[e].set(t)},u=e=>{const t=e.red,n=e.green,o=e.blue;d("red",A.some(t)),d("green",A.some(n)),d("blue",A.some(o))},h=(e,t)=>{const n=t.event;"hex"!==n.type?d(n.type,A.none()):o(e)},m=(e,t,n)=>{const o=parseInt(n,10);d(t,A.some(o)),c("red").bind((e=>c("green").bind((t=>c("blue").map((n=>cx(e,t,n,1))))))).each((t=>{const n=((e,t)=>{const n=ox(t);return ES.getField(e,"hex").each((t=>{Cf.isFocused(t)||Ru.setValue(e,{hex:n.value})})),n})(e,t);Ds(e,yS,{hex:n}),l(e,n)}))},p=(e,t)=>{const o=t.event;(e=>"hex"===e.type)(o)?((e,t)=>{n(e);const o=Xy(t);d("hex",A.some(t));const r=hx(o);i(e,r),u(r),Ds(e,yS,{hex:o}),l(e,o)})(e,o.value):m(e,o.type,o.value)},f=t=>({label:e(DS+t+".label"),description:e(DS+t+".description")}),g=f("red"),b=f("green"),v=f("blue"),y=f("hex");return ao(ES.sketch((n=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[n.field("red",Ew.sketch(s(dx,"red",g.label,g.description,255))),n.field("green",Ew.sketch(s(dx,"green",b.label,b.description,255))),n.field("blue",Ew.sketch(s(dx,"blue",v.label,v.description,255))),n.field("hex",Ew.sketch(s(Zy,"hex",y.label,y.description,"ffffff"))),a.asSpec()],formBehaviours:Dl([uC.config({invalidClass:t("form-invalid")}),bf("rgb-form-events",[Fs(OS,p),Fs(TS,h),Fs(AS,h)])])}))),{apis:{updateHex:(e,t)=>{Ru.setValue(e,{hex:t.value}),((e,t)=>{const n=hx(t);i(e,n),u(n)})(e,t),l(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(e,t,n)=>{e.updateHex(t,n)}},extraApis:{}});return c},MS=(e,t)=>{const n=vS.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),o=vS.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:`<div class=${t("sv-palette-inner-thumb")} role="presentation"></div>`}}),r=(e,t)=>{const{width:n,height:o}=e,r=e.getContext("2d");if(null===r)return;r.fillStyle=t,r.fillRect(0,0,n,o);const s=r.createLinearGradient(0,0,n,0);s.addColorStop(0,"rgba(255,255,255,1)"),s.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=s,r.fillRect(0,0,n,o);const i=r.createLinearGradient(0,0,0,o);i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=i,r.fillRect(0,0,n,o)},s=Lh({factory:e=>{const s=y({x:0,y:0}),i=Dl([jh.config({find:A.some}),Cf.config({})]);return vS.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:s},rounded:!1,components:[n,o],onChange:(e,t,n)=>{Ds(e,wS,{value:n})},onInit:(e,t,n,o)=>{r(n.element.dom,fx(gx))},sliderBehaviours:i})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(e,t,n)=>{((e,t)=>{const n=e.components()[0].element.dom,o=vx(t,100,100),s=ux(o);r(n,fx(s))})(t,n)},setThumb:(e,t,n)=>{((e,t)=>{const n=yx(hx(t));vS.setValue(e,{x:n.saturation,y:100-n.value})})(t,n)}},extraApis:{}});return s},NS=(e,t)=>{const n=Lh({name:"ColourPicker",configFields:[Xo("dom"),mr("onValidHex",b),mr("onInvalidHex",b)],factory:n=>{const o=RS(e,t,n.onValidHex,n.onInvalidHex),r=MS(0,t),s={paletteRgba:Cr(gx),paletteHue:Cr(0)},i=cg(((e,t)=>{const n=vS.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=vS.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return vS.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:y(0)},components:[n,o],sliderBehaviours:Dl([Cf.config({})]),onChange:(e,t,n)=>{Ds(e,xS,{value:n})}})})(0,t)),a=cg(r.sketch({})),l=cg(o.sketch({})),c=(e,t,n)=>{a.getOpt(e).each((e=>{r.setHue(e,n)}))},d=(e,t)=>{l.getOpt(e).each((e=>{o.updateHex(e,t)}))},u=(e,t,n)=>{i.getOpt(e).each((e=>{vS.setValue(e,(e=>100-e/360*100)(n))}))},h=(e,t)=>{a.getOpt(e).each((e=>{r.setThumb(e,t)}))},m=(e,t,n,o)=>{((e,t)=>{const n=hx(e);s.paletteRgba.set(n),s.paletteHue.set(t)})(t,n),j(o,(o=>{o(e,t,n)}))};return{uid:n.uid,dom:n.dom,components:[a.asSpec(),i.asSpec(),l.asSpec()],behaviours:Dl([bf("colour-picker-events",[Fs(yS,(()=>{const e=[c,u,h];return(t,n)=>{const o=n.event.hex,r=(e=>yx(hx(e)))(o);m(t,o,r.hue,e)}})()),Fs(wS,(()=>{const e=[d];return(t,n)=>{const o=n.event.value,r=s.paletteHue.get(),i=vx(r,o.x,100-o.y),a=xx(i);m(t,a,r,e)}})()),Fs(xS,(()=>{const e=[c,d];return(t,n)=>{const o=(e=>(100-e)/100*360)(n.event.value),r=s.paletteRgba.get(),i=yx(r),a=vx(o,i.saturation,i.value),l=xx(a);m(t,l,o,e)}})())]),jh.config({find:e=>l.getOpt(e)}),af.config({mode:"acyclic"})])}}});return n},PS=()=>jh.config({find:A.some}),LS=e=>jh.config({find:e.getOpt}),BS=e=>jh.config({find:t=>Je(t.element,e).bind((e=>t.getSystem().getByDom(e).toOptional()))}),IS=ko([mr("preprocess",x),mr("postprocess",x)]),FS=(e,t,n)=>Ru.config({store:{mode:"manual",...e.map((e=>({initialValue:e}))).getOr({}),getValue:t,setValue:n}}),zS=(e,t,n)=>FS(e,(e=>t(e.element)),((e,t)=>n(e.element,t))),jS=(e,t)=>{const n=Uo("RepresentingConfigs.memento processors",IS,t);return Ru.config({store:{mode:"manual",getValue:t=>{const o=e.get(t),r=Ru.getValue(o);return n.postprocess(r)},setValue:(t,o)=>{const r=n.preprocess(o),s=e.get(t);Ru.setValue(s,r)}}})},HS=zS,VS=FS,$S=e=>zS(e,Xs,Js),US=e=>Ru.config({store:{mode:"memory",initialValue:e}}),WS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},qS=(e,t,n)=>{const o=e=>"tox-"+e,r=NS((e=>t=>e.translate(WS[t]))(t),o),s=cg(r.sketch({dom:{tag:"div",classes:[o("color-picker-container")],attributes:{role:"presentation"}},onValidHex:e=>{Ds(e,Fw,{name:"hex-valid",value:!0})},onInvalidHex:e=>{Ds(e,Fw,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[s.asSpec()],behaviours:Dl([VS(n,(e=>{const t=s.get(e);return jh.getCurrent(t).bind((e=>Ru.getValue(e).hex)).map((e=>"#"+e)).getOr("")}),((e,t)=>{const n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t),o=s.get(e);jh.getCurrent(o).fold((()=>{console.log("Can not find form")}),(e=>{Ru.setValue(e,{hex:A.from(n[1]).getOr("")}),ES.getField(e,"hex").each((e=>{As(e,Yr())}))}))})),PS()])}};var KS=tinymce.util.Tools.resolve("tinymce.Resource");var GS=tinymce.util.Tools.resolve("tinymce.util.Tools");const YS=(e,t,n)=>{const o=(e,t)=>{t.stop()},r=e=>(t,n)=>{j(e,(e=>{e(t,n)}))},s=(e,t)=>{if(!em.isDisabled(e)){const n=t.event.raw;a(e,n.dataTransfer.files)}},i=(e,t)=>{const n=t.event.raw.target;a(e,n.files)},a=(n,o)=>{Ru.setValue(n,((e,t)=>{const n=GS.explode(t.getOption("images_file_types"));return V(re(e),(e=>B(n,(t=>Ee(e.name.toLowerCase(),`.${t.toLowerCase()}`)))))})(o,t)),Ds(n,Lw,{name:e.name})},l=cg({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Dl([bf("input-file-events",[$s(Jr()),$s(ds())])])}),c=e.label.map((e=>Pw(e,t))),d=Ew.parts.field({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Dl([US(n.getOr([])),PS(),em.config({}),Pf.config({toggleClass:"dragenter",toggleOnExecute:!1}),bf("dropzone-events",[Fs("dragenter",r([o,Pf.toggle])),Fs("dragleave",r([o,Pf.toggle])),Fs("dragover",o),Fs("drop",r([o,s])),Fs(Xr(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[sa(t.translate("Drop an image here"))]},lg.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[sa(t.translate("Browse for an image")),l.asSpec()],action:e=>{l.get(e).element.dom.click()},buttonBehaviours:Dl([Aw.config({}),ky(t.isDisabled),_y()])})]}]})}});return Rw(c,d,["tox-form__group--stretched"],[])},XS=ri("alloy-fake-before-tabstop"),JS=ri("alloy-fake-after-tabstop"),QS=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Dl([Cf.config({ignore:!0}),Aw.config({})])}),ZS=e=>({dom:{tag:"div",classes:["tox-navobj"]},components:[QS([XS]),e,QS([JS])],behaviours:Dl([BS(1)])}),ek=(e,t)=>{Ds(e,Kr(),{raw:{which:9,shiftKey:t}})},tk=(e,t)=>{const n=t.element;Vi(n,XS)?ek(e,!0):Vi(n,JS)&&ek(e,!1)},nk=e=>cw(e,["."+XS,"."+JS].join(","),E),ok=(e,t,n)=>{const o=e.sandboxed,r={...e.label.map((e=>({title:e}))).getOr({}),...n.map((e=>({srcdoc:e}))).getOr({}),...o?{sandbox:"allow-scripts allow-same-origin"}:{}},s=(e=>{const t=Cr(e.getOr(""));return{getValue:e=>t.get(),setValue:(e,n)=>{t.get()!==n&&ht(e.element,"srcdoc",n),t.set(n)}}})(n),i=e.label.map((e=>Pw(e,t))),a=Ew.parts.field({factory:{sketch:e=>ZS({uid:e.uid,dom:{tag:"iframe",attributes:r},behaviours:Dl([Aw.config({}),Cf.config({}),VS(n,s.getValue,s.setValue)])})}});return Rw(i,a,["tox-form__group--stretched"],[])},rk=(e,t)=>{const n=Cr(t.getOr({url:""})),o=cg({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map((e=>({src:e.url}))).getOr({})}}),r=cg({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[o.asSpec()]}),s={};e.height.each((e=>s.height=e));const i=t.map((e=>({url:e.url,zoom:A.from(e.zoom),cachedWidth:A.from(e.cachedWidth),cachedHeight:A.from(e.cachedHeight)})));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:s,attributes:{role:"presentation"}},components:[r.asSpec()],behaviours:Dl([PS(),VS(i,(()=>n.get()),((e,t)=>{const s={url:t.url};t.zoom.each((e=>s.zoom=e)),t.cachedWidth.each((e=>s.cachedWidth=e)),t.cachedHeight.each((e=>s.cachedHeight=e)),n.set(s);const i=()=>{const t=s.cachedWidth,n=s.cachedHeight;if(u(s.zoom)){const o=((e,t,n)=>{const o=jt(e),r=Mt(e);return Math.min(o/t,r/n,1)})(e.element,t,n);s.zoom=o}const o=((e,t,n,o,r)=>{const s=n*r,i=o*r,a=Math.max(0,e/2-s/2),l=Math.max(0,t/2-i/2);return{left:a.toString()+"px",top:l.toString()+"px",width:s.toString()+"px",height:i.toString()+"px"}})(jt(e.element),Mt(e.element),t,n,s.zoom);r.getOpt(e).each((e=>{wt(e.element,o)}))};o.getOpt(e).each((n=>{const o=n.element;t.url!==pt(o,"src")&&(ht(o,"src",t.url),Hi(e.element,"tox-imagepreview__loaded")),u(s.cachedWidth)||u(s.cachedHeight)||i(),(e=>new Promise(((t,n)=>{const o=()=>{s(),t(e)},r=[lc(e,"load",o),lc(e,"error",(()=>{s(),n("Unable to load data from image: "+e.dom.src)}))],s=()=>j(r,(e=>e.unbind()));e.dom.complete&&o()})))(o).then((t=>{e.getSystem().isConnected()&&(ji(e.element,"tox-imagepreview__loaded"),s.cachedWidth=t.dom.naturalWidth,s.cachedHeight=t.dom.naturalHeight,i())}))}))}))])}},sk=ri("toolbar.button.execute"),ik={[ls()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},ak=(e,t,n)=>yg(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},t),lk=(e,t)=>ak(e,t,[]),ck=(e,t)=>ak(e,t,[gf.config({})]),dk=(e,t,n)=>({dom:{tag:"span",classes:[`${t}__select-label`]},components:[sa(n.translate(e))],behaviours:Dl([gf.config({})])}),uk=ri("update-menu-text"),hk=ri("update-menu-icon"),mk=(e,t,n)=>{const o=Cr(b),r=e.text.map((e=>cg(dk(e,t,n.providers)))),s=e.icon.map((e=>cg(ck(e,n.providers.icons)))),i=(e,t)=>{const n=Ru.getValue(e);return Cf.focus(n),Ds(n,"keydown",{raw:t.event.raw}),RC.close(n),A.some(!0)},a=e.role.fold((()=>({})),(e=>({role:e}))),l=e.tooltip.fold((()=>({})),(e=>{const t=n.providers.translate(e);return{title:t,"aria-label":t}})),c=yg("chevron-down",{tag:"div",classes:[`${t}__select-chevron`]},n.providers.icons);return cg(RC.sketch({...e.uid?{uid:e.uid}:{},...a,dom:{tag:"button",classes:[t,`${t}--select`].concat(z(e.classes,(e=>`${t}--${e}`))),attributes:{...l}},components:Ny([s.map((e=>e.asSpec())),r.map((e=>e.asSpec())),A.some(c)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Dl([...e.dropdownBehaviours,ky((()=>e.disabled||n.providers.isDisabled())),_y(),MC.config({}),gf.config({}),bf("dropdown-events",[Ay(e,o),Dy(e,o)]),bf("menubutton-update-display-text",[Fs(uk,((e,t)=>{r.bind((t=>t.getOpt(e))).each((e=>{gf.set(e,[sa(n.providers.translate(t.event.text))])}))})),Fs(hk,((e,t)=>{s.bind((t=>t.getOpt(e))).each((e=>{gf.set(e,[ck(t.event.icon,n.providers.icons)])}))}))])]),eventOrder:ao(ik,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Dl([af.config({mode:"special",onLeft:i,onRight:i})]),lazySink:n.getSink,toggleClass:`${t}--active`,parts:{menu:qb(0,e.columns,e.presets)},fetch:t=>eC(C(e.fetch,t))})).asSpec()},pk=e=>"separator"===e.type,fk={type:"separator"},gk=(e,t)=>{const n=U(e,((e,n)=>(e=>s(e))(n)?""===n?e:"|"===n?e.length>0&&!pk(e[e.length-1])?e.concat([fk]):e:be(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n])),[]);return n.length>0&&pk(n[n.length-1])&&n.pop(),n},bk=(e,t)=>(e=>be(e,"getSubmenuItems"))(e)?((e,t)=>{const n=e.getSubmenuItems(),o=vk(n,t);return{item:e,menus:ao(o.menus,kr(e.value,o.items)),expansions:ao(o.expansions,kr(e.value,e.value))}})(e,t):{item:e,menus:{},expansions:{}},vk=(e,t)=>{const n=gk(s(e)?e.split(" "):e,t);return $(n,((e,n)=>{const o=(e=>{if(pk(e))return e;{const t=ge(e,"value").getOrThunk((()=>ri("generated-menu-item")));return ao({value:t},e)}})(n),r=bk(o,t);return{menus:ao(e.menus,r.menus),items:[r.item].concat(e.items),expansions:ao(e.expansions,r.expansions)}}),{menus:{},expansions:{},items:[]})},yk=(e,t,n,o)=>{const r=ri("primary-menu"),s=vk(e,n.shared.providers.menuItems());if(0===s.items.length)return A.none();const i=iw(r,s.items,t,n,o),a=ce(s.menus,((e,o)=>iw(o,e,t,n,!1))),l=ao(a,kr(r,i));return A.from(sg.tieredData(r,l,s.expansions))},xk=e=>!be(e,"items"),wk="data-value",Ck=(e,t,n,o)=>z(n,(n=>xk(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===o,onAction:()=>{Ru.setValue(e,n.value),Ds(e,Lw,{name:t}),Cf.focus(e)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:()=>Ck(e,t,n.items,o)})),_k=(e,t)=>se(e,(e=>xk(e)?Ce(e.value===t,e):_k(e.items,t))),Sk=Lh({name:"HtmlSelect",configFields:[Xo("options"),Mu("selectBehaviours",[Cf,Ru]),mr("selectClasses",[]),mr("selectAttributes",{}),sr("data")],factory:(e,t)=>{const n=z(e.options,(e=>({dom:{tag:"option",value:e.value,innerHtml:e.text}}))),o=e.data.map((e=>kr("initialValue",e))).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Pu(e.selectBehaviours,[Cf.config({}),Ru.config({store:{mode:"manual",getValue:e=>qi(e.element),setValue:(t,n)=>{W(e.options,(e=>e.value===n)).isSome()&&Ki(t.element,n)},...o}})])}}}),kk=y([mr("field1Name","field1"),mr("field2Name","field2"),za("onLockedChange"),La(["lockClass"]),mr("locked",!1),Lu("coupledFieldBehaviours",[jh,Ru])]),Ek=(e,t)=>ah({factory:Ew,name:e,overrides:e=>({fieldBehaviours:Dl([bf("coupled-input-behaviour",[Fs(Yr(),(n=>{((e,t,n)=>wh(e,t,n).bind(jh.getCurrent))(n,e,t).each((t=>{wh(n,e,"lock").each((o=>{Pf.isOn(o)&&e.onLockedChange(n,t,o)}))}))}))])])})}),Ok=y([Ek("field1","field2"),Ek("field2","field1"),ah({factory:lg,schema:[Xo("dom")],name:"lock",overrides:e=>({buttonBehaviours:Dl([Pf.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),Tk=Bh({name:"FormCoupledInputs",configFields:kk(),partFields:Ok(),factory:(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Bu(e.coupledFieldBehaviours,[jh.config({find:A.some}),Ru.config({store:{mode:"manual",getValue:t=>{const n=Eh(t,e,["field1","field2"]);return{[e.field1Name]:Ru.getValue(n.field1()),[e.field2Name]:Ru.getValue(n.field2())}},setValue:(t,n)=>{const o=Eh(t,e,["field1","field2"]);ve(n,e.field1Name)&&Ru.setValue(o.field1(),n[e.field1Name]),ve(n,e.field2Name)&&Ru.setValue(o.field2(),n[e.field2Name])}}})]),apis:{getField1:t=>wh(t,e,"field1"),getField2:t=>wh(t,e,"field2"),getLock:t=>wh(t,e,"lock")}}),apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),Ak=e=>{const t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){const e=parseFloat(t[1]),n=t[2];return $n.value({value:e,unit:n})}return $n.error(e)},Dk=(e,t)=>{const n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=e=>be(n,e);return e.unit===t?A.some(e.value):o(e.unit)&&o(t)?n[e.unit]===n[t]?A.some(e.value):A.some(e.value/n[e.unit]*n[t]):A.none()},Rk=e=>A.none(),Mk=(e,t)=>{const n=Ak(e).toOptional(),o=Ak(t).toOptional();return we(n,o,((e,t)=>Dk(e,t.unit).map((e=>t.value/e)).map((e=>{return n=e,o=t.unit,e=>Dk(e,o).map((e=>({value:e*n,unit:o})));var n,o})).getOr(Rk))).getOr(Rk)},Nk=(e,t)=>{const n=e.label.map((e=>Pw(e,t))),o=[em.config({disabled:()=>e.disabled||t.isDisabled()}),_y(),af.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:e=>(As(e,zw),A.some(!0))}),bf("textfield-change",[Fs(Yr(),((t,n)=>{Ds(t,Lw,{name:e.name})})),Fs(is(),((t,n)=>{Ds(t,Lw,{name:e.name})}))]),Aw.config({})],r=e.validation.map((e=>uC.config({getRoot:e=>Ge(e.element),invalidClass:"tox-invalid",validator:{validate:t=>{const n=Ru.getValue(t),o=e.validator(n);return tC(!0===o?$n.value(n):$n.error(o))},validateOnLoad:e.validateOnLoad}}))).toArray(),s={...e.placeholder.fold(y({}),(e=>({placeholder:t.translate(e)}))),...e.inputMode.fold(y({}),(e=>({inputmode:e})))},i=Ew.parts.field({tag:!0===e.multiline?"textarea":"input",...e.data.map((e=>({data:e}))).getOr({}),inputAttributes:s,inputClasses:[e.classname],inputBehaviours:Dl(K([o,r])),selectOnFocus:!1,factory:Yw}),a=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),l=[em.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:e=>{Ew.getField(e).each(em.disable)},onEnabled:e=>{Ew.getField(e).each(em.enable)}}),_y()];return Rw(n,i,a,l)};var Pk=Object.freeze({__proto__:null,events:(e,t)=>{const n=e.stream.streams.setup(e,t);return Ls([Fs(e.event,n),Ks((()=>t.cancel()))].concat(e.cancelEvent.map((e=>[Fs(e,(()=>t.cancel()))])).getOr([])))}});const Lk=(e,t)=>{let n=null;const o=()=>{c(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}},Bk=e=>{const t=Cr(null);return Ci({readState:()=>({timer:null!==t.get()?"set":"unset"}),setTimer:e=>{t.set(e)},cancel:()=>{const e=t.get();null!==e&&e.cancel()}})};var Ik=Object.freeze({__proto__:null,throttle:Bk,init:e=>e.stream.streams.state(e)});var Fk=[Jo("stream",qo("mode",{throttle:[Xo("delay"),mr("stopEvent",!0),Ha("streams",{setup:(e,t)=>{const n=e.stream,o=Lk(e.onStream,n.delay);return t.setTimer(o),(e,t)=>{o.throttle(e,t),n.stopEvent&&t.stop()}},state:Bk})]})),mr("event","input"),sr("cancelEvent"),za("onStream")];const zk=Ml({fields:Fk,name:"streaming",active:Pk,state:Ik}),jk=(e,t,n)=>{const o=Ru.getValue(n);Ru.setValue(t,o),Vk(t)},Hk=(e,t)=>{const n=e.element,o=qi(n),r=n.dom;"number"!==pt(n,"type")&&t(r,o)},Vk=e=>{Hk(e,((e,t)=>e.setSelectionRange(t.length,t.length)))},$k=(e,t,n)=>{if(e.selectsOver){const o=Ru.getValue(t),r=e.getDisplayText(o),s=Ru.getValue(n);return 0===e.getDisplayText(s).indexOf(r)?A.some((()=>{jk(0,t,n),((e,t)=>{Hk(e,((e,n)=>e.setSelectionRange(t,n.length)))})(t,r.length)})):A.none()}return A.none()},Uk=y("alloy.typeahead.itemexecute"),Wk=y([sr("lazySink"),Xo("fetch"),mr("minChars",5),mr("responseTime",1e3),Ia("onOpen"),mr("getHotspot",A.some),mr("getAnchorOverrides",y({})),mr("layouts",A.none()),mr("eventOrder",{}),wr("model",{},[mr("getDisplayText",(e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value)),mr("selectsOver",!0),mr("populateFromBrowse",!0)]),Ia("onSetValue"),Fa("onExecute"),Ia("onItemExecute"),mr("inputClasses",[]),mr("inputAttributes",{}),mr("inputStyles",{}),mr("matchWidth",!0),mr("useMinWidth",!1),mr("dismissOnBlur",!0),La(["openClass"]),sr("initialData"),Mu("typeaheadBehaviours",[Cf,Ru,zk,af,Pf,fC]),Go("previewing",(()=>Cr(!0)))].concat(Ww()).concat(TC())),qk=y([lh({schema:[Pa()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlight:(t,n)=>{e.previewing.get()?t.getSystem().getByUid(e.uid).each((o=>{$k(e.model,o,n).fold((()=>um.dehighlight(t,n)),(e=>e()))})):t.getSystem().getByUid(e.uid).each((t=>{e.model.populateFromBrowse&&jk(e.model,t,n)})),e.previewing.set(!1)},onExecute:(t,n)=>t.getSystem().getByUid(e.uid).toOptional().map((e=>(Ds(e,Uk(),{item:n}),!0))),onHover:(t,n)=>{e.previewing.set(!1),t.getSystem().getByUid(e.uid).each((t=>{e.model.populateFromBrowse&&jk(e.model,t,n)}))}})})]),Kk=Bh({name:"Typeahead",configFields:Wk(),partFields:qk(),factory:(e,t,n,o)=>{const r=(t,n,r)=>{e.previewing.set(!1);const s=fC.getCoupled(t,"sandbox");if(uu.isOpen(s))jh.getCurrent(s).each((e=>{um.getHighlighted(e).fold((()=>{r(e)}),(()=>{Ps(s,e.element,"keydown",n)}))}));else{const n=e=>{jh.getCurrent(e).each(r)};xC(e,i(t),t,s,o,n,vC.HighlightFirst).get(b)}},s=qw(e),i=e=>t=>t.map((t=>{const n=fe(t.menus),o=G(n,(e=>V(e.items,(e=>"item"===e.type))));return Ru.getState(e).update(z(o,(e=>e.data))),t})),a=[Cf.config({}),Ru.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:e=>qi(e.element),getFallbackEntry:e=>({value:e,meta:{}}),setValue:(t,n)=>{Ki(t.element,e.model.getDisplayText(n))},...e.initialData.map((e=>kr("initialValue",e))).getOr({})}}),zk.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(t,n)=>{const r=fC.getCoupled(t,"sandbox");if(Cf.isFocused(t)&&qi(t.element).length>=e.minChars){const n=jh.getCurrent(r).bind((e=>um.getHighlighted(e).map(Ru.getValue)));e.previewing.set(!0);const s=t=>{jh.getCurrent(r).each((t=>{n.fold((()=>{e.model.selectsOver&&um.highlightFirst(t)}),(e=>{um.highlightBy(t,(t=>Ru.getValue(t).value===e.value)),um.getHighlighted(t).orThunk((()=>(um.highlightFirst(t),A.none())))}))}))};xC(e,i(t),t,r,o,s,vC.HighlightFirst).get(b)}},cancelEvent:ms()}),af.config({mode:"special",onDown:(e,t)=>(r(e,t,um.highlightFirst),A.some(!0)),onEscape:e=>{const t=fC.getCoupled(e,"sandbox");return uu.isOpen(t)?(uu.close(t),A.some(!0)):A.none()},onUp:(e,t)=>(r(e,t,um.highlightLast),A.some(!0)),onEnter:t=>{const n=fC.getCoupled(t,"sandbox"),o=uu.isOpen(n);if(o&&!e.previewing.get())return jh.getCurrent(n).bind((e=>um.getHighlighted(e))).map((e=>(Ds(t,Uk(),{item:e}),!0)));{const r=Ru.getValue(t);return As(t,ms()),e.onExecute(n,t,r),o&&uu.close(n),A.some(!0)}}}),Pf.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),fC.config({others:{sandbox:t=>EC(e,t,{onOpen:()=>Pf.on(t),onClose:()=>Pf.off(t)})}}),bf("typeaheadevents",[Ys((t=>{const n=b;CC(e,i(t),t,o,n,vC.HighlightFirst).get(b)})),Fs(Uk(),((t,n)=>{const o=fC.getCoupled(t,"sandbox");jk(e.model,t,n.event.item),As(t,ms()),e.onItemExecute(t,o,n.event.item,Ru.getValue(t)),uu.close(o),Vk(t)}))].concat(e.dismissOnBlur?[Fs(ss(),(e=>{const t=fC.getCoupled(e,"sandbox");Hl(t.element).isNone()&&uu.close(t)}))]:[]))];return{uid:e.uid,dom:Gw(ao(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...s,...Pu(e.typeaheadBehaviours,a)},eventOrder:e.eventOrder}}}),Gk=e=>({...e,toCached:()=>Gk(e.toCached()),bindFuture:t=>Gk(e.bind((e=>e.fold((e=>tC($n.error(e))),(e=>t(e)))))),bindResult:t=>Gk(e.map((e=>e.bind(t)))),mapResult:t=>Gk(e.map((e=>e.map(t)))),mapError:t=>Gk(e.map((e=>e.mapError(t)))),foldResult:(t,n)=>e.map((e=>e.fold(t,n))),withTimeout:(t,n)=>Gk(eC((o=>{let r=!1;const s=setTimeout((()=>{r=!0,o($n.error(n()))}),t);e.get((e=>{r||(clearTimeout(s),o(e))}))})))}),Yk=e=>Gk(eC(e)),Xk=Yk,Jk=e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t),setActive:t=>{const n=e.element;t?(ji(n,"tox-tbtn--enabled"),ht(n,"aria-pressed",!0)):(Hi(n,"tox-tbtn--enabled"),bt(n,"aria-pressed"))},isActive:()=>Vi(e.element,"tox-tbtn--enabled")}),Qk=(e,t,n,o)=>mk({text:e.text,icon:e.icon,tooltip:e.tooltip,role:o,fetch:(t,o)=>{e.fetch((e=>{o(yk(e,Tb.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:e.onSetup,getApi:Jk,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Aw.config({})]},t,n.shared),Zk=(e,t,n)=>{const o=e=>o=>{const r=!o.isActive();o.setActive(r),e.storage.set(r),n.shared.getSink().each((n=>{t().getOpt(n).each((t=>{Fl(t.element),Ds(t,Fw,{name:e.name,value:e.storage.get()})}))}))},r=e=>t=>{t.setActive(e.storage.get())};return t=>{t(z(e,(e=>{const t=e.text.fold((()=>({})),(e=>({text:e})));return{type:e.type,active:!1,...t,onAction:o(e),onSetup:r(e)}})))}},eE=(e,t,n=[],o,r,s)=>{const i=t.fold((()=>({})),(e=>({action:e}))),a={buttonBehaviours:Dl([ky((()=>!e.enabled||s.isDisabled())),_y(),Aw.config({}),bf("button press",[Is("click"),Is("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...i},l=ao(a,{dom:o});return ao(l,{components:r})},tE=(e,t,n,o=[])=>{const r={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map((e=>({"aria-label":n.translate(e),title:n.translate(e)}))).getOr({})},s=e.icon.map((e=>lk(e,n.icons))),i=Ny([s]);return eE(e,t,o,r,i,n)},nE=(e,t,n,o=[],r=[])=>{const s=n.translate(e.text),i=e.icon.map((e=>lk(e,n.icons))),a=[i.getOrThunk((()=>sa(s)))],l=(e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}})(e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary")),c=[...l,...i.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...r];return eE(e,t,o,{tag:"button",classes:c,attributes:{title:s}},a,n)},oE=(e,t,n,o=[],r=[])=>{const s=nE(e,A.some(t),n,o,r);return lg.sketch(s)},rE=(e,t)=>n=>{"custom"===t?Ds(n,Fw,{name:e,value:{}}):"submit"===t?As(n,zw):"cancel"===t?As(n,Iw):console.error("Unknown button type: ",t)},sE=(e,t,n)=>{if(((e,t)=>"menu"===t)(0,t)){const t=()=>s,o=e,r={...e,onSetup:t=>(t.setEnabled(e.enabled),b),fetch:Zk(o.items,t,n)},s=cg(Qk(r,"tox-tbtn",n,A.none()));return s.asSpec()}if(((e,t)=>"custom"===t||"cancel"===t||"submit"===t)(0,t)){const o=rE(e.name,t),r={...e,borderless:!1};return oE(r,o,n.shared.providers,[])}console.error("Unknown footer button type: ",t)},iE=(e,t)=>{const n=rE(e.name,"custom");return o=A.none(),r=Ew.parts.field({factory:lg,...nE(e,A.some(n),t,[US(""),PS()])}),Rw(o,r,[],[]);var o,r},aE={type:"separator"},lE=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:b}),cE=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:b}),dE=(e,t)=>(e=>z(e,lE))(((e,t)=>V(t,(t=>t.type===e)))(e,t)),uE=e=>dE("header",e.targets),hE=e=>dE("anchor",e.targets),mE=e=>A.from(e.anchorTop).map((e=>cE("<top>",e))).toArray(),pE=e=>A.from(e.anchorBottom).map((e=>cE("<bottom>",e))).toArray(),fE=(e,t)=>{const n=e.toLowerCase();return V(t,(e=>{const t=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text;return Se(t.toLowerCase(),n)||Se(e.value.toLowerCase(),n)}))},gE=(e,t,n)=>{const o=Ru.getValue(t),r=void 0!==o.meta.text?o.meta.text:o.value;return n.getLinkInformation().fold((()=>[]),(t=>{const o=fE(r,(e=>z(e,(e=>cE(e,e))))(n.getHistory(e)));return"file"===e?(s=[o,fE(r,uE(t)),fE(r,K([mE(t),hE(t),pE(t)]))],U(s,((e,t)=>0===e.length||0===t.length?e.concat(t):e.concat(aE,t)),[])):o;var s}))},bE=ri("aria-invalid"),vE=(e,t)=>{e.dom.checked=t},yE=e=>e.dom.checked,xE=e=>(t,n,o,r)=>ge(n,"name").fold((()=>e(n,r,A.none())),(s=>t.field(s,e(n,r,ge(o,s))))),wE={bar:xE(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:z(e.items,t.interpreter)}))(e,t.shared))),collection:xE(((e,t,n)=>Uw(e,t.shared.providers,n))),alertbanner:xE(((e,t)=>((e,t)=>Cw.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${e.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[lg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:gg(e.icon,t.icons),attributes:{title:t.translate(e.iconTooltip)}},action:t=>{Ds(t,Fw,{name:"alert-banner",value:e.url})},buttonBehaviours:Dl([bg()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]}))(e,t.shared.providers))),input:xE(((e,t,n)=>((e,t,n)=>Nk({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:A.none(),maximized:e.maximized,data:n},t))(e,t.shared.providers,n))),textarea:xE(((e,t,n)=>((e,t,n)=>Nk({name:e.name,multiline:!0,label:e.label,inputMode:A.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:A.none(),maximized:e.maximized,data:n},t))(e,t.shared.providers,n))),label:xE(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:["tox-label"]},components:[sa(t.providers.translate(e.label))]},...z(e.items,t.interpreter)],behaviours:Dl([PS(),gf.config({}),$S(A.none()),af.config({mode:"acyclic"})])}))(e,t.shared))),iframe:(e=>(t,n,o,r)=>{const s=ao(n,{source:"dynamic"});return xE(e)(t,s,o,r)})(((e,t,n)=>ok(e,t.shared.providers,n))),button:xE(((e,t)=>iE(e,t.shared.providers))),checkbox:xE(((e,t,n)=>((e,t,n)=>{const o=e=>(e.element.dom.click(),A.some(!0)),r=Ew.parts.field({factory:{sketch:x},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Dl([PS(),em.config({disabled:()=>!e.enabled||t.isDisabled()}),Aw.config({}),Cf.config({}),HS(n,yE,vE),af.config({mode:"special",onEnter:o,onSpace:o,stopSpaceKeyup:!0}),bf("checkbox-events",[Fs(Xr(),((t,n)=>{Ds(t,Lw,{name:e.name})}))])])}),s=Ew.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[sa(t.translate(e.label))],behaviours:Dl([MC.config({})])}),i=e=>yg("checked"===e?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},t.icons),a=cg({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[i("checked"),i("unchecked")]});return Ew.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,a.asSpec(),s],fieldBehaviours:Dl([em.config({disabled:()=>!e.enabled||t.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:e=>{Ew.getField(e).each(em.disable)},onEnabled:e=>{Ew.getField(e).each(em.enable)}}),_y()])})})(e,t.shared.providers,n))),colorinput:xE(((e,t,n)=>BC(e,t.shared,t.colorinput,n))),colorpicker:xE(((e,t,n)=>qS(0,t.shared.providers,n))),dropzone:xE(((e,t,n)=>YS(e,t.shared.providers,n))),grid:xE(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:z(e.items,t.interpreter)}))(e,t.shared))),listbox:xE(((e,t,n)=>((e,t,n)=>{const o=t.shared.providers,r=n.bind((t=>_k(e.items,t))).orThunk((()=>ne(e.items).filter(xk))),s=e.label.map((e=>Pw(e,o))),i=Ew.parts.field({dom:{},factory:{sketch:n=>mk({uid:n.uid,text:r.map((e=>e.text)),icon:A.none(),tooltip:e.label,role:A.none(),fetch:(n,o)=>{const r=Ck(n,e.name,e.items,Ru.getValue(n));o(yk(r,Tb.CLOSE_ON_EXECUTE,t,!1))},onSetup:y(b),getApi:y({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Aw.config({}),VS(r.map((e=>e.value)),(e=>pt(e.element,wk)),((t,n)=>{_k(e.items,n).each((e=>{ht(t.element,wk,e.value),Ds(t,uk,{text:e.text})}))}))]},"tox-listbox",t.shared)}}),a={dom:{tag:"div",classes:["tox-listboxfield"]},components:[i]};return Ew.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:K([s.toArray(),[a]]),fieldBehaviours:Dl([em.config({disabled:y(!e.enabled),onDisabled:e=>{Ew.getField(e).each(em.disable)},onEnabled:e=>{Ew.getField(e).each(em.enable)}})])})})(e,t,n))),selectbox:xE(((e,t,n)=>((e,t,n)=>{const o=z(e.items,(e=>({text:t.translate(e.text),value:e.value}))),r=e.label.map((e=>Pw(e,t))),s=Ew.parts.field({dom:{},...n.map((e=>({data:e}))).getOr({}),selectAttributes:{size:e.size},options:o,factory:Sk,selectBehaviours:Dl([em.config({disabled:()=>!e.enabled||t.isDisabled()}),Aw.config({}),bf("selectbox-change",[Fs(Xr(),((t,n)=>{Ds(t,Lw,{name:e.name})}))])])}),i=e.size>1?A.none():A.some(yg("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),a={dom:{tag:"div",classes:["tox-selectfield"]},components:K([[s],i.toArray()])};return Ew.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:K([r.toArray(),[a]]),fieldBehaviours:Dl([em.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{Ew.getField(e).each(em.disable)},onEnabled:e=>{Ew.getField(e).each(em.enable)}}),_y()])})})(e,t.shared.providers,n))),sizeinput:xE(((e,t)=>((e,t)=>{let n=Rk;const o=ri("ratio-event"),r=e=>yg(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},t.icons),s=Tk.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[r("lock"),r("unlock")],buttonBehaviours:Dl([em.config({disabled:()=>!e.enabled||t.isDisabled()}),_y(),Aw.config({})])}),i=e=>({dom:{tag:"div",classes:["tox-form__group"]},components:e}),a=n=>Ew.parts.field({factory:Yw,inputClasses:["tox-textfield"],inputBehaviours:Dl([em.config({disabled:()=>!e.enabled||t.isDisabled()}),_y(),Aw.config({}),bf("size-input-events",[Fs(Wr(),((e,t)=>{Ds(e,o,{isField1:n})})),Fs(Xr(),((t,n)=>{Ds(t,Lw,{name:e.name})}))])]),selectOnFocus:!1}),l=e=>({dom:{tag:"label",classes:["tox-label"]},components:[sa(t.translate(e))]}),c=Tk.parts.field1(i([Ew.parts.label(l("Width")),a(!0)])),d=Tk.parts.field2(i([Ew.parts.label(l("Height")),a(!1)]));return Tk.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,d,i([l(""),s])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(e,t,o)=>{Ak(Ru.getValue(e)).each((e=>{n(e).each((e=>{Ru.setValue(t,(e=>{const t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let n=e.value.toFixed((o=e.unit)in t?t[o]:1);var o;return-1!==n.indexOf(".")&&(n=n.replace(/\.?0*$/,"")),n+e.unit})(e))}))}))},coupledFieldBehaviours:Dl([em.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{Tk.getField1(e).bind(Ew.getField).each(em.disable),Tk.getField2(e).bind(Ew.getField).each(em.disable),Tk.getLock(e).each(em.disable)},onEnabled:e=>{Tk.getField1(e).bind(Ew.getField).each(em.enable),Tk.getField2(e).bind(Ew.getField).each(em.enable),Tk.getLock(e).each(em.enable)}}),_y(),bf("size-input-events2",[Fs(o,((e,t)=>{const o=t.event.isField1,r=o?Tk.getField1(e):Tk.getField2(e),s=o?Tk.getField2(e):Tk.getField1(e),i=r.map(Ru.getValue).getOr(""),a=s.map(Ru.getValue).getOr("");n=Mk(i,a)}))])])})})(e,t.shared.providers))),slider:xE(((e,t,n)=>((e,t,n)=>{const o=vS.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[sa(t.translate(e.label))]}),r=vS.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=vS.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return vS.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:y(n.getOrThunk((()=>(Math.abs(e.max)-Math.abs(e.min))/2)))},components:[o,r,s],sliderBehaviours:Dl([PS(),Cf.config({})]),onChoose:(t,n,o)=>{Ds(t,Lw,{name:e.name,value:o})}})})(e,t.shared.providers,n))),urlinput:xE(((e,t,n)=>((e,t,n,o)=>{const r=t.shared.providers,s=t=>{const o=Ru.getValue(t);n.addToHistory(o.value,e.filetype)},i=Ew.parts.field({factory:Kk,...o.map((e=>({initialData:e}))).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":bE,type:"url"},minChars:0,responseTime:0,fetch:o=>{const r=gE(e.filetype,o,n),s=yk(r,Tb.BUBBLE_TO_SANDBOX,t,!1);return tC(s)},getHotspot:e=>h.getOpt(e),onSetValue:(e,t)=>{e.hasConfigured(uC)&&uC.run(e).get(b)},typeaheadBehaviours:Dl(K([n.getValidationHandler().map((t=>uC.config({getRoot:e=>Ge(e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(e,t)=>{l.getOpt(e).each((e=>{ht(e.element,"title",r.translate(t))}))}},validator:{validate:n=>{const o=Ru.getValue(n);return Xk((n=>{t({type:e.filetype,url:o.value},(e=>{if("invalid"===e.status){const t=$n.error(e.message);n(t)}else{const t=$n.value(e.message);n(t)}}))}))},validateOnLoad:!1}}))).toArray(),[em.config({disabled:()=>!e.enabled||r.isDisabled()}),Aw.config({}),bf("urlinput-events",K(["file"===e.filetype?[Fs(Yr(),(t=>{Ds(t,Lw,{name:e.name})}))]:[],[Fs(Xr(),(t=>{Ds(t,Lw,{name:e.name}),s(t)})),Fs(is(),(t=>{Ds(t,Lw,{name:e.name}),s(t)}))]]))]])),eventOrder:{[Yr()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:e=>e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:qb(0,0,"normal")},onExecute:(e,t,n)=>{Ds(t,zw,{})},onItemExecute:(t,n,o,r)=>{s(t),Ds(t,Lw,{name:e.name})}}),a=e.label.map((e=>Pw(e,r))),l=cg(((e,t,n=e,o=e)=>yg(n,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:{title:r.translate(o),"aria-live":"polite",...t.fold((()=>({})),(e=>({id:e})))}},r.icons))("invalid",A.some(bE),"warning")),c=cg({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[l.asSpec()]}),d=n.getUrlPicker(e.filetype),u=ri("browser.url.event"),h=cg({dom:{tag:"div",classes:["tox-control-wrap"]},components:[i,c.asSpec()],behaviours:Dl([em.config({disabled:()=>!e.enabled||r.isDisabled()})])}),m=cg(oE({name:e.name,icon:A.some("browse"),text:e.label.getOr(""),enabled:e.enabled,primary:!1,buttonType:A.none(),borderless:!0},(e=>As(e,u)),r,[],["tox-browse-url"]));return Ew.sketch({dom:Nw([]),components:a.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:K([[h.asSpec()],d.map((()=>m.asSpec())).toArray()])}]),fieldBehaviours:Dl([em.config({disabled:()=>!e.enabled||r.isDisabled(),onDisabled:e=>{Ew.getField(e).each(em.disable),m.getOpt(e).each(em.disable)},onEnabled:e=>{Ew.getField(e).each(em.enable),m.getOpt(e).each(em.enable)}}),_y(),bf("url-input-events",[Fs(u,(t=>{jh.getCurrent(t).each((n=>{const o=Ru.getValue(n),r={fieldname:e.name,...o};d.each((o=>{o(r).get((o=>{Ru.setValue(n,o),Ds(t,Lw,{name:e.name})}))}))}))}))])])})})(e,t,t.urlinput,n))),customeditor:xE((e=>{const t=ic(),n=cg({dom:{tag:e.tag}}),o=ic();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Dl([bf("custom-editor-events",[qs((r=>{n.getOpt(r).each((n=>{((e=>be(e,"init"))(e)?e.init(n.element.dom):KS.load(e.scriptId,e.scriptUrl).then((t=>t(n.element.dom,e.settings)))).then((e=>{o.on((t=>{e.setValue(t)})),o.clear(),t.set(e)}))}))}))]),VS(A.none(),(()=>t.get().fold((()=>o.get().getOr("")),(e=>e.getValue()))),((e,n)=>{t.get().fold((()=>o.set(n)),(e=>e.setValue(n)))})),PS()]),components:[n.asSpec()]}})),htmlpanel:xE((e=>"presentation"===e.presets?Cw.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):Cw.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Dl([Aw.config({}),Cf.config({})])}))),imagepreview:xE(((e,t,n)=>rk(e,n))),table:xE(((e,t)=>((e,t)=>{const n=e=>({dom:{tag:"th",innerHtml:t.translate(e)}}),o=e=>({dom:{tag:"td",innerHtml:t.translate(e)}}),r=e=>({dom:{tag:"tr"},components:z(e,o)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:z(i,n)}]}),(s=e.cells,{dom:{tag:"tbody"},components:z(s,r)})],behaviours:Dl([Aw.config({}),Cf.config({})])};var s,i})(e,t.shared.providers))),panel:xE(((e,t)=>((e,t)=>({dom:{tag:"div",classes:e.classes},components:z(e.items,t.shared.interpreter)}))(e,t)))},CE={field:(e,t)=>t,record:y([])},_E=(e,t,n,o)=>{const r=ao(o,{shared:{interpreter:t=>SE(e,t,n,r)}});return SE(e,t,n,r)},SE=(e,t,n,o)=>ge(wE,t.type).fold((()=>(console.error(`Unknown factory type "${t.type}", defaulting to container: `,t),t)),(r=>r(e,t,n,o))),kE="layout-inset",EE=e=>e.x,OE=(e,t)=>e.x+e.width/2-t.width/2,TE=(e,t)=>e.x+e.width-t.width,AE=e=>e.y,DE=(e,t)=>e.y+e.height-t.height,RE=(e,t)=>e.y+e.height/2-t.height/2,ME=(e,t,n)=>Ua(TE(e,t),DE(e,t),n.insetSouthwest(),Ya(),"southwest",nl(e,{right:0,bottom:3}),kE),NE=(e,t,n)=>Ua(EE(e),DE(e,t),n.insetSoutheast(),Ga(),"southeast",nl(e,{left:1,bottom:3}),kE),PE=(e,t,n)=>Ua(TE(e,t),AE(e),n.insetNorthwest(),Ka(),"northwest",nl(e,{right:0,top:2}),kE),LE=(e,t,n)=>Ua(EE(e),AE(e),n.insetNortheast(),qa(),"northeast",nl(e,{left:1,top:2}),kE),BE=(e,t,n)=>Ua(OE(e,t),AE(e),n.insetNorth(),Xa(),"north",nl(e,{top:2}),kE),IE=(e,t,n)=>Ua(OE(e,t),DE(e,t),n.insetSouth(),Ja(),"south",nl(e,{bottom:3}),kE),FE=(e,t,n)=>Ua(TE(e,t),RE(e,t),n.insetEast(),Za(),"east",nl(e,{right:0}),kE),zE=(e,t,n)=>Ua(EE(e),RE(e,t),n.insetWest(),Qa(),"west",nl(e,{left:1}),kE),jE=e=>{switch(e){case"north":return BE;case"northeast":return LE;case"northwest":return PE;case"south":return IE;case"southeast":return NE;case"southwest":return ME;case"east":return FE;case"west":return zE}},HE=(e,t,n,o,r)=>tc(o).map(jE).getOr(BE)(e,t,n,o,r),VE=e=>{switch(e){case"north":return IE;case"northeast":return NE;case"northwest":return ME;case"south":return BE;case"southeast":return LE;case"southwest":return PE;case"east":return zE;case"west":return FE}},$E=(e,t,n,o,r)=>tc(o).map(VE).getOr(BE)(e,t,n,o,r),UE={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},WE=(e,t,n)=>{const o={maxHeightFunction:wc()};return()=>n()?{type:"node",root:rt(e()),node:A.from(e()),bubble:kc(12,12,UE),layouts:{onRtl:()=>[LE],onLtr:()=>[PE]},overrides:o}:{type:"hotspot",hotspot:t(),bubble:kc(-12,12,UE),layouts:{onRtl:()=>[dl],onLtr:()=>[ul]},overrides:o}},qE=(e,t,n)=>()=>n()?{type:"node",root:rt(e()),node:A.from(e()),layouts:{onRtl:()=>[BE],onLtr:()=>[BE]}}:{type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[fl],onLtr:()=>[fl]}},KE=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{const t=e.selection.getRng();return A.some(Qc.range(Re.fromDom(t.startContainer),t.startOffset,Re.fromDom(t.endContainer),t.endOffset))}}),GE=e=>t=>({type:"node",root:e(),node:t}),YE=(e,t,n)=>{const o=vb(e),r=()=>Re.fromDom(e.getBody()),s=()=>Re.fromDom(e.getContentAreaContainer()),i=()=>o||!n();return{inlineDialog:WE(s,t,i),banner:qE(s,t,i),cursor:KE(e,r),node:GE(r)}},XE=e=>(t,n)=>{zx(e)(t,n)},JE=e=>()=>Tx(e),QE=e=>()=>Ax(e),ZE=e=>()=>Ox(e),eO=e=>({colorPicker:XE(e),hasCustomColors:JE(e),getColors:QE(e),getColorCols:ZE(e)}),tO=e=>()=>ob(e),nO=e=>({isDraggableModal:tO(e)}),oO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],rO=e=>U(e,((e,t)=>{if(be(t,"items")){const n=rO(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if((e=>be(e,"inline"))(t)||(e=>be(e,"block"))(t)||(e=>be(e,"selector"))(t)){const n=`custom-${s(t.name)?t.name:t.title.toLowerCase()}`;return{customFormats:e.customFormats.concat([{name:n,format:t}]),formats:e.formats.concat([{title:t.title,format:n,icon:t.icon}])}}return{...e,formats:e.formats.concat(t)}}),{customFormats:[],formats:[]}),sO=e=>Ig(e).map((t=>{const n=((e,t)=>{const n=rO(t),o=t=>{j(t,(t=>{e.formatter.has(t.name)||e.formatter.register(t.name,t.format)}))};return e.formatter?o(n.customFormats):e.on("init",(()=>{o(n.customFormats)})),n.formats})(e,t);return Fg(e)?oO.concat(n):n})).getOr(oO),iO=(e,t,n)=>{const o={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return ao(e,o)},aO=(e,t,n,o)=>{const r=t=>z(t,(t=>{const i=ie(t);if(ve(t,"items")){const e=r(t.items);return ao((e=>ao(e,{type:"submenu"}))(t),{getStyleItems:y(e)})}return ve(t,"format")?(e=>iO(e,n,o))(t):1===i.length&&L(i,"title")?ao(t,{type:"separator"}):(t=>{const r=s(t.name)?t.name:ri(t.title),i=`custom-${r}`,a={type:"formatter",format:i,isSelected:n(i),getStylePreview:o(i)},l=ao(t,a);return e.formatter.register(r,l),l})(t)}));return r(t)},lO=e=>{const t=t=>()=>e.formatter.match(t),n=t=>()=>{const n=e.formatter.get(t);return void 0!==n?A.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):A.none()},o=e=>{const t=e.items;return void 0!==t&&t.length>0?G(t,o):[e.format]},r=Cr([]),s=Cr([]),i=Cr([]),a=Cr([]),l=Cr(!1);e.on("PreInit",(i=>{const a=sO(e),l=aO(e,a,t,n);r.set(l),s.set(G(l,o))})),e.on("addStyleModifications",(r=>{const s=aO(e,r.items,t,n);i.set(s),l.set(r.replace),a.set(G(s,o))}));return{getData:()=>{const e=l.get()?[]:r.get(),t=i.get();return e.concat(t)},getFlattenedKeys:()=>{const e=l.get()?[]:s.get(),t=a.get();return e.concat(t)}}},cO=GS.trim,dO=e=>t=>{if((e=>m(e)&&1===e.nodeType)(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},uO=dO("true"),hO=dO("false"),mO=(e,t,n,o,r)=>({type:e,title:t,url:n,level:o,attach:r}),pO=e=>e.innerText||e.textContent,fO=e=>(e=>e&&"A"===e.nodeName&&void 0!==(e.id||e.name))(e)&&bO(e),gO=e=>e&&/^(H[1-6])$/.test(e.nodeName),bO=e=>(e=>{for(;e=e.parentNode;){const t=e.contentEditable;if(t&&"inherit"!==t)return uO(e)}return!1})(e)&&!hO(e),vO=e=>gO(e)&&bO(e),yO=e=>{const t=(e=>e.id?e.id:ri("h"))(e);return mO("header",pO(e),"#"+t,(e=>gO(e)?parseInt(e.nodeName.substr(1),10):0)(e),(()=>{e.id=t}))},xO=e=>{const t=e.id||e.name,n=pO(e);return mO("anchor",n||"#"+t,"#"+t,0,b)},wO=e=>{const t=(n="h1,h2,h3,h4,h5,h6,a:not([href])",o=e,z(id(Re.fromDom(o),n),(e=>e.dom)));var n,o;return t},CO=e=>cO(e.title).length>0,_O=e=>{const t=wO(e);return V((e=>z(V(e,vO),yO))(t).concat((e=>z(V(e,fO),xO))(t)),CO)},SO="tinymce-url-history",kO=e=>s(e)&&/^https?/.test(e),EO=e=>i(e)&&pe(e,(e=>{return!(l(t=e)&&t.length<=5&&Y(t,kO));var t})).isNone(),OO=()=>{const e=Cx.getItem(SO);if(null===e)return{};let t;try{t=JSON.parse(e)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+SO+" was not valid JSON",e),{};throw e}return EO(t)?t:(console.log("Local storage "+SO+" was not valid format",t),{})},TO=e=>{const t=OO();return ge(t,e).getOr([])},AO=(e,t)=>{if(!kO(e))return;const n=OO(),o=ge(n,t).getOr([]),r=V(o,(t=>t!==e));n[t]=[e].concat(r).slice(0,5),(e=>{if(!EO(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));Cx.setItem(SO,JSON.stringify(e))})(n)},DO=e=>!!e,RO=e=>ce(GS.makeMap(e,/[, ]/),DO),MO=e=>A.from(Jg(e)),NO=(e,t)=>{const n=(e=>{const t=A.from(Zg(e)).filter(DO).map(RO);return MO(e).fold(E,(e=>t.fold(O,(e=>ie(e).length>0&&e))))})(e);return d(n)?n?MO(e):A.none():n[t]?MO(e):A.none()},PO=e=>A.from(e).filter(s).getOrUndefined(),LO=e=>({getHistory:TO,addToHistory:AO,getLinkInformation:()=>(e=>eb(e)?A.some({targets:_O(e.getBody()),anchorTop:PO(tb(e)),anchorBottom:PO(nb(e))}):A.none())(e),getValidationHandler:()=>(e=>A.from(Qg(e)))(e),getUrlPicker:t=>((e,t)=>NO(e,t).map((n=>o=>eC((r=>{const a={filetype:t,fieldname:o.fieldname,...A.from(o.meta).getOr({})};n.call(e,((e,t)=>{if(!s(e))throw new Error("Expected value to be string");if(void 0!==t&&!i(t))throw new Error("Expected meta to be a object");r({value:e,meta:t})}),o.value,a)})))))(e,t)}),BO=(e,t,n)=>{const o=Cr(!1),r=(e=>{const t=Cr(gb(e)?"bottom":"top");return{isPositionedAtTop:()=>"top"===t.get(),getDockingMode:t.get,setDockingMode:t.set}})(t),s={shared:{providers:{icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:dg.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},interpreter:e=>((e,t,n)=>SE(CE,e,t,n))(e,{},s),anchors:YE(t,n,r.isPositionedAtTop),header:r,getSink:e},urlinput:LO(t),styles:lO(t),colorinput:eO(t),dialog:nO(t),isContextMenuOpen:()=>o.get(),setContextMenuState:e=>o.set(e)};return s},IO=Ah,FO=hh,zO=y([mr("shell",!1),Xo("makeItem"),mr("setupItem",b),Lu("listBehaviours",[gf])]),jO=ch({name:"items",overrides:()=>({behaviours:Dl([gf.config({})])})}),HO=y([jO]),VO=Bh({name:y("CustomList")(),configFields:zO(),partFields:HO(),factory:(e,t,n,o)=>{const r=e.shell?{behaviours:[gf.config({})],components:[]}:{behaviours:[],components:t},s=t=>e.shell?A.some(t):wh(t,e,"items");return{uid:e.uid,dom:e.dom,components:r.components,behaviours:Pu(e.listBehaviours,r.behaviours),apis:{setItems:(t,n)=>{s(t).fold((()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(o=>{const r=gf.contents(o),s=n.length,i=s-r.length,a=i>0?I(i,(()=>e.makeItem())):[],l=r.slice(s);j(l,(e=>gf.remove(o,e))),j(a,(e=>gf.append(o,e)));const c=gf.contents(o);j(c,((o,r)=>{e.setupItem(t,o,n[r],r)}))}))}}}},apis:{setItems:(e,t,n)=>{e.setItems(t,n)}}}),$O=y([Xo("dom"),mr("shell",!0),Mu("toolbarBehaviours",[gf])]),UO=y([ch({name:"groups",overrides:()=>({behaviours:Dl([gf.config({})])})})]),WO=Bh({name:"Toolbar",configFields:$O(),partFields:UO(),factory:(e,t,n,o)=>{const r=t=>e.shell?A.some(t):wh(t,e,"groups"),s=e.shell?{behaviours:[gf.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:s.components,behaviours:Pu(e.toolbarBehaviours,s.behaviours),apis:{setGroups:(e,t)=>{r(e).fold((()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(e=>{gf.set(e,t)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)}}}),qO=b,KO=E,GO=y([]);var YO=Object.freeze({__proto__:null,setup:qO,isDocked:KO,getBehaviours:GO});const XO=e=>(ye(kt(e,"position"),"fixed")?A.none():Ye(e)).orThunk((()=>{const t=Re.fromTag("span");return Ke(e).bind((e=>{kn(e,t);const n=Ye(t);return Tn(t),n}))})),JO=e=>XO(e).map(It).getOrThunk((()=>Lt(0,0))),QO=_r([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),ZO=(e,t)=>{const n=e.element;ji(n,t.transitionClass),Hi(n,t.fadeOutClass),ji(n,t.fadeInClass),t.onShow(e)},eT=(e,t)=>{const n=e.element;ji(n,t.transitionClass),Hi(n,t.fadeInClass),ji(n,t.fadeOutClass),t.onHide(e)},tT=(e,t,n)=>Y(e,(e=>{switch(e){case"bottom":return((e,t)=>e.bottom<=t.bottom)(t,n);case"top":return((e,t)=>e.y>=t.y)(t,n)}})),nT=(e,t)=>t.getInitialPos().map((t=>In(t.bounds.x,t.bounds.y,jt(e),Mt(e)))),oT=(e,t,n)=>n.getInitialPos().bind((o=>{switch(n.clearInitialPos(),o.position){case"static":return A.some(QO.static());case"absolute":const n=XO(e).map(Fn).getOrThunk((()=>Fn(ct())));return A.some(QO.absolute($l("absolute",ge(o.style,"left").map((e=>t.x-n.x)),ge(o.style,"top").map((e=>t.y-n.y)),ge(o.style,"right").map((e=>n.right-t.right)),ge(o.style,"bottom").map((e=>n.bottom-t.bottom)))));default:return A.none()}})),rT=(e,t,n)=>{const o=Fn(e);if(tT(n.getModes(),o,t))return A.none();{((e,t,n)=>{n.setInitialPos({style:Et(e),position:_t(e,"position")||"static",bounds:t})})(e,o,n);const r=jn(),s=o.x-r.x,i=t.y-r.y,a=r.bottom-t.bottom,l=o.y<=t.y;return A.some(QO.fixed($l("fixed",A.some(s),l?A.some(i):A.none(),A.none(),l?A.none():A.some(a))))}},sT=(e,t,n)=>{const o=e.element;return ye(kt(o,"position"),"fixed")?((e,t,n)=>nT(e,n).filter((e=>tT(n.getModes(),e,t))).bind((t=>oT(e,t,n))))(o,t,n):rT(o,t,n)},iT=(e,t,n)=>{n.setDocked(!1),j(["left","right","top","bottom","position"],(t=>Tt(e.element,t))),t.onUndocked(e)},aT=(e,t,n,o)=>{const r="fixed"===o.position;n.setDocked(r),Ul(e.element,o);(r?t.onDocked:t.onUndocked)(e)},lT=(e,t,n,o,r=!1)=>{t.contextual.each((t=>{t.lazyContext(e).each((s=>{const i=((e,t)=>e.y<t.bottom&&e.bottom>t.y)(s,o);if(i!==n.isVisible())if(n.setVisible(i),r&&!i)$i(e.element,[t.fadeOutClass]),t.onHide(e);else{(i?ZO:eT)(e,t)}}))}))},cT=(e,t,n)=>{const o=e.element;n.setDocked(!1),((e,t)=>{const n=e.element;return nT(n,t).bind((e=>oT(n,e,t)))})(e,n).each((o=>{o.fold((()=>iT(e,t,n)),(o=>aT(e,t,n,o)),b)})),n.setVisible(!0),t.contextual.each((t=>{Ui(o,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)})),dT(e,t,n)},dT=(e,t,n)=>{e.getSystem().isConnected()&&((e,t,n)=>{const o=t.lazyViewport(e);n.isDocked()&&lT(e,t,n,o),sT(e,o,n).each((r=>{r.fold((()=>iT(e,t,n)),(o=>aT(e,t,n,o)),(r=>{lT(e,t,n,o,!0),aT(e,t,n,r)}))}))})(e,t,n)},uT=(e,t,n)=>{n.isDocked()&&cT(e,t,n)};var hT=Object.freeze({__proto__:null,refresh:dT,reset:uT,isDocked:(e,t,n)=>n.isDocked(),getModes:(e,t,n)=>n.getModes(),setModes:(e,t,n,o)=>n.setModes(o)});var mT=Object.freeze({__proto__:null,events:(e,t)=>Ls([Ws(Zr(),((n,o)=>{e.contextual.each((e=>{if(Vi(n.element,e.transitionClass)){Ui(n.element,[e.transitionClass,e.fadeInClass]);(t.isVisible()?e.onShown:e.onHidden)(n)}o.stop()}))})),Fs(bs(),((n,o)=>{dT(n,e,t)})),Fs(vs(),((n,o)=>{uT(n,e,t)}))])}),pT=[hr("contextual",[Zo("fadeInClass"),Zo("fadeOutClass"),Zo("transitionClass"),tr("lazyContext"),Ia("onShow"),Ia("onShown"),Ia("onHide"),Ia("onHidden")]),yr("lazyViewport",jn),xr("modes",["top","bottom"],No),Ia("onDocked"),Ia("onUndocked")];const fT=Ml({fields:pT,name:"docking",active:mT,apis:hT,state:Object.freeze({__proto__:null,init:e=>{const t=Cr(!1),n=Cr(!0),o=ic(),r=Cr(e.modes);return Ci({isDocked:t.get,setDocked:t.set,getInitialPos:o.get,setInitialPos:o.set,clearInitialPos:o.clear,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:()=>`docked:  ${t.get()}, visible: ${n.get()}, modes: ${r.get().join(",")}`})}})}),gT=y(ri("toolbar-height-change")),bT={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},vT="tox-tinymce--toolbar-sticky-on",yT="tox-tinymce--toolbar-sticky-off",xT=(e,t)=>L(fT.getModes(e),t),wT=e=>{const t=e.element;Ke(t).each((n=>{const o="padding-"+fT.getModes(e)[0];if(fT.isDocked(e)){const e=jt(n);xt(t,"width",e+"px"),xt(n,o,(e=>Nt(e)+(parseInt(_t(e,"margin-top"),10)||0)+(parseInt(_t(e,"margin-bottom"),10)||0))(t)+"px")}else Tt(t,"width"),Tt(n,o)}))},CT=(e,t)=>{t?(Hi(e,bT.fadeOutClass),$i(e,[bT.transitionClass,bT.fadeInClass])):(Hi(e,bT.fadeInClass),$i(e,[bT.fadeOutClass,bT.transitionClass]))},_T=(e,t)=>{const n=Re.fromDom(e.getContainer());t?(ji(n,vT),Hi(n,yT)):(ji(n,yT),Hi(n,vT))},ST=(e,t)=>{const n=ic(),o=t.getSink,r=e=>{o().each((t=>e(t.element)))},s=t=>{e.inline||wT(t),_T(e,fT.isDocked(t)),t.getSystem().broadcastOn([mu()],{}),o().each((e=>e.getSystem().broadcastOn([mu()],{})))},i=e.inline?[]:[Bl.config({channels:{[gT()]:{onReceive:wT}}})];return[Cf.config({}),fT.config({contextual:{lazyContext:t=>{const n=Nt(t.element),o=e.inline?e.getContentAreaContainer():e.getContainer(),r=Fn(Re.fromDom(o)),s=r.height-n,i=r.y+(xT(t,"top")?0:n);return A.some(In(r.x,i,r.width,s))},onShow:()=>{r((e=>CT(e,!0)))},onShown:e=>{r((e=>Ui(e,[bT.transitionClass,bT.fadeInClass]))),n.get().each((t=>{((e,t)=>{const n=$e(t);jl(n).filter((e=>!He(t,e))).filter((t=>He(t,Re.fromDom(n.dom.body))||Ve(e,t))).each((()=>Fl(t)))})(e.element,t),n.clear()}))},onHide:e=>{((e,t)=>Hl(e).orThunk((()=>t().toOptional().bind((e=>Hl(e.element))))))(e.element,o).fold(n.clear,n.set),r((e=>CT(e,!1)))},onHidden:()=>{r((e=>Ui(e,[bT.transitionClass])))},...bT},lazyViewport:t=>{const n=jn(),o=Gg(e),r=n.y+(xT(t,"top")?o:0),s=n.height-(xT(t,"bottom")?o:0);return In(n.x,r,n.width,s)},modes:[t.header.getDockingMode()],onDocked:s,onUndocked:s}),...i]};var kT=Object.freeze({__proto__:null,setup:(e,t,n)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",(()=>{n().each(fT.reset)})),e.on("ResizeWindow ResizeEditor",(()=>{n().each(wT)})),e.on("SkinLoaded",(()=>{n().each((e=>{fT.isDocked(e)?fT.reset(e):fT.refresh(e)}))})),e.on("FullscreenStateChanged",(()=>{n().each(fT.reset)}))),e.on("AfterScrollIntoView",(e=>{n().each((t=>{fT.refresh(t);const n=t.element;ep(n)&&((e,t)=>{const n=$e(t),o=n.dom.defaultView.innerHeight,r=An(n),s=Re.fromDom(e.elm),i=zn(s),a=Mt(s),l=i.y,c=l+a,d=It(t),u=Mt(t),h=d.top,m=h+u,p=Math.abs(h-r.top)<2,f=Math.abs(m-(r.top+o))<2;if(p&&l<m)Dn(r.left,l-u,n);else if(f&&c>h){const e=l-o+a+u;Dn(r.left,e,n)}})(e,n)}))})),e.on("PostRender",(()=>{_T(e,!1)}))},isDocked:e=>e().map(fT.isDocked).getOr(!1),getBehaviours:ST});const ET=ko([ev,Jo("items",Oo([Ao([tv,rr("items",No)]),No]))].concat(Dv)),OT=[lr("text"),lr("tooltip"),lr("icon"),tr("fetch"),yr("onSetup",(()=>b))],TT=ko([ev,...OT]),AT=e=>Vo("menubutton",TT,e),DT=ko([ev,fv,pv,mv,vv,av,uv,br("presets","normal",["normal","color","listpreview"]),_v(1),cv,dv]);var RT=Lh({factory:(e,t)=>{const n={focus:af.focusIn,setMenus:(e,n)=>{const o=z(n,(e=>{const n={type:"menubutton",text:e.text,fetch:t=>{t(e.getItems())}},o=AT(n).mapError((e=>Wo(e))).getOrDie();return Qk(o,"tox-mbtn",t.backstage,A.some("menuitem"))}));gf.set(e,o)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Dl([gf.config({}),bf("menubar-events",[qs((t=>{e.onSetup(t)})),Fs(Ur(),((e,t)=>{ba(e.element,".tox-mbtn--active").each((n=>{va(t.event.target,".tox-mbtn").each((t=>{He(n,t)||e.getSystem().getByDom(n).each((n=>{e.getSystem().getByDom(t).each((e=>{RC.expand(e),RC.close(n),Cf.focus(e)}))}))}))}))})),Fs(_s(),((e,t)=>{t.event.prevFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((n=>{t.event.newFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((e=>{RC.isOpen(n)&&(RC.expand(e),RC.close(n))}))}))}))]),af.config({mode:"flow",selector:".tox-mbtn",onEscape:t=>(e.onEscape(t),A.some(!0))}),Aw.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Xo("dom"),Xo("uid"),Xo("onEscape"),Xo("backstage"),mr("onSetup",b)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,n)=>{e.setMenus(t,n)}}});const MT=(e,t)=>t.getAnimationRoot.fold((()=>e.element),(t=>t(e))),NT=e=>e.dimension.property,PT=(e,t)=>e.dimension.getDimension(t),LT=(e,t)=>{const n=MT(e,t);Ui(n,[t.shrinkingClass,t.growingClass])},BT=(e,t)=>{Hi(e.element,t.openClass),ji(e.element,t.closedClass),xt(e.element,NT(t),"0px"),At(e.element)},IT=(e,t)=>{Hi(e.element,t.closedClass),ji(e.element,t.openClass),Tt(e.element,NT(t))},FT=(e,t,n,o)=>{n.setCollapsed(),xt(e.element,NT(t),PT(t,e.element)),At(e.element),LT(e,t),BT(e,t),t.onStartShrink(e),t.onShrunk(e)},zT=(e,t,n,o)=>{const r=o.getOrThunk((()=>PT(t,e.element)));n.setCollapsed(),xt(e.element,NT(t),r),At(e.element);const s=MT(e,t);Hi(s,t.growingClass),ji(s,t.shrinkingClass),BT(e,t),t.onStartShrink(e)},jT=(e,t,n)=>{const o=PT(t,e.element);("0px"===o?FT:zT)(e,t,n,A.some(o))},HT=(e,t,n)=>{const o=MT(e,t),r=Vi(o,t.shrinkingClass),s=PT(t,e.element);IT(e,t);const i=PT(t,e.element);(r?()=>{xt(e.element,NT(t),s),At(e.element)}:()=>{BT(e,t)})(),Hi(o,t.shrinkingClass),ji(o,t.growingClass),IT(e,t),xt(e.element,NT(t),i),n.setExpanded(),t.onStartGrow(e)},VT=(e,t,n)=>{const o=MT(e,t);return!0===Vi(o,t.growingClass)},$T=(e,t,n)=>{const o=MT(e,t);return!0===Vi(o,t.shrinkingClass)};var UT=Object.freeze({__proto__:null,refresh:(e,t,n)=>{if(n.isExpanded()){Tt(e.element,NT(t));const n=PT(t,e.element);xt(e.element,NT(t),n)}},grow:(e,t,n)=>{n.isExpanded()||HT(e,t,n)},shrink:(e,t,n)=>{n.isExpanded()&&jT(e,t,n)},immediateShrink:(e,t,n)=>{n.isExpanded()&&FT(e,t,n)},hasGrown:(e,t,n)=>n.isExpanded(),hasShrunk:(e,t,n)=>n.isCollapsed(),isGrowing:VT,isShrinking:$T,isTransitioning:(e,t,n)=>VT(e,t)||$T(e,t),toggleGrow:(e,t,n)=>{(n.isExpanded()?jT:HT)(e,t,n)},disableTransitions:LT});var WT=Object.freeze({__proto__:null,exhibit:(e,t,n)=>{const o=t.expanded;return Si(o?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:kr(t.dimension.property,"0px")})},events:(e,t)=>Ls([Ws(Zr(),((n,o)=>{if(o.event.raw.propertyName===e.dimension.property){LT(n,e),t.isExpanded()&&Tt(n.element,e.dimension.property);(t.isExpanded()?e.onGrown:e.onShrunk)(n)}}))])}),qT=[Xo("closedClass"),Xo("openClass"),Xo("shrinkingClass"),Xo("growingClass"),sr("getAnimationRoot"),Ia("onShrunk"),Ia("onStartShrink"),Ia("onGrown"),Ia("onStartGrow"),mr("expanded",!1),Jo("dimension",qo("property",{width:[Ha("property","width"),Ha("getDimension",(e=>jt(e)+"px"))],height:[Ha("property","height"),Ha("getDimension",(e=>Mt(e)+"px"))]}))];const KT=Ml({fields:qT,name:"sliding",active:WT,apis:UT,state:Object.freeze({__proto__:null,init:e=>{const t=Cr(e.expanded);return Ci({isExpanded:()=>!0===t.get(),isCollapsed:()=>!1===t.get(),setCollapsed:C(t.set,!1),setExpanded:C(t.set,!0),readState:()=>"expanded: "+t.get()})}})}),GT="container",YT=[Mu("slotBehaviours",[])],XT=e=>"<alloy.field."+e+">",JT=(e,t)=>{const n=t=>kh(e),o=(t,n)=>(o,r)=>wh(o,e,r).map((e=>t(e,r))).getOr(n),r=(e,t)=>"true"!==pt(e.element,"aria-hidden"),s=o(r,!1),i=o(((e,t)=>{if(r(e)){const n=e.element;xt(n,"display","none"),ht(n,"aria-hidden","true"),Ds(e,Ss(),{name:t,visible:!1})}})),a=(l=i,(e,t)=>{j(t,(t=>l(e,t)))});var l;const c=o(((e,t)=>{if(!r(e)){const n=e.element;Tt(n,"display"),bt(n,"aria-hidden"),Ds(e,Ss(),{name:t,visible:!0})}})),d={getSlotNames:n,getSlot:(t,n)=>wh(t,e,n),isShowing:s,hideSlot:i,hideAllSlots:e=>a(e,n()),showSlot:c};return{uid:e.uid,dom:e.dom,components:t,behaviours:Nu(e.slotBehaviours),apis:d}},QT=ce({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,n)=>e.getSlot(t,n),isShowing:(e,t,n)=>e.isShowing(t,n),hideSlot:(e,t,n)=>e.hideSlot(t,n),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,n)=>e.showSlot(t,n)},(e=>xi(e))),ZT={...QT,sketch:e=>{const t=(()=>{const e=[];return{slot:(t,n)=>(e.push(t),gh(GT,XT(t),n)),record:y(e)}})(),n=e(t),o=t.record(),r=z(o,(e=>ah({name:e,pname:XT(e)})));return Rh(GT,YT,r,JT,n)}},eA=ko([pv,fv,yr("onShow",b),yr("onHide",b),uv]),tA=e=>({element:()=>e.element.dom}),nA=(e,t)=>{const n=z(ie(t),(e=>{const n=t[e],o=$o((e=>Vo("sidebar",eA,e))(n));return{name:e,getApi:tA,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return z(n,(t=>{const o=Cr(b);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:cy([Ay(t,o),Dy(t,o),Fs(Ss(),((e,t)=>{const o=t.event,r=W(n,(e=>e.name===o.name));r.each((t=>{(o.visible?t.onShow:t.onHide)(t.getApi(e))}))}))])})}))},oA=e=>ZT.sketch((t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:nA(t,e),slotBehaviours:cy([qs((e=>ZT.hideAllSlots(e)))])}))),rA=e=>jh.getCurrent(e).bind((e=>{if(KT.isGrowing(e)||KT.hasGrown(e)){return jh.getCurrent(e).bind((e=>W(ZT.getSlotNames(e),(t=>ZT.isShowing(e,t)))))}return A.none()})),sA=ri("FixSizeEvent"),iA=ri("AutoSizeEvent");var aA=Object.freeze({__proto__:null,block:(e,t,n,o)=>{ht(e.element,"aria-busy",!0);const r=t.getRoot(e).getOr(e),s=Dl([af.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Cf.config({})]),i=o(r,s),a=r.getSystem().build(i);gf.append(r,da(a)),a.hasConfigured(af)&&t.focus&&af.focusIn(a),n.isBlocked()||t.onBlock(e),n.blockWith((()=>gf.remove(r,a)))},unblock:(e,t,n)=>{bt(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()}}),lA=[yr("getRoot",A.none),vr("focus",!0),Ia("onBlock"),Ia("onUnblock")];const cA=Ml({fields:lA,name:"blocking",apis:aA,state:Object.freeze({__proto__:null,init:()=>{const e=rc((e=>e.destroy()));return Ci({readState:e.isSet,blockWith:t=>{e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),dA=e=>{const t=Re.fromHtml(e),n=Xe(t),o=(e=>{const t=void 0!==e.dom.attributes?e.dom.attributes:[];return U(t,((e,t)=>"class"===t.name?e:{...e,[t.name]:t.value}),{})})(t),r=(e=>Array.prototype.slice.call(e.dom.classList,0))(t),s=0===n.length?{}:{innerHtml:Xs(t)};return{tag:Me(t),classes:r,attributes:o,...s}},uA=e=>jh.getCurrent(e).each((e=>Fl(e.element))),hA=(e,t,n,o)=>{const r=t.element;if(((e,t)=>{const n="tabindex",o="data-mce-tabindex";A.from(e.iframeElement).map(Re.fromDom).each((e=>{t?(ft(e,n).each((t=>ht(e,o,t))),ht(e,n,-1)):(bt(e,n),ft(e,o).each((t=>{ht(e,n,t),bt(e,o)})))}))})(e,n),n)cA.block(t,(e=>(t,n)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:dA('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(o)),Tt(r,"display"),bt(r,"aria-hidden"),e.hasFocus()&&uA(t);else{const n=jh.getCurrent(t).exists((e=>zl(e.element)));cA.unblock(t),xt(r,"display","none"),ht(r,"aria-hidden","true"),n&&e.focus()}},mA=(e,t,n)=>{const o=Cr(!1),r=ic(),s=n=>{o.get()&&!(e=>{if((e=>"focusin"===e.type)(e))return(e.composed?ne(e.composedPath()):A.from(e.target)).map(Re.fromDom).filter(Pe).exists((e=>Vi(e,"mce-pastebin")));return!1})(n)&&(n.preventDefault(),uA(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",(()=>{e.dom.bind(e.getWin(),"focusin",s),e.on("BeforeExecCommand",(e=>{"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&s(e)}))}));const i=r=>{r!==o.get()&&(o.set(r),hA(e,t(),r,n.providers),e.dispatch("AfterProgressState",{state:r}))};e.on("ProgressState",(t=>{if(r.on(clearTimeout),f(t.time)){const n=ag.setEditorTimeout(e,(()=>i(t.state)),t.time);r.set(n)}else i(t.state),r.clear()}))},pA=(e,t,n)=>({within:e,extra:t,withinWidth:n}),fA=(e,t,n)=>{const o=((e,t)=>{const n=U(e,((e,n)=>t(n,e.len).fold(y(e),(t=>({len:t.finish,list:e.list.concat([t])})))),{len:0,list:[]});return n.list})(e,((e,t)=>{const o=n(e);return A.some({element:e,start:t,finish:t+o,width:o})})),r=V(o,(e=>e.finish<=t)),s=$(r,((e,t)=>e+t.width),0);return{within:r,extra:o.slice(r.length),withinWidth:s}},gA=e=>z(e,(e=>e.element)),bA=(e,t,n,o)=>{const r=((e,t,n)=>{const o=fA(t,e,n);return 0===o.extra.length?A.some(o):A.none()})(e,t,n).getOrThunk((()=>fA(t,e-n(o),n))),s=r.within,i=r.extra,a=r.withinWidth;return 1===i.length&&i[0].width<=n(o)?((e,t,n)=>{const o=gA(e.concat(t));return pA(o,[],n)})(s,i,a):i.length>=1?((e,t,n,o)=>{const r=gA(e).concat([n]);return pA(r,gA(t),o)})(s,i,o,a):((e,t,n)=>pA(gA(e),[],n))(s,0,a)},vA=(e,t)=>{const n=z(t,(e=>da(e)));WO.setGroups(e,n)},yA=(e,t,n)=>{const o=t.builtGroups.get();if(0===o.length)return;const r=Ch(e,t,"primary"),s=fC.getCoupled(e,"overflowGroup");xt(r.element,"visibility","hidden");const i=o.concat([s]),a=se(i,(e=>Hl(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()))));n([]),vA(r,i);const l=jt(r.element),c=bA(l,t.builtGroups.get(),(e=>jt(e.element)),s);0===c.extra.length?(gf.remove(r,s),n([])):(vA(r,c.within),n(c.extra)),Tt(r.element,"visibility"),At(r.element),a.each(Cf.focus)},xA=y([Mu("splitToolbarBehaviours",[fC]),Go("builtGroups",(()=>Cr([])))]),wA=y([La(["overflowToggledClass"]),dr("getOverflowBounds"),Xo("lazySink"),Go("overflowGroups",(()=>Cr([])))].concat(xA())),CA=y([ah({factory:WO,schema:$O(),name:"primary"}),lh({schema:$O(),name:"overflow"}),lh({name:"overflow-button"}),lh({name:"overflow-group"})]),_A=y(((e,t)=>{((e,t)=>{const n=zt.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);xt(e,"max-width",n+"px")})(e,Math.floor(t))})),SA=y([La(["toggledClass"]),Xo("lazySink"),tr("fetch"),dr("getBounds"),hr("fireDismissalEventInstead",[mr("event",ws())]),Nc()]),kA=y([lh({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Dl([Pf.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),lh({factory:WO,schema:$O(),name:"toolbar",overrides:e=>({toolbarBehaviours:Dl([af.config({mode:"cyclic",onEscape:t=>(wh(t,e,"button").each(Cf.focus),A.none())})])})})]),EA=(e,t)=>{const n=fC.getCoupled(e,"toolbarSandbox");uu.isOpen(n)?uu.close(n):uu.open(n,t.toolbar())},OA=(e,t,n,o)=>{const r=n.getBounds.map((e=>e())),s=n.lazySink(e).getOrDie();zd.positionWithinBounds(s,t,{anchor:{type:"hotspot",hotspot:e,layouts:o,overrides:{maxWidthFunction:_A()}}},r)},TA=(e,t,n,o,r)=>{WO.setGroups(t,r),OA(e,t,n,o),Pf.on(e)},AA=Bh({name:"FloatingToolbarButton",factory:(e,t,n,o)=>({...lg.sketch({...o.button(),action:e=>{EA(e,o)},buttonBehaviours:Bu({dump:o.button().buttonBehaviours},[fC.config({others:{toolbarSandbox:t=>((e,t,n)=>{const o=xa();return{dom:{tag:"div",attributes:{id:o.id}},behaviours:Dl([af.config({mode:"special",onEscape:e=>(uu.close(e),A.some(!0))}),uu.config({onOpen:(r,s)=>{n.fetch().get((r=>{TA(e,s,n,t.layouts,r),o.link(e.element),af.focusIn(s)}))},onClose:()=>{Pf.off(e),Cf.focus(e),o.unlink(e.element)},isPartOf:(t,n,o)=>Ca(n,o)||Ca(e,o),getAttachPoint:()=>n.lazySink(e).getOrDie()}),Bl.config({channels:{...gu({isExtraPart:E,...n.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})}),...vu({doReposition:()=>{uu.getState(fC.getCoupled(e,"toolbarSandbox")).each((o=>{OA(e,o,n,t.layouts)}))}})}})])}})(t,n,e)}})])}),apis:{setGroups:(t,o)=>{uu.getState(fC.getCoupled(t,"toolbarSandbox")).each((r=>{TA(t,r,e,n.layouts,o)}))},reposition:t=>{uu.getState(fC.getCoupled(t,"toolbarSandbox")).each((o=>{OA(t,o,e,n.layouts)}))},toggle:e=>{EA(e,o)},getToolbar:e=>uu.getState(fC.getCoupled(e,"toolbarSandbox")),isOpen:e=>uu.isOpen(fC.getCoupled(e,"toolbarSandbox"))}}),configFields:SA(),partFields:kA(),apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),DA=y([Xo("items"),La(["itemSelector"]),Mu("tgroupBehaviours",[af])]),RA=y([dh({name:"items",unit:"item"})]),MA=Bh({name:"ToolbarGroup",configFields:DA(),partFields:RA(),factory:(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.tgroupBehaviours,[af.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),NA=e=>z(e,(e=>da(e))),PA=(e,t,n)=>{yA(e,n,(o=>{n.overflowGroups.set(o),t.getOpt(e).each((e=>{AA.setGroups(e,NA(o))}))}))},LA=Bh({name:"SplitFloatingToolbar",configFields:wA(),partFields:CA(),factory:(e,t,n,o)=>{const r=cg(AA.sketch({fetch:()=>eC((t=>{t(NA(e.overflowGroups.get()))})),layouts:{onLtr:()=>[ul,dl],onRtl:()=>[dl,ul],onBottomLtr:()=>[ml,hl],onBottomRtl:()=>[hl,ml]},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.splitToolbarBehaviours,[fC.config({others:{overflowGroup:()=>MA.sketch({...o["overflow-group"](),items:[r.asSpec()]})}})]),apis:{setGroups:(t,n)=>{e.builtGroups.set(z(n,t.getSystem().build)),PA(t,r,e)},refresh:t=>PA(t,r,e),toggle:e=>{r.getOpt(e).each((e=>{AA.toggle(e)}))},isOpen:e=>r.getOpt(e).map(AA.isOpen).getOr(!1),reposition:e=>{r.getOpt(e).each((e=>{AA.reposition(e)}))},getOverflow:e=>r.getOpt(e).bind(AA.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),BA=y([La(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ia("onOpened"),Ia("onClosed")].concat(xA())),IA=y([ah({factory:WO,schema:$O(),name:"primary"}),ah({factory:WO,schema:$O(),name:"overflow",overrides:e=>({toolbarBehaviours:Dl([KT.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{wh(t,e,"overflow-button").each((e=>{Pf.off(e),Cf.focus(e)})),e.onClosed(t)},onGrown:t=>{af.focusIn(t),e.onOpened(t)},onStartGrow:t=>{wh(t,e,"overflow-button").each(Pf.on)}}),af.config({mode:"acyclic",onEscape:t=>(wh(t,e,"overflow-button").each(Cf.focus),A.some(!0))})])})}),lh({name:"overflow-button",overrides:e=>({buttonBehaviours:Dl([Pf.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),lh({name:"overflow-group"})]),FA=(e,t)=>{wh(e,t,"overflow-button").bind((()=>wh(e,t,"overflow"))).each((n=>{zA(e,t),KT.toggleGrow(n)}))},zA=(e,t)=>{wh(e,t,"overflow").each((n=>{yA(e,t,(e=>{const t=z(e,(e=>da(e)));WO.setGroups(n,t)})),wh(e,t,"overflow-button").each((e=>{KT.hasGrown(n)&&Pf.on(e)})),KT.refresh(n)}))},jA=Bh({name:"SplitSlidingToolbar",configFields:BA(),partFields:IA(),factory:(e,t,n,o)=>{const r="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.splitToolbarBehaviours,[fC.config({others:{overflowGroup:e=>MA.sketch({...o["overflow-group"](),items:[lg.sketch({...o["overflow-button"](),action:t=>{As(e,r)}})]})}}),bf("toolbar-toggle-events",[Fs(r,(t=>{FA(t,e)}))])]),apis:{setGroups:(t,n)=>{((t,n)=>{const o=z(n,t.getSystem().build);e.builtGroups.set(o)})(t,n),zA(t,e)},refresh:t=>zA(t,e),toggle:t=>FA(t,e),isOpen:t=>((e,t)=>wh(e,t,"overflow").map(KT.hasGrown).getOr(!1))(t,e)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),HA=e=>{const t=e.title.fold((()=>({})),(e=>({attributes:{title:e}})));return{dom:{tag:"div",classes:["tox-toolbar__group"],...t},components:[MA.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Dl([Aw.config({}),Cf.config({})])}},VA=e=>MA.sketch(HA(e)),$A=(e,t)=>{const n=qs((t=>{const n=z(e.initGroups,VA);WO.setGroups(t,n)}));return Dl([Oy(e.providers.isDisabled),_y(),af.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),bf("toolbar-events",[n])])},UA=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":HA({title:A.none(),items:[]}),"overflow-button":tE({name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("More..."),primary:!1,buttonType:A.none(),borderless:!1},A.none(),e.providers)},splitToolbarBehaviours:$A(e,t)}},WA=e=>{const t=UA(e),n=LA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return LA.sketch({...t,lazySink:e.getSink,getOverflowBounds:()=>{const t=e.moreDrawerData.lazyHeader().element,n=zn(t),o=We(t),r=zn(o),s=Math.max(o.dom.scrollHeight,r.height);return In(n.x+4,r.y,n.width-8,s)},parts:{...t.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}})},qA=e=>{const t=jA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=jA.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=UA(e);return jA.sketch({...o,components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:e=>{e.getSystem().broadcastOn([gT()],{type:"opened"})},onClosed:e=>{e.getSystem().broadcastOn([gT()],{type:"closed"})}})},KA=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return WO.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===Cg.scrolling?["tox-toolbar--scrolling"]:[])},components:[WO.parts.groups({})],toolbarBehaviours:$A(e,t)})},GA=FO.optional({factory:RT,name:"menubar",schema:[Xo("backstage")]}),YA=FO.optional({factory:{sketch:e=>VO.sketch({uid:e.uid,dom:e.dom,listBehaviours:Dl([af.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>KA({type:e.type,uid:ri("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),A.some(!0))}),setupItem:(e,t,n,o)=>{WO.setGroups(t,n)},shell:!0})},name:"multiple-toolbar",schema:[Xo("dom"),Xo("onEscape")]}),XA=FO.optional({factory:{sketch:e=>{const t=(e=>e.type===Cg.sliding?qA:e.type===Cg.floating?WA:KA)(e);return t({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),A.some(!0)),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[Xo("dom"),Xo("onEscape"),Xo("getSink")]}),JA=FO.optional({factory:{sketch:e=>{const t=e.editor,n=e.sticky?ST:GO;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Dl(n(t,e.sharedBackstage))}}},name:"header",schema:[Xo("dom")]}),QA=FO.optional({name:"socket",schema:[Xo("dom")]}),ZA=FO.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Dl([Aw.config({}),Cf.config({}),KT.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:e=>{jh.getCurrent(e).each(ZT.hideAllSlots),As(e,iA)},onGrown:e=>{As(e,iA)},onStartGrow:e=>{Ds(e,sA,{width:kt(e.element,"width").getOr("")})},onStartShrink:e=>{Ds(e,sA,{width:jt(e.element)+"px"})}}),gf.config({}),jh.config({find:e=>{const t=gf.contents(e);return ne(t)}})])}],behaviours:Dl([BS(0),bf("sidebar-sliding-events",[Fs(sA,((e,t)=>{xt(e.element,"width",t.event.width)})),Fs(iA,((e,t)=>{Tt(e.element,"width")}))])])})},name:"sidebar",schema:[Xo("dom")]}),eD=FO.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Dl([gf.config({}),cA.config({focus:!1}),jh.config({find:e=>ne(e.components())})]),components:[]})},name:"throbber",schema:[Xo("dom")]});var tD=Bh({name:"OuterContainer",factory:(e,t,n)=>{const o={getSocket:t=>IO.getPart(t,e,"socket"),setSidebar:(t,n)=>{IO.getPart(t,e,"sidebar").each((e=>((e,t)=>{jh.getCurrent(e).each((e=>gf.set(e,[oA(t)])))})(e,n)))},toggleSidebar:(t,n)=>{IO.getPart(t,e,"sidebar").each((e=>((e,t)=>{jh.getCurrent(e).each((e=>{jh.getCurrent(e).each((n=>{KT.hasGrown(e)?ZT.isShowing(n,t)?KT.shrink(e):(ZT.hideAllSlots(n),ZT.showSlot(n,t)):(ZT.hideAllSlots(n),ZT.showSlot(n,t),KT.grow(e))}))}))})(e,n)))},whichSidebar:t=>IO.getPart(t,e,"sidebar").bind(rA).getOrNull(),getHeader:t=>IO.getPart(t,e,"header"),getToolbar:t=>IO.getPart(t,e,"toolbar"),setToolbar:(t,n)=>{IO.getPart(t,e,"toolbar").each((e=>{e.getApis().setGroups(e,n)}))},setToolbars:(t,n)=>{IO.getPart(t,e,"multiple-toolbar").each((e=>{VO.setItems(e,n)}))},refreshToolbar:t=>{IO.getPart(t,e,"toolbar").each((e=>e.getApis().refresh(e)))},toggleToolbarDrawer:t=>{IO.getPart(t,e,"toolbar").each((e=>{var t,n;t=e.getApis().toggle,n=t=>t(e),null!=t?A.some(n(t)):A.none()}))},isToolbarDrawerToggled:t=>IO.getPart(t,e,"toolbar").bind((e=>A.from(e.getApis().isOpen).map((t=>t(e))))).getOr(!1),getThrobber:t=>IO.getPart(t,e,"throbber"),focusToolbar:t=>{IO.getPart(t,e,"toolbar").orThunk((()=>IO.getPart(t,e,"multiple-toolbar"))).each((e=>{af.focusIn(e)}))},setMenubar:(t,n)=>{IO.getPart(t,e,"menubar").each((e=>{RT.setMenus(e,n)}))},focusMenubar:t=>{IO.getPart(t,e,"menubar").each((e=>{RT.focus(e)}))}};return{uid:e.uid,dom:e.dom,components:t,apis:o,behaviours:e.behaviours}},configFields:[Xo("dom"),Xo("behaviours")],partFields:[JA,GA,XA,YA,QA,ZA,eD],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,n)=>{e.setSidebar(t,n)},toggleSidebar:(e,t,n)=>{e.toggleSidebar(t,n)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,n)=>{const o=z(n,(e=>VA(e)));e.setToolbar(t,o)},setToolbars:(e,t,n)=>{const o=z(n,(e=>z(e,VA)));e.setToolbars(t,o)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,n)=>{e.setMenubar(t,n)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)}}});const nD={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},oD=e=>"string"==typeof e?e.split(" "):e,rD=(e,t)=>{const n={...nD,...t.menus},o=ie(t.menus).length>0,r=void 0===t.menubar||!0===t.menubar?oD("file edit view insert format tools table help"):oD(!1===t.menubar?"":t.menubar),s=V(r,(e=>{const n=be(nD,e);return o?n||ge(t.menus,e).exists((e=>be(e,"items"))):n})),i=z(s,(o=>{const r=n[o];return((e,t,n)=>{const o=Hg(n).split(/[ ,]/);return{text:e.title,getItems:()=>G(e.items,(e=>{const n=e.toLowerCase();return 0===n.trim().length||B(o,(e=>e===n))?[]:"separator"===n||"|"===n?[{type:"separator"}]:t.menuItems[n]?[t.menuItems[n]]:[]}))}})({title:r.title,items:oD(r.items)},t,e)}));return V(i,(e=>e.getItems().length>0&&B(e.getItems(),(e=>"separator"!==e.type))))},sD=e=>{const t=()=>{e._skinLoaded=!0,(e=>{e.dispatch("SkinLoaded")})(e)};return()=>{e.initialized?t():e.on("init",t)}},iD=(e,t,n)=>(e.on("remove",(()=>n.unload(t))),n.load(t)),aD=(e,t)=>iD(e,t+"/skin.min.css",e.ui.styleSheetLoader),lD=(e,t)=>{var n;if(n=Re.fromDom(e.getElement()),st(n).isSome()){return iD(e,t+"/skin.shadowdom.min.css",Sg.DOM.styleSheetLoader)}return Promise.resolve()},cD=(e,t)=>{const n=ub(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css"),!cb(t)&&s(n)?Promise.all([aD(t,n),lD(t,n)]).then(sD(t),((e,t)=>()=>((e,t)=>e.dispatch("SkinLoadError",t))(e,{message:t}))(t,"Skin could not be loaded")):sD(t)()},dD=C(cD,!1),uD=C(cD,!0),hD=(e,t)=>n=>{const o=sc(),r=()=>{n.setActive(e.formatter.match(t));const r=e.formatter.formatChanged(t,n.setActive);o.set(r)};return e.initialized?r():e.once("init",r),()=>{e.off("init",r),o.clear()}},mD=(e,t,n)=>o=>{const r=()=>n(o),s=()=>{n(o),e.on(t,r)};return e.initialized?s():e.once("init",s),()=>{e.off("init",s),e.off(t,r)}},pD=e=>t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)}))},fD=(e,t)=>()=>e.execCommand(t),gD=(e,t,n)=>{const o=(e,o,s,i)=>{const a=t.shared.providers.translate(e.title);if("separator"===e.type)return A.some({type:"separator",text:a});if("submenu"===e.type){const t=G(e.getStyleItems(),(e=>r(e,o,i)));return 0===o&&t.length<=0?A.none():A.some({type:"nestedmenuitem",text:a,enabled:t.length>0,getSubmenuItems:()=>G(e.getStyleItems(),(e=>r(e,o,i)))})}return A.some({type:"togglemenuitem",text:a,icon:e.icon,active:e.isSelected(i),enabled:!s,onAction:n.onAction(e),...e.getStylePreview().fold((()=>({})),(e=>({meta:{style:e}})))})},r=(e,t,r)=>{const s="formatter"===e.type&&n.isInvalid(e);return 0===t?s?[]:o(e,t,!1,r).toArray():o(e,t,s,r).toArray()},s=e=>{const t=n.getCurrentValue(),o=n.shouldHide?0:1;return G(e,(e=>r(e,o,t)))};return{validateItems:s,getFetch:(e,t)=>(n,o)=>{const r=t(),i=s(r);o(yk(i,Tb.CLOSE_ON_EXECUTE,e,!1))}}},bD=(e,t,n)=>{const o=n.dataset,r="basic"===o.type?()=>z(o.data,(e=>iO(e,n.isSelectedFor,n.getPreviewFor))):o.getData;return{items:gD(0,t,n),getStyleItems:r}},vD=(e,t,n)=>{const{items:o,getStyleItems:r}=bD(0,t,n),s=mD(e,"NodeChange",(e=>{const t=e.getComponent();n.updateText(t)}));return mk({text:n.icon.isSome()?A.none():n.text,icon:n.icon,tooltip:A.from(n.tooltip),role:A.none(),fetch:o.getFetch(t,r),onSetup:s,getApi:e=>({getComponent:y(e)}),columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};var yD;!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(yD||(yD={}));const xD=(e,t,n)=>{const o=(e=>z(e,(e=>{let t=e,n=e;const o=e.split("=");return o.length>1&&(t=o[0],n=o[1]),{title:t,format:n}})))(((e,t)=>t===yD.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "))(e.options.get(t),n));return{type:"basic",data:o}},wD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],CD=e=>{const t={type:"basic",data:wD};return{tooltip:"Align",text:A.none(),icon:A.some("align-left"),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:A.none,getPreviewFor:e=>A.none,onAction:t=>()=>W(wD,(e=>e.format===t.format)).each((t=>e.execCommand(t.command))),updateText:t=>{const n=W(wD,(t=>e.formatter.match(t.format))),o=n.fold(y("left"),(e=>e.title.toLowerCase()));Ds(t,hk,{icon:`align-${o}`})},dataset:t,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},_D=(e,t)=>{const n=t(),o=z(n,(e=>e.format));return A.from(e.formatter.closest(o)).bind((e=>W(n,(t=>t.format===e)))).orThunk((()=>Ce(e.formatter.match("p"),{title:"Paragraph",format:"p"})))},SD=e=>{const t="Paragraph",n=xD(e,"block_formats",yD.SemiColon);return{tooltip:"Blocks",text:A.some(t),icon:A.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:A.none,getPreviewFor:t=>()=>{const n=e.formatter.get(t);return A.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))})},onAction:pD(e),updateText:o=>{const r=_D(e,(()=>n.data)).fold(y(t),(e=>e.title));Ds(o,uk,{text:r})},dataset:n,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},kD=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],ED=e=>{const t=e.split(/\s*,\s*/);return z(t,(e=>e.replace(/^['"]+|['"]+$/g,"")))},OD=e=>{const t="System Font",n=()=>{const n=e=>e?ED(e)[0]:"",r=e.queryCommandValue("FontName"),s=o.data,i=r?r.toLowerCase():"",a=W(s,(e=>{const t=e.format;return t.toLowerCase()===i||n(t).toLowerCase()===n(i).toLowerCase()})).orThunk((()=>Ce((e=>0===e.indexOf("-apple-system")&&(()=>{const t=ED(e.toLowerCase());return Y(kD,(e=>t.indexOf(e.toLowerCase())>-1))})())(i),{title:t,format:i})));return{matchOpt:a,font:r}},o=xD(e,"font_family_formats",yD.SemiColon);return{tooltip:"Fonts",text:A.some(t),icon:A.none(),isSelectedFor:e=>t=>t.exists((t=>t.format===e)),getCurrentValue:()=>{const{matchOpt:e}=n();return e},getPreviewFor:e=>()=>A.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}}),onAction:t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontName",!1,t.format)}))},updateText:e=>{const{matchOpt:t,font:o}=n(),r=t.fold(y(o),(e=>e.title));Ds(e,uk,{text:r})},dataset:o,shouldHide:!1,isInvalid:E}},TD={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},AD={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},DD=(e,t)=>/[0-9.]+px$/.test(e)?((e,t)=>{const n=Math.pow(10,t);return Math.round(e*n)/n})(72*parseInt(e,10)/96,t||0)+"pt":ge(AD,e).getOr(e),RD=e=>ge(TD,e).getOr(""),MD=e=>{const t=()=>{let t=A.none();const n=o.data,r=e.queryCommandValue("FontSize");if(r)for(let e=3;t.isNone()&&e>=0;e--){const o=DD(r,e),s=RD(o);t=W(n,(e=>e.format===r||e.format===o||e.format===s))}return{matchOpt:t,size:r}},n=y(A.none),o=xD(e,"font_size_formats",yD.Space);return{tooltip:"Font sizes",text:A.some("12pt"),icon:A.none(),isSelectedFor:e=>t=>t.exists((t=>t.format===e)),getPreviewFor:n,getCurrentValue:()=>{const{matchOpt:e}=t();return e},onAction:t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontSize",!1,t.format)}))},updateText:e=>{const{matchOpt:n,size:o}=t(),r=n.fold(y(o),(e=>e.title));Ds(e,uk,{text:r})},dataset:o,shouldHide:!1,isInvalid:E}},ND=(e,t)=>{const n="Paragraph";return{tooltip:"Formats",text:A.some(n),icon:A.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:A.none,getPreviewFor:t=>()=>{const n=e.formatter.get(t);return void 0!==n?A.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):A.none()},onAction:pD(e),updateText:t=>{const o=e=>{const t=e.items;return void 0!==t&&t.length>0?G(t,o):[{title:e.title,format:e.format}]},r=G(sO(e),o),s=_D(e,y(r)).fold(y(n),(e=>e.title));Ds(t,uk,{text:s})},shouldHide:zg(e),isInvalid:t=>!e.formatter.canApply(t.format),dataset:t}};var PD=Object.freeze({__proto__:null,events:(e,t)=>{const n=(n,o)=>{e.updateState.each((e=>{const r=e(n,o);t.set(r)})),e.renderComponents.each((r=>{const s=r(o,t.get());(e.reuseDom?cf:lf)(n,s)}))};return Ls([Fs(as(),((t,o)=>{const r=o;if(!r.universal){const o=e.channel;L(r.channels,o)&&n(t,r.data)}})),qs(((t,o)=>{e.initialData.each((e=>{n(t,e)}))}))])}});var LD=Object.freeze({__proto__:null,getState:(e,t,n)=>n}),BD=[Xo("channel"),sr("renderComponents"),sr("updateState"),sr("initialData"),vr("reuseDom",!0)];const ID=Ml({fields:BD,name:"reflecting",active:PD,apis:LD,state:Object.freeze({__proto__:null,init:()=>{const e=Cr(A.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(A.none())}}})}),FD=y([Xo("toggleClass"),Xo("fetch"),za("onExecute"),mr("getHotspot",A.some),mr("getAnchorOverrides",y({})),Nc(),za("onItemExecute"),sr("lazySink"),Xo("dom"),Ia("onOpen"),Mu("splitDropdownBehaviours",[fC,af,Cf]),mr("matchWidth",!1),mr("useMinWidth",!1),mr("eventOrder",{}),sr("role")].concat(TC())),zD=ah({factory:lg,schema:[Xo("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Dl([Cf.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(Rs)},buttonBehaviours:Dl([Pf.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),jD=ah({factory:lg,schema:[Xo("dom")],name:"button",defaults:()=>({buttonBehaviours:Dl([Cf.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each((n=>{e.onExecute(n,t)}))}})}),HD=y([zD,jD,ch({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[Xo("text")],name:"aria-descriptor"}),lh({schema:[Pa()],name:"menu",defaults:e=>({onExecute:(t,n)=>{t.getSystem().getByUid(e.uid).each((o=>{e.onItemExecute(o,t,n)}))}})}),bC()]),VD=Bh({name:"SplitDropdown",configFields:FD(),partFields:HD(),factory:(e,t,n,o)=>{const r=e=>{jh.getCurrent(e).each((e=>{um.highlightFirst(e),af.focusIn(e)}))},s=t=>{CC(e,x,t,o,r,vC.HighlightFirst).get(b)},i=t=>{const n=Ch(t,e,"button");return Rs(n),A.some(!0)},a={...Ls([qs(((t,n)=>{wh(t,e,"aria-descriptor").each((e=>{const n=ri("aria");ht(e.element,"id",n),ht(t.element,"aria-describedby",n)}))}))]),...If(A.some(s))},l={repositionMenus:e=>{Pf.isOn(e)&&OC(e)}};return{uid:e.uid,dom:e.dom,components:t,apis:l,eventOrder:{...e.eventOrder,[ls()]:["disabling","toggling","alloy.base.behaviour"]},events:a,behaviours:Pu(e.splitDropdownBehaviours,[fC.config({others:{sandbox:t=>{const n=Ch(t,e,"arrow");return EC(e,t,{onOpen:()=>{Pf.on(n),Pf.on(t)},onClose:()=>{Pf.off(n),Pf.off(t)}})}}}),af.config({mode:"special",onSpace:i,onEnter:i,onDown:e=>(s(e),A.some(!0))}),Cf.config({}),Pf.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),$D=e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),UD=e=>({setActive:t=>{Pf.set(e,t)},isActive:()=>Pf.isOn(e),isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),WD=(e,t)=>e.map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),qD=ri("focus-button"),KD=(e,t,n,o,r,s)=>({dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:WD(n,s)},components:Ny([e.map((e=>lk(e,s.icons))),t.map((e=>dk(e,"tox-tbtn",s)))]),eventOrder:{[jr()]:["focusing","alloy.base.behaviour","common-button-display-events"]},buttonBehaviours:Dl([Oy(s.isDisabled),_y(),bf("common-button-display-events",[Fs(jr(),((e,t)=>{t.event.prevent(),As(e,qD)}))])].concat(o.map((n=>ID.config({channel:n,initialData:{icon:e,text:t},renderComponents:(e,t)=>Ny([e.icon.map((e=>lk(e,s.icons))),e.text.map((e=>dk(e,"tox-tbtn",s)))])}))).toArray()).concat(r.getOr([])))}),GD=(e,t,n)=>{const o=Cr(b),r=KD(e.icon,e.text,e.tooltip,A.none(),A.none(),n);return lg.sketch({dom:r.dom,components:r.components,eventOrder:ik,buttonBehaviours:Dl([bf("toolbar-button-events",[(s={onAction:e.onAction,getApi:t.getApi},Ys(((e,t)=>{Ty(s,e)((t=>{Ds(e,sk,{buttonApi:t}),s.onAction(t)}))}))),Ay(t,o),Dy(t,o)]),Oy((()=>!e.enabled||n.isDisabled())),_y()].concat(t.toolbarButtonBehaviours))});var s},YD=(e,t,n)=>GD(e,{toolbarButtonBehaviours:[].concat(n.length>0?[bf("toolbarButtonWith",n)]:[]),getApi:$D,onSetup:e.onSetup},t),XD=(e,t,n)=>ao(GD(e,{toolbarButtonBehaviours:[gf.config({}),Pf.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[bf("toolbarToggleButtonWith",n)]:[]),getApi:UD,onSetup:e.onSetup},t)),JD=(e,t,n)=>o=>eC((e=>t.fetch(e))).map((r=>A.from(aw(ao(jx(ri("menu-value"),r,(n=>{t.onItemAction(e(o),n)}),t.columns,t.presets,Tb.CLOSE_ON_EXECUTE,t.select.getOr(E),n),{movement:Vx(t.columns,t.presets),menuBehaviours:cy("auto"!==t.columns?[]:[qs(((e,n)=>{ay(e,4,jb(t.presets)).each((({numRows:t,numColumns:n})=>{af.setGridSize(e,t,n)}))}))])}))))),QD=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],ZD=(e,t)=>(n,o,r)=>{const s=e(n).mapError((e=>Wo(e))).getOrDie();return t(s,o,r)},eR={button:ZD(Mv,((e,t)=>{return n=e,o=t.backstage.shared.providers,YD(n,o,[]);var n,o})),togglebutton:ZD(Lv,((e,t)=>{return n=e,o=t.backstage.shared.providers,XD(n,o,[]);var n,o})),menubutton:ZD(AT,((e,t)=>Qk(e,"tox-tbtn",t.backstage,A.none()))),splitbutton:ZD((e=>Vo("SplitButton",DT,e)),((e,t)=>((e,t)=>{const n=ri("channel-update-split-dropdown-display"),o=e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t),setIconFill:(t,n)=>{ba(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each((e=>{ht(e,"fill",n)}))},setActive:t=>{ht(e.element,"aria-pressed",t),ba(e.element,"span").each((n=>{e.getSystem().getByDom(n).each((e=>Pf.set(e,t)))}))},isActive:()=>ba(e.element,"span").exists((t=>e.getSystem().getByDom(t).exists(Pf.isOn)))}),r=Cr(b),s={getApi:o,onSetup:e.onSetup};return VD.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...WD(e.tooltip,t.providers)}},onExecute:t=>{e.onAction(o(t))},onItemExecute:(e,t,n)=>{},splitDropdownBehaviours:Dl([Ey(t.providers.isDisabled),_y(),bf("split-dropdown-events",[Fs(qD,Cf.focus),Ay(s,r),Dy(s,r)]),MC.config({})]),eventOrder:{[ys()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:JD(o,e,t.providers),parts:{menu:qb(0,e.columns,e.presets)},components:[VD.parts.button(KD(e.icon,e.text,A.none(),A.some(n),A.some([Pf.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),VD.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:gg("chevron-down",t.providers.icons)},buttonBehaviours:Dl([Ey(t.providers.isDisabled),_y(),bg()])}),VD.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})})(e,t.backstage.shared))),grouptoolbarbutton:ZD((e=>Vo("GroupToolbarButton",ET,e)),((e,t,n)=>{const o=n.ui.registry.getAll().buttons,r=e=>rR(n,{buttons:o,toolbar:e,allowToolbarGroups:!1},t,A.none()),s={[Rc]:t.backstage.shared.header.isPositionedAtTop()?Dc.TopToBottom:Dc.BottomToTop};if(Vg(n)===Cg.floating)return((e,t,n,o)=>{const r=t.shared;return AA.sketch({lazySink:r.getSink,fetch:()=>eC((t=>{t(z(n(e.items),VA))})),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:KD(e.icon,e.text,e.tooltip,A.none(),A.none(),r.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o}}}})})(e,t.backstage,r,s);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})),styleSelectButton:(e,t)=>((e,t)=>{const n={type:"advanced",...t.styles};return vD(e,t,ND(e,n))})(e,t.backstage),fontsizeSelectButton:(e,t)=>((e,t)=>vD(e,t,MD(e)))(e,t.backstage),fontSelectButton:(e,t)=>((e,t)=>vD(e,t,OD(e)))(e,t.backstage),formatButton:(e,t)=>((e,t)=>vD(e,t,SD(e)))(e,t.backstage),alignMenuButton:(e,t)=>((e,t)=>vD(e,t,CD(e)))(e,t.backstage)},tR={styles:eR.styleSelectButton,fontsize:eR.fontsizeSelectButton,fontfamily:eR.fontSelectButton,blocks:eR.formatButton,align:eR.alignMenuButton},nR=e=>{const t=e.toolbar,n=e.buttons;return!1===t?[]:void 0===t||!0===t?(e=>{const t=z(QD,(t=>{const n=V(t.items,(t=>be(e,t)||be(tR,t)));return{name:t.name,items:n}}));return V(t,(e=>e.items.length>0))})(n):s(t)?(e=>{const t=e.split("|");return z(t,(e=>({items:e.trim().split(" ")})))})(t):(e=>g(e,(e=>be(e,"name")&&be(e,"items"))))(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},oR=(e,t,n,o,r,s)=>ge(t,n.toLowerCase()).orThunk((()=>s.bind((e=>se(e,(e=>ge(t,e+n.toLowerCase()))))))).fold((()=>ge(tR,n.toLowerCase()).map((t=>t(e,r))).orThunk((()=>A.none()))),(t=>"grouptoolbarbutton"!==t.type||o?((e,t,n)=>ge(eR,e.type).fold((()=>(console.error("skipping button defined by",e),A.none())),(o=>A.some(o(e,t,n)))))(t,r,e):(console.warn(`Ignoring the '${n}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()))),rR=(e,t,n,o)=>{const r=nR(t),s=z(r,(r=>{const s=G(r.items,(r=>0===r.trim().length?[]:oR(e,t.buttons,r,t.allowToolbarGroups,n,o).toArray()));return{title:A.from(e.translate(r.name)),items:s}}));return V(s,(e=>e.items.length>0))},sR=(e,t,n,o)=>{const r=t.outerContainer,i=n.toolbar,a=n.buttons;if(g(i,s)){const t=i.map((t=>{const r={toolbar:t,buttons:a,allowToolbarGroups:n.allowToolbarGroups};return rR(e,r,{backstage:o},A.none())}));tD.setToolbars(r,t)}else tD.setToolbar(r,rR(e,n,{backstage:o},A.none()))},iR=vn(),aR=iR.os.isiOS()&&iR.os.version.major<=12;var lR=Object.freeze({__proto__:null,render:(e,t,n,o,r)=>{const s=Cr(0),i=t.outerContainer;dD(e);const a=Re.fromDom(r.targetNode),l=rt(ot(a));((e,t)=>{Zd(e,t,_n)})(a,t.mothership),Qd(l,t.uiMothership),e.on("PostRender",(()=>{sR(e,t,n,o),s.set(e.getWin().innerWidth),tD.setMenubar(i,rD(e,n)),tD.setSidebar(i,n.sidebar),((e,t)=>{const n=e.dom;let o=e.getWin();const r=e.getDoc().documentElement,s=Cr(Lt(o.innerWidth,o.innerHeight)),i=Cr(Lt(r.offsetWidth,r.offsetHeight)),a=()=>{const t=s.get();t.left===o.innerWidth&&t.top===o.innerHeight||(s.set(Lt(o.innerWidth,o.innerHeight)),bx(e))},l=()=>{const t=e.getDoc().documentElement,n=i.get();n.left===t.offsetWidth&&n.top===t.offsetHeight||(i.set(Lt(t.offsetWidth,t.offsetHeight)),bx(e))},c=t=>((e,t)=>e.dispatch("ScrollContent",t))(e,t);n.bind(o,"resize",a),n.bind(o,"scroll",c);const d=cc(Re.fromDom(e.getBody()),"load",l),u=t.uiMothership.element;e.on("hide",(()=>{xt(u,"display","none")})),e.on("show",(()=>{Tt(u,"display")})),e.on("NodeChange",l),e.on("remove",(()=>{d.unbind(),n.unbind(o,"resize",a),n.unbind(o,"scroll",c),o=null}))})(e,t)}));const d=tD.getSocket(i).getOrDie("Could not find expected socket element");if(aR){wt(d.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const t=((e,t)=>{let n=null;return{cancel:()=>{c(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{c(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}})((()=>{e.dispatch("ScrollContent")}),20),n=lc(d.element,"scroll",t.throttle);e.on("remove",n.unbind)}Cy(e,t),e.addCommand("ToggleSidebar",((t,n)=>{tD.toggleSidebar(i,n),e.dispatch("ToggleSidebar")})),e.addQueryValueHandler("ToggleSidebar",(()=>tD.whichSidebar(i)));const u=Vg(e);u!==Cg.sliding&&u!==Cg.floating||e.on("ResizeWindow ResizeEditor ResizeContent",(()=>{const n=e.getWin().innerWidth;n!==s.get()&&(tD.refreshToolbar(t.outerContainer),s.set(n))}));const h={setEnabled:e=>{wy(t,!e)},isEnabled:()=>!em.isDisabled(i)};return{iframeContainer:d.element.dom,editorContainer:i.element.dom,api:h}}});const cR=e=>/^[0-9\.]+(|px)$/i.test(""+e)?A.some(parseInt(""+e,10)):A.none(),dR=e=>f(e)?e+"px":e,uR=(e,t,n)=>{const o=t.filter((t=>e<t)),r=n.filter((t=>e>t));return o.or(r).getOr(e)},hR=e=>{const t=(e=>{const t=Rg(e),n=Pg(e),o=Bg(e);return cR(t).map((e=>uR(e,n,o)))})(e);return t.getOr(Rg(e))},mR=e=>{const t=Mg(e),n=Ng(e),o=Lg(e);return cR(t).map((e=>uR(e,n,o)))},{ToolbarLocation:pR,ToolbarMode:fR}=_b,gR=(e,t,n,o,r)=>{const{uiMothership:s,outerContainer:i}=n,a=Sg.DOM,l=vb(e),c=wb(e),d=Lg(e).or(mR(e)),u=o.shared.header,h=u.isPositionedAtTop,m=Vg(e),p=m===fR.sliding||m===fR.floating,f=Cr(!1),g=()=>f.get()&&!e.removed,b=e=>p?e.fold(y(0),(e=>e.components().length>1?Mt(e.components()[1].element):0)):0,v=()=>{s.broadcastOn([mu()],{})},x=(e=!1)=>{if(g()){if(l||(()=>{const e=d.getOrThunk((()=>{const e=cR(_t(ct(),"margin-left")).getOr(0);return jt(ct())-It(t).left+e}));xt(r.get().element,"max-width",e+"px")})(),p&&tD.refreshToolbar(i),l||(()=>{const e=tD.getToolbar(i),n=b(e),o=Fn(t),s=h()?Math.max(o.y-Mt(r.get().element)+n,0):o.bottom;wt(i.element,{position:"absolute",top:Math.round(s)+"px",left:Math.round(o.x)+"px"})})(),c){const t=r.get();e?fT.reset(t):fT.refresh(t)}v()}},w=(n=!0)=>{if(l||!c||!g())return;const o=u.getDockingMode(),s=(n=>{switch(Ug(e)){case pR.auto:const e=tD.getToolbar(i),o=b(e),r=Mt(n.element)-o,s=Fn(t);if(s.y>r)return"top";{const e=We(t),n=Math.max(e.dom.scrollHeight,Mt(e));return s.bottom<n-r||jn().bottom<s.bottom-r?"bottom":"top"}case pR.bottom:return"bottom";case pR.top:default:return"top"}})(r.get());s!==o&&((e=>{const t=r.get();fT.setModes(t,[e]),u.setDockingMode(e);const n=h()?Dc.TopToBottom:Dc.BottomToTop;ht(t.element,Rc,n)})(s),n&&x(!0))};return{isVisible:g,isPositionedAtTop:h,show:()=>{f.set(!0),xt(i.element,"display","flex"),a.addClass(e.getBody(),"mce-edit-focus"),Tt(s.element,"display"),w(!1),x()},hide:()=>{f.set(!1),n.outerContainer&&(xt(i.element,"display","none"),a.removeClass(e.getBody(),"mce-edit-focus")),xt(s.element,"display","none")},update:x,updateMode:w,repositionPopups:v}},bR=(e,t)=>{const n=Fn(e);return{pos:t?n.y:n.bottom,bounds:n}};var vR=Object.freeze({__proto__:null,render:(e,t,n,o,r)=>{const{mothership:s,uiMothership:i,outerContainer:a}=t,l=Cr(null),c=Re.fromDom(r.targetNode),d=gR(e,c,t,o,l),u=Kg(e);uD(e);const h=()=>{if(l.get())return void d.show();l.set(tD.getHeader(a).getOrDie());const r=yb(e);Qd(r,s),Qd(r,i),sR(e,t,n,o),tD.setMenubar(a,rD(e,n)),d.show(),((e,t,n,o)=>{const r=Cr(bR(t,n.isPositionedAtTop())),s=o=>{const{pos:s,bounds:i}=bR(t,n.isPositionedAtTop()),{pos:a,bounds:l}=r.get(),c=i.height!==l.height||i.width!==l.width;r.set({pos:s,bounds:i}),c&&bx(e,o),n.isVisible()&&(a!==s?n.update(!0):c&&(n.updateMode(),n.repositionPopups()))};o||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",(()=>n.update(!0))),e.on("NodeChange keydown",(e=>{requestAnimationFrame((()=>s(e)))})),e.on("ScrollWindow",(()=>n.updateMode()));const i=sc();i.set(cc(Re.fromDom(e.getBody()),"load",s)),e.on("remove",(()=>{i.clear()}))})(e,c,d,u),e.nodeChanged()};e.on("show",h),e.on("hide",d.hide),u||(e.on("focus",h),e.on("blur",d.hide)),e.on("init",(()=>{(e.hasFocus()||u)&&h()})),Cy(e,t);const m={show:()=>{h()},hide:()=>{d.hide()},setEnabled:e=>{wy(t,!e)},isEnabled:()=>!em.isDisabled(a)};return{editorContainer:a.element.dom,api:m}}});const yR="contexttoolbar-hide",xR=(e,t)=>Fs(sk,((n,o)=>{const r=(e=>({hide:()=>As(e,hs()),getValue:()=>Ru.getValue(e)}))(e.get(n));t.onAction(r,o.event.buttonApi)})),wR=(e,t,n)=>{const o={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===t.type?((e,t,n)=>{const{primary:o,...r}=t.original,s=$o(Lv({...r,type:"togglebutton",onAction:b}));return XD(s,n.backstage.shared.providers,[xR(e,t)])})(e,t,o):((e,t,n)=>{const{primary:o,...r}=t.original,s=$o(Mv({...r,type:"button",onAction:b}));return YD(s,n.backstage.shared.providers,[xR(e,t)])})(e,t,o)},CR=(e,t)=>{const n=e.label.fold((()=>({})),(e=>({"aria-label":e}))),o=cg(Yw.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Dl([af.config({mode:"special",onEnter:e=>r.findPrimary(e).map((e=>(Rs(e),!0))),onLeft:(e,t)=>(t.cut(),A.none()),onRight:(e,t)=>(t.cut(),A.none())})])})),r=((e,t,n)=>{const o=z(t,(t=>cg(wR(e,t,n))));return{asSpecs:()=>z(o,(e=>e.asSpec())),findPrimary:e=>se(t,((t,n)=>t.primary?A.from(o[n]).bind((t=>t.getOpt(e))).filter(_(em.isDisabled)):A.none()))}})(o,e.commands,t);return[{title:A.none(),items:[o.asSpec()]},{title:A.none(),items:r.asSpecs()}]},_R=CR,SR=(e,t,n=.01)=>t.bottom-e.y>=n&&e.bottom-t.y>=n,kR=e=>{const t=(e=>{const t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){const n=Ze(Re.fromDom(e.startContainer),e.startOffset).element;return(Le(n)?Ke(n):A.some(n)).filter(Pe).map((e=>e.dom.getBoundingClientRect())).getOr(t)}return t})(e.selection.getRng());if(e.inline){const e=An();return In(e.left+t.left,e.top+t.top,t.width,t.height)}{const n=zn(Re.fromDom(e.getBody()));return In(n.x+t.left,n.y+t.top,t.width,t.height)}},ER=(e,t,n,o=0)=>{const r=Mn(window),s=Fn(Re.fromDom(e.getContentAreaContainer())),i=db(e)||mb(e)||fb(e),{x:a,width:l}=((e,t,n)=>{const o=Math.max(e.x+n,t.x);return{x:o,width:Math.min(e.right-n,t.right)-o}})(s,r,o);if(e.inline&&!i)return In(a,r.y,l,r.height);{const i=t.header.isPositionedAtTop(),{y:c,bottom:d}=((e,t,n,o,r,s)=>{const i=Re.fromDom(e.getContainer()),a=ba(i,".tox-editor-header").getOr(i),l=Fn(a),c=l.y>=t.bottom,d=o&&!c;if(e.inline&&d)return{y:Math.max(l.bottom+s,n.y),bottom:n.bottom};if(e.inline&&!d)return{y:n.y,bottom:Math.min(l.y-s,n.bottom)};const u="line"===r?Fn(i):t;return d?{y:Math.max(l.bottom+s,n.y),bottom:Math.min(u.bottom-s,n.bottom)}:{y:Math.max(u.y+s,n.y),bottom:Math.min(l.y-s,n.bottom)}})(e,s,r,i,n,o);return In(a,c,l,d-c)}},OR={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},TR={maxHeightFunction:wc(),maxWidthFunction:_A()},AR=e=>"node"===e,DR=(e,t,n,o,r)=>{const s=kR(e),i=o.lastElement().exists((e=>He(n,e)));if(((e,t)=>{const n=e.selection.getRng(),o=Ze(Re.fromDom(n.startContainer),n.startOffset);return n.startContainer===n.endContainer&&n.startOffset===n.endOffset-1&&He(o.element,t)})(e,n))return i?HE:BE;if(i)return((e,t,n)=>{const o=kt(e,"position");xt(e,"position",t);const r=n(e);return o.each((t=>xt(e,"position",t))),r})(t,o.getMode(),(()=>SR(s,Fn(t))&&!o.isReposition()?$E:HE));return("fixed"===o.getMode()?r.y+An().top:r.y)+(Mt(t)+12)<=s.y?BE:IE},RR=(e,t,n,o)=>{const r=t=>(o,r,s,i,a)=>({...DR(e,i,t,n,a)({...o,y:a.y,height:a.height},r,s,i,a),alwaysFit:!0}),s=e=>AR(o)?[r(e)]:[];return t?{onLtr:e=>[fl,dl,ul,hl,ml,pl].concat(s(e)),onRtl:e=>[fl,ul,dl,ml,hl,pl].concat(s(e))}:{onLtr:e=>[pl,fl,hl,dl,ml,ul].concat(s(e)),onRtl:e=>[pl,fl,ml,ul,hl,dl].concat(s(e))}},MR=(e,t)=>{const n=V(t,(t=>t.predicate(e.dom))),{pass:o,fail:r}=H(n,(e=>"contexttoolbar"===e.type));return{contextToolbars:o,contextForms:r}},NR=(e,t,n)=>{const o=MR(e,t);if(o.contextForms.length>0)return A.some({elem:e,toolbars:[o.contextForms[0]]});{const t=MR(e,n);if(t.contextForms.length>0)return A.some({elem:e,toolbars:[t.contextForms[0]]});if(o.contextToolbars.length>0||t.contextToolbars.length>0){const n=(e=>{if(e.length<=1)return e;{const t=t=>B(e,(e=>e.position===t)),n=t=>V(e,(e=>e.position===t)),o=t("selection"),r=t("node");if(o||r){if(r&&o){const e=n("node"),t=z(n("selection"),(e=>({...e,position:"node"})));return e.concat(t)}return n(o?"selection":"node")}return n("line")}})(o.contextToolbars.concat(t.contextToolbars));return A.some({elem:e,toolbars:n})}return A.none()}},PR=(e,t,n)=>e(t)?A.none():Ar(t,(e=>{if(Pe(e)){const{contextToolbars:t,contextForms:o}=MR(e,n.inNodeScope),r=o.length>0?o:(e=>{if(e.length<=1)return e;{const t=t=>W(e,(e=>e.position===t)),n=t("selection").orThunk((()=>t("node"))).orThunk((()=>t("line"))).map((e=>e.position));return n.fold((()=>[]),(t=>V(e,(e=>e.position===t))))}})(t);return r.length>0?A.some({elem:e,toolbars:r}):A.none()}return A.none()}),e),LR=(e,t)=>{const n={},o=[],r=[],s={},i={},a=(e,a)=>{const l=$o(Vo("ContextForm",Vv,a));n[e]=l,l.launch.map((n=>{s["form:"+e]={...a.launch,type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:()=>{t(l)}}})),"editor"===l.scope?r.push(l):o.push(l),i[e]=l},l=(e,t)=>{var n;(n=t,Vo("ContextToolbar",$v,n)).each((n=>{"editor"===t.scope?r.push(n):o.push(n),i[e]=n}))},c=ie(e);return j(c,(t=>{const n=e[t];"contextform"===n.type?a(t,n):"contexttoolbar"===n.type&&l(t,n)})),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:i,formNavigators:s}},BR=ri("forward-slide"),IR=ri("backward-slide"),FR=ri("change-slide-event"),zR="tox-pop--resizing",jR="tox-pop--transition",HR=(e,t,n,o)=>{const r=o.backstage,s=r.shared,i=vn().deviceType.isTouch,a=ic(),l=ic(),c=ic(),d=ca((e=>{const t=Cr([]);return ig.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:e=>{t.set([]),ig.getContent(e).each((e=>{Tt(e.element,"visibility")})),Hi(e.element,zR),Tt(e.element,"width")},inlineBehaviours:Dl([bf("context-toolbar-events",[Ws(Zr(),((e,t)=>{"width"===t.event.raw.propertyName&&(Hi(e.element,zR),Tt(e.element,"width"))})),Fs(FR,((e,t)=>{const n=e.element;Tt(n,"width");const o=jt(n);ig.setContent(e,t.event.contents),ji(n,zR);const r=jt(n);xt(n,"width",o+"px"),ig.getContent(e).each((e=>{t.event.focus.bind((e=>(Fl(e),Hl(n)))).orThunk((()=>(af.focusIn(e),jl(ot(n)))))})),setTimeout((()=>{xt(e.element,"width",r+"px")}),0)})),Fs(BR,((e,n)=>{ig.getContent(e).each((n=>{t.set(t.get().concat([{bar:n,focus:jl(ot(e.element))}]))})),Ds(e,FR,{contents:n.event.forwardContents,focus:A.none()})})),Fs(IR,((e,n)=>{oe(t.get()).each((n=>{t.set(t.get().slice(0,t.get().length-1)),Ds(e,FR,{contents:da(n.bar),focus:n.focus})}))}))]),af.config({mode:"special",onEscape:n=>oe(t.get()).fold((()=>e.onEscape()),(e=>(As(n,IR),A.some(!0))))})]),lazySink:()=>$n.value(e.sink)})})({sink:n,onEscape:()=>(e.focus(),A.some(!0))})),u=()=>{const t=c.get().getOr("node"),n=AR(t)?1:0;return ER(e,s,t,n)},h=()=>!(e.removed||i()&&r.isContextMenuOpen()),m=()=>{if(h()){const t=u(),n=ye(c.get(),"node")?((e,t)=>t.filter(lt).map(zn).getOrThunk((()=>kR(e))))(e,a.get()):kR(e);return t.height<=0||!SR(n,t)}return!0},p=()=>{a.clear(),l.clear(),c.clear(),ig.hide(d)},f=()=>{if(ig.isOpen(d)){const e=d.element;Tt(e,"display"),m()?xt(e,"display","none"):(l.set(0),ig.reposition(d))}},g=t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Dl([af.config({mode:"acyclic"}),bf("pop-dialog-wrap-events",[qs((t=>{e.shortcuts.add("ctrl+F9","focus statusbar",(()=>af.focusIn(t)))})),Ks((t=>{e.shortcuts.remove("ctrl+F9")}))])])}),v=Vt((()=>LR(t,(e=>{const t=y([e]);Ds(d,BR,{forwardContents:g(t)})})))),y=t=>{const{buttons:n}=e.ui.registry.getAll(),r={...n,...v().formNavigators},i=Vg(e)===Cg.scrolling?Cg.scrolling:Cg.default,a=K(z(t,(t=>"contexttoolbar"===t.type?((t,n)=>rR(e,{buttons:t,toolbar:n.items,allowToolbarGroups:!1},o,A.some(["form:"])))(r,t):((e,t)=>_R(e,t))(t,s.providers))));return KA({type:i,uid:ri("context-toolbar"),initGroups:a,onEscape:A.none,cyclicKeying:!0,providers:s.providers})},x=(t,o)=>{const r="node"===t?s.anchors.node(o):s.anchors.cursor(),c=((e,t,n,o)=>"line"===t?{bubble:kc(12,0,OR),layouts:{onLtr:()=>[gl],onRtl:()=>[bl]},overrides:TR}:{bubble:kc(0,12,OR,1/12),layouts:RR(e,n,o,t),overrides:TR})(e,t,i(),{lastElement:a.get,isReposition:()=>ye(l.get(),0),getMode:()=>zd.getMode(n)});return ao(r,c)},w=(e,t)=>{if(C.cancel(),!h())return;const o=y(e),r=e[0].position,s=x(r,t);c.set(r),l.set(1);const i=d.element;Tt(i,"display"),(e=>ye(we(e,a.get(),He),!0))(t)||(Hi(i,jR),zd.reset(n,d)),ig.showWithinBounds(d,g(o),{anchor:s,transition:{classes:[jR],mode:"placement"}},(()=>A.some(u()))),t.fold(a.clear,a.set),m()&&xt(i,"display","none")},C=Lk((()=>{if(e.hasFocus()&&!e.removed)if(Vi(d.element,jR))C.throttle();else{((e,t)=>{const n=Re.fromDom(t.getBody()),o=e=>He(e,n),r=Re.fromDom(t.selection.getNode());return(e=>!o(e)&&!Ve(n,e))(r)?A.none():NR(r,e.inNodeScope,e.inEditorScope).orThunk((()=>PR(o,r,e)))})(v(),e).fold(p,(e=>{w(e.toolbars,A.some(e.elem))}))}}),17);e.on("init",(()=>{e.on("remove",p),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",f),e.on("click keyup focus SetContent",C.throttle),e.on(yR,p),e.on("contexttoolbar-show",(t=>{const n=v();ge(n.lookupTable,t.toolbarKey).each((n=>{w([n],Ce(t.target!==e,t.target)),ig.getContent(d).each(af.focusIn)}))})),e.on("focusout",(t=>{ag.setEditorTimeout(e,(()=>{Hl(n.element).isNone()&&Hl(d.element).isNone()&&p()}),0)})),e.on("SwitchMode",(()=>{e.mode.isReadOnly()&&p()})),e.on("AfterProgressState",(t=>{t.state?p():e.hasFocus()&&C.throttle()})),e.on("NodeChange",(e=>{Hl(d.element).fold(C.throttle,b)}))}))},VR={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},$R=(()=>{const e="[0-9]+",t="[eE][+-]?[0-9]+",n=e=>`(?:${e})?`,o=["Infinity","[0-9]+\\."+n(e)+n(t),"\\.[0-9]+"+n(t),e+n(t)].join("|");return new RegExp(`^(${`[+-]?(?:${o})`})(.*)$`)})(),UR=(e,t)=>A.from($R.exec(e)).bind((e=>{const n=Number(e[1]),o=e[2];return((e,t)=>B(t,(t=>B(VR[t],(t=>e===t)))))(o,t)?A.some({value:n,unit:o}):A.none()})),WR=(e,t)=>{const n=()=>{const n=t.getOptions(e),o=t.getCurrent(e).map(t.hash),r=ic();return z(n,(n=>({type:"togglemenuitem",text:t.display(n),onSetup:s=>{const i=e=>{e&&(r.on((e=>e.setActive(!1))),r.set(s)),s.setActive(e)};i(ye(o,t.hash(n)));const a=t.watcher(e,n,i);return()=>{r.clear(),a()}},onAction:()=>t.setCurrent(e,n)})))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:e=>e(n()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:n,onSetup:t.onMenuSetup})},qR={name:"lineheight",text:"Line height",icon:"line-height",getOptions:hb,hash:e=>((e,t)=>UR(e,t).map((({value:e,unit:t})=>e+t)))(e,["fixed","relative","empty"]).getOr(e),display:x,watcher:(e,t,n)=>e.formatter.formatChanged("lineheight",n,!1,{value:t}).unbind,getCurrent:e=>A.from(e.queryCommandValue("LineHeight")),setCurrent:(e,t)=>e.execCommand("LineHeight",!1,t)},KR=e=>{WR(e,qR),(e=>A.from(jg(e)).map((t=>({name:"language",text:"Language",icon:"language",getOptions:y(t),hash:e=>u(e.customCode)?e.code:`${e.code}/${e.customCode}`,display:e=>e.title,watcher:(e,t,n)=>e.formatter.formatChanged("lang",n,!1,{value:t.code,customValue:t.customCode}).unbind,getCurrent:e=>{const t=Re.fromDom(e.selection.getNode());return Dr(t,(e=>A.some(e).filter(Pe).bind((e=>ft(e,"lang").map((t=>({code:t,customCode:ft(e,"data-mce-lang").getOrUndefined(),title:""})))))))},setCurrent:(e,t)=>e.execCommand("Lang",!1,t),onToolbarSetup:t=>{const n=sc();return t.setActive(e.formatter.match("lang",{},void 0,!0)),n.set(e.formatter.formatChanged("lang",t.setActive,!0)),n.clear}}))))(e).each((t=>WR(e,t)))},GR=(e,t)=>{((e,t)=>{const n=bD(0,t,CD(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n=bD(0,t,OD(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n={type:"advanced",...t.styles},o=bD(0,t,ND(e,n));e.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})})(e,t),((e,t)=>{const n=bD(0,t,SD(e));e.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n=bD(0,t,MD(e));e.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t)},YR=e=>mD(e,"NodeChange",(t=>{t.setEnabled(e.queryCommandState("outdent"))})),XR=e=>{(e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:YR(e),onAction:fD(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:fD(e,"indent")})})(e)},JR=(e,t)=>n=>{n.setActive(t.get());const o=e=>{t.set(e.state),n.setActive(e.state)};return e.on("PastePlainTextToggle",o),()=>e.off("PastePlainTextToggle",o)},QR=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},ZR=e=>{(e=>{GS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],((t,n)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:hD(e,t.name),onAction:QR(e,t.name)})}));for(let t=1;t<=6;t++){const n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:hD(e,n),onAction:QR(e,n)})}})(e),(e=>{GS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fD(e,t.action)})}))})(e),(e=>{GS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fD(e,t.action),onSetup:hD(e,t.name)})}))})(e)},eM=e=>{ZR(e),(e=>{GS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:fD(e,t.action)})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:QR(e,"code")})})(e)},tM=(e,t)=>mD(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(n=>{n.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())})),nM=e=>{(e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:tM(e,"hasUndo"),onAction:fD(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:tM(e,"hasRedo"),onAction:fD(e,"redo")})})(e),(e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:tM(e,"hasUndo"),onAction:fD(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:tM(e,"hasRedo"),onAction:fD(e,"redo")})})(e)},oM=e=>mD(e,"VisualAid",(t=>{t.setActive(e.hasVisual)})),rM=e=>{(e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:fD(e,"mceToggleVisualAid")})})(e),(e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:oM(e),onAction:fD(e,"mceToggleVisualAid")})})(e)},sM=(e,t)=>{(e=>{j([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fD(e,t.cmd),onSetup:hD(e,t.name)})})),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:fD(e,"JustifyNone")})})(e),eM(e),GR(e,t),nM(e),(e=>{(e=>{e.addCommand("mceApplyTextcolor",((t,n)=>{((e,t,n)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}))})(e,t,n)})),e.addCommand("mceRemoveTextcolor",(t=>{((e,t)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}))})(e,t)}))})(e);const t=Cr(Rx),n=Cr(Rx);Ix(e,"forecolor","forecolor","Text color",t),Ix(e,"backcolor","hilitecolor","Background color",n),Fx(e,"forecolor","forecolor","Text color"),Fx(e,"backcolor","hilitecolor","Background color")})(e),rM(e),XR(e),KR(e),(e=>{const t=Cr(lb(e)),n=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:n,onSetup:JR(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:n,onSetup:JR(e,t)})})(e)},iM=e=>s(e)?e.split(/[ ,]/):e,aM=e=>t=>t.options.get(e),lM=aM("contextmenu_never_use_native"),cM=aM("contextmenu_avoid_overlap"),dM=e=>{const t=e.ui.registry.getAll().contextMenus,n=e.options.get("contextmenu");return e.options.isSet("contextmenu")?n:V(n,(e=>be(t,e)))},uM=(e,t)=>({type:"makeshift",x:e,y:t}),hM=e=>"longpress"===e.type||0===e.type.indexOf("touch"),mM=(e,t)=>{const n=Sg.DOM.getPos(e);return((e,t,n)=>uM(e.x+t,e.y+n))(t,n.x,n.y)},pM=(e,t)=>"contextmenu"===t.type||"longpress"===t.type?e.inline?(e=>{if(hM(e)){const t=e.touches[0];return uM(t.pageX,t.pageY)}return uM(e.pageX,e.pageY)})(t):mM(e.getContentAreaContainer(),(e=>{if(hM(e)){const t=e.touches[0];return uM(t.clientX,t.clientY)}return uM(e.clientX,e.clientY)})(t)):fM(e),fM=e=>({type:"selection",root:Re.fromDom(e.selection.getNode())}),gM=(e,t,n)=>{switch(n){case"node":return(e=>({type:"node",node:A.some(Re.fromDom(e.selection.getNode())),root:Re.fromDom(e.getBody())}))(e);case"point":return pM(e,t);case"selection":return fM(e)}},bM=(e,t,n,o,r,s)=>{const i=n(),a=gM(e,t,s);yk(i,Tb.CLOSE_ON_EXECUTE,o,!1).map((e=>{t.preventDefault(),ig.showMenuAt(r,{anchor:a},{menu:{markers:$b("normal")},data:e})}))},vM={onLtr:()=>[fl,dl,ul,hl,ml,pl,BE,IE,LE,NE,PE,ME],onRtl:()=>[fl,ul,dl,ml,hl,pl,BE,IE,PE,ME,LE,NE]},yM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},xM=(e,t,n,o,r,s,i)=>{const a=((e,t,n)=>{const o=gM(e,t,n);return{bubble:kc(0,"point"===n?12:0,yM),layouts:vM,overrides:{maxWidthFunction:_A(),maxHeightFunction:wc()},...o}})(e,t,s);yk(n,Tb.CLOSE_ON_EXECUTE,o,!0).map((n=>{t.preventDefault(),ig.showMenuWithinBounds(r,{anchor:a},{menu:{markers:$b("normal"),highlightImmediately:i},data:n,type:"horizontal"},(()=>A.some(ER(e,o.shared,"node"===s?"node":"selection")))),e.dispatch(yR)}))},wM=(e,t,n,o,r,s)=>{const i=vn(),a=i.os.isiOS(),l=i.os.isMacOS(),c=i.os.isAndroid(),d=i.deviceType.isTouch(),u=()=>{const i=n();xM(e,t,i,o,r,s,!(c||a||l&&d))};if((l||a)&&"node"!==s){const n=()=>{(e=>{const t=e.selection.getRng(),n=()=>{ag.setEditorTimeout(e,(()=>{e.selection.setRng(t)}),10),s()};e.once("touchend",n);const o=e=>{e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",o,!0);const r=()=>s();e.once("longpresscancel",r);const s=()=>{e.off("touchend",n),e.off("longpresscancel",r),e.off("mousedown",o)}})(e),u()};((e,t)=>{const n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;{const o=t.touches[0],r=n.getRng();return ud(e.getWin(),Qc.domRange(r)).exists((e=>e.left<=o.clientX&&e.right>=o.clientX&&e.top<=o.clientY&&e.bottom>=o.clientY))}})(e,t)?n():(e.once("selectionchange",n),e.once("touchend",(()=>e.off("selectionchange",n))))}else u()},CM=e=>s(e)?"|"===e:"separator"===e.type,_M={type:"separator"},SM=e=>{const t=e=>({text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut});if(s(e))return e;switch(e.type){case"separator":return _M;case"submenu":return{type:"nestedmenuitem",...t(e),getSubmenuItems:()=>{const t=e.getSubmenuItems();return s(t)?t:z(t,SM)}};default:return{type:"menuitem",...t(e),onAction:(n=e.onAction,()=>n())}}var n},kM=(e,t)=>{if(0===t.length)return e;const n=oe(e).filter((e=>!CM(e))),o=n.fold((()=>[]),(e=>[_M]));return e.concat(o).concat(t).concat([_M])},EM=(e,t)=>"longpress"!==t.type&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType),OM=(e,t)=>EM(e,t)?e.selection.getStart(!0):t.target,TM=(e,t,n)=>{const o=vn().deviceType.isTouch,r=ca(ig.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>n.setContextMenuState(!0),onHide:()=>n.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Dl([bf("dismissContextMenu",[Fs(ws(),((t,n)=>{uu.close(t),e.focus()}))])])})),i=e=>ig.hide(r),a=t=>{if(lM(e)&&t.preventDefault(),((e,t)=>t.ctrlKey&&!lM(e))(e,t)||(e=>0===dM(e).length)(e))return;const i=((e,t)=>{const n=cM(e),o=EM(e,t)?"selection":"point";if(Te(n)){const r=OM(e,t);return cw(Re.fromDom(r),n)?"node":o}return o})(e,t);(o()?wM:bM)(e,t,(()=>{const n=OM(e,t),o=e.ui.registry.getAll(),r=dM(e);return((e,t,n)=>{const o=U(t,((t,o)=>ge(e,o.toLowerCase()).map((e=>{const o=e.update(n);if(s(o))return kM(t,o.split(" "));if(o.length>0){const e=z(o,SM);return kM(t,e)}return t})).getOrThunk((()=>t.concat([o])))),[]);return o.length>0&&CM(o[o.length-1])&&o.pop(),o})(o.contextMenus,r,n)}),n,r,i)};e.on("init",(()=>{const t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");e.on(t,i),e.on("longpress contextmenu",a)}))},AM=_r([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),DM=e=>t=>t.translate(-e.left,-e.top),RM=e=>t=>t.translate(e.left,e.top),MM=e=>(t,n)=>U(e,((e,t)=>t(e)),Lt(t,n)),NM=(e,t,n)=>e.fold(MM([RM(n),DM(t)]),MM([DM(t)]),MM([])),PM=(e,t,n)=>e.fold(MM([RM(n)]),MM([]),MM([RM(t)])),LM=(e,t,n)=>e.fold(MM([]),MM([DM(n)]),MM([RM(t),DM(n)])),BM=(e,t,n)=>{const o=e.fold(((e,t)=>({position:A.some("absolute"),left:A.some(e+"px"),top:A.some(t+"px")})),((e,t)=>({position:A.some("absolute"),left:A.some(e-n.left+"px"),top:A.some(t-n.top+"px")})),((e,t)=>({position:A.some("fixed"),left:A.some(e+"px"),top:A.some(t+"px")})));return{right:A.none(),bottom:A.none(),...o}},IM=(e,t,n,o)=>{const r=(e,r)=>(s,i)=>{const a=e(t,n,o);return r(s.getOr(a.left),i.getOr(a.top))};return e.fold(r(LM,FM),r(PM,zM),r(NM,jM))},FM=AM.offset,zM=AM.absolute,jM=AM.fixed,HM=(e,t)=>{const n=pt(e,t);return u(n)?NaN:parseInt(n,10)},VM=(e,t,n,o)=>((e,t)=>{const n=e.element,o=HM(n,t.leftAttr),r=HM(n,t.topAttr);return isNaN(o)||isNaN(r)?A.none():A.some(Lt(o,r))})(e,t).fold((()=>n),(e=>jM(e.left+o.left,e.top+o.top))),$M=(e,t,n,o,r,s)=>{const i=VM(e,t,n,o),a=t.mustSnap?qM(e,t,i,r,s):KM(e,t,i,r,s),l=NM(i,r,s);return((e,t,n)=>{const o=e.element;ht(o,t.leftAttr,n.left+"px"),ht(o,t.topAttr,n.top+"px")})(e,t,l),a.fold((()=>({coord:jM(l.left,l.top),extra:A.none()})),(e=>({coord:e.output,extra:e.extra})))},UM=(e,t)=>{((e,t)=>{const n=e.element;bt(n,t.leftAttr),bt(n,t.topAttr)})(e,t)},WM=(e,t,n,o)=>se(e,(e=>{const r=e.sensor,s=((e,t,n,o,r,s)=>{const i=PM(e,r,s),a=PM(t,r,s);return Math.abs(i.left-a.left)<=n&&Math.abs(i.top-a.top)<=o})(t,r,e.range.left,e.range.top,n,o);return s?A.some({output:IM(e.output,t,n,o),extra:e.extra}):A.none()})),qM=(e,t,n,o,r)=>{const s=t.getSnapPoints(e);return WM(s,n,o,r).orThunk((()=>{const e=U(s,((e,t)=>{const s=t.sensor,i=((e,t,n,o,r,s)=>{const i=PM(e,r,s),a=PM(t,r,s),l=Math.abs(i.left-a.left),c=Math.abs(i.top-a.top);return Lt(l,c)})(n,s,t.range.left,t.range.top,o,r);return e.deltas.fold((()=>({deltas:A.some(i),snap:A.some(t)})),(n=>(i.left+i.top)/2<=(n.left+n.top)/2?{deltas:A.some(i),snap:A.some(t)}:e))}),{deltas:A.none(),snap:A.none()});return e.snap.map((e=>({output:IM(e.output,n,o,r),extra:e.extra})))}))},KM=(e,t,n,o,r)=>{const s=t.getSnapPoints(e);return WM(s,n,o,r)};var GM=Object.freeze({__proto__:null,snapTo:(e,t,n,o)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const t=$e(e.element),n=An(t),s=JO(r),i=((e,t,n)=>({coord:IM(e.output,e.output,t,n),extra:e.extra}))(o,n,s),a=BM(i.coord,0,s);Ct(r,a)}}});const YM="data-initial-z-index",XM=(e,t)=>{e.getSystem().addToGui(t),(e=>{Ke(e.element).filter(Pe).each((t=>{kt(t,"z-index").each((e=>{ht(t,YM,e)})),xt(t,"z-index",_t(e.element,"z-index"))}))})(t)},JM=e=>{(e=>{Ke(e.element).filter(Pe).each((e=>{ft(e,YM).fold((()=>Tt(e,"z-index")),(t=>xt(e,"z-index",t))),bt(e,YM)}))})(e),e.getSystem().removeFromGui(e)},QM=(e,t,n)=>e.getSystem().build(Cw.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}));var ZM=hr("snaps",[Xo("getSnapPoints"),Ia("onSensor"),Xo("leftAttr"),Xo("topAttr"),mr("lazyViewport",jn),mr("mustSnap",!1)]);const eN=[mr("useFixed",E),Xo("blockerClass"),mr("getTarget",x),mr("onDrag",b),mr("repositionTarget",!0),mr("onDrop",b),yr("getBounds",jn),ZM],tN=e=>{return(t=kt(e,"left"),n=kt(e,"top"),o=kt(e,"position"),r=(e,t,n)=>("fixed"===n?jM:FM)(parseInt(e,10),parseInt(t,10)),t.isSome()&&n.isSome()&&o.isSome()?A.some(r(t.getOrDie(),n.getOrDie(),o.getOrDie())):A.none()).getOrThunk((()=>{const t=It(e);return zM(t.left,t.top)}));var t,n,o,r},nN=(e,t,n,o,r,s,i)=>((e,t,n,o,r)=>{const s=r.bounds,i=PM(t,n,o),a=tl(i.left,s.x,s.x+s.width-r.width),l=tl(i.top,s.y,s.y+s.height-r.height),c=zM(a,l);return t.fold((()=>{const e=LM(c,n,o);return FM(e.left,e.top)}),y(c),(()=>{const e=NM(c,n,o);return jM(e.left,e.top)}))})(0,t.fold((()=>{const e=(t=n,i=s.left,a=s.top,t.fold(((e,t)=>FM(e+i,t+a)),((e,t)=>zM(e+i,t+a)),((e,t)=>jM(e+i,t+a))));var t,i,a;const l=NM(e,o,r);return jM(l.left,l.top)}),(t=>{const i=$M(e,t,n,s,o,r);return i.extra.each((n=>{t.onSensor(e,n)})),i.coord})),o,r,i),oN=(e,t)=>({bounds:e.getBounds(),height:Nt(t.element),width:Ht(t.element)}),rN=(e,t,n,o,r)=>{const s=n.update(o,r),i=n.getStartData().getOrThunk((()=>oN(t,e)));s.each((n=>{((e,t,n,o)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const s=$e(e.element),i=An(s),a=JO(r),l=tN(r),c=nN(e,t.snaps,l,i,a,o,n),d=BM(c,0,a);Ct(r,d)}t.onDrag(e,r,o)})(e,t,i,n)}))},sN=(e,t,n,o)=>{t.each(JM),n.snaps.each((t=>{UM(e,t)}));const r=n.getTarget(e.element);o.reset(),n.onDrop(e,r)},iN=e=>(t,n)=>{const o=e=>{n.setStartData(oN(t,e))};return Ls([Fs(bs(),(e=>{n.getStartData().each((()=>o(e)))})),...e(t,n,o)])};var aN=Object.freeze({__proto__:null,getData:e=>A.from(Lt(e.x,e.y)),getDelta:(e,t)=>Lt(t.left-e.left,t.top-e.top)});const lN=(e,t,n)=>[Fs(jr(),((o,r)=>{if(0!==r.event.raw.button)return;r.stop();const s=()=>sN(o,A.some(l),e,t),i=dw(s,200),a={drop:s,delayDrop:i.schedule,forceDrop:s,move:n=>{i.cancel(),rN(o,e,t,aN,n)}},l=QM(o,e.blockerClass,(e=>Ls([Fs(jr(),e.forceDrop),Fs($r(),e.drop),Fs(Hr(),((t,n)=>{e.move(n.event)})),Fs(Vr(),e.delayDrop)]))(a));n(o),XM(o,l)}))],cN=[...eN,Ha("dragger",{handlers:iN(lN)})];var dN=Object.freeze({__proto__:null,getData:e=>{const t=e.raw.touches;return 1===t.length?(e=>{const t=e[0];return A.some(Lt(t.clientX,t.clientY))})(t):A.none()},getDelta:(e,t)=>Lt(t.left-e.left,t.top-e.top)});const uN=(e,t,n)=>{const o=ic(),r=n=>{sN(n,o.get(),e,t),o.clear()};return[Fs(Br(),((s,i)=>{i.stop();const a=()=>r(s),l={drop:a,delayDrop:b,forceDrop:a,move:n=>{rN(s,e,t,dN,n)}},c=QM(s,e.blockerClass,(e=>Ls([Fs(Br(),e.forceDrop),Fs(Fr(),e.drop),Fs(zr(),e.drop),Fs(Ir(),((t,n)=>{e.move(n.event)}))]))(l));o.set(c);n(s),XM(s,c)})),Fs(Ir(),((n,o)=>{o.stop(),rN(n,e,t,dN,o.event)})),Fs(Fr(),((e,t)=>{t.stop(),r(e)})),Fs(zr(),r)]},hN=cN,mN=[...eN,Ha("dragger",{handlers:iN(uN)})],pN=[...eN,Ha("dragger",{handlers:iN(((e,t,n)=>[...lN(e,t,n),...uN(e,t,n)]))})];var fN=Object.freeze({__proto__:null,mouse:hN,touch:mN,mouseOrTouch:pN});var gN=Object.freeze({__proto__:null,init:()=>{let e=A.none(),t=A.none();const n=y({});return Ci({readState:n,reset:()=>{e=A.none(),t=A.none()},update:(t,n)=>t.getData(n).bind((n=>((t,n)=>{const o=e.map((e=>t.getDelta(e,n)));return e=A.some(n),o})(t,n))),getStartData:()=>t,setStartData:e=>{t=A.some(e)}})}});const bN=Pl({branchKey:"mode",branches:fN,name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:A.from(e.extra)})},state:gN,apis:GM}),vN=(e,t,n,o,r,s)=>e.fold((()=>bN.snap({sensor:zM(n-20,o-20),range:Lt(r,s),output:zM(A.some(n),A.some(o)),extra:{td:t}})),(e=>{const r=n-20,s=o-20,i=e.element.dom.getBoundingClientRect();return bN.snap({sensor:zM(r,s),range:Lt(40,40),output:zM(A.some(n-i.width/2),A.some(o-i.height/2)),extra:{td:t}})})),yN=(e,t,n)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(e,o)=>{const r=o.td;((e,t)=>e.exists((e=>He(e,t))))(t.get(),r)||(t.set(r),n(r))},mustSnap:!0}),xN=e=>cg(lg.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Dl([bN.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),MC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),wN=(e,t)=>{const n=Cr([]),o=Cr([]),r=Cr(!1),s=ic(),i=ic(),a=e=>{const n=zn(e);return vN(u.getOpt(t),e,n.x,n.y,n.width,n.height)},l=e=>{const n=zn(e);return vN(h.getOpt(t),e,n.right,n.bottom,n.width,n.height)},c=yN((()=>z(n.get(),(e=>a(e)))),s,(t=>{i.get().each((n=>{e.dispatch("TableSelectorChange",{start:t,finish:n})}))})),d=yN((()=>z(o.get(),(e=>l(e)))),i,(t=>{s.get().each((n=>{e.dispatch("TableSelectorChange",{start:n,finish:t})}))})),u=xN(c),h=xN(d),m=ca(u.asSpec()),p=ca(h.asSpec()),f=(t,n,o,r)=>{const s=o(n);bN.snapTo(t,s);((t,n,o,r)=>{const s=n.dom.getBoundingClientRect();Tt(t.element,"display");const i=qe(Re.fromDom(e.getBody())).dom.innerHeight,a=o(s),l=r(s,i);(a||l)&&xt(t.element,"display","none")})(t,n,(e=>e[r]<0),((e,t)=>e[r]>t))},g=e=>f(m,e,a,"top"),b=e=>f(p,e,l,"bottom");vn().deviceType.isTouch()&&(e.on("TableSelectionChange",(e=>{r.get()||(Kd(t,m),Kd(t,p),r.set(!0)),s.set(e.start),i.set(e.finish),e.otherCells.each((t=>{n.set(t.upOrLeftCells),o.set(t.downOrRightCells),g(e.start),b(e.finish)}))})),e.on("ResizeEditor ResizeWindow ScrollContent",(()=>{s.get().each(g),i.get().each(b)})),e.on("TableSelectionClear",(()=>{r.get()&&(Xd(m),Xd(p),r.set(!1)),s.clear(),i.clear()})))};const CN=(e,t,n)=>{var o;const r=null!==(o=t.delimiter)&&void 0!==o?o:"",s=t=>U(t,((t,o,s)=>{const i=((t,o,r)=>lg.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":r,"aria-level":r+1}},components:[sa(t)],action:t=>{e.focus(),e.selection.select(o),e.nodeChanged()},buttonBehaviours:Dl([ky(n.isDisabled),_y()])}))(o.name,o.element,s);return 0===s?t.concat([i]):t.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[sa(` ${r} `)]},i])}),[]);return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Dl([af.config({mode:"flow",selector:"div[role=button]"}),em.config({disabled:n.isDisabled}),_y(),Aw.config({}),gf.config({}),bf("elementPathEvents",[qs(((t,n)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",(()=>af.focusIn(t))),e.on("NodeChange",(n=>{const o=(t=>{const n=[];let o=t.length;for(;o-- >0;){const s=t[o];if(1===s.nodeType&&"BR"!==(r=s).nodeName&&!r.getAttribute("data-mce-bogus")&&"bookmark"!==r.getAttribute("data-mce-type")){const t=e.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s});if(t.isDefaultPrevented()||n.push({name:t.name,element:s}),t.isPropagationStopped())break}}var r;return n})(n.parents),r=o.length>0?s(o):[];gf.set(t,r)}))}))])]),components:[]}};var _N;!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(_N||(_N={}));const SN=(e,t,n)=>{const o=Re.fromDom(e.getContainer()),r=((e,t,n,o,r)=>{const s={};return s.height=uR(o+t.top,Pg(e),Bg(e)),n===_N.Both&&(s.width=uR(r+t.left,Ng(e),Lg(e))),s})(e,t,n,Mt(o),jt(o));le(r,((e,t)=>xt(o,t,dR(e)))),(e=>{e.dispatch("ResizeEditor")})(e)},kN=(e,t,n,o)=>{const r=Lt(20*n,20*o);return SN(e,r,t),A.some(!0)},EN=(e,t)=>{const n=(e=>{const t=ab(e);return!1===t?_N.None:"both"===t?_N.Both:_N.Vertical})(e);return n===_N.None?A.none():A.some(yg("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},behaviours:[bN.config({mode:"mouse",repositionTarget:!1,onDrag:(t,o,r)=>SN(e,r,n),blockerClass:"tox-blocker"}),af.config({mode:"special",onLeft:()=>kN(e,n,-1,0),onRight:()=>kN(e,n,1,0),onUp:()=>kN(e,n,0,-1),onDown:()=>kN(e,n,0,1)}),Aw.config({}),Cf.config({})]},t.icons))},ON=(e,t)=>{const n=()=>{const n=[];return sb(e)&&n.push(CN(e,{},t)),e.hasPlugin("wordcount")&&n.push(((e,t)=>{const n=(e,n,o)=>gf.set(e,[sa(t.translate(["{0} "+o,n[o]]))]);return lg.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Dl([ky(t.isDisabled),_y(),Aw.config({}),gf.config({}),Ru.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),bf("wordcount-events",[Ys((e=>{const t=Ru.getValue(e),o="words"===t.mode?"characters":"words";Ru.setValue(e,{mode:o,count:t.count}),n(e,t.count,o)})),qs((t=>{e.on("wordCountUpdate",(e=>{const{mode:o}=Ru.getValue(t);Ru.setValue(t,{mode:o,count:e.wordCount}),n(t,e.wordCount,o)}))}))])]),eventOrder:{[ls()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,t)),ib(e)&&n.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":dg.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:Dl([Cf.config({})])}]}),n.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:n}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const o=n(),r=EN(e,t);return o.concat(r.toArray())})()}},TN=e=>e.get().getOrDie("UI has not been rendered"),AN=e=>{const t=e.inline,n=t?vR:lR,o=wb(e)?kT:YO,r=ic(),s=ic(),i=ic(),a=ic(),l=vn().deviceType.isTouch()?["tox-platform-touch"]:[],c=gb(e),d=Vg(e),u=cg({dom:{tag:"div",classes:["tox-anchorbar"]}}),h=()=>s.get().bind(tD.getHeader),m=()=>$n.fromOption(r.get(),"UI has not been rendered"),p=()=>s.get().bind((e=>tD.getToolbar(e))).getOrDie("Could not find more toolbar element"),f=()=>s.get().bind((e=>tD.getThrobber(e))).getOrDie("Could not find throbber element"),g=BO(m,e,(()=>s.get().bind((e=>u.getOpt(e))).getOrDie("Could not find a anchor bar element"))),b=()=>{const n=(()=>{const t={attributes:{[Rc]:c?Dc.BottomToTop:Dc.TopToBottom}},n=tD.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:g,onEscape:()=>{e.focus()}}),o=tD.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:m,providers:g.shared.providers,onEscape:()=>{e.focus()},type:d,lazyToolbar:p,lazyHeader:()=>h().getOrDie("Could not find header element"),...t}),r=tD.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:g.shared.providers,onEscape:()=>{e.focus()},type:d}),s=fb(e),i=mb(e),a=db(e);return tD.parts.header({dom:{tag:"div",classes:["tox-editor-header"],...t},components:K([a?[n]:[],s?[r]:i?[o]:[],vb(e)?[]:[u.asSpec()]]),sticky:wb(e),editor:e,sharedBackstage:g.shared})})(),o={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[tD.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),tD.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},r=tD.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:g}),a=rb(e)&&!t?A.some(ON(e,g.shared.providers)):A.none(),f=K([c?[]:[n],t?[]:[o],c?[n]:[]]),b=K([[{dom:{tag:"div",classes:["tox-editor-container"]},components:f}],t?[]:a.toArray(),[r]]),v=xb(e),y={role:"application",...dg.isRtl()?{dir:"rtl"}:{},...v?{"aria-hidden":"true"}:{}},x=ca(tD.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(t?["tox-tinymce-inline"]:[]).concat(c?["tox-tinymce--toolbar-bottom"]:[]).concat(l),styles:{visibility:"hidden",...v?{opacity:"0",border:"0"}:{}},attributes:y},components:b,behaviours:Dl([_y(),em.config({disableClass:"tox-tinymce--disabled"}),af.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),w=_w(x);return s.set(x),i.set(w),{mothership:w,outerContainer:x}},v=t=>{const n=dR(hR(e)),o=dR((e=>mR(e).getOr(Mg(e)))(e));return e.inline||(Ot("div","width",o)&&xt(t.element,"width",o),Ot("div","height",n)?xt(t.element,"height",n):xt(t.element,"height","400px")),n};return{getMothership:()=>TN(i),getUiMothership:()=>TN(a),backstage:g,renderUI:()=>{const{mothership:t,outerContainer:s}=b(),{uiMothership:i,sink:c}=(()=>{const t=yb(e),n=He(ct(),t)&&"grid"===_t(t,"display"),s={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(l),attributes:{...dg.isRtl()?{dir:"rtl"}:{}}},behaviours:Dl([zd.config({useFixed:()=>o.isDocked(h)})])},i={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ls([Fs(vs(),(e=>{xt(e.element,"width",document.body.clientWidth+"px")}))])},c=ca(ao(s,n?i:{})),d=_w(c);return r.set(c),a.set(d),{sink:c,uiMothership:d}})();ce($g(e),((t,n)=>{e.ui.registry.addGroupToolbarButton(n,t)}));const{buttons:u,menuItems:p,contextToolbars:y,sidebars:x}=e.ui.registry.getAll(),w=pb(e),C={menuItems:p,menus:Cb(e),menubar:Yg(e),toolbar:w.getOrThunk((()=>Xg(e))),allowToolbarGroups:d===Cg.floating,buttons:u,sidebar:x};(t=>{e.addShortcut("alt+F9","focus menubar",(()=>{tD.focusMenubar(t)})),e.addShortcut("alt+F10","focus toolbar",(()=>{tD.focusToolbar(t)})),e.addCommand("ToggleToolbarDrawer",(()=>{tD.toggleToolbarDrawer(t)})),e.addQueryStateHandler("ToggleToolbarDrawer",(()=>tD.isToolbarDrawerToggled(t)))})(s),((e,t,n)=>{const o=(e,o)=>{j([t,n],(t=>{t.broadcastEvent(e,o)}))},r=(e,o)=>{j([t,n],(t=>{t.broadcastOn([e],o)}))},s=e=>r(hu(),{target:e.target}),i=Nn(),a=lc(i,"touchstart",s),l=lc(i,"touchmove",(e=>o(fs(),e))),c=lc(i,"touchend",(e=>o(gs(),e))),d=lc(i,"mousedown",s),u=lc(i,"mouseup",(e=>{0===e.raw.button&&r(pu(),{target:e.target})})),h=e=>r(hu(),{target:Re.fromDom(e.target)}),m=e=>{0===e.button&&r(pu(),{target:Re.fromDom(e.target)})},p=()=>{j(e.editorManager.get(),(t=>{e!==t&&t.dispatch("DismissPopups",{relatedTarget:e})}))},f=e=>o(bs(),dc(e)),g=e=>{r(mu(),{}),o(vs(),dc(e))},b=()=>r(mu(),{}),v=t=>{t.state&&r(hu(),{target:Re.fromDom(e.getContainer())})},y=e=>{r(hu(),{target:Re.fromDom(e.relatedTarget.getContainer())})};e.on("PostRender",(()=>{e.on("click",h),e.on("tap",h),e.on("mouseup",m),e.on("mousedown",p),e.on("ScrollWindow",f),e.on("ResizeWindow",g),e.on("ResizeEditor",b),e.on("AfterProgressState",v),e.on("DismissPopups",y)})),e.on("remove",(()=>{e.off("click",h),e.off("tap",h),e.off("mouseup",m),e.off("mousedown",p),e.off("ScrollWindow",f),e.off("ResizeWindow",g),e.off("ResizeEditor",b),e.off("AfterProgressState",v),e.off("DismissPopups",y),d.unbind(),a.unbind(),l.unbind(),c.unbind(),u.unbind()})),e.on("detach",(()=>{eu(t),eu(n),t.destroy(),n.destroy()}))})(e,t,i),o.setup(e,g.shared,h),sM(e,g),TM(e,m,g),(e=>{const{sidebars:t}=e.ui.registry.getAll();j(ie(t),(n=>{const o=t[n],r=()=>ye(A.from(e.queryCommandValue("ToggleSidebar")),n);e.ui.registry.addToggleButton(n,{icon:o.icon,tooltip:o.tooltip,onAction:t=>{e.execCommand("ToggleSidebar",!1,n),t.setActive(r())},onSetup:t=>{const n=()=>t.setActive(r());return e.on("ToggleSidebar",n),()=>{e.off("ToggleSidebar",n)}}})}))})(e),mA(e,f,g.shared),HR(e,y,c,{backstage:g}),wN(e,c);const _={mothership:t,uiMothership:i,outerContainer:s,sink:c},S={targetNode:e.getElement(),height:v(s)};return n.render(e,_,C,g,S)}}},DN=y([Xo("lazySink"),sr("dragBlockClass"),yr("getBounds",jn),mr("useTabstopAt",O),mr("eventOrder",{}),Mu("modalBehaviours",[af]),Fa("onExecute"),ja("onEscape")]),RN={sketch:x},MN=y([ch({name:"draghandle",overrides:(e,t)=>({behaviours:Dl([bN.config({mode:"mouse",getTarget:e=>fa(e,'[role="dialog"]').getOr(e),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),ah({schema:[Xo("dom")],name:"title"}),ah({factory:RN,schema:[Xo("dom")],name:"close"}),ah({factory:RN,schema:[Xo("dom")],name:"body"}),ch({factory:RN,schema:[Xo("dom")],name:"footer"}),lh({factory:{sketch:(e,t)=>({...e,dom:t.dom,components:t.components})},schema:[mr("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),mr("components",[])],name:"blocker"})]),NN=Bh({name:"ModalDialog",configFields:DN(),partFields:MN(),factory:(e,t,n,o)=>{const r=ic(),s=ri("modal-events"),i={...e.eventOrder,[ys()]:[s].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:t,apis:{show:t=>{r.set(t);const n=e.lazySink(t).getOrDie(),s=o.blocker(),i=n.getSystem().build({...s,components:s.components.concat([da(t)]),behaviours:Dl([Cf.config({}),bf("dialog-blocker-events",[Ws(Wr(),(()=>{af.focusIn(t)}))])])});Kd(n,i),af.focusIn(t)},hide:e=>{r.clear(),Ke(e.element).each((t=>{e.getSystem().getByDom(t).each((e=>{Xd(e)}))}))},getBody:t=>Ch(t,e,"body"),getFooter:t=>Ch(t,e,"footer"),setIdle:e=>{cA.unblock(e)},setBusy:(e,t)=>{cA.block(e,t)}},eventOrder:i,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Pu(e.modalBehaviours,[gf.config({}),af.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt}),cA.config({getRoot:r.get}),bf(s,[qs((t=>{((e,t)=>{const n=ft(e,"id").fold((()=>{const e=ri("dialog-label");return ht(t,"id",e),e}),x);ht(e,"aria-labelledby",n)})(t.element,Ch(t,e,"title").element),((e,t)=>{const n=A.from(pt(e,"id")).fold((()=>{const e=ri("dialog-describe");return ht(t,"id",e),e}),x);ht(e,"aria-describedby",n)})(t.element,Ch(t,e,"body").element)}))])])}},apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,n)=>{e.setBusy(t,n)},setIdle:(e,t)=>{e.setIdle(t)}}}),PN=ko([ev,tv].concat(Xv)),LN=Po,BN=[Ov("button"),pv,br("align","end",["start","end"]),Cv,wv,cr("buttonType",["primary","secondary"])],IN=[...BN,ov],FN=[er("type",["submit","cancel","custom"]),...IN],zN=[er("type",["menu"]),mv,fv,pv,rr("items",PN),...BN],jN=qo("type",{submit:FN,cancel:FN,custom:FN,menu:zN}),HN=[ev,ov,er("level",["info","warn","error","success"]),sv,mr("url","")],VN=ko(HN),$N=[ev,ov,wv,Ov("button"),pv,xv,cr("buttonType",["primary","secondary","toolbar"]),Cv],UN=ko($N),WN=[ev,tv],qN=WN.concat([gv]),KN=WN.concat([nv,wv]),GN=ko(KN),YN=Po,XN=qN.concat([_v("auto")]),JN=ko(XN),QN=Ao([iv,ov,sv]),ZN=ko(qN),eP=No,tP=ko(qN),nP=No,oP=WN.concat([gr("tag","textarea"),Zo("scriptId"),Zo("scriptUrl"),((e,t)=>pr(e,t,Io))("settings",void 0)]),rP=WN.concat([gr("tag","textarea"),tr("init")]),sP=jo((e=>Vo("customeditor.old",So(rP),e).orThunk((()=>Vo("customeditor.new",So(oP),e))))),iP=No,aP=ko(qN),lP=Eo(vo),cP=e=>[ev,Qo("columns"),e],dP=[ev,Zo("html"),br("presets","presentation",["presentation","document"])],uP=ko(dP),hP=qN.concat([vr("sandboxed",!0)]),mP=ko(hP),pP=No,fP=ko(WN.concat([lr("height")])),gP=ko([Zo("url"),ar("zoom"),ar("cachedWidth"),ar("cachedHeight")]),bP=qN.concat([lr("inputMode"),lr("placeholder"),vr("maximized",!1),wv]),vP=ko(bP),yP=No,xP=e=>[ev,nv,e],wP=[ov,iv],CP=[ov,rr("items",((e,t)=>((e,t)=>{const n=Vt(t);return{extract:(e,t)=>n().extract(e,t),toString:()=>n().toString()}})(0,t))(0,(()=>_P)))],_P=Oo([ko(wP),ko(CP)]),SP=qN.concat([rr("items",_P),wv]),kP=ko(SP),EP=No,OP=qN.concat([or("items",[ov,iv]),fr("size",1),wv]),TP=ko(OP),AP=No,DP=qN.concat([vr("constrain",!0),wv]),RP=ko(DP),MP=ko([Zo("width"),Zo("height")]),NP=WN.concat([nv,fr("min",0),fr("max",0)]),PP=ko(NP),LP=Mo,BP=[ev,rr("header",No),rr("cells",Eo(No))],IP=ko(BP),FP=qN.concat([lr("placeholder"),vr("maximized",!1),wv]),zP=ko(FP),jP=No,HP=qN.concat([br("filetype","file",["image","media","file"]),wv]),VP=ko(HP),$P=ko([iv,Sv]),UP=e=>Ko("items","items",{tag:"required",process:{}},Eo(jo((t=>Vo(`Checking item of ${e}`,WP,t).fold((e=>$n.error(Wo(e))),(e=>$n.value(e))))))),WP=Co((()=>{return zo("type",{alertbanner:VN,bar:ko((e=UP("bar"),[ev,e])),button:UN,checkbox:GN,colorinput:ZN,colorpicker:tP,dropzone:aP,grid:ko(cP(UP("grid"))),iframe:mP,input:vP,listbox:kP,selectbox:TP,sizeinput:RP,slider:PP,textarea:zP,urlinput:VP,customeditor:sP,htmlpanel:uP,imagepreview:fP,collection:JN,label:ko(xP(UP("label"))),table:IP,panel:KP});var e})),qP=[ev,mr("classes",[]),rr("items",WP)],KP=ko(qP),GP=[Ov("tab"),rv,rr("items",WP)],YP=[ev,or("tabs",GP)],XP=ko(YP),JP=IN,QP=jN,ZP=ko([Zo("title"),Jo("body",zo("type",{panel:KP,tabpanel:XP})),gr("size","normal"),rr("buttons",QP),mr("initialData",{}),yr("onAction",b),yr("onChange",b),yr("onSubmit",b),yr("onClose",b),yr("onCancel",b),yr("onTabChange",b)]),eL=ko([er("type",["cancel","custom"]),...JP]),tL=ko([Zo("title"),Zo("url"),ar("height"),ar("width"),ur("buttons",eL),yr("onAction",b),yr("onCancel",b),yr("onClose",b),yr("onMessage",b)]),nL=e=>i(e)?[e].concat(G(fe(e),nL)):l(e)?G(e,nL):[],oL=e=>s(e.type)&&s(e.name),rL={checkbox:YN,colorinput:eP,colorpicker:nP,dropzone:lP,input:yP,iframe:pP,imagepreview:gP,selectbox:AP,sizeinput:MP,slider:LP,listbox:EP,size:MP,textarea:jP,urlinput:$P,customeditor:iP,collection:QN,togglemenuitem:LN},sL=e=>{const t=(e=>V(nL(e),oL))(e),n=G(t,(e=>(e=>A.from(rL[e.type]))(e).fold((()=>[]),(t=>[Jo(e.name,t)]))));return ko(n)},iL=e=>({internalDialog:$o(Vo("dialog",ZP,e)),dataValidator:sL(e),initialData:e.initialData}),aL={open:(e,t)=>{const n=iL(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:(e,t)=>e($o(Vo("dialog",tL,t))),redial:e=>iL(e)},lL=e=>{const t=[],n={};return le(e,((e,o)=>{e.fold((()=>{t.push(o)}),(e=>{n[o]=e}))})),t.length>0?$n.error(t):$n.value(n)},cL=(e,t,n)=>{const o=cg(ES.sketch((o=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:z(e.items,(e=>_E(o,e,t,n)))}))));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[o.asSpec()]}],behaviours:Dl([af.config({mode:"acyclic",useTabstopAt:_(nk)}),LS(o),jS(o,{postprocess:e=>lL(e).fold((e=>(console.error(e),{})),x)})])}},dL=Lh({name:"TabButton",configFields:[mr("uid",void 0),Xo("value"),Ko("dom","dom",ho((()=>({attributes:{role:"tab",id:ri("aria"),"aria-selected":"false"}}))),Do()),sr("action"),mr("domModification",{}),Mu("tabButtonBehaviours",[Cf,af,Ru]),Xo("view")],factory:(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:If(e.action),behaviours:Pu(e.tabButtonBehaviours,[Cf.config({}),af.config({mode:"execution",useSpace:!0,useEnter:!0}),Ru.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),uL=y([Xo("tabs"),Xo("dom"),mr("clickToDismiss",!1),Mu("tabbarBehaviours",[um,af]),La(["tabClass","selectedClass"])]),hL=dh({factory:dL,name:"tabs",unit:"tab",overrides:e=>{const t=(e,t)=>{um.dehighlight(e,t),Ds(e,Es(),{tabbar:e,button:t})},n=(e,t)=>{um.highlight(e,t),Ds(e,ks(),{tabbar:e,button:t})};return{action:o=>{const r=o.getSystem().getByUid(e.uid).getOrDie(),s=um.isHighlighted(r,o);(s&&e.clickToDismiss?t:s?b:n)(r,o)},domModification:{classes:[e.markers.tabClass]}}}}),mL=y([hL]),pL=Bh({name:"Tabbar",configFields:uL(),partFields:mL(),factory:(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Pu(e.tabbarBehaviours,[um.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(e,t)=>{ht(t.element,"aria-selected","true")},onDehighlight:(e,t)=>{ht(t.element,"aria-selected","false")}}),af.config({mode:"flow",getInitial:e=>um.getHighlighted(e).map((e=>e.element)),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),fL=Lh({name:"Tabview",configFields:[Mu("tabviewBehaviours",[gf])],factory:(e,t)=>({uid:e.uid,dom:e.dom,behaviours:Pu(e.tabviewBehaviours,[gf.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),gL=y([mr("selectFirst",!0),Ia("onChangeTab"),Ia("onDismissTab"),mr("tabs",[]),Mu("tabSectionBehaviours",[])]),bL=ah({factory:pL,schema:[Xo("dom"),nr("markers",[Xo("tabClass"),Xo("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),vL=ah({factory:fL,name:"tabview"}),yL=y([bL,vL]),xL=Bh({name:"TabSection",configFields:gL(),partFields:yL(),factory:(e,t,n,o)=>{const r=(t,n)=>{wh(t,e,"tabbar").each((e=>{n(e).each(Rs)}))};return{uid:e.uid,dom:e.dom,components:t,behaviours:Nu(e.tabSectionBehaviours),events:Ls(K([e.selectFirst?[qs(((e,t)=>{r(e,um.getFirst)}))]:[],[Fs(ks(),((t,n)=>{(t=>{const n=Ru.getValue(t);wh(t,e,"tabview").each((o=>{const r=W(e.tabs,(e=>e.value===n));r.each((n=>{const r=n.view();ft(t.element,"id").each((e=>{ht(o.element,"aria-labelledby",e)})),gf.set(o,r),e.onChangeTab(o,t,r)}))}))})(n.event.button)})),Fs(Es(),((t,n)=>{const o=n.event.button;e.onDismissTab(t,o)}))]])),apis:{getViewItems:t=>wh(t,e,"tabview").map((e=>gf.contents(e))).getOr([]),showTab:(e,t)=>{r(e,(e=>{const n=um.getCandidates(e);return W(n,(e=>Ru.getValue(e)===t)).filter((t=>!um.isHighlighted(e,t)))}))}}}},apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,n)=>{e.showTab(t,n)}}}),wL=(e,t)=>{xt(e,"height",t+"px"),xt(e,"flex-basis",t+"px")},CL=(e,t,n)=>{fa(e,'[role="dialog"]').each((e=>{ba(e,'[role="tablist"]').each((o=>{n.get().map((n=>(xt(t,"height","0"),xt(t,"flex-basis","0"),Math.min(n,((e,t,n)=>{const o=We(e).dom,r=fa(e,".tox-dialog-wrap").getOr(e);let s;s="fixed"===_t(r,"position")?Math.max(o.clientHeight,window.innerHeight):Math.max(o.offsetHeight,o.scrollHeight);const i=Mt(t),a=t.dom.offsetLeft>=n.dom.offsetLeft+jt(n)?Math.max(Mt(n),i):i,l=parseInt(_t(e,"margin-top"),10)||0,c=parseInt(_t(e,"margin-bottom"),10)||0;return s-(Mt(e)+l+c-a)})(e,t,o))))).each((e=>{wL(t,e)}))}))}))},_L=e=>ba(e,'[role="tabpanel"]'),SL=e=>{const t=(()=>{const t=ic(),n=[qs((n=>{const o=n.element;_L(o).each((r=>{xt(r,"visibility","hidden"),n.getSystem().getByDom(r).toOptional().each((n=>{const o=((e,t,n)=>z(e,((o,r)=>{gf.set(n,e[r].view());const s=t.dom.getBoundingClientRect();return gf.set(n,[]),s.height})))(e,r,n),s=(e=>ne(ee(e,((e,t)=>e>t?-1:e<t?1:0))))(o);s.fold(t.clear,t.set)})),CL(o,r,t),Tt(r,"visibility"),((e,t)=>{ne(e).each((e=>xL.showTab(t,e.value)))})(e,n),requestAnimationFrame((()=>{CL(o,r,t)}))}))})),Fs(vs(),(e=>{const n=e.element;_L(n).each((e=>{CL(n,e,t)}))})),Fs($w,((e,n)=>{const o=e.element;_L(o).each((e=>{const n=jl(ot(e));xt(e,"visibility","hidden");const r=kt(e,"height").map((e=>parseInt(e,10)));Tt(e,"height"),Tt(e,"flex-basis");const s=e.dom.getBoundingClientRect().height;r.forall((e=>s>e))?(t.set(s),CL(o,e,t)):r.each((t=>{wL(e,t)})),Tt(e,"visibility"),n.each(Fl)}))}))];return{extraEvents:n,selectFirst:!1}})();return{smartTabHeight:t,naiveTabHeight:{extraEvents:[],selectFirst:!0}}},kL="send-data-to-section",EL="send-data-to-view",OL=(e,t,n)=>{const o=Cr({}),r=e=>{const t=Ru.getValue(e),n=lL(t).getOr({}),r=o.get(),s=ao(r,n);o.set(s)},s=e=>{const t=o.get();Ru.setValue(e,t)},i=Cr(null),a=z(e.tabs,(e=>({value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[sa(n.shared.providers.translate(e.title))],view:()=>[ES.sketch((o=>({dom:{tag:"div",classes:["tox-form"]},components:z(e.items,(e=>_E(o,e,t,n))),formBehaviours:Dl([af.config({mode:"acyclic",useTabstopAt:_(nk)}),bf("TabView.form.events",[qs(s),Ks(r)]),Bl.config({channels:Er([{key:kL,value:{onReceive:r}},{key:EL,value:{onReceive:s}}])})])})))]}))),l=SL(a).smartTabHeight;return xL.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(e,t,n)=>{const o=Ru.getValue(t);Ds(e,Vw,{name:o,oldName:i.get()}),i.set(o)},tabs:a,components:[xL.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[pL.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Dl([Aw.config({})])}),xL.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:l.selectFirst,tabSectionBehaviours:Dl([bf("tabpanel",l.extraEvents),af.config({mode:"acyclic"}),jh.config({find:e=>ne(xL.getViewItems(e))}),VS(A.none(),(e=>(e.getSystem().broadcastOn([kL],{}),o.get())),((e,t)=>{o.set(t),e.getSystem().broadcastOn([EL],{})}))])})},TL=ri("update-dialog"),AL=ri("update-title"),DL=ri("update-body"),RL=ri("update-footer"),ML=ri("body-send-message"),NL=(e,t,n,o,r)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...n.map((e=>({id:e}))).getOr({}),...r?{"aria-live":"polite"}:{}}},components:[],behaviours:Dl([BS(0),ID.config({channel:`${DL}-${t}`,updateState:(e,t)=>A.some({isTabPanel:()=>"tabpanel"===t.body.type}),renderComponents:e=>{const t=e.body;return"tabpanel"===t.type?[OL(t,e.initialData,o)]:[cL(t,e.initialData,o)]},initialData:e})])}),PL=Eg.deviceType.isTouch(),LL=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),BL=(e,t)=>NN.parts.close(lg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Dl([Aw.config({})])})),IL=()=>NN.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),FL=(e,t)=>NN.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:dA(`<p>${t.translate(e)}</p>`)}]}]}),zL=e=>NN.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),jL=(e,t)=>[Cw.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Cw.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],HL=e=>{const t="tox-dialog",n=t+"-wrap",o=n+"__backdrop",r=t+"__disable-scroll";return NN.sketch({lazySink:e.lazySink,onEscape:t=>(e.onEscape(t),A.some(!0)),useTabstopAt:e=>!nk(e),dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:dA(`<div class="${n}"></div>`),components:[{dom:{tag:"div",classes:PL?[o,o+"--opaque"]:[o]}}]}},dragBlockClass:n,modalBehaviours:Dl([Cf.config({}),bf("dialog-events",e.dialogEvents.concat([Ws(Wr(),((e,t)=>{af.focusIn(e)}))])),bf("scroll-lock",[qs((()=>{ji(ct(),r)})),Ks((()=>{Hi(ct(),r)}))]),...e.extraBehaviours]),eventOrder:{[ls()]:["dialog-events"],[ys()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[xs()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},VL=e=>lg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},components:[yg("close",{tag:"div",classes:["tox-icon"]},e.icons)],action:e=>{As(e,Iw)}}),$L=(e,t,n,o)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...n.map((e=>({id:e}))).getOr({})}},components:[],behaviours:Dl([ID.config({channel:`${AL}-${t}`,initialData:e,renderComponents:e=>[sa(o.translate(e.title))]})])}),UL=()=>({dom:dA('<div class="tox-dialog__draghandle"></div>')}),WL=(e,t,n)=>((e,t,n)=>{const o=NN.parts.title($L(e,t,A.none(),n)),r=NN.parts.draghandle(UL()),s=NN.parts.close(VL(n)),i=[o].concat(e.draggable?[r]:[]).concat([s]);return Cw.sketch({dom:dA('<div class="tox-dialog__header"></div>'),components:i})})({title:n.shared.providers.translate(e),draggable:n.dialog.isDraggableModal()},t,n.shared.providers),qL=(e,t,n)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:dA('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),KL=(e,t,n)=>({onClose:()=>n.closeWindow(),onBlock:n=>{NN.setBusy(e(),((e,o)=>qL(n.message,o,t)))},onUnblock:()=>{NN.setIdle(e())}}),GL=(e,t,n,o)=>ca(HL({...e,lazySink:o.shared.getSink,extraBehaviours:[ID.config({channel:`${TL}-${e.id}`,updateState:(e,t)=>A.some(t),initialData:t}),US({}),...e.extraBehaviours],onEscape:e=>{As(e,Iw)},dialogEvents:n,eventOrder:{[as()]:[ID.name(),Bl.name()],[ys()]:["scroll-lock",ID.name(),"messages","dialog-events","alloy.base.behaviour"],[xs()]:["alloy.base.behaviour","dialog-events","messages",ID.name(),"scroll-lock"]}})),YL=e=>z(e,(e=>"menu"===e.type?(e=>{const t=z(e.items,(e=>({...e,storage:Cr(!1)})));return{...e,items:t}})(e):e)),XL=e=>U(e,((e,t)=>{if("menu"===t.type){return U(t.items,((e,t)=>(e[t.name]=t.storage,e)),e)}return e}),{}),JL=(e,t)=>[Vs(Wr(),tk),e(Bw,((e,n)=>{t.onClose(),n.onClose()})),e(Iw,((e,t,n,o)=>{t.onCancel(e),As(o,Bw)})),Fs(Hw,((e,n)=>t.onUnblock())),Fs(jw,((e,n)=>t.onBlock(n.event)))],QL=(e,t)=>{const n=(t,n)=>Fs(t,((t,r)=>{o(t,((o,s)=>{n(e(),o,r.event,t)}))})),o=(e,t)=>{ID.getState(e).get().each((n=>{t(n,e)}))};return[...JL(n,t),n(Fw,((e,t,n)=>{t.onAction(e,{name:n.name})}))]},ZL=(e,t,n)=>{const o=(t,n)=>Fs(t,((t,o)=>{r(t,((r,s)=>{n(e(),r,o.event,t)}))})),r=(e,t)=>{ID.getState(e).get().each((n=>{t(n.internalDialog,e)}))};return[...JL(o,t),o(zw,((e,t)=>t.onSubmit(e))),o(Lw,((e,t,n)=>{t.onChange(e,{name:n.name})})),o(Fw,((e,t,o,r)=>{const s=()=>af.focusIn(r),i=e=>gt(e,"disabled")||ft(e,"aria-disabled").exists((e=>"true"===e)),a=ot(r.element),l=jl(a);t.onAction(e,{name:o.name,value:o.value}),jl(a).fold(s,(e=>{i(e)||l.exists((t=>Ve(e,t)&&i(t)))?s():n().toOptional().filter((t=>!Ve(t.element,e))).each(s)}))})),o(Vw,((e,t,n)=>{t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})})),Ks((t=>{const n=e();Ru.setValue(t,n.getData())}))]},eB=(e,t)=>{const n=t.map((e=>e.footerButtons)).getOr([]),o=H(n,(e=>"start"===e.align)),r=(e,t)=>Cw.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${e}`]},components:z(t,(e=>e.memento.asSpec()))});return[r("start",o.pass),r("end",o.fail)]},tB=(e,t,n)=>({dom:dA('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Dl([ID.config({channel:`${RL}-${t}`,initialData:e,updateState:(e,t)=>{const o=z(t.buttons,(e=>{const t=cg(((e,t)=>sE(e,e.type,t))(e,n));return{name:e.name,align:e.align,memento:t}}));return A.some({lookupByName:t=>((e,t,n)=>W(t,(e=>e.name===n)).bind((t=>t.memento.getOpt(e))))(e,o,t),footerButtons:o})},renderComponents:eB})])}),nB=(e,t,n)=>NN.parts.footer(tB(e,t,n)),oB=(e,t)=>{if(e.getRoot().getSystem().isConnected()){const n=jh.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return ES.getField(n,t).orThunk((()=>{const n=e.getFooter();return ID.getState(n).get().bind((e=>e.lookupByName(t)))}))}return A.none()},rB=(e,t,n)=>{const o=t=>{const n=e.getRoot();n.getSystem().isConnected()&&t(n)},r={getData:()=>{const t=e.getRoot(),o=t.getSystem().isConnected()?e.getFormWrapper():t;return{...Ru.getValue(o),...ce(n,(e=>e.get()))}},setData:t=>{o((o=>{const s=r.getData(),i=ao(s,t),a=((e,t)=>{const n=e.getRoot();return ID.getState(n).get().map((e=>$o(Vo("data",e.dataValidator,t)))).getOr(t)})(e,i),l=e.getFormWrapper();Ru.setValue(l,a),le(n,((e,t)=>{be(i,t)&&e.set(i[t])}))}))},setEnabled:(t,n)=>{oB(e,t).each(n?em.enable:em.disable)},focus:t=>{oB(e,t).each(Cf.focus)},block:e=>{if(!s(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((t=>{Ds(t,jw,{message:e})}))},unblock:()=>{o((e=>{As(e,Hw)}))},showTab:t=>{o((n=>{const o=e.getBody();ID.getState(o).get().exists((e=>e.isTabPanel()))&&jh.getCurrent(o).each((e=>{xL.showTab(e,t)}))}))},redial:n=>{o((o=>{const s=e.getId(),i=t(n);o.getSystem().broadcastOn([`${TL}-${s}`],i),o.getSystem().broadcastOn([`${AL}-${s}`],i.internalDialog),o.getSystem().broadcastOn([`${DL}-${s}`],i.internalDialog),o.getSystem().broadcastOn([`${RL}-${s}`],i.internalDialog),r.setData(i.initialData)}))},close:()=>{o((e=>{As(e,Bw)}))}};return r},sB=(e,t,n)=>{const o=ri("dialog"),r=e.internalDialog,s=WL(r.title,o,n),i=((e,t,n)=>{const o=NL(e,t,A.none(),n,!1);return NN.parts.body(o)})({body:r.body,initialData:r.initialData},o,n),a=YL(r.buttons),l=XL(a),c=nB({buttons:a},o,n),d=ZL((()=>f),KL((()=>m),n.shared.providers,t),n.shared.getSink),u=(e=>{switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}})(r.size),h={id:o,header:s,body:i,footer:A.some(c),extraClasses:u,extraBehaviours:[],extraStyles:{}},m=GL(h,e,d,n),p={getId:y(o),getRoot:y(m),getBody:()=>NN.getBody(m),getFooter:()=>NN.getFooter(m),getFormWrapper:()=>{const e=NN.getBody(m);return jh.getCurrent(e).getOr(e)}},f=rB(p,t.redial,l);return{dialog:m,instanceApi:f}},iB=(e,t,n,o)=>{const r=ri("dialog"),s=ri("dialog-label"),i=ri("dialog-content"),a=e.internalDialog,l=cg(((e,t,n,o)=>Cw.sketch({dom:dA('<div class="tox-dialog__header"></div>'),components:[$L(e,t,A.some(n),o),UL(),VL(o)],containerBehaviours:Dl([bN.config({mode:"mouse",blockerClass:"blocker",getTarget:e=>va(e,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))({title:a.title,draggable:!0},r,s,n.shared.providers)),c=cg(((e,t,n,o,r)=>NL(e,t,A.some(n),o,r))({body:a.body,initialData:a.initialData},r,i,n,o)),d=YL(a.buttons),u=XL(d),h=cg(((e,t,n)=>tB(e,t,n))({buttons:d},r,n)),m=ZL((()=>f),{onBlock:e=>{cA.block(p,((t,o)=>qL(e.message,o,n.shared.providers)))},onUnblock:()=>{cA.unblock(p)},onClose:()=>t.closeWindow()},n.shared.getSink),p=ca({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:{role:"dialog","aria-labelledby":s,"aria-describedby":i}},eventOrder:{[as()]:[ID.name(),Bl.name()],[ls()]:["execute-on-form"],[ys()]:["reflecting","execute-on-form"]},behaviours:Dl([af.config({mode:"cyclic",onEscape:e=>(As(e,Bw),A.some(!0)),useTabstopAt:e=>!nk(e)&&("button"!==Me(e)||"disabled"!==pt(e,"disabled"))}),ID.config({channel:`${TL}-${r}`,updateState:(e,t)=>A.some(t),initialData:e}),Cf.config({}),bf("execute-on-form",m.concat([Ws(Wr(),((e,t)=>{af.focusIn(e)}))])),cA.config({getRoot:()=>A.some(p)}),gf.config({}),US({})]),components:[l.asSpec(),c.asSpec(),h.asSpec()]}),f=rB({getId:y(r),getRoot:y(p),getFooter:()=>h.get(p),getBody:()=>c.get(p),getFormWrapper:()=>{const e=c.get(p);return jh.getCurrent(e).getOr(e)}},t.redial,u);return{dialog:p,instanceApi:f}};var aB=tinymce.util.Tools.resolve("tinymce.util.URI");const lB=["insertContent","setContent","execCommand","close","block","unblock"],cB=e=>i(e)&&-1!==lB.indexOf(e.mceAction),dB=(e,t,n,o)=>{const r=ri("dialog"),a=WL(e.title,r,o),l=(e=>{const t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[ZS({dom:{tag:"iframe",attributes:{src:e.url}},behaviours:Dl([Aw.config({}),Cf.config({})])})]}],behaviours:Dl([af.config({mode:"acyclic",useTabstopAt:_(nk)})])};return NN.parts.body(t)})(e),c=e.buttons.bind((e=>0===e.length?A.none():A.some(nB({buttons:e},r,o)))),u=QL((()=>y),KL((()=>v),o.shared.providers,t)),h={...e.height.fold((()=>({})),(e=>({height:e+"px","max-height":e+"px"}))),...e.width.fold((()=>({})),(e=>({width:e+"px","max-width":e+"px"})))},m=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],p=new aB(e.url,{base_uri:new aB(window.location.href)}),f=`${p.protocol}://${p.host}${p.port?":"+p.port:""}`,g=sc(),b=[bf("messages",[qs((()=>{const t=lc(Re.fromDom(window),"message",(t=>{if(p.isSameOrigin(new aB(t.raw.origin))){const o=t.raw.data;cB(o)?((e,t,n)=>{switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":const o=!!d(n.ui)&&n.ui;e.execCommand(n.cmd,o,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock()}})(n,y,o):(e=>!cB(e)&&i(e)&&be(e,"mceAction"))(o)&&e.onMessage(y,o)}}));g.set(t)})),Ks(g.clear)]),Bl.config({channels:{[ML]:{onReceive:(e,t)=>{ba(e.element,"iframe").each((e=>{e.dom.contentWindow.postMessage(t,f)}))}}}})],v=GL({id:r,header:a,body:l,footer:c,extraClasses:m,extraBehaviours:b,extraStyles:h},e,u,o),y=(e=>{const t=t=>{e.getSystem().isConnected()&&t(e)};return{block:e=>{if(!s(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t((t=>{Ds(t,jw,{message:e})}))},unblock:()=>{t((e=>{As(e,Hw)}))},close:()=>{t((e=>{As(e,Bw)}))},sendMessage:e=>{t((t=>{t.getSystem().broadcastOn([ML],e)}))}}})(v);return{dialog:v,instanceApi:y}},uB=(e,t,n)=>t&&n?[]:[fT.config({contextual:{lazyContext:()=>A.some(Fn(Re.fromDom(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],hB=e=>{const t=e.backstage,n=e.editor,o=wb(n),r=(e=>{const t=e.backstage.shared;return{open:(n,o)=>{const r=()=>{NN.hide(l),o()},s=cg(sE({name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",e.backstage)),i=IL(),a=BL(r,t.providers),l=ca(HL({lazySink:()=>t.getSink(),header:LL(i,a),body:FL(n,t.providers),footer:A.some(zL(jL([],[s.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Fs(Iw,r)],eventOrder:{}}));NN.show(l);const c=s.get(l);Cf.focus(c)}}})(e),s=(e=>{const t=e.backstage.shared;return{open:(n,o)=>{const r=e=>{NN.hide(c),o(e)},s=cg(sE({name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",e.backstage)),i=sE({name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",e.backstage),a=IL(),l=BL((()=>r(!1)),t.providers),c=ca(HL({lazySink:()=>t.getSink(),header:LL(a,l),body:FL(n,t.providers),footer:A.some(zL(jL([],[i,s.asSpec()]))),onEscape:()=>r(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Fs(Iw,(()=>r(!1))),Fs(zw,(()=>r(!0)))],eventOrder:{}}));NN.show(c);const d=s.get(c);Cf.focus(d)}}})(e),i=(e,o)=>aL.openUrl((e=>{const r=dB(e,{closeWindow:()=>{NN.hide(r.dialog),o(r.instanceApi)}},n,t);return NN.show(r.dialog),r.instanceApi}),e),a=(e,n)=>aL.open(((e,o,r)=>{const s=o,i=sB({dataValidator:r,initialData:s,internalDialog:e},{redial:aL.redial,closeWindow:()=>{NN.hide(i.dialog),n(i.instanceApi)}},t);return NN.show(i.dialog),i.instanceApi.setData(s),i.instanceApi}),e),l=(e,r,s,i)=>aL.open(((e,a,l)=>{const c=$o(Vo("data",l,a));const d=ic(),u=t.shared.header.isPositionedAtTop(),h=()=>d.on((e=>{ig.reposition(e),fT.refresh(e)})),m=iB({dataValidator:l,initialData:c,internalDialog:e},{redial:aL.redial,closeWindow:()=>{d.on(ig.hide),n.off("ResizeEditor",h),d.clear(),s(m.instanceApi)}},t,i),p=ca(ig.sketch({lazySink:t.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...u?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Dl([bf("window-manager-inline-events",[Fs(ws(),((e,t)=>{As(m.dialog,Iw)}))]),...uB(n,o,u)]),isExtraPart:(e,t)=>(e=>cw(e,".tox-alert-dialog")||cw(e,".tox-confirm-dialog"))(t)}));return d.set(p),ig.showWithin(p,da(m.dialog),{anchor:r},A.some(ct())),o&&u||(fT.refresh(p),n.on("ResizeEditor",h)),m.instanceApi.setData(c),af.focusIn(m.dialog),m.instanceApi}),e);return{open:(e,n,o)=>void 0!==n&&"toolbar"===n.inline?l(e,t.shared.anchors.inlineDialog(),o,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?l(e,t.shared.anchors.cursor(),o,n.ariaAttrs):a(e,o),openUrl:(e,t)=>i(e,t),alert:(e,t)=>{r.open(e,(()=>{t()}))},close:e=>{e.close()},confirm:(e,t)=>{s.open(e,(e=>{t(e)}))}}},mB=e=>{Ag(e),(e=>{const t=e.options.register;var n;t("color_map",{processor:e=>g(e,s)?{value:kx(e),valid:!0}:{valid:!1,message:"Must be an array of strings."},default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_cols",{processor:"number",default:(n=Ax(e).length,Math.max(5,Math.ceil(Math.sqrt(n))))}),t("custom_colors",{processor:"boolean",default:!0})})(e),(e=>{const t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:e=>!1===e?{value:[],valid:!0}:s(e)||g(e,s)?{value:iM(e),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(e)};T.add("silver",(e=>{mB(e);const{getUiMothership:t,backstage:n,renderUI:o}=AN(e);lw(e,n.shared);const r=hB({editor:e,backstage:n});return{renderUI:o,getWindowManagerImpl:y(r),getNotificationManagerImpl:()=>((e,t,n)=>{const o=t.backstage.shared,r=()=>{const t=Fn(Re.fromDom(e.getContentAreaContainer())),n=jn(),o=tl(n.x,t.x,t.right),r=tl(n.y,t.y,t.bottom),s=Math.max(t.right,n.right),i=Math.max(t.bottom,n.bottom);return A.some(In(o,r,s-o,i-r))};return{open:(t,s)=>{const i=()=>{s(),ig.hide(l)},a=ca(wg.sketch({text:t.text,level:L(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:A.from(t.icon),closeButton:t.closeButton,onAction:i,iconProvider:o.providers.icons,translationProvider:o.providers.translate})),l=ca(ig.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:o.getSink,fireDismissalEventInstead:{},...o.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));n.add(l),t.timeout>0&&ag.setEditorTimeout(e,(()=>{i()}),t.timeout);const c={close:i,reposition:()=>{const t=da(a),n={maxHeightFunction:wc()},s=e.notificationManager.getNotifications();if(s[0]===c){const e={...o.anchors.banner(),overrides:n};ig.showWithinBounds(l,t,{anchor:e},r)}else P(s,c).each((e=>{const o=s[e-1].getEl(),i={type:"node",root:ct(),node:A.some(Re.fromDom(o)),overrides:n,layouts:{onRtl:()=>[fl],onLtr:()=>[fl]}};ig.showWithinBounds(l,t,{anchor:i},r)}))},text:e=>{wg.updateText(a,e)},settings:t,getEl:()=>a.element.dom,progressBar:{value:e=>{wg.updateProgress(a,e)}}};return c},close:e=>{e.close()},getArgs:e=>e.settings}})(e,{backstage:n},t())}}))}()},7575:e=>{!function(){"use strict";var t=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},n=function(e){return{eq:e}},o=n((function(e,t){return e===t})),r=function(e){return n((function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0}))},s=function(e,t){return function(e,t){return n((function(n,o){return e.eq(t(n),t(o))}))}(r(e),(function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)}))},i=function(e){return n((function(t,n){var r=Object.keys(t),i=Object.keys(n);if(!s(o).eq(r,i))return!1;for(var a=r.length,l=0;l<a;l++){var c=r[l];if(!e.eq(t[c],n[c]))return!1}return!0}))},a=n((function(e,n){if(e===n)return!0;var o=t(e);return o===t(n)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(o)?e===n:"array"===o?r(a).eq(e,n):"object"===o&&i(a).eq(e,n))}));const l=Object.getPrototypeOf,c=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},d=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&c(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":t})(t)===e,u=e=>t=>typeof t===e,h=e=>t=>e===t,m=(e,t)=>f(e)&&c(e,t,((e,t)=>l(e)===t)),p=d("string"),f=d("object"),g=e=>m(e,Object),b=d("array"),v=h(null),y=u("boolean"),x=h(void 0),w=e=>null==e,C=e=>!w(e),_=u("function"),S=u("number"),k=(e,t)=>{if(b(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},E=()=>{},O=(e,t)=>(...n)=>e(t.apply(null,n)),T=(e,t)=>n=>e(t(n)),A=e=>()=>e,D=e=>e,R=(e,t)=>e===t;function M(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const N=e=>t=>!e(t),P=e=>e(),L=e=>{e()},B=A(!1),I=A(!0);class F{constructor(e,t){this.tag=e,this.value=t}static some(e){return new F(!0,e)}static none(){return F.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?F.some(e(this.value)):F.none()}bind(e){return this.tag?e(this.value):F.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:F.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return C(e)?F.some(e):F.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}F.singletonNone=new F(!1);const z=Array.prototype.slice,j=Array.prototype.indexOf,H=Array.prototype.push,V=(e,t)=>j.call(e,t),$=(e,t)=>V(e,t)>-1,U=(e,t)=>{for(let n=0,o=e.length;n<o;n++){if(t(e[n],n))return!0}return!1},W=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const n=e[r];o[r]=t(n,r)}return o},q=(e,t)=>{for(let n=0,o=e.length;n<o;n++){t(e[n],n)}},K=(e,t)=>{for(let n=e.length-1;n>=0;n--){t(e[n],n)}},G=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];(t(s,r)?n:o).push(s)}return{pass:n,fail:o}},Y=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const r=e[o];t(r,o)&&n.push(r)}return n},X=(e,t,n)=>(K(e,((e,o)=>{n=t(n,e,o)})),n),J=(e,t,n)=>(q(e,((e,o)=>{n=t(n,e,o)})),n),Q=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const r=e[o];if(t(r,o))return F.some(r);if(n(r,o))break}return F.none()},Z=(e,t)=>Q(e,t,B),ee=(e,t)=>{for(let n=0,o=e.length;n<o;n++){if(t(e[n],n))return F.some(n)}return F.none()},te=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!b(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);H.apply(t,e[n])}return t},ne=(e,t)=>te(W(e,t)),oe=(e,t)=>{for(let n=0,o=e.length;n<o;++n){if(!0!==t(e[n],n))return!1}return!0},re=e=>{const t=z.call(e,0);return t.reverse(),t},se=(e,t)=>Y(e,(e=>!$(t,e))),ie=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const r=e[o];n[String(r)]=t(r,o)}return n},ae=(e,t)=>{const n=z.call(e,0);return n.sort(t),n},le=(e,t)=>t>=0&&t<e.length?F.some(e[t]):F.none(),ce=e=>le(e,0),de=e=>le(e,e.length-1),ue=_(Array.from)?Array.from:e=>z.call(e),he=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return F.none()},me=Object.keys,pe=Object.hasOwnProperty,fe=(e,t)=>{const n=me(e);for(let o=0,r=n.length;o<r;o++){const r=n[o];t(e[r],r)}},ge=(e,t)=>be(e,((e,n)=>({k:n,v:t(e,n)}))),be=(e,t)=>{const n={};return fe(e,((e,o)=>{const r=t(e,o);n[r.k]=r.v})),n},ve=e=>(t,n)=>{e[n]=t},ye=(e,t,n,o)=>(fe(e,((e,r)=>{(t(e,r)?n:o)(e,r)})),{}),xe=(e,t)=>{const n={};return ye(e,t,ve(n),E),n},we=(e,t)=>{const n=[];return fe(e,((e,o)=>{n.push(t(e,o))})),n},Ce=e=>we(e,D),_e=(e,t)=>Se(e,t)?F.from(e[t]):F.none(),Se=(e,t)=>pe.call(e,t),ke=(e,t)=>Se(e,t)&&void 0!==e[t]&&null!==e[t],Ee=e=>{const t={};return q(e,(e=>{t[e]={}})),me(t)},Oe=Array.isArray,Te=(e,t,n)=>{let o,r;if(!e)return!1;if(n=n||e,void 0!==e.length){for(o=0,r=e.length;o<r;o++)if(!1===t.call(n,e[o],o,e))return!1}else for(o in e)if(Se(e,o)&&!1===t.call(n,e[o],o,e))return!1;return!0},Ae=(e,t)=>{const n=[];return Te(e,((o,r)=>{n.push(t(o,r,e))})),n},De=(e,t)=>{const n=[];return Te(e,((o,r)=>{t&&!t(o,r,e)||n.push(o)})),n},Re=(e,t)=>{if(e)for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},Me=(e,t,n,o)=>{let r=x(n)?e[0]:n;for(let n=0;n<e.length;n++)r=t.call(o,r,e[n],n);return r},Ne=(e,t,n)=>{let o,r;for(o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},Pe=e=>e[e.length-1],Le=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},Be=()=>Ie(0,0),Ie=(e,t)=>({major:e,minor:t}),Fe={nu:Ie,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Be():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}})(e,t);if(!n)return{major:0,minor:0};const o=e=>Number(t.replace(n,"$"+e));return Ie(o(1),o(2))})(e,n)},unknown:Be},ze=(e,t)=>{const n=String(t).toLowerCase();return Z(e,(e=>e.search(n)))},je=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,He=(e,t)=>-1!==e.indexOf(t),Ve=(e,t)=>je(e,t,0),$e=(e,t)=>je(e,t,e.length-t.length),Ue=e=>t=>t.replace(e,""),We=Ue(/^\s+|\s+$/g),qe=Ue(/^\s+/g),Ke=Ue(/\s+$/g),Ge=e=>e.length>0,Ye=e=>!Ge(e),Xe=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?F.none():F.some(n)},Je=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qe=e=>t=>He(t,e),Ze=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>He(e,"edge/")&&He(e,"chrome")&&He(e,"safari")&&He(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Je],search:e=>He(e,"chrome")&&!He(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>He(e,"msie")||He(e,"trident")},{name:"Opera",versionRegexes:[Je,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Qe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Qe("firefox")},{name:"Safari",versionRegexes:[Je,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(He(e,"safari")||He(e,"mobile/"))&&He(e,"applewebkit")}],et=[{name:"Windows",search:Qe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>He(e,"iphone")||He(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Qe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Qe("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Qe("linux"),versionRegexes:[]},{name:"Solaris",search:Qe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Qe("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Qe("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tt={browsers:A(Ze),oses:A(et)},nt="Edge",ot="Chromium",rt="Opera",st="Firefox",it="Safari",at=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(nt),isChromium:o(ot),isIE:o("IE"),isOpera:o(rt),isFirefox:o(st),isSafari:o(it)}},lt={unknown:()=>at({current:void 0,version:Fe.unknown()}),nu:at,edge:A(nt),chromium:A(ot),ie:A("IE"),opera:A(rt),firefox:A(st),safari:A(it)},ct="Windows",dt="Android",ut="Linux",ht="macOS",mt="Solaris",pt="FreeBSD",ft="ChromeOS",gt=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(ct),isiOS:o("iOS"),isAndroid:o(dt),isMacOS:o(ht),isLinux:o(ut),isSolaris:o(mt),isFreeBSD:o(pt),isChromeOS:o(ft)}},bt={unknown:()=>gt({current:void 0,version:Fe.unknown()}),nu:gt,windows:A(ct),ios:A("iOS"),android:A(dt),linux:A(ut),macos:A(ht),solaris:A(mt),freebsd:A(pt),chromeos:A(ft)},vt=(e,t,n)=>{const o=tt.browsers(),r=tt.oses(),s=t.bind((e=>((e,t)=>he(t.brands,(t=>{const n=t.brand.toLowerCase();return Z(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Fe.nu(parseInt(t.version,10),0)})))})))(o,e))).orThunk((()=>((e,t)=>ze(e,t).map((e=>{const n=Fe.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(lt.unknown,lt.nu),i=((e,t)=>ze(e,t).map((e=>{const n=Fe.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(bt.unknown,bt.nu),a=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),s=e.isiOS()&&!r,i=e.isiOS()||e.isAndroid(),a=i||o("(pointer:coarse)"),l=r||!s&&i&&o("(min-device-width:768px)"),c=s||i&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:A(r),isiPhone:A(s),isTablet:A(l),isPhone:A(c),isTouch:A(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:A(d),isDesktop:A(u)}})(i,s,e,n);return{browser:s,os:i,deviceType:a}},yt=e=>window.matchMedia(e).matches;let xt=Le((()=>vt(navigator.userAgent,F.from(navigator.userAgentData),yt)));const wt=()=>xt(),Ct=navigator.userAgent,_t=wt(),St=_t.browser,kt=_t.os,Et=_t.deviceType,Ot=-1!==Ct.indexOf("Windows Phone"),Tt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:St.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!St.isIE(),windowsPhone:Ot,browser:{current:St.current,version:St.version,isChromium:St.isChromium,isEdge:St.isEdge,isFirefox:St.isFirefox,isIE:St.isIE,isOpera:St.isOpera,isSafari:St.isSafari},os:{current:kt.current,version:kt.version,isAndroid:kt.isAndroid,isChromeOS:kt.isChromeOS,isFreeBSD:kt.isFreeBSD,isiOS:kt.isiOS,isLinux:kt.isLinux,isMacOS:kt.isMacOS,isSolaris:kt.isSolaris,isWindows:kt.isWindows},deviceType:{isDesktop:Et.isDesktop,isiPad:Et.isiPad,isiPhone:Et.isiPhone,isPhone:Et.isPhone,isTablet:Et.isTablet,isTouch:Et.isTouch,isWebView:Et.isWebView}},At=/^\s*|\s*$/g,Dt=e=>null==e?"":(""+e).replace(At,""),Rt=(e,t)=>t?!("array"!==t||!Oe(e))||typeof e===t:void 0!==e,Mt=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),Te(e,((e,r)=>{if(!1===t.call(o,e,r,n))return!1;Mt(e,t,n,o)})))},Nt={trim:Dt,isArray:Oe,is:Rt,toArray:e=>{if(Oe(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n)=>{let o;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n},each:Te,map:Ae,grep:De,inArray:Re,hasOwn:Se,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const t in o)if(Se(o,t)){const n=o[t];void 0!==n&&(e[t]=n)}}return e},walk:Mt,resolve:(e,t)=>{let n,o;for(t=t||window,n=0,o=(e=e.split(".")).length;n<o&&(t=t[e[n]]);n++);return t},explode:(e,t)=>!e||Rt(e,"array")?e:Ae(e.split(t||","),Dt),_addCacheSuffix:e=>{const t=Tt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Pt=(e,t,n=R)=>e.exists((e=>n(e,t))),Lt=(e,t,n)=>e.isSome()&&t.isSome()?F.some(n(e.getOrDie(),t.getOrDie())):F.none(),Bt=(e,t)=>e?F.some(t):F.none();"undefined"!=typeof window?window:Function("return this;")();const It=e=>e.dom.nodeName.toLowerCase(),Ft=e=>e.dom.nodeType,zt=e=>t=>Ft(t)===e,jt=zt(1),Ht=zt(3),Vt=zt(9),$t=zt(11),Ut=(e,t,n)=>{if(!(p(n)||y(n)||S(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Wt=(e,t,n)=>{Ut(e.dom,t,n)},qt=(e,t)=>{const n=e.dom;fe(t,((e,t)=>{Ut(n,t,e)}))},Kt=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},Gt=(e,t)=>F.from(Kt(e,t)),Yt=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Xt=(e,t)=>{e.dom.removeAttribute(t)},Jt=e=>J(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Qt=(e,t)=>{const n=Kt(e,t);return void 0===n||""===n?[]:n.split(" ")},Zt=e=>void 0!==e.dom.classList,en=e=>Qt(e,"class"),tn=(e,t)=>((e,t,n)=>{const o=Qt(e,t).concat([n]);return Wt(e,t,o.join(" ")),!0})(e,"class",t),nn=(e,t)=>((e,t,n)=>{const o=Y(Qt(e,t),(e=>e!==n));return o.length>0?Wt(e,t,o.join(" ")):Xt(e,t),!1})(e,"class",t),on=(e,t)=>{Zt(e)?e.dom.classList.add(t):tn(e,t)},rn=e=>{0===(Zt(e)?e.dom.classList:en(e)).length&&Xt(e,"class")},sn=(e,t)=>{if(Zt(e)){e.dom.classList.remove(t)}else nn(e,t);rn(e)},an=(e,t)=>{const n=Zt(e)?e.dom.classList.toggle(t):((e,t)=>$(en(e),t)?nn(e,t):tn(e,t))(e,t);return rn(e),n},ln=(e,t)=>Zt(e)&&e.dom.classList.contains(t),cn=e=>void 0!==e.style&&_(e.style.getPropertyValue),dn=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},un={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return dn(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return dn(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return dn(n)},fromDom:dn,fromPoint:(e,t,n)=>F.from(e.dom.elementFromPoint(t,n)).map(dn)},hn=(e,t)=>{const n=[],o=e=>(n.push(e),t(e));let r=t(e);do{r=r.bind(o)}while(r.isSome());return n},mn=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},pn=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,fn=(e,t)=>e.dom===t.dom,gn=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},bn=e=>un.fromDom(e.dom.ownerDocument),vn=e=>Vt(e)?e:bn(e),yn=e=>un.fromDom(vn(e).dom.defaultView),xn=e=>F.from(e.dom.parentNode).map(un.fromDom),wn=e=>F.from(e.dom.previousSibling).map(un.fromDom),Cn=e=>F.from(e.dom.nextSibling).map(un.fromDom),_n=e=>re(hn(e,wn)),Sn=e=>hn(e,Cn),kn=e=>W(e.dom.childNodes,un.fromDom),En=(e,t)=>{const n=e.dom.childNodes;return F.from(n[t]).map(un.fromDom)},On=e=>En(e,0),Tn=e=>En(e,e.dom.childNodes.length-1),An=e=>e.dom.childNodes.length,Dn=e=>$t(e)&&C(e.dom.host),Rn=_(Element.prototype.attachShadow)&&_(Node.prototype.getRootNode),Mn=A(Rn),Nn=Rn?e=>un.fromDom(e.dom.getRootNode()):vn,Pn=e=>Dn(e)?e:(e=>{const t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return un.fromDom(t)})(vn(e)),Ln=e=>un.fromDom(e.dom.host),Bn=e=>{if(Mn()&&C(e.target)){const t=un.fromDom(e.target);if(jt(t)&&In(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return ce(t)}}return F.from(e.target)},In=e=>C(e.dom.shadowRoot),Fn=e=>{const t=Ht(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(e=>{const t=Nn(e);return Dn(t)?F.some(t):F.none()})(un.fromDom(t)).fold((()=>n.body.contains(t)),T(Fn,Ln))},zn=(e,t,n)=>{if(!p(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);cn(e)&&e.style.setProperty(t,n)},jn=(e,t,n)=>{const o=e.dom;zn(o,t,n)},Hn=(e,t)=>{const n=e.dom;fe(t,((e,t)=>{zn(n,t,e)}))},Vn=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||Fn(e)?o:$n(n,t)},$n=(e,t)=>cn(e)?e.style.getPropertyValue(t):"",Un=(e,t)=>{const n=e.dom,o=$n(n,t);return F.from(o).filter((e=>e.length>0))},Wn=e=>{const t={},n=e.dom;if(cn(n))for(let e=0;e<n.style.length;e++){const o=n.style.item(e);t[o]=n.style[o]}return t},qn=(e,t)=>{((e,t)=>{cn(e)&&e.style.removeProperty(t)})(e.dom,t),Pt(Gt(e,"style").map(We),"")&&Xt(e,"style")},Kn=(e,t)=>{xn(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},Gn=(e,t)=>{Cn(e).fold((()=>{xn(e).each((e=>{Xn(e,t)}))}),(e=>{Kn(e,t)}))},Yn=(e,t)=>{On(e).fold((()=>{Xn(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},Xn=(e,t)=>{e.dom.appendChild(t.dom)},Jn=(e,t)=>{q(t,(t=>{Xn(e,t)}))},Qn=e=>{e.dom.textContent="",q(kn(e),(e=>{Zn(e)}))},Zn=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},eo=e=>{const t=kn(e);var n,o;t.length>0&&(n=e,q(o=t,((e,t)=>{const r=0===t?n:o[t-1];Gn(r,e)}))),Zn(e)},to=e=>e.dom.innerHTML,no=(e,t)=>{const n=bn(e).dom,o=un.fromDom(n.createDocumentFragment()),r=((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,kn(un.fromDom(n))})(t,n);Jn(o,r),Qn(e),Xn(e,o)},oo=(e,t)=>n=>{e(n)&&t((e=>{const t=un.fromDom(Bn(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=O(o,n);return((e,t,n,o,r,s,i)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:s,raw:i}))(t,e.clientX,e.clientY,n,o,r,e)})(n))},ro=(e,t,n,o)=>((e,t,n,o,r)=>{const s=oo(n,o);return e.dom.addEventListener(t,s,r),{unbind:M(so,e,t,s,r)}})(e,t,n,o,!1),so=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},io=(e,t)=>({left:e,top:t,translate:(n,o)=>io(e+n,t+o)}),ao=io,lo=(e,t)=>void 0!==e?e:void 0!==t?t:0,co=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?ao(n.offsetLeft,n.offsetTop):Fn(e)?(e=>{const t=e.getBoundingClientRect();return ao(t.left,t.top)})(t):ao(0,0)},uo=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return ao(n,o)},ho=(e,t,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(e,t)},mo=(e,t)=>{wt().browser.isSafari()&&_(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},po=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),fo=e=>{const t=void 0===e?window:e,n=t.document,o=uo(un.fromDom(n));return(e=>{const t=void 0===e?window:e;return wt().browser.isFirefox()?F.none():F.from(t.visualViewport)})(t).fold((()=>{const e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return po(o.left,o.top,n,r)}),(e=>po(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)))},go=e=>t=>!!t&&t.nodeType===e,bo=e=>!!e&&!Object.getPrototypeOf(e),vo=go(1),yo=e=>{const t=e.map((e=>e.toLowerCase()));return e=>{if(e&&e.nodeName){const n=e.nodeName.toLowerCase();return $(t,n)}return!1}},xo=(e,t)=>{const n=t.toLowerCase().split(" ");return t=>{if(vo(t))for(let o=0;o<n.length;o++){const r=t.ownerDocument.defaultView.getComputedStyle(t,null);if((r?r.getPropertyValue(e):null)===n[o])return!0}return!1}},wo=e=>t=>vo(t)&&t.hasAttribute(e),Co=e=>vo(e)&&e.hasAttribute("data-mce-bogus"),_o=e=>vo(e)&&"TABLE"===e.tagName,So=e=>t=>{if(vo(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},ko=yo(["textarea","input"]),Eo=go(3),Oo=go(4),To=go(7),Ao=go(8),Do=go(9),Ro=go(11),Mo=yo(["br"]),No=yo(["img"]),Po=So("true"),Lo=So("false"),Bo=yo(["td","th"]),Io=yo(["video","audio","object","embed"]),Fo=wt().browser,zo=e=>Z(e,jt),jo=(e,t)=>e.children&&$(e.children,t),Ho=(e,t,n)=>{let o=0,r=0;const s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Vn(un.fromDom(e),"position")){const n=t.getBoundingClientRect();return o=n.left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,r=n.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop,{x:o,y:r}}let i=t;for(;i&&i!==n&&i.nodeType&&!jo(i,n);){const e=i;o+=e.offsetLeft||0,r+=e.offsetTop||0,i=e.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!jo(i,n);)o-=i.scrollLeft||0,r-=i.scrollTop||0,i=i.parentNode;r+=(e=>Fo.isFirefox()&&"table"===It(e)?zo(kn(e)).filter((e=>"caption"===It(e))).bind((e=>zo(Sn(e)).map((t=>{const n=t.dom.offsetTop,o=e.dom.offsetTop,r=e.dom.offsetHeight;return n<=o?-r:0})))).getOr(0):0)(un.fromDom(t))}return{x:o,y:r}};var Vo=(e,t,n,o,r)=>e(n,o)?F.some(n):_(r)&&r(n)?F.none():t(n,o,r);const $o=(e,t,n)=>{let o=e.dom;const r=_(n)?n:B;for(;o.parentNode;){o=o.parentNode;const e=un.fromDom(o);if(t(e))return F.some(e);if(r(e))break}return F.none()},Uo=(e,t,n)=>Vo(((e,t)=>t(e)),$o,e,t,n),Wo=(e,t)=>Z(e.dom.childNodes,(e=>t(un.fromDom(e)))).map(un.fromDom),qo=(e,t,n)=>$o(e,(e=>mn(e,t)),n),Ko=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return pn(n)?F.none():F.from(n.querySelector(e)).map(un.fromDom)})(t,e),Go=(e,t,n)=>Vo(((e,t)=>mn(e,t)),qo,e,t,n),Yo=(e,t={})=>{let n=0;const o={},r=un.fromDom(e),s=vn(r),i=t.maxLoadTime||5e3,a=a=>new Promise(((l,c)=>{let d;const u=Nt._addCacheSuffix(a),h=(e=>_e(o,e).getOrThunk((()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}))))(u);o[u]=h,h.count++;const m=(e,t)=>{q(e,L),h.status=t,h.passed=[],h.failed=[],d&&(d.onload=null,d.onerror=null,d=null)},p=()=>m(h.passed,2),f=()=>m(h.failed,3),g=()=>{var t,n;t=()=>{const t=e.styleSheets;let n=t.length;for(;n--;){const e=t[n].ownerNode;if(e&&e.id===d.id)return p(),!0}return!1},n=g,t()||(Date.now()-v<i?setTimeout(n):f())};if(l&&h.passed.push(l),c&&h.failed.push(c),1===h.status)return;if(2===h.status)return void p();if(3===h.status)return void f();h.status=1;const b=un.fromTag("link",s.dom);qt(b,{rel:"stylesheet",type:"text/css",id:h.id});const v=Date.now();var y;t.contentCssCors&&Wt(b,"crossOrigin","anonymous"),t.referrerPolicy&&Wt(b,"referrerpolicy",t.referrerPolicy),d=b.dom,d.onload=g,d.onerror=f,y=b,Xn(Pn(r),y),Wt(b,"href",u)})),l=e=>{const t=Nt._addCacheSuffix(e);_e(o,t).each((e=>{0===--e.count&&(delete o[t],(e=>{const t=Pn(r);Ko(t,"#"+e).each(Zn)})(e.id))}))};return{load:a,loadAll:e=>Promise.allSettled(W(e,(e=>a(e).then(A(e))))).then((e=>{const t=G(e,(e=>"fulfilled"===e.status));return t.fail.length>0?Promise.reject(W(t.fail,(e=>e.reason))):W(t.pass,(e=>e.value))})),unload:l,unloadAll:e=>{q(e,(e=>{l(e)}))},_setReferrerPolicy:e=>{t.referrerPolicy=e}}},Xo=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=Nn(t).dom;return F.from(e.get(o)).getOrThunk((()=>{const t=Yo(o,n);return e.set(o,t),t}))}}})();class Jo{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node}findSibling(e,t,n,o){let r,s;if(e){if(!o&&e[t])return e[t];if(e!==this.rootNode){if(r=e[n],r)return r;for(s=e.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(r=s[n],r)return r}}}findPreviousNode(e,t,n,o){let r,s,i;if(e){if(r=e[n],this.rootNode&&r===this.rootNode)return;if(r){if(!o)for(i=r[t];i;i=i[t])if(!i[t])return i;return r}if(s=e.parentNode,s&&s!==this.rootNode)return s}}}const Qo=e=>{let t;return n=>(t=t||ie(e,I),Se(t,It(n)))},Zo=Qo(["h1","h2","h3","h4","h5","h6"]),er=Qo(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),tr=e=>jt(e)&&!er(e),nr=e=>jt(e)&&"br"===It(e),or=Qo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),rr=Qo(["ul","ol","dl"]),sr=Qo(["li","dd","dt"]),ir=Qo(["thead","tbody","tfoot"]),ar=Qo(["td","th"]),lr=Qo(["pre","script","textarea","style"]),cr="\ufeff",dr="",ur=e=>e===cr,hr=cr,mr=ur,pr=e=>e.replace(/\uFEFF/g,""),fr=vo,gr=Eo,br=e=>(gr(e)&&(e=e.parentNode),fr(e)&&e.hasAttribute("data-mce-caret")),vr=e=>gr(e)&&mr(e.data),yr=e=>br(e)||vr(e),xr=e=>e.firstChild!==e.lastChild||!Mo(e.firstChild),wr=e=>{const t=e.container();return!!Eo(t)&&(t.data.charAt(e.offset())===hr||e.isAtStart()&&vr(t.previousSibling))},Cr=e=>{const t=e.container();return!!Eo(t)&&(t.data.charAt(e.offset()-1)===hr||e.isAtEnd()&&vr(t.nextSibling))},_r=(e,t,n)=>{const o=t.ownerDocument.createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild((()=>{const e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e})());const r=t.parentNode;return n?r.insertBefore(o,t):t.nextSibling?r.insertBefore(o,t.nextSibling):r.appendChild(o),o},Sr=e=>gr(e)&&e.data[0]===hr,kr=e=>gr(e)&&e.data[e.data.length-1]===hr,Er=e=>e&&e.hasAttribute("data-mce-caret")?((e=>{const t=e.getElementsByTagName("br"),n=t[t.length-1];Co(n)&&n.parentNode.removeChild(n)})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Or=e=>br(e.startContainer),Tr=Po,Ar=Lo,Dr=Mo,Rr=Eo,Mr=yo(["script","style","textarea"]),Nr=yo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Pr=yo(["table"]),Lr=yr,Br=e=>!Lr(e)&&(Rr(e)?!Mr(e.parentNode):Nr(e)||Dr(e)||Pr(e)||Ir(e)),Ir=e=>!1===(e=>vo(e)&&"true"===e.getAttribute("unselectable"))(e)&&Ar(e),Fr=(e,t)=>Br(e)&&((e,t)=>{for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Ir(e))return!1;if(Tr(e))return!0}return!0})(e,t),zr=/^[ \t\r\n]*$/,jr=e=>zr.test(e),Hr=e=>"\n"===e||"\r"===e,Vr=(e,t=4,n=!0,o=!0)=>{const r=((e,t)=>t<=0?"":new Array(t+1).join(e))(" ",t),s=e.replace(/\t/g,r),i=J(s,((e,t)=>(e=>-1!==" \f\t\v".indexOf(e))(t)||t===dr?e.pcIsSpace||""===e.str&&n||e.str.length===s.length-1&&o||((e,t)=>t<e.length&&t>=0&&Hr(e[t]))(s,e.str.length+1)?{pcIsSpace:!1,str:e.str+dr}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:Hr(t),str:e.str+t}),{pcIsSpace:!1,str:""});return i.str},$r=(e,t)=>{const n=un.fromDom(t),o=un.fromDom(e);return r=o,s="pre,code",i=M(fn,n),qo(r,s,i).isSome();var r,s,i},Ur=(e,t)=>Br(e)&&!1===((e,t)=>Eo(e)&&jr(e.data)&&!1===$r(e,t))(e,t)||(e=>vo(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||Wr(e),Wr=wo("data-mce-bookmark"),qr=wo("data-mce-bogus"),Kr=(Gr="data-mce-bogus",Yr="all",e=>vo(e)&&e.getAttribute(Gr)===Yr);var Gr,Yr;const Xr=(e,t=!0)=>((e,t)=>{let n=0;if(Ur(e,e))return!1;{let o=e.firstChild;if(!o)return!0;const r=new Jo(o,e);do{if(t){if(Kr(o)){o=r.next(!0);continue}if(qr(o)){o=r.next();continue}}if(Mo(o))n++,o=r.next();else{if(Ur(o,e))return!1;o=r.next()}}while(o);return n<=1}})(e.dom,t),Jr=(e,t)=>C(e)&&(Ur(e,t)||tr(un.fromDom(e))),Qr=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),Zr=(e,t)=>Eo(e)&&e.data.length>0&&((e,t)=>{const n=new Jo(e,t).prev(!1),o=new Jo(e,t).next(!1),r=x(n)||Jr(n,t),s=x(o)||Jr(o,t);return r&&s})(e,t),es=(e,t,n)=>{const o=n||t;if(vo(t)&&Qr(t))return t;const r=t.childNodes;for(let t=r.length-1;t>=0;t--)es(e,r[t],o);if(vo(t)){const e=t.childNodes;1===e.length&&Qr(e[0])&&t.parentNode.insertBefore(e[0],t)}return(e=>Ro(e)||Do(e))(t)||Ur(t,o)||(e=>!!vo(e)&&e.childNodes.length>0)(t)||Zr(t,o)||e.remove(t),t},ts=Nt.makeMap,ns=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,os=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rs=/[<>&\"\']/g,ss=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,is={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},as={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ls={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},cs=(e,t)=>{let n,o,r;const s={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),as[o]||(r="&"+e[n+1]+";",s[o]=r,s[r]=o);return s}},ds=cs("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),us=(e,t)=>e.replace(t?ns:os,(e=>as[e]||e)),hs=(e,t)=>e.replace(t?ns:os,(e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":as[e]||"&#"+e.charCodeAt(0)+";")),ms=(e,t,n)=>(n=n||ds,e.replace(t?ns:os,(e=>as[e]||n[e]||e))),ps={encodeRaw:us,encodeAllRaw:e=>(""+e).replace(rs,(e=>as[e]||e)),encodeNumeric:hs,encodeNamed:ms,getEncodeFunc:(e,t)=>{const n=cs(t)||ds,o=(e,t)=>e.replace(t?ns:os,(e=>void 0!==as[e]?as[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";")),r=(e,t)=>ms(e,t,n),s=ts(e.replace(/\+/g,","));return s.named&&s.numeric?o:s.named?t?r:ms:s.numeric?hs:us},decode:e=>e.replace(ss,((e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):is[t]||String.fromCharCode(t):ls[e]||ds[e]||(e=>{const t=un.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e)))},fs={},gs={},bs=Nt.makeMap,vs=Nt.each,ys=Nt.extend,xs=Nt.explode,ws=Nt.inArray,Cs=(e,t)=>(e=Nt.trim(e))?e.split(t||" "):[],_s=(e,t)=>{const n=bs(e," ",bs(e.toUpperCase()," "));return ys(n,t)},Ss=e=>_s("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ks=(e,t)=>{let n;return e&&(n={},"string"==typeof e&&(e={"*":e}),vs(e,((e,o)=>{n[o]=n[o.toUpperCase()]="map"===t?bs(e,/[, ]/):xs(e,/[, ]/)}))),n},Es=e=>{var t;const n={},o={};let r=[];const s={},i={},a=(t,n,o)=>{let r=e[t];return r?r=bs(r,/[, ]/,bs(r.toUpperCase(),/[, ]/)):(r=fs[t],r||(r=_s(n,o),fs[t]=r)),r},l=null!==(t=(e=e||{}).schema)&&void 0!==t?t:"html5",c=(e=>{const t={};let n,o,r,s,i,a;const l=(e,o="",r="")=>{const s=Cs(r),i=Cs(e);let a=i.length;for(;a--;){const e=Cs([n,o].join(" "));t[i[a]]={attributes:ie(e,(()=>({}))),attributesOrder:e,children:ie(s,A(gs))}}},c=(e,n)=>{const o=Cs(e),r=Cs(n);let s=o.length;for(;s--;){const e=t[o[s]];for(let t=0,n=r.length;t<n;t++)e.attributes[r[t]]={},e.attributesOrder.push(r[t])}};return fs[e]?fs[e]:(n="id accesskey class dir lang style tabindex title role",o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",o+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(n+=" xml:lang",a="acronym applet basefont big font strike tt",r=[r,a].join(" "),vs(Cs(a),(e=>{l(e,"",r)})),i="center dir isindex noframes",o=[o,i].join(" "),s=[o,r].join(" "),vs(Cs(i),(e=>{l(e,"",s)}))),s=s||[o,r].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),l("address dt dd div caption","",s),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),l("blockquote","cite",s),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",s),l("dl","","dt dd"),l("a","href target rel media hreflang type",r),l("q","cite",r),l("ins del","cite datetime",s),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",s),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),l("param","name value"),l("map","name",[s,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",s),l("th","colspan rowspan headers scope abbr",s),l("form","accept-charset action autocomplete enctype method name novalidate target",s),l("fieldset","disabled form name",[s,"legend"].join(" ")),l("label","form for",r),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?s:r),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[s,"li"].join(" ")),l("noscript","",s),"html4"!==e&&(l("wbr"),l("ruby","",[r,"rt rp"].join(" ")),l("figcaption","",s),l("mark rt rp summary bdi","",r),l("canvas","width height",s),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[r,"option"].join(" ")),l("article section nav aside main header footer","",s),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[s,"figcaption"].join(" ")),l("time","datetime",r),l("dialog","open",s),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",r),l("progress","value max",r),l("meter","value min max low high optimum",r),l("details","open",[s,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),"html4"!==e&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("img","loading"),c("iframe","sandbox seamless allowfullscreen loading")),"html4"!==e&&q([t.video,t.audio],(e=>{delete e.children.audio,delete e.children.video})),vs(Cs("a form meter progress dfn"),(e=>{t[e]&&delete t[e].children[e]})),delete t.caption.children.table,delete t.script,fs[e]=t,t)})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const d=ks(e.valid_styles),u=ks(e.invalid_styles,"map"),h=ks(e.valid_classes,"map"),m=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),f=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=a("non_empty_elements",b+" pre",f),y=a("move_caret_before_on_enter_elements",b+" table",f),x=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",x),C=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");vs("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(e=>{i[e]=new RegExp("</"+e+"[^>]*>","gi")}));const _=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),S=e=>{let t,o,s,i,a,l,c,d,u,h,m,p,f,g,b,v,y,x;const w=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,C=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,S=/[*?+]/;if(e){const k=Cs(e,",");for(n["@"]&&(v=n["@"].attributes,y=n["@"].attributesOrder),t=0,o=k.length;t<o;t++)if(a=w.exec(k[t]),a){if(g=a[1],u=a[2],b=a[3],d=a[5],p={},f=[],l={attributes:p,attributesOrder:f},"#"===g&&(l.paddEmpty=!0),"-"===g&&(l.removeEmpty=!0),"!"===a[4]&&(l.removeEmptyAttrs=!0),v&&(fe(v,((e,t)=>{p[t]=e})),f.push.apply(f,y)),d)for(d=Cs(d,"|"),s=0,i=d.length;s<i;s++)if(a=C.exec(d[s]),a){if(c={},m=a[1],h=a[2].replace(/[\\:]:/g,":"),g=a[3],x=a[4],"!"===m&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(h),c.required=!0),"-"===m){delete p[h],f.splice(ws(f,h),1);continue}g&&("="===g&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:h,value:x}),c.defaultValue=x),"~"===g&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:h,value:x}),c.forcedValue=x),"<"===g&&(c.validValues=bs(x,"?"))),S.test(h)?(l.attributePatterns=l.attributePatterns||[],c.pattern=_(h),l.attributePatterns.push(c)):(p[h]||f.push(h),p[h]=c)}v||"@"!==u||(v=p,y=f),b&&(l.outputName=u,n[b]=l),S.test(u)?(l.pattern=_(u),r.push(l)):n[u]=l}}},k=e=>{r=[],q(me(n),(e=>{delete n[e]})),S(e),vs(c,((e,t)=>{o[t]=e.children}))},E=e=>{const t=/^(~)?(.+)$/;e&&(fs.text_block_elements=fs.block_elements=null,vs(Cs(e,","),(e=>{const r=t.exec(e),i="~"===r[1],a=i?"span":"div",l=r[2];if(o[l]=o[a],s[l]=a,i||(w[l.toUpperCase()]={},w[l]={}),!n[l]){let e=n[a];e=ys({},e),delete e.removeEmptyAttrs,delete e.removeEmpty,n[l]=e}vs(o,((e,t)=>{e[a]&&(o[t]=e=ys({},o[t]),e[l]=e[a])}))})))},O=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;fs[l]=null,e&&vs(Cs(e,","),(e=>{const n=t.exec(e);let r,s;n&&(s=n[1],r=s?o[n[2]]:o[n[2]]={"#comment":{}},r=o[n[2]],vs(Cs(n[3],"|"),(e=>{"-"===s?delete r[e]:r[e]={}})))}))},T=e=>{let t,o=n[e];if(o)return o;for(t=r.length;t--;)if(o=r[t],o.pattern.test(e))return o};e.valid_elements?k(e.valid_elements):(vs(c,((e,t)=>{n[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},o[t]=e.children})),vs(Cs("strong/b em/i"),(e=>{const t=Cs(e,"/");n[t[1]].outputName=t[0]})),vs(C,((t,o)=>{n[o]&&(e.padd_empty_block_inline_children&&(n[o].paddInEmptyBlock=!0),n[o].removeEmpty=!0)})),vs(Cs("ol ul blockquote a table tbody"),(e=>{n[e]&&(n[e].removeEmpty=!0)})),vs(Cs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(e=>{n[e].paddEmpty=!0})),vs(Cs("span"),(e=>{n[e].removeEmptyAttrs=!0}))),E(e.custom_elements),O(e.valid_children),S(e.extended_valid_elements),O("+ol[ul|ol],+ul[ul|ol]"),vs({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((e,t)=>{n[t]&&(n[t].parentsRequired=Cs(e))})),e.invalid_elements&&vs(xs(e.invalid_elements),(e=>{n[e]&&delete n[e]})),T("span")||S("span[!data-mce-type|*]");const D=A(d),R=A(u),M=A(h),N=A(g),P=A(w),L=A(x),B=A(C),I=A(Object.seal(f)),F=A(p),z=A(v),j=A(y),H=A(m),V=A(Object.seal(i)),$=A(s);return{type:l,children:o,elements:n,getValidStyles:D,getValidClasses:M,getBlockElements:P,getInvalidStyles:R,getVoidElements:I,getTextBlockElements:L,getTextInlineElements:B,getBoolAttrs:N,getElementRule:T,getSelfClosingElements:F,getNonEmptyElements:z,getMoveCaretBeforeOnEnterElements:j,getWhitespaceElements:H,getSpecialElements:V,isValidChild:(e,t)=>{const n=o[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:(e,t)=>{let n,o;const r=T(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns,n)for(o=n.length;o--;)if(n[o].pattern.test(t))return!0}return!1},getCustomElements:$,addValidElements:S,setValidElements:k,addCustomElements:E,addValidChildren:O}},Os=(e,t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/;let s;const i={};let a,l;const c=cr;e=e||{},t&&(a=t.getValidStyles(),l=t.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(s=0;s<d.length;s++)i[d[s]]=c+s,i[c+s]=d[s];const u={parse:t=>{const a={};let l,d,h,m;const p=e.url_converter,f=e.url_converter_scope||u,g=(e,t,n)=>{const o=a[e+"-top"+t];if(!o)return;const r=a[e+"-right"+t];if(!r)return;const i=a[e+"-bottom"+t];if(!i)return;const l=a[e+"-left"+t];if(!l)return;const c=[o,r,i,l];for(s=c.length-1;s--&&c[s]===c[s+1];);s>-1&&n||(a[e+t]=-1===s?c[0]:c.join(" "),delete a[e+"-top"+t],delete a[e+"-right"+t],delete a[e+"-bottom"+t],delete a[e+"-left"+t])},b=e=>{let t,n=a[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return a[e]=n[0],!0}},v=e=>(m=!0,i[e]),y=(e,t)=>(m&&(e=e.replace(/\uFEFF[0-9]/g,(e=>i[e]))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),x=e=>String.fromCharCode(parseInt(e.slice(1),16)),w=e=>e.replace(/\\[0-9a-f]+/gi,x),C=(t,n,o,r,s,i)=>{if(s=s||i)return"'"+(s=y(s)).replace(/\'/g,"\\'")+"'";if(n=y(n||o||r),!e.allow_script_urls){const t=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return p&&(n=p.call(f,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,(e=>e.replace(/[;:]/g,v)));l=o.exec(t);)if(o.lastIndex=l.index+l[0].length,d=l[1].replace(r,"").toLowerCase(),h=l[2].replace(r,""),d&&h){if(d=w(d),h=w(h),-1!==d.indexOf(c)||-1!==d.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===d||/expression\s*\(|\/\*|\*\//.test(h)))continue;"font-weight"===d&&"700"===h?h="bold":"color"!==d&&"background-color"!==d||(h=h.toLowerCase()),h=h.replace(n,C),a[d]=m?y(h,!0):h}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),_="border",k="border-style",E="border-color",b(S="border-width")&&b(k)&&b(E)&&(a[_]=a[S]+" "+a[k]+" "+a[E],delete a[S],delete a[k],delete a[E]),"medium none"===a.border&&delete a.border,"none"===a["border-image"]&&delete a["border-image"]}var _,S,k,E;return a},serialize:(e,t)=>{let n="";const o=t=>{let o;const r=a[t];if(r)for(let s=0,i=r.length;s<i;s++)t=r[s],o=e[t],o&&(n+=(n.length>0?" ":"")+t+": "+o+";")};return t&&a?(o("*"),o(t)):fe(e,((e,o)=>{!e||l&&!((e,t)=>{let n=l["*"];return!(n&&n[e]||(n=l[t],n&&n[e]))})(o,t)||(n+=(n.length>0?" ":"")+o+": "+e+";")})),n}};return u},Ts={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},As=e=>w(e.preventDefault)||(e=>e instanceof Event||_(e.initEvent))(e),Ds=(e,t)=>{const n=null!=t?t:{};for(const t in e)Se(Ts,t)||(n[t]=e[t]);return C(n.composedPath)&&(n.composedPath=()=>e.composedPath()),n},Rs=(e,t,n,o)=>{var r;const s=Ds(t,o);return s.type=e,w(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),As(t)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=I,_(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=I,_(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=I,s.stopPropagation()},(e=>e.isDefaultPrevented===I||e.isDefaultPrevented===B)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?I:B,s.isPropagationStopped=!0===s.cancelBubble?I:B,s.isImmediatePropagationStopped=B)),s},Ms=/^(?:mouse|contextmenu)|click/,Ns=(e,t,n,o)=>{e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ps=(e,t,n,o)=>{e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Ls=(e,t)=>{const n=Rs(e.type,e,document,t);if((e=>C(e)&&Ms.test(e.type))(e)&&x(e.pageX)&&!x(e.clientX)){const t=n.target.ownerDocument||document,o=t.documentElement,r=t.body,s=n;s.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),s.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},Bs=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{Ps(e,"DOMContentLoaded",s),Ps(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Ns(e,"DOMContentLoaded",s),n.domLoaded||Ns(e,"load",s)};class Is{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,n,o){const r=this;let s,i,a,l,c,d,u;const h=window,m=e=>{r.executeHandlers(Ls(e||h.event),s)};if(!e||3===e.nodeType||8===e.nodeType)return;e[r.expando]?s=e[r.expando]:(s=r.count++,e[r.expando]=s,r.events[s]={}),o=o||e;const p=t.split(" ");for(a=p.length;a--;)l=p[a],d=m,c=u=!1,"DOMContentLoaded"===l&&(l="ready"),r.domLoaded&&"ready"===l&&"complete"===e.readyState?n.call(o,Ls({type:l})):(r.hasMouseEnterLeave||(c=r.mouseEnterLeave[l],c&&(d=e=>{const t=e.currentTarget;let n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Ls(e||h.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,r.executeHandlers(e,s))})),r.hasFocusIn||"focusin"!==l&&"focusout"!==l||(u=!0,c="focusin"===l?"focus":"blur",d=e=>{(e=Ls(e||h.event)).type="focus"===e.type?"focusin":"focusout",r.executeHandlers(e,s)}),i=r.events[s][l],i?"ready"===l&&r.domLoaded?n(Ls({type:l})):i.push({func:n,scope:o}):(r.events[s][l]=i=[{func:n,scope:o}],i.fakeName=c,i.capture=u,i.nativeHandler=d,"ready"===l?Bs(e,d,r):Ns(e,c||l,d,u)));return e=i=null,n}unbind(e,t,n){let o,r,s,i,a;if(!e||3===e.nodeType||8===e.nodeType)return this;const l=e[this.expando];if(l){if(a=this.events[l],t){const l=t.split(" ");for(r=l.length;r--;)if(i=l[r],o=a[i],o){if(n)for(s=o.length;s--;)if(o[s].func===n){const e=o.nativeHandler,t=o.fakeName,n=o.capture;o=o.slice(0,s).concat(o.slice(s+1)),o.nativeHandler=e,o.fakeName=t,o.capture=n,a[i]=o}n&&0!==o.length||(delete a[i],Ps(e,o.fakeName||i,o.nativeHandler,o.capture))}}else fe(a,((t,n)=>{Ps(e,t.fakeName||n,t.nativeHandler,t.capture)})),a={};for(i in a)if(Se(a,i))return this;delete this.events[l];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){let o;if(!e||3===e.nodeType||8===e.nodeType)return this;const r=Ls({type:t,target:e},n);do{o=e[this.expando],o&&this.executeHandlers(r,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){let t,n;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(this.unbind(e),n=e.getElementsByTagName("*"),t=n.length;t--;)(e=n[t])[this.expando]&&this.unbind(e);return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){const n=this.events[t],o=n&&n[e.type];if(o)for(let t=0,n=o.length;t<n;t++){const n=o[t];if(n&&!1===n.func.call(n.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Is.Event=new Is;const Fs=Nt.each,zs=Nt.grep,js="data-mce-style",Hs=(e,t,n)=>{w(n)||""===n?Xt(e,t):Wt(e,t,n)},Vs=(e,t)=>{const n=Kt(t,"style"),o=e.serialize(e.parse(n),It(t));Hs(t,js,o)},$s=(e,t)=>{let n,o,r=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,(!t||3!==o||o!==n&&e.nodeValue.length)&&(r++,n=o);return r},Us=Nt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ws=e=>e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),qs=(e,t={})=>{const n={},o=window,r={};let s=0;const i=Xo.forElement(un.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),a=[],l=t.schema?t.schema:Es({}),c=Os({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new Is:Is.Event,u=l.getBlockElements(),h=t=>t&&e&&p(t)?e.getElementById(t):t,m=e=>{const t=h(e);return C(t)?un.fromDom(t):null},g=(e,t,n)=>{let o;const r=m(e);if(C(r)&&jt(r)){const e=J[t];o=e&&e.get?e.get(r.dom,t):Kt(r,t)}return C(o)?o:null!=n?n:""},v=e=>{const t=h(e);return w(t)?[]:t.attributes},y=(e,n,o)=>{P(e,(e=>{if(vo(e)){const r=un.fromDom(e);""===o&&(o=null);const s=Kt(r,n),i=J[n];i&&i.set?i.set(r.dom,o,n):Hs(r,n,o),s!==o&&t.onSetAttrib&&t.onSetAttrib({attrElm:r,attrName:n,attrValue:o})}}))},x=()=>t.root_element||e.body,k=(t,n)=>Ho(e.body,h(t),n),O=(e,n,o)=>{const r=(e,t)=>p(e)?e:S(e)?Se(Us,t)?e+"":e+"px":ge(e,r),s=(e,t,n)=>{const o=Ws(t);w(n)||""===n?qn(e,o):jn(e,o,r(n,o))};P(e,(e=>{const r=un.fromDom(e);p(n)?s(r,n,o):fe(n,((e,t)=>{s(r,t,e)})),t.update_styles&&Vs(c,r)}))},T=(e,t,n)=>{const o=h(e);if(!w(o)&&vo(o))return n?Vn(un.fromDom(o),Ws(t)):("float"===(t=t.replace(/-(\D)/g,((e,t)=>t.toUpperCase())))&&(t="cssFloat"),o.style?o.style[t]:void 0)},D=e=>{let t,n;const o=h(e);return t=T(o,"width"),n=T(o,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||o.offsetWidth||o.clientWidth,h:parseInt(n,10)||o.offsetHeight||o.clientHeight}},R=(e,t)=>{if(!e)return!1;const n=b(e)?e:[e];return U(n,(e=>mn(un.fromDom(e),t)))},M=(e,t,n,o)=>{const r=[];let s,i=h(e);for(o=void 0===o,n=n||("BODY"!==x().nodeName?x().parentNode:null),p(t)&&(s=t,t="*"===t?vo:e=>R(e,s));i&&!(i===n||w(i.nodeType)||Do(i)||Ro(i));){if(!t||t(i)){if(!o)return[i];r.push(i)}i=i.parentNode}return o?r:null},N=(e,t,n)=>{let o=t;if(e)for(p(t)&&(o=e=>R(e,t)),e=e[n];e;e=e[n])if(_(o)&&o(e))return e;return null},P=function(e,t,n){const o=null!=n?n:this,r=p(e)?h(e):e;if(!r)return!1;if(b(r)&&(r.length||0===r.length)){const e=[];return Fs(r,((n,r)=>{n&&e.push(t.call(o,p(n)?h(n):n,r))})),e}return t.call(o,r)},L=(e,t)=>{P(e,(e=>{fe(t,((t,n)=>{y(e,n,t)}))}))},B=(e,t)=>{P(e,(e=>{const n=un.fromDom(e);no(n,t)}))},I=(t,n,o,r,s)=>P(t,(t=>{const i=p(n)?e.createElement(n):n;return C(o)&&L(i,o),r&&(!p(r)&&r.nodeType?i.appendChild(r):p(r)&&B(i,r)),s?i:t.appendChild(i)})),F=(t,n,o)=>I(e.createElement(t),t,n,o,!0),z=ps.encodeAllRaw,j=(e,t)=>P(e,(e=>{const n=un.fromDom(e);return t&&q(kn(n),(e=>{Ht(e)&&0===e.dom.length?Zn(e):Kn(n,e)})),Zn(n),n.dom})),H=(e,t,n)=>{P(e,(e=>{if(vo(e)){const o=un.fromDom(e),r=t.split(" ");q(r,(e=>{if(C(n)){(n?on:sn)(o,e)}else an(o,e)}))}}))},V=(e,t,n)=>P(t,(t=>(b(t)&&(e=e.cloneNode(!0)),n&&Fs(zs(t.childNodes),(t=>{e.appendChild(t)})),t.parentNode.replaceChild(e,t)))),$=e=>{if(vo(e)){const t="a"===e.nodeName.toLowerCase()&&!g(e,"href")&&g(e,"id");if(g(e,"name")||g(e,"data-mce-bookmark")||t)return!0}return!1},W=()=>e.createRange(),K=(n,r,s,i)=>{if(b(n)){let e=n.length;const t=[];for(;e--;)t[e]=K(n[e],r,s,i);return t}return!t.collect||n!==e&&n!==o||a.push([n,r,s,i]),d.bind(n,r,s,i||X)},G=(t,n,r)=>{if(b(t)){let e=t.length;const o=[];for(;e--;)o[e]=G(t[e],n,r);return o}if(a.length>0&&(t===e||t===o)){let e=a.length;for(;e--;){const o=a[e];t!==o[0]||n&&n!==o[1]||r&&r!==o[2]||d.unbind(o[0],o[1],o[2])}}return d.unbind(t,n,r)},Y=e=>{if(e&&vo(e)){const t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},X={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:a,styles:c,schema:l,events:d,isBlock:e=>p(e)?Se(u,e):vo(e)&&Se(u,e.nodeName),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:x,getViewPort:e=>{const t=fo(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{const t=h(e),n=k(t),o=D(t);return{x:n.x,y:n.y,w:o.w,h:o.h}},getSize:D,getParent:(e,t,n)=>{const o=M(e,t,n,!1);return o&&o.length>0?o[0]:null},getParents:M,get:h,getNext:(e,t)=>N(e,t,"nextSibling"),getPrev:(e,t)=>N(e,t,"previousSibling"),select:(n,o)=>{var r,s;const i=null!==(s=null!==(r=h(o))&&void 0!==r?r:t.root_element)&&void 0!==s?s:e;return ue(i.querySelectorAll(n))},is:R,add:I,create:F,createHTML:(e,t,n="")=>{let o,r="";for(o in r+="<"+e,t)ke(t,o)&&(r+=" "+o+'="'+z(t[o])+'"');return Ye(n)&&Se(l.getVoidElements(),e)?r+" />":r+">"+n+"</"+e+">"},createFragment:t=>{let n;const o=e.createElement("div"),r=e.createDocumentFragment();for(r.appendChild(o),t&&(o.innerHTML=t);n=o.firstChild;)r.appendChild(n);return r.removeChild(o),r},remove:j,setStyle:O,getStyle:T,setStyles:(e,t)=>{O(e,t)},removeAllAttribs:e=>P(e,(e=>{const t=e.attributes;for(let n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))})),setAttrib:y,setAttribs:L,getAttrib:g,getPos:k,parseStyle:e=>c.parse(e),serializeStyle:(e,t)=>c.serialize(e,t),addStyle:t=>{let o,r;if(X!==qs.DOM&&e===document){if(n[t])return;n[t]=!0}r=e.getElementById("mceDefaultStyles"),r||(r=e.createElement("style"),r.id="mceDefaultStyles",r.type="text/css",o=e.getElementsByTagName("head")[0],o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},loadCSS:e=>{e||(e=""),q(e.split(","),(e=>{r[e]=!0,i.load(e).catch(E)}))},addClass:(e,t)=>{H(e,t,!0)},removeClass:(e,t)=>{H(e,t,!1)},hasClass:(e,t)=>{const n=m(e),o=t.split(" ");return oe(o,(e=>ln(n,e)))},toggleClass:H,show:e=>{P(e,(e=>qn(un.fromDom(e),"display")))},hide:e=>{P(e,(e=>jn(un.fromDom(e),"display","none")))},isHidden:e=>{const t=m(e);return Pt(Un(t,"display"),"none")},uniqueId:e=>(e||"mce_")+s++,setHTML:B,getOuterHTML:e=>{const t=m(e);return vo(t.dom)?t.dom.outerHTML:(e=>{const t=un.fromTag("div"),n=un.fromDom(e.dom.cloneNode(!0));return Xn(t,n),to(t)})(t)},setOuterHTML:(e,t)=>{P(e,(e=>{vo(e)&&(e.outerHTML=t)}))},decode:ps.decode,encode:z,insertAfter:(e,t)=>{const n=h(t);return P(e,(e=>{const t=n.parentNode,o=n.nextSibling;return o?t.insertBefore(e,o):t.appendChild(e),e}))},replace:V,rename:(e,t)=>{let n;return e.nodeName!==t.toUpperCase()&&(n=F(t),Fs(v(e),(t=>{y(n,t.nodeName,g(e,t.nodeName))})),V(n,e,!0)),n||e},findCommonAncestor:(e,t)=>{let n,o=e;for(;o;){for(n=t;n&&o!==n;)n=n.parentNode;if(o===n)break;o=o.parentNode}return!o&&e.ownerDocument?e.ownerDocument.documentElement:o},run:P,getAttribs:v,isEmpty:(e,t)=>{let n,o,r=0;if($(e))return!1;if(e=e.firstChild){const s=new Jo(e,e.parentNode),i=l?l.getWhitespaceElements():{};t=t||(l?l.getNonEmptyElements():null);do{if(n=e.nodeType,vo(e)){const n=e.getAttribute("data-mce-bogus");if(n){e=s.next("all"===n);continue}if(o=e.nodeName.toLowerCase(),t&&t[o]){if("br"===o){r++,e=s.next();continue}return!1}if($(e))return!1}if(8===n)return!1;if(3===n&&!jr(e.nodeValue))return!1;if(3===n&&e.parentNode&&i[e.parentNode.nodeName]&&jr(e.nodeValue))return!1;e=s.next()}while(e)}return r<=1},createRng:W,nodeIndex:$s,split:(e,t,n)=>{let o,r,s,i=W();if(e&&t)return i.setStart(e.parentNode,$s(e)),i.setEnd(t.parentNode,$s(t)),o=i.extractContents(),i=W(),i.setStart(t.parentNode,$s(t)+1),i.setEnd(e.parentNode,$s(e)+1),r=i.extractContents(),s=e.parentNode,s.insertBefore(es(X,o),e),n?s.insertBefore(n,e):s.insertBefore(t,e),s.insertBefore(es(X,r),e),j(e),n||t},bind:K,unbind:G,fire:(e,t,n)=>d.dispatch(e,t,n),dispatch:(e,t,n)=>d.dispatch(e,t,n),getContentEditable:Y,getContentEditableParent:e=>{const t=x();let n=null;for(;e&&e!==t&&(n=Y(e),null===n);e=e.parentNode);return n},destroy:()=>{if(a.length>0){let e=a.length;for(;e--;){const t=a[e];d.unbind(t[0],t[1],t[2])}}fe(r,((e,t)=>{i.unload(t),delete r[t]}))},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},J=((e,t,n)=>{const o=t.keep_values,r={set:(e,o,r)=>{const s=un.fromDom(e);_(t.url_converter)&&C(o)&&(o=t.url_converter.call(t.url_converter_scope||n(),o,r,e[0])),Hs(s,"data-mce-"+r,o),Hs(s,r,o)},get:(e,t)=>{const n=un.fromDom(e);return Kt(n,"data-mce-"+t)||Kt(n,t)}},s={style:{set:(t,n)=>{const r=un.fromDom(t);f(n)?Hn(r,n):(o&&Hs(r,js,n),Xt(r,"style"),p(n)&&Hn(r,e.parse(n)))},get:t=>{const n=un.fromDom(t),o=Kt(n,js)||Kt(n,"style");return e.serialize(e.parse(o),It(n))}}};return o&&(s.href=s.src=r),s})(c,t,A(X));return X};qs.DOM=qs(document),qs.nodeIndex=$s;const Ks=qs.DOM;class Gs{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise(((t,n)=>{const o=Ks;let r;const s=()=>{o.remove(i),r&&(r.onerror=r.onload=r=null)},i=o.uniqueId();r=document.createElement("script"),r.id=i,r.type="text/javascript",r.src=Nt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=()=>{s(),t()},r.onerror=()=>{s(),n("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}))}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const t=this;t.queue.push(e);return void 0===t.states[e]&&(t.states[e]=0),new Promise(((n,o)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:o})}))}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const t=this,n=(e,n)=>{_e(t.scriptLoadedCallbacks,n).each((t=>{q(t,(t=>t[e](n)))})),delete t.scriptLoadedCallbacks[n]},o=e=>{const t=Y(e,(e=>"rejected"===e.status));return t.length>0?Promise.reject(ne(t,(({reason:e})=>b(e)?e:[e]))):Promise.resolve()},r=e=>Promise.allSettled(W(e,(e=>2===t.states[e]?(n("resolve",e),Promise.resolve()):3===t.states[e]?(n("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then((()=>{t.states[e]=2,n("resolve",e);const s=t.queue;if(s.length>0)return t.queue=[],r(s).then(o)}),(()=>(t.states[e]=3,n("reject",e),Promise.reject(e)))))))),s=e=>(t.loading=!0,r(e).then((e=>{t.loading=!1;const n=t.queueLoadedCallbacks.shift();return F.from(n).each(L),o(e)}))),i=Ee(e);return t.loading?new Promise(((e,n)=>{t.queueLoadedCallbacks.push((()=>s(i).then(e,n)))})):s(i)}}Gs.ScriptLoader=new Gs;const Ys=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Xs={},Js=Ys("en"),Qs=()=>_e(Xs,Js.get()),Zs={getData:()=>ge(Xs,(e=>({...e}))),setCode:e=>{e&&Js.set(e)},getCode:()=>Js.get(),add:(e,t)=>{let n=Xs[e];n||(Xs[e]=n={}),fe(t,((e,t)=>{n[t.toLowerCase()]=e}))},translate:e=>{const t=Qs().getOr({}),n=e=>_(e)?Object.prototype.toString.call(e):o(e)?"":""+e,o=e=>""===e||null==e,r=e=>{const o=n(e);return _e(t,o.toLowerCase()).map(n).getOr(o)},s=e=>e.replace(/{context:\w+}$/,"");if(o(e))return"";if(f(i=e)&&Se(i,"raw"))return n(e.raw);var i;if((e=>b(e)&&e.length>1)(e)){const t=e.slice(1);return s(r(e[0]).replace(/\{([0-9]+)\}/g,((e,o)=>Se(t,o)?n(t[o]):e)))}return s(r(e))},isRtl:()=>Qs().bind((e=>_e(e,"_dir"))).exists((e=>"rtl"===e)),hasCode:e=>Se(Xs,e)},ei=()=>{const e=[],t={},n={},o=[],r=(e,t)=>{const n=Y(o,(n=>n.name===e&&n.state===t));q(n,(e=>e.resolve()))},s=e=>Se(t,e),i=(e,n)=>{const o=Zs.getCode();!o||n&&-1===(","+(n||"")+",").indexOf(","+o+",")||Gs.ScriptLoader.add(t[e]+"/langs/"+o+".js")},a=(e,t="added")=>"added"===t&&(e=>Se(n,e))(e)||"loaded"===t&&s(e)?Promise.resolve():new Promise((n=>{o.push({name:e,state:t,resolve:n})}));return{items:e,urls:t,lookup:n,get:e=>{if(n[e])return n[e].instance},requireLangPack:(e,t)=>{!1!==ei.languageLoad&&(s(e)?i(e,t):a(e,"loaded").then((()=>i(e,t))))},add:(t,o)=>(e.push(o),n[t]={instance:o},r(t,"added"),o),remove:e=>{delete t[e],delete n[e]},createUrl:(e,t)=>p(t)?p(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,o)=>{if(t[e])return Promise.resolve();let s=p(o)?o:o.prefix+o.resource+o.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=ei.baseURL+"/"+s),t[e]=s.substring(0,s.lastIndexOf("/"));const i=()=>(r(e,"loaded"),Promise.resolve());return n[e]?i():Gs.ScriptLoader.add(s).then(i)},waitFor:a}};ei.languageLoad=!0,ei.baseURL="",ei.PluginManager=ei(),ei.ThemeManager=ei(),ei.ModelManager=ei();const ti=()=>{const e=(e=>{const t=Ys(F.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(F.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(F.some(e))}}})(E);return{...e,on:t=>e.get().each(t)}},ni=(e,t)=>{let n=null;return{cancel:()=>{v(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{v(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}},oi=(e,t)=>{let n=null;const o=()=>{v(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}},ri=(e,t)=>{let n=[];return q(kn(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(ri(e,t))})),n},si=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return pn(n)?[]:W(n.querySelectorAll(e),un.fromDom)})(t,e),ii=A("mce-annotation"),ai=A("data-mce-annotation"),li=A("data-mce-annotation-uid"),ci=A("data-mce-annotation-active"),di=(e,t)=>{const n=e.selection.getRng(),o=un.fromDom(n.startContainer),r=un.fromDom(e.getBody()),s=t.fold((()=>"."+ii()),(e=>`[${ai()}="${e}"]`)),i=En(o,n.startOffset).getOr(o),a=Go(i,s,(e=>fn(e,r))),l=(e,t)=>Yt(e,t)?F.some(Kt(e,t)):F.none();return a.bind((t=>l(t,`${li()}`).bind((n=>l(t,`${ai()}`).map((t=>{const o=ui(e,n);return{uid:n,name:t,elements:o}}))))))},ui=(e,t)=>{const n=un.fromDom(e.getBody());return si(n,`[${li()}="${t}"]`)},hi=(e,t)=>{const n=un.fromDom(e.getBody()),o=si(n,`[${ai()}="${t}"]`),r={};return q(o,(e=>{const t=Kt(e,li()),n=_e(r,t).getOr([]);r[t]=n.concat([e])})),r},mi=(e,t)=>{const n=Ys({}),o=()=>({listeners:[],previous:ti()}),r=(e,t)=>{s(e,(e=>(t(e),e)))},s=(e,t)=>{const r=n.get(),s=t(_e(r,e).getOrThunk(o));r[e]=s,n.set(r)},i=(t,n)=>{q(ui(e,t),(e=>{n?Wt(e,ci(),"true"):Xt(e,ci())}))},a=oi((()=>{const n=ae(t.getNames());q(n,(t=>{s(t,(n=>{const o=n.previous.get();return di(e,F.some(t)).fold((()=>{o.each((e=>{(e=>{r(e,(t=>{q(t.listeners,(t=>t(!1,e)))}))})(t),n.previous.clear(),i(e,!1)}))}),(({uid:e,name:t,elements:s})=>{Pt(o,e)||(o.each((e=>i(e,!1))),((e,t,n)=>{r(e,(o=>{q(o.listeners,(o=>o(!0,e,{uid:t,nodes:W(n,(e=>e.dom))})))}))})(t,e,s),n.previous.set(e),i(e,!0))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);e.on("remove",(()=>{a.cancel()})),e.on("NodeChange",(()=>{a.throttle()}));return{addListener:(e,t)=>{s(e,(e=>({previous:e.previous,listeners:e.listeners.concat([t])})))}}},pi=(e,t)=>{e.serializer.addTempAttr(ci()),e.serializer.addNodeFilter("span",(e=>{q(e,(e=>{(e=>F.from(e.attr(ai())).bind(t.lookup))(e).each((t=>{!1===t.persistent&&e.unwrap()}))}))}))};let fi=0;const gi=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return fi++,e+"_"+n+fi+String(t)},bi=(e,t)=>un.fromDom(e.dom.cloneNode(t)),vi=e=>bi(e,!1),yi=e=>bi(e,!0),xi=(e,t)=>{const n=((e,t)=>{const n=un.fromTag(t),o=Jt(e);return qt(n,o),n})(e,t);Gn(e,n);const o=kn(e);return Jn(n,o),Zn(e),n},wi=(e,t,n=B)=>{const o=new Jo(e,t),r=e=>{let t;do{t=o[e]()}while(t&&!Eo(t)&&!n(t));return F.from(t).filter(Eo)};return{current:()=>F.from(o.current()).filter(Eo),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Ci=(e,t)=>{const n=t||(t=>e.isBlock(t)||Mo(t)||Lo(t)),o=(e,t,n,r)=>{if(Eo(e)){const n=r(e,t,e.data);if(-1!==n)return F.some({container:e,offset:n})}return n().bind((e=>o(e.container,e.offset,n,r)))};return{backwards:(e,t,r,s)=>{const i=wi(e,s,n);return o(e,t,(()=>i.prev().map((e=>({container:e,offset:e.length})))),r).getOrNull()},forwards:(e,t,r,s)=>{const i=wi(e,s,n);return o(e,t,(()=>i.next().map((e=>({container:e,offset:0})))),r).getOrNull()}}},_i=Math.round,Si=e=>e?{left:_i(e.left),top:_i(e.top),bottom:_i(e.bottom),right:_i(e.right),width:_i(e.width),height:_i(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ki=(e,t)=>(e=Si(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Ei=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Oi=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Ei(t.top-e.bottom,e,t)},Ti=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Ei(t.bottom-e.top,e,t),Ai=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},Di=e=>{const t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ri=(e,t)=>{if(vo(e)&&e.hasChildNodes()){const n=e.childNodes,o=((e,t,n)=>Math.min(Math.max(e,t),n))(t,0,n.length-1);return n[o]}return e},Mi=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Ni=e=>"string"==typeof e&&e.charCodeAt(0)>=768&&Mi.test(e),Pi=vo,Li=Br,Bi=xo("display","block table"),Ii=xo("float","left right"),Fi=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Pi,Li,N(Ii)),zi=N(xo("white-space","pre pre-line pre-wrap")),ji=Eo,Hi=Mo,Vi=qs.nodeIndex,$i=(e,t)=>t<0&&vo(e)&&e.hasChildNodes()?void 0:Ri(e,t),Ui=e=>"createRange"in e?e.createRange():qs.DOM.createRng(),Wi=e=>e&&/[\r\n\t ]/.test(e),qi=e=>!!e.setStart&&!!e.setEnd,Ki=e=>{const t=e.startContainer,n=e.startOffset;if(Wi(e.toString())&&zi(t.parentNode)&&Eo(t)){const e=t.data;if(Wi(e[n-1])||Wi(e[n+1]))return!0}return!1},Gi=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Yi=e=>{let t;const n=e.getClientRects();return t=n.length>0?Si(n[0]):Si(e.getBoundingClientRect()),!qi(e)&&Hi(e)&&Gi(t)?(e=>{const t=e.ownerDocument,n=Ui(t),o=t.createTextNode(dr),r=e.parentNode;r.insertBefore(o,e),n.setStart(o,0),n.setEnd(o,1);const s=Si(n.getBoundingClientRect());return r.removeChild(o),s})(e):Gi(t)&&qi(e)?(e=>{const t=e.startContainer,n=e.endContainer,o=e.startOffset,r=e.endOffset;if(t===n&&Eo(n)&&0===o&&1===r){const t=e.cloneRange();return t.setEndAfter(n),Yi(t)}return null})(e):t},Xi=(e,t)=>{const n=ki(e,t);return n.width=1,n.right=n.left+1,n},Ji=e=>{const t=[],n=e=>{var n,o;0!==e.height&&(t.length>0&&(n=e,o=t[t.length-1],n.left===o.left&&n.top===o.top&&n.bottom===o.bottom&&n.right===o.right)||t.push(e))},o=(e,o)=>{const r=Ui(e.ownerDocument);if(o<e.data.length){if(Ni(e.data[o]))return t;if(Ni(e.data[o-1])&&(r.setStart(e,o),r.setEnd(e,o+1),!Ki(r)))return n(Xi(Yi(r),!1)),t}o>0&&(r.setStart(e,o-1),r.setEnd(e,o),Ki(r)||n(Xi(Yi(r),!1))),o<e.data.length&&(r.setStart(e,o),r.setEnd(e,o+1),Ki(r)||n(Xi(Yi(r),!0)))},r=e.container(),s=e.offset();if(ji(r))return o(r,s),t;if(Pi(r))if(e.isAtEnd()){const e=$i(r,s);ji(e)&&o(e,e.data.length),Fi(e)&&!Hi(e)&&n(Xi(Yi(e),!1))}else{const i=$i(r,s);if(ji(i)&&o(i,0),Fi(i)&&e.isAtEnd())return n(Xi(Yi(i),!1)),t;const a=$i(e.container(),e.offset()-1);Fi(a)&&!Hi(a)&&(Bi(a)||Bi(i)||!Fi(i))&&n(Xi(Yi(a),!1)),Fi(i)&&n(Xi(Yi(i),!0))}return t},Qi=(e,t,n)=>{const o=()=>(n||(n=Ji(Qi(e,t))),n);return{container:A(e),offset:A(t),toRange:()=>{const n=Ui(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(ji(e),0===t),isAtEnd:()=>ji(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:n=>n&&e===n.container()&&t===n.offset(),getNode:n=>$i(e,n?t-1:t)}};Qi.fromRangeStart=e=>Qi(e.startContainer,e.startOffset),Qi.fromRangeEnd=e=>Qi(e.endContainer,e.endOffset),Qi.after=e=>Qi(e.parentNode,Vi(e)+1),Qi.before=e=>Qi(e.parentNode,Vi(e)),Qi.isAbove=(e,t)=>Lt(ce(t.getClientRects()),de(e.getClientRects()),Oi).getOr(!1),Qi.isBelow=(e,t)=>Lt(de(t.getClientRects()),ce(e.getClientRects()),Ti).getOr(!1),Qi.isAtStart=e=>!!e&&e.isAtStart(),Qi.isAtEnd=e=>!!e&&e.isAtEnd(),Qi.isTextPosition=e=>!!e&&Eo(e.container()),Qi.isElementPosition=e=>!1===Qi.isTextPosition(e);const Zi=(e,t)=>{Eo(t)&&0===t.data.length&&e.remove(t)},ea=(e,t,n)=>{Ro(n)?((e,t,n)=>{const o=F.from(n.firstChild),r=F.from(n.lastChild);t.insertNode(n),o.each((t=>Zi(e,t.previousSibling))),r.each((t=>Zi(e,t.nextSibling)))})(e,t,n):((e,t,n)=>{t.insertNode(n),Zi(e,n.previousSibling),Zi(e,n.nextSibling)})(e,t,n)},ta=Eo,na=Co,oa=qs.nodeIndex,ra=e=>{const t=e.parentNode;return na(t)?ra(t):t},sa=e=>e?Me(e.childNodes,((e,t)=>(na(t)&&"BR"!==t.nodeName?e=e.concat(sa(t)):e.push(t),e)),[]):[],ia=e=>t=>e===t,aa=e=>{let t;return t=ta(e)?"text()":e.nodeName.toLowerCase(),t+"["+(e=>{let t,n;t=sa(ra(e)),n=Ne(t,ia(e),e),t=t.slice(0,n+1);const o=Me(t,((e,n,o)=>(ta(n)&&ta(t[o-1])&&e++,e)),0);return t=De(t,yo([e.nodeName])),n=Ne(t,ia(e),e),n-o})(e)+"]"},la=(e,t)=>{let n,o,r,s,i,a=[];return n=t.container(),o=t.offset(),ta(n)?r=((e,t)=>{for(;(e=e.previousSibling)&&ta(e);)t+=e.data.length;return t})(n,o):(s=n.childNodes,o>=s.length?(r="after",o=s.length-1):r="before",n=s[o]),a.push(aa(n)),i=((e,t,n)=>{const o=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)o.push(t);return o})(e,n),i=De(i,N(Co)),a=a.concat(Ae(i,(e=>aa(e)))),a.reverse().join("/")+","+r},ca=(e,t)=>{let n;if(!t)return null;const o=t.split(","),r=o[0].split("/");n=o.length>1?o[1]:"before";const s=Me(r,((e,t)=>{const n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return n?("text()"===n[1]&&(n[1]="#text"),((e,t,n)=>{let o=sa(e);return o=De(o,((e,t)=>!ta(e)||!ta(o[t-1]))),o=De(o,yo([t])),o[n]})(e,n[1],parseInt(n[2],10))):null}),e);return s?ta(s)?((e,t)=>{let n,o=e,r=0;for(;ta(o);){if(n=o.data.length,t>=r&&t<=r+n){e=o,t-=r;break}if(!ta(o.nextSibling)){e=o,t=n;break}r+=n,o=o.nextSibling}return ta(e)&&t>e.data.length&&(t=e.data.length),Qi(e,t)})(s,parseInt(n,10)):(n="after"===n?oa(s)+1:oa(s),Qi(s.parentNode,n)):null},da=Lo,ua=(e,t,n,o,r)=>{let s=o[r?"startContainer":"endContainer"],i=o[r?"startOffset":"endOffset"];const a=[];let l,c=0;const d=e.getRoot();for(Eo(s)?a.push(n?((e,t,n)=>{let o,r;for(r=e(t.data.slice(0,n)).length,o=t.previousSibling;o&&Eo(o);o=o.previousSibling)r+=e(o.data).length;return r})(t,s,i):i):(l=s.childNodes,i>=l.length&&l.length&&(c=1,i=Math.max(0,l.length-1)),a.push(e.nodeIndex(l[i],n)+c));s&&s!==d;s=s.parentNode)a.push(e.nodeIndex(s,n));return a},ha=(e,t,n)=>{let o=0;return Nt.each(e.select(t),(e=>{if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void o++})),o},ma=(e,t)=>{let n,o,r;const s=t?"start":"end";n=e[s+"Container"],o=e[s+"Offset"],vo(n)&&"TR"===n.nodeName&&(r=n.childNodes,n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,o)))},pa=e=>(ma(e,!0),ma(e,!1),e),fa=(e,t)=>{let n;if(vo(e)&&(e=Ri(e,t),da(e)))return e;if(yr(e)){if(Eo(e)&&br(e)&&(e=e.parentNode),n=e.previousSibling,da(n))return n;if(n=e.nextSibling,da(n))return n}},ga=(e,t,n)=>{const o=n.getNode();let r=o?o.nodeName:null;const s=n.getRng();if(da(o)||"IMG"===r)return{name:r,index:ha(n.dom,r,o)};const i=(e=>fa(e.startContainer,e.startOffset)||fa(e.endContainer,e.endOffset))(s);return i?(r=i.tagName,{name:r,index:ha(n.dom,r,i)}):((e,t,n,o)=>{const r=t.dom,s={};return s.start=ua(r,e,n,o,!0),t.isCollapsed()||(s.end=ua(r,e,n,o,!1)),Or(o)&&(s.isFakeCaret=!0),s})(e,n,t,s)},ba=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},va=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),i=e.getNode(),a=i.nodeName;if("IMG"===a)return{name:a,index:ha(n,a,i)};const l=pa(o.cloneRange());if(!s){l.collapse(!1);const e=ba(n,r+"_end",t);ea(n,l,e)}o=pa(o),o.collapse(!0);const c=ba(n,r+"_start",t);return ea(n,o,c),e.moveToBookmark({id:r,keep:!0}),{id:r}},ya=(e,t,n)=>2===t?ga(pr,n,e):3===t?(e=>{const t=e.getRng();return{start:la(e.dom.getRoot(),Qi.fromRangeStart(t)),end:la(e.dom.getRoot(),Qi.fromRangeEnd(t))}})(e):t?(e=>({rng:e.getRng()}))(e):va(e,!1),xa=M(ga,D,!0),wa=e=>{const t=t=>t(e),n=A(e),o=()=>r,r={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:I,isError:B,map:t=>_a.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:t=>{t(e)},toOptional:()=>F.some(e)};return r},Ca=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:B,isError:I,map:t,mapError:t=>_a.error(t(e)),bind:t,exists:B,forall:I,getOr:D,or:D,getOrThunk:P,orThunk:P,getOrDie:(o=String(e),()=>{throw new Error(o)}),each:E,toOptional:F.none};var o;return n},_a={value:wa,error:Ca,fromOption:(e,t)=>e.fold((()=>Ca(t)),wa)},Sa=e=>{if(!b(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return q(e,((o,r)=>{const s=me(o);if(1!==s.length)throw new Error("one and only one name per case");const i=s[0],a=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!b(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...n)=>{const o=n.length;if(o!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:e=>{const o=me(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!oe(t,(e=>$(o,e))))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),n};Sa([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ka=e=>"inline-command"===e.type||"inline-format"===e.type,Ea=e=>"block-command"===e.type||"block-format"===e.type,Oa=e=>{const t=t=>_a.error({message:t,pattern:e}),n=(n,o,r)=>{if(void 0!==e.format){let r;if(b(e.format)){if(!oe(e.format,p))return t(n+" pattern has non-string items in the `format` array");r=e.format}else{if(!p(e.format))return t(n+" pattern has non-string `format` parameter");r=[e.format]}return _a.value(o(r))}return void 0!==e.cmd?p(e.cmd)?_a.value(r(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!f(e))return t("Raw pattern is not an object");if(!p(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!p(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let o=e.start,r=e.end;return 0===r.length&&(r=o,o=""),n("Inline",(e=>({type:"inline-format",start:o,end:r,format:e})),((e,t)=>({type:"inline-command",start:o,end:r,cmd:e,value:t})))}return void 0!==e.replacement?p(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):_a.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",(t=>({type:"block-format",start:e.start,format:t[0]})),((t,n)=>({type:"block-command",start:e.start,cmd:t,value:n})))},Ta=e=>(e=>ae(e,((e,t)=>e.start.length===t.start.length?0:e.start.length>t.start.length?-1:1)))(Y(e,Ea)),Aa=e=>Y(e,ka),Da=e=>{const t=(e=>{const t=[],n=[];return q(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{n.push(e)}))})),{errors:t,values:n}})(W(e,Oa));return q(t.errors,(e=>console.error(e.message,e.pattern))),t.values},Ra=wt().deviceType,Ma=Ra.isTouch(),Na=qs.DOM,Pa=e=>m(e,RegExp),La=e=>t=>t.options.get(e),Ba=e=>p(e)||f(e),Ia=(e,t="")=>n=>{const o=p(n);if(o){if(-1!==n.indexOf("=")){const r=(e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return J(t,((e,t)=>{const n=t.split("="),o=n[0],r=n.length>1?n[1]:o;return e[We(o)]=We(r),e}),{})})(n);return{value:_e(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},Fa=La("iframe_attrs"),za=La("doctype"),ja=La("document_base_url"),Ha=La("body_id"),Va=La("body_class"),$a=La("content_security_policy"),Ua=La("br_in_pre"),Wa=La("forced_root_block"),qa=La("forced_root_block_attrs"),Ka=La("br_newline_selector"),Ga=La("no_newline_selector"),Ya=La("keep_styles"),Xa=La("end_container_on_empty_block"),Ja=La("automatic_uploads"),Qa=La("images_reuse_filename"),Za=La("images_replace_blob_uris"),el=La("icons"),tl=La("icons_url"),nl=La("images_upload_url"),ol=La("images_upload_base_path"),rl=La("images_upload_credentials"),sl=La("images_upload_handler"),il=La("content_css_cors"),al=La("referrer_policy"),ll=La("language"),cl=La("language_url"),dl=La("indent_use_margin"),ul=La("indentation"),hl=La("content_css"),ml=La("content_style"),pl=La("font_css"),fl=La("directionality"),gl=La("inline_boundaries_selector"),bl=La("object_resizing"),vl=La("resize_img_proportional"),yl=La("placeholder"),xl=La("event_root"),wl=La("service_message"),Cl=La("theme"),_l=La("theme_url"),Sl=La("model"),kl=La("model_url"),El=La("inline_boundaries"),Ol=La("formats"),Tl=La("preview_styles"),Al=La("format_empty_lines"),Dl=La("custom_ui_selector"),Rl=La("inline"),Ml=La("hidden_input"),Nl=La("submit_patch"),Pl=La("add_form_submit_trigger"),Ll=La("add_unload_trigger"),Bl=La("custom_undo_redo_levels"),Il=La("disable_nodechange"),Fl=La("readonly"),zl=La("content_css_cors"),jl=La("plugins"),Hl=La("external_plugins"),Vl=La("block_unsupported_drop"),$l=La("visual"),Ul=La("visual_table_class"),Wl=La("visual_anchor_class"),ql=La("iframe_aria_text"),Kl=La("setup"),Gl=La("init_instance_callback"),Yl=La("urlconverter_callback"),Xl=La("auto_focus"),Jl=La("browser_spellcheck"),Ql=La("protect"),Zl=La("paste_block_drop"),ec=La("paste_data_images"),tc=La("paste_preprocess"),nc=La("paste_postprocess"),oc=La("paste_webkit_styles"),rc=La("paste_remove_styles_if_webkit"),sc=La("paste_merge_formats"),ic=La("smart_paste"),ac=La("paste_as_text"),lc=La("paste_tab_spaces"),cc=La("allow_html_data_urls"),dc=La("text_patterns"),uc=La("noneditable_class"),hc=La("editable_class"),mc=La("noneditable_regexp"),pc=e=>Nt.explode(e.options.get("images_file_types")),fc=La("table_tab_navigation"),gc=vo,bc=Eo,vc=e=>{const t=e.parentNode;t&&t.removeChild(e)},yc=e=>{const t=pr(e);return{count:e.length-t.length,text:t}},xc=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(hr));)e.deleteData(t,1)},wc=(e,t)=>(kc(e),t),Cc=(e,t)=>{const n=t.container(),o=((e,t)=>{const n=V(e,t);return-1===n?F.none():F.some(n)})(ue(n.childNodes),e).map((e=>e<t.offset()?Qi(n,t.offset()-1):t)).getOr(t);return kc(e),o},_c=(e,t)=>bc(e)&&t.container()===e?((e,t)=>{const n=yc(e.data.substr(0,t.offset())),o=yc(e.data.substr(t.offset()));return(n.text+o.text).length>0?(xc(e),Qi(e,t.offset()-n.count)):t})(e,t):wc(e,t),Sc=(e,t)=>Qi.isTextPosition(t)?_c(e,t):((e,t)=>t.container()===e.parentNode?Cc(e,t):wc(e,t))(e,t),kc=e=>{gc(e)&&yr(e)&&(xr(e)?e.removeAttribute("data-mce-caret"):vc(e)),bc(e)&&(xc(e),0===e.data.length&&vc(e))},Ec=Lo,Oc=Io,Tc=Bo,Ac=(e,t,n)=>{const o=ki(t.getBoundingClientRect(),n);let r,s;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;r=e.scrollLeft||t.scrollLeft,s=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();r=e.scrollLeft-t.left,s=e.scrollTop-t.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),o.left+=i,o.right+=i),o},Dc=(e,t,n,o)=>{const r=ti();let s,i;const a=Wa(e),l=e.dom,c=()=>{(e=>{const t=si(un.fromDom(e),"*[contentEditable=false],video,audio,embed,object");for(let e=0;e<t.length;e++){const n=t[e].dom;let o=n.previousSibling;if(kr(o)){const e=o.data;1===e.length?o.parentNode.removeChild(o):o.deleteData(e.length-1,1)}o=n.nextSibling,Sr(o)&&(1===o.data.length?o.parentNode.removeChild(o):o.deleteData(0,1))}})(t),i&&(kc(i),i=null),r.on((e=>{l.remove(e.caret),r.clear()})),s&&(clearInterval(s),s=void 0)},d=()=>{s=setInterval((()=>{r.on((e=>{o()?l.toggleClass(e.caret,"mce-visual-caret-hidden"):l.addClass(e.caret,"mce-visual-caret-hidden")}))}),500)};return{show:(e,o)=>{let s;if(c(),Tc(o))return null;if(!n(o))return i=((e,t)=>{const n=e.ownerDocument.createTextNode(hr),o=e.parentNode;if(t){const t=e.previousSibling;if(gr(t)){if(yr(t))return t;if(kr(t))return t.splitText(t.data.length-1)}o.insertBefore(n,e)}else{const t=e.nextSibling;if(gr(t)){if(yr(t))return t;if(Sr(t))return t.splitText(1),t}e.nextSibling?o.insertBefore(n,e.nextSibling):o.appendChild(n)}return n})(o,e),s=o.ownerDocument.createRange(),Mc(i.nextSibling)?(s.setStart(i,0),s.setEnd(i,0)):(s.setStart(i,1),s.setEnd(i,1)),s;{i=_r(a,o,e);const n=Ac(t,o,e);l.setStyle(i,"top",n.top);const c=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(c,{...n}),l.add(t,c),r.set({caret:c,element:o,before:e}),e&&l.addClass(c,"mce-visual-caret-before"),d(),s=o.ownerDocument.createRange(),s.setStart(i,0),s.setEnd(i,0)}return s},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on((e=>{const n=Ac(t,e.element,e.before);l.setStyles(e.caret,{...n})}))},destroy:()=>clearInterval(s)}},Rc=()=>Tt.browser.isFirefox(),Mc=e=>Ec(e)||Oc(e),Nc=e=>Mc(e)||_o(e)&&Rc(),Pc=Po,Lc=Lo,Bc=Io,Ic=xo("display","block table table-cell table-caption list-item"),Fc=yr,zc=br,jc=vo,Hc=Br,Vc=e=>e>0,$c=e=>e<0,Uc=(e,t)=>{let n;for(;n=e(t);)if(!zc(n))return n;return null},Wc=(e,t,n,o,r)=>{const s=new Jo(e,o),i=Lc(e)||zc(e);if($c(t)){if(i&&n(e=Uc(s.prev.bind(s),!0)))return e;for(;e=Uc(s.prev.bind(s),r);)if(n(e))return e}if(Vc(t)){if(i&&n(e=Uc(s.next.bind(s),!0)))return e;for(;e=Uc(s.next.bind(s),r);)if(n(e))return e}return null},qc=(e,t)=>{for(;e&&e!==t;){if(Ic(e))return e;e=e.parentNode}return null},Kc=(e,t,n)=>qc(e.container(),n)===qc(t.container(),n),Gc=(e,t)=>{if(!t)return null;const n=t.container(),o=t.offset();return jc(n)?n.childNodes[o+e]:null},Yc=(e,t)=>{const n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Xc=(e,t,n)=>qc(t,e)===qc(n,e),Jc=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";for(;n&&n!==t;){let e=n[o];if(Fc(e)&&(e=e[o]),Lc(e)||Bc(e)){if(Xc(t,e,n))return e;break}if(Hc(e))break;n=n.parentNode}return null},Qc=M(Yc,!0),Zc=M(Yc,!1),ed=(e,t,n)=>{let o;const r=M(Jc,!0,t),s=M(Jc,!1,t);let i=n.startContainer;const a=n.startOffset;if(br(i)){jc(i)||(i=i.parentNode);const e=i.getAttribute("data-mce-caret");if("before"===e&&(o=i.nextSibling,Nc(o)))return Qc(o);if("after"===e&&(o=i.previousSibling,Nc(o)))return Zc(o)}if(!n.collapsed)return n;if(Eo(i)){if(Fc(i)){if(1===e){if(o=s(i),o)return Qc(o);if(o=r(i),o)return Zc(o)}if(-1===e){if(o=r(i),o)return Zc(o);if(o=s(i),o)return Qc(o)}return n}if(kr(i)&&a>=i.data.length-1)return 1===e&&(o=s(i),o)?Qc(o):n;if(Sr(i)&&a<=1)return-1===e&&(o=r(i),o)?Zc(o):n;if(a===i.data.length)return o=s(i),o?Qc(o):n;if(0===a)return o=r(i),o?Zc(o):n}return n},td=(e,t)=>F.from(Gc(e?0:-1,t)).filter(Lc),nd=(e,t,n)=>{const o=ed(e,t,n);return-1===e?Qi.fromRangeStart(o):Qi.fromRangeEnd(o)},od=e=>F.from(e.getNode()).map(un.fromDom),rd=(e,t)=>{for(;t=e(t);)if(t.isVisible())return t;return t},sd=(e,t)=>{const n=Kc(e,t);return!(n||!Mo(e.getNode()))||n};var id;!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(id||(id={}));const ad=Lo,ld=Eo,cd=vo,dd=Mo,ud=Br,hd=e=>Nr(e)||(e=>!!Ir(e)&&!0!==J(ue(e.getElementsByTagName("*")),((e,t)=>e||Tr(t)),!1))(e),md=Fr,pd=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,fd=(e,t)=>{if(Vc(e)){if(ud(t.previousSibling)&&!ld(t.previousSibling))return Qi.before(t);if(ld(t))return Qi(t,0)}if($c(e)){if(ud(t.nextSibling)&&!ld(t.nextSibling))return Qi.after(t);if(ld(t))return Qi(t,t.data.length)}return $c(e)?dd(t)?Qi.before(t):Qi.after(t):Qi.before(t)},gd=(e,t,n)=>{let o,r,s,i;if(!cd(n)||!t)return null;if(t.isEqual(Qi.after(n))&&n.lastChild){if(i=Qi.after(n.lastChild),$c(e)&&ud(n.lastChild)&&cd(n.lastChild))return dd(n.lastChild)?Qi.before(n.lastChild):i}else i=t;const a=i.container();let l=i.offset();if(ld(a)){if($c(e)&&l>0)return Qi(a,--l);if(Vc(e)&&l<a.length)return Qi(a,++l);o=a}else{if($c(e)&&l>0&&(r=pd(a,l-1),ud(r)))return!hd(r)&&(s=Wc(r,e,md,r),s)?ld(s)?Qi(s,s.data.length):Qi.after(s):ld(r)?Qi(r,r.data.length):Qi.before(r);if(Vc(e)&&l<a.childNodes.length&&(r=pd(a,l),ud(r)))return dd(r)?((e,t)=>{const n=t.nextSibling;return n&&ud(n)?ld(n)?Qi(n,0):Qi.before(n):gd(id.Forwards,Qi.after(t),e)})(n,r):!hd(r)&&(s=Wc(r,e,md,r),s)?ld(s)?Qi(s,0):Qi.before(s):ld(r)?Qi(r,0):Qi.after(r);o=r||i.getNode()}if((Vc(e)&&i.isAtEnd()||$c(e)&&i.isAtStart())&&(o=Wc(o,e,I,n,!0),md(o,n)))return fd(e,o);r=Wc(o,e,md,n);const c=Pe(Y(((e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n})(a,n),ad));return!c||r&&c.contains(r)?r?fd(e,r):null:(i=Vc(e)?Qi.after(c):Qi.before(c),i)},bd=e=>({next:t=>gd(id.Forwards,t,e),prev:t=>gd(id.Backwards,t,e)}),vd=e=>Qi.isTextPosition(e)?0===e.offset():Br(e.getNode()),yd=e=>{if(Qi.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return Br(e.getNode(!0))},xd=(e,t)=>!Qi.isTextPosition(e)&&!Qi.isTextPosition(t)&&e.getNode()===t.getNode(!0),wd=(e,t,n)=>{return e?!xd(t,n)&&(o=t,!(!Qi.isTextPosition(o)&&Mo(o.getNode())))&&yd(t)&&vd(n):!xd(n,t)&&vd(t)&&yd(n);var o},Cd=(e,t,n)=>{const o=bd(t);return F.from(e?o.next(n):o.prev(n))},_d=(e,t,n)=>Cd(e,t,n).bind((o=>Kc(n,o,t)&&wd(e,n,o)?Cd(e,t,o):F.some(o))),Sd=(e,t,n,o)=>_d(e,t,n).bind((n=>o(n)?Sd(e,t,n,o):F.some(n))),kd=(e,t)=>{const n=e?t.firstChild:t.lastChild;return Eo(n)?F.some(Qi(n,e?0:n.data.length)):n?Br(n)?F.some(e?Qi.before(n):Mo(o=n)?Qi.before(o):Qi.after(o)):((e,t,n)=>{const o=e?Qi.before(n):Qi.after(n);return Cd(e,t,o)})(e,t,n):F.none();var o},Ed=M(Cd,!0),Od=M(Cd,!1),Td=M(kd,!0),Ad=M(kd,!1),Dd="_mce_caret",Rd=e=>vo(e)&&e.id===Dd,Md=(e,t)=>{for(;t&&t!==e;){if(t.id===Dd)return t;t=t.parentNode}return null},Nd=e=>Nt.isArray(e.start),Pd=(e,t)=>(vo(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),Ld=(e,t)=>Ad(e).fold(B,(e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0))),Bd=(e,t,n)=>!(!(e=>!1===e.hasChildNodes())(t)||!Md(e,t))&&(((e,t)=>{const n=e.ownerDocument.createTextNode(hr);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)})(t,n),!0),Id=(e,t,n,o)=>{const r=n[t?"start":"end"];let s,i,a,l;const c=e.getRoot();if(r){for(a=r[0],i=c,s=r.length-1;s>=1;s--){if(l=i.childNodes,Bd(c,i,o))return!0;if(r[s]>l.length-1)return!!Bd(c,i,o)||Ld(i,o);i=l[r[s]]}3===i.nodeType&&(a=Math.min(r[0],i.nodeValue.length)),1===i.nodeType&&(a=Math.min(r[0],i.childNodes.length)),t?o.setStart(i,a):o.setEnd(i,a)}return!0},Fd=e=>Eo(e)&&e.data.length>0,zd=(e,t,n)=>{let o,r,s,i,a=e.get(n.id+"_"+t);const l=n.keep;let c,d;if(a){if(o=a.parentNode,"start"===t?(l?a.hasChildNodes()?(o=a.firstChild,r=1):Fd(a.nextSibling)?(o=a.nextSibling,r=0):Fd(a.previousSibling)?(o=a.previousSibling,r=a.previousSibling.data.length):(o=a.parentNode,r=e.nodeIndex(a)+1):r=e.nodeIndex(a),c=o,d=r):(l?a.hasChildNodes()?(o=a.firstChild,r=1):Fd(a.previousSibling)?(o=a.previousSibling,r=a.previousSibling.data.length):(o=a.parentNode,r=e.nodeIndex(a)):r=e.nodeIndex(a),c=o,d=r),!l){for(i=a.previousSibling,s=a.nextSibling,Nt.each(Nt.grep(a.childNodes),(e=>{Eo(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));a=e.get(n.id+"_"+t);)e.remove(a,!0);i&&s&&i.nodeType===s.nodeType&&Eo(i)&&!Tt.browser.isOpera()&&(r=i.nodeValue.length,i.appendData(s.nodeValue),e.remove(s),c=i,d=r)}return F.some(Qi(c,d))}return F.none()},jd=(e,t)=>{const n=e.dom;if(t){if(Nd(t))return((e,t)=>{const n=e.createRng();return Id(e,!0,t,n)&&Id(e,!1,t,n)?F.some(n):F.none()})(n,t);if((e=>p(e.start))(t))return F.some(((e,t)=>{let n;const o=e.createRng();return n=ca(e.getRoot(),t.start),o.setStart(n.container(),n.offset()),n=ca(e.getRoot(),t.end),o.setEnd(n.container(),n.offset()),o})(n,t));if((e=>Se(e,"id"))(t))return((e,t)=>{const n=zd(e,"start",t),o=zd(e,"end",t);return Lt(n,o.or(n),((t,n)=>{const o=e.createRng();return o.setStart(Pd(e,t.container()),t.offset()),o.setEnd(Pd(e,n.container()),n.offset()),o}))})(n,t);if((e=>Se(e,"name"))(t))return((e,t)=>F.from(e.select(t.name)[t.index]).map((t=>{const n=e.createRng();return n.selectNode(t),n})))(n,t);if((e=>Se(e,"rng"))(t))return F.some(t.rng)}return F.none()},Hd=(e,t,n)=>ya(e,t,n),Vd=(e,t)=>{jd(e,t).each((t=>{e.setRng(t)}))},$d=e=>vo(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Ud=(Wd=dr,e=>Wd===e);var Wd;const qd=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Kd=e=>!qd(e)&&!Ud(e)&&!ur(e),Gd=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Yd=e=>(e=>({value:e}))(Gd(e.red)+Gd(e.green)+Gd(e.blue)),Xd=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Jd=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Qd=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),Zd=(e,t,n,o)=>{const r=parseInt(e,10),s=parseInt(t,10),i=parseInt(n,10),a=parseFloat(o);return Qd(r,s,i,a)},eu=e=>(e=>{if("transparent"===e)return F.some(Qd(0,0,0,0));const t=Xd.exec(e);if(null!==t)return F.some(Zd(t[1],t[2],t[3],"1"));const n=Jd.exec(e);return null!==n?F.some(Zd(n[1],n[2],n[3],n[4])):F.none()})(e).map(Yd).map((e=>"#"+e.value)).getOr(e),tu=e=>!!e.nodeType,nu=(e,t,n)=>{const o=n.startOffset;let r=n.startContainer;var s;if((r!==n.endContainer||!(s=r.childNodes[o])||!/^(IMG)$/.test(s.nodeName))&&vo(r)){const s=r.childNodes;let i;o<s.length?(r=s[o],i=new Jo(r,e.getParent(r,e.isBlock))):(r=s[s.length-1],i=new Jo(r,e.getParent(r,e.isBlock)),i.next(!0));for(let e=i.current();e;e=i.next())if(Eo(e)&&!iu(e))return n.setStart(e,0),void t.setRng(n)}},ou=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(vo(e)||!iu(e))return e}},ru=(e,t)=>(tu(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),su=(e,t,n)=>e.schema.isValidChild(t,n),iu=(e,t=!1)=>{if(C(e)&&Eo(e)){const n=t?e.data.replace(/ /g,""):e.data;return jr(n)}return!1},au=(e,t)=>(_(e)?e=e(t):C(t)&&(e=e.replace(/%(\w+)/g,((e,n)=>t[n]||e))),e),lu=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),cu=(e,t)=>("color"!==t&&"backgroundColor"!==t||(e=eu(e)),"fontWeight"===t&&700===e&&(e="bold"),"fontFamily"===t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e),du=(e,t,n)=>cu(e.getStyle(t,n),n),uu=(e,t)=>{let n;return e.getParent(t,(t=>(n=e.getStyle(t,"text-decoration"),n&&"none"!==n))),n},hu=(e,t,n)=>e.getParents(t,n,e.getRoot()),mu=(e,t,n)=>{const o=["inline","block","selector","attributes","styles","classes"],r=e=>xe(e,((e,t)=>U(o,(e=>e===t))));return U(e.formatter.get(t),(t=>{const o=r(t);return U(e.formatter.get(n),(e=>{const t=r(e);return((e,t,n=a)=>i(n).eq(e,t))(o,t)}))}))},pu=e=>ke(e,"block"),fu=e=>ke(e,"selector"),gu=e=>ke(e,"inline"),bu=e=>fu(e)&&!1!==e.expand&&!gu(e),vu=$d,yu=hu,xu=iu,wu=ru,Cu=(e,t)=>{let n=t;for(;n;){if(vo(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},_u=(e,t,n,o)=>{const r=t.data;for(let t=n;e?t>=0:t<r.length;e?t--:t++)if(o(r.charAt(t)))return e?t+1:t;return-1},Su=(e,t,n)=>_u(e,t,n,(e=>Ud(e)||qd(e))),ku=(e,t,n)=>_u(e,t,n,Kd),Eu=(e,t,n,o,r,s)=>{let i;const a=e.getParent(n,e.isBlock)||t,l=(t,n,o)=>{const s=Ci(e),l=r?s.backwards:s.forwards;return F.from(l(t,n,((e,t)=>vu(e.parentNode)?-1:(i=e,o(r,e,t))),a))};return l(n,o,Su).bind((e=>s?l(e.container,e.offset+(r?-1:0),ku):F.some(e))).orThunk((()=>i?F.some({container:i,offset:r?0:i.length}):F.none()))},Ou=(e,t,n,o,r)=>{Eo(o)&&Ye(o.data)&&o[r]&&(o=o[r]);const s=yu(e,o);for(let o=0;o<s.length;o++)for(let r=0;r<t.length;r++){const i=t[r];if((!C(i.collapsed)||i.collapsed===n.collapsed)&&(fu(i)&&e.is(s[o],i.selector)))return s[o]}return o},Tu=(e,t,n,o)=>{let r=n;const s=e.dom,i=s.getRoot(),a=t[0];if(pu(a)&&(r=a.wrapper?null:s.getParent(n,a.block,i)),!r){const t=s.getParent(n,"LI,TD,TH");r=s.getParent(Eo(n)?n.parentNode:n,(t=>t!==i&&wu(e,t)),t)}if(r&&pu(a)&&a.wrapper&&(r=yu(s,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r[o]&&!s.isBlock(r[o])&&(r=r[o],!lu(r,"br")););return r||n},Au=(e,t,n,o)=>{const r=n.parentNode;return!C(n[o])&&(!(r!==t&&!w(r)&&!e.isBlock(r))||Au(e,t,r,o))},Du=(e,t,n,o,r)=>{let s=n;const i=r?"previousSibling":"nextSibling",a=e.getRoot();if(Eo(n)&&!xu(n)&&(r?o>0:o<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(s))return s;for(let t=s[i];t;t=t[i]){const n=Eo(t)&&!Au(e,a,t,i);if(!vu(t)&&(!Mo(l=t)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!xu(t,n))return s}if(s===a||s.parentNode===a){n=s;break}s=s.parentNode}var l;return n},Ru=e=>vu(e.parentNode)||vu(e),Mu=(e,t,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:i,endOffset:a}=t;const l=e.dom,c=n[0];if(vo(r)&&r.hasChildNodes()&&(r=Ri(r,s),Eo(r)&&(s=0)),vo(i)&&i.hasChildNodes()&&(i=Ri(i,t.collapsed?a:a-1),Eo(i)&&(a=i.nodeValue.length)),r=Cu(l,r),i=Cu(l,i),Ru(r)&&(r=vu(r)?r:r.parentNode,r=t.collapsed?r.previousSibling||r:r.nextSibling||r,Eo(r)&&(s=t.collapsed?r.length:0)),Ru(i)&&(i=vu(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,Eo(i)&&(a=t.collapsed?0:i.length)),t.collapsed){Eu(l,e.getBody(),r,s,!0,o).each((({container:e,offset:t})=>{r=e,s=t}));Eu(l,e.getBody(),i,a,!1,o).each((({container:e,offset:t})=>{i=e,a=t}))}return(gu(c)||c.block_expand)&&(gu(c)&&Eo(r)&&0!==s||(r=Du(l,n,r,s,!0)),gu(c)&&Eo(i)&&a!==i.nodeValue.length||(i=Du(l,n,i,a,!1))),bu(c)&&(r=Ou(l,n,t,r,"previousSibling"),i=Ou(l,n,t,i,"nextSibling")),(pu(c)||fu(c))&&(r=Tu(e,n,r,"previousSibling"),i=Tu(e,n,i,"nextSibling"),pu(c)&&(l.isBlock(r)||(r=Du(l,n,r,s,!0)),l.isBlock(i)||(i=Du(l,n,i,a,!1)))),vo(r)&&(s=l.nodeIndex(r),r=r.parentNode),vo(i)&&(a=l.nodeIndex(i)+1,i=i.parentNode),{startContainer:r,startOffset:s,endContainer:i,endOffset:a}},Nu=(e,t,n)=>{const o=t.startOffset,r=Ri(t.startContainer,o),s=t.endOffset,i=Ri(t.endContainer,s-1),a=e=>{const t=e[0];Eo(t)&&t===r&&o>=t.data.length&&e.splice(0,1);const n=e[e.length-1];return 0===s&&e.length>0&&n===i&&Eo(n)&&e.splice(e.length-1,1),e},l=(e,t,n)=>{const o=[];for(;e&&e!==n;e=e[t])o.push(e);return o},c=(t,n)=>e.getParent(t,(e=>e.parentNode===n),n),d=(e,t,o)=>{const r=o?"nextSibling":"previousSibling";for(let s=e,i=s.parentNode;s&&s!==t;s=i){i=s.parentNode;const t=l(s===e?s:s[r],r);t.length&&(o||t.reverse(),n(a(t)))}};if(r===i)return n(a([r]));const u=e.findCommonAncestor(r,i);if(e.isChildOf(r,i))return d(r,u,!0);if(e.isChildOf(i,r))return d(i,u);const h=c(r,u)||r,m=c(i,u)||i;d(r,h,!0);const p=l(h===r?h:h.nextSibling,"nextSibling",m===i?m.nextSibling:m);p.length&&n(a(p)),d(i,m)},Pu=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Lu=e=>Y((e=>ne(e,(e=>{const t=Di(e);return t?[un.fromDom(t)]:[]})))(e),ar),Bu=(e,t)=>{const n=si(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Lu(e)},Iu=e=>Bu(Pu(e.selection.getSel()),un.fromDom(e.getBody())),Fu=(e,t)=>qo(e,"table",t),zu=e=>On(e).fold(A([e]),(t=>[e].concat(zu(t)))),ju=e=>Tn(e).fold(A([e]),(t=>"br"===It(t)?wn(t).map((t=>[e].concat(ju(t)))).getOr([]):[e].concat(ju(t)))),Hu=(e,t)=>Lt((e=>{const t=e.startContainer,n=e.startOffset;return Eo(t)?0===n?F.some(un.fromDom(t)):F.none():F.from(t.childNodes[n]).map(un.fromDom)})(t),(e=>{const t=e.endContainer,n=e.endOffset;return Eo(t)?n===t.data.length?F.some(un.fromDom(t)):F.none():F.from(t.childNodes[n-1]).map(un.fromDom)})(t),((t,n)=>{const o=Z(zu(e),M(fn,t)),r=Z(ju(e),M(fn,n));return o.isSome()&&r.isSome()})).getOr(!1),Vu=(e,t,n,o)=>{const r=n,s=new Jo(n,r),i=xe(e.schema.getMoveCaretBeforeOnEnterElements(),((e,t)=>!$(["td","th","table"],t.toLowerCase())));do{if(Eo(n)&&0!==Nt.trim(n.nodeValue).length)return void(o?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(i[n.nodeName])return void(o?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n))}while(n=o?s.next():s.prev());"BODY"===r.nodeName&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},$u=e=>{const t=e.selection.getSel();return t&&t.rangeCount>0},Uu=(e,t)=>{const n=Iu(e);n.length>0?q(n,(n=>{const o=n.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)})):t(e.selection.getRng(),!1)},Wu=(e,t,n)=>{const o=va(e,t);n(o),e.moveToBookmark(o)},qu=((e,t)=>{const n=t=>e(t)?F.from(t.dom.nodeValue):F.none();return{get:o=>{if(!e(o))throw new Error("Can only get "+t+" value of a "+t+" node");return n(o).getOr("")},getOption:n,set:(n,o)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o}}})(Ht,"text"),Ku=e=>qu.get(e),Gu=e=>qu.getOption(e),Yu=(e,t,n,o)=>xn(t).fold((()=>"skipping"),(r=>"br"===o||(e=>Ht(e)&&Ku(e)===hr)(t)?"valid":(e=>jt(e)&&ln(e,ii()))(t)?"existing":Rd(t.dom)?"caret":su(e,n,o)&&su(e,It(r),n)?"valid":"invalid-child")),Xu=(e,{uid:t=gi("mce-annotation"),...n},o,r)=>{const s=un.fromTag("span",e);on(s,ii()),Wt(s,`${li()}`,t),Wt(s,`${ai()}`,o);const{attributes:i={},classes:a=[]}=r(t,n);return qt(s,i),((e,t)=>{q(t,(t=>{on(e,t)}))})(s,a),s},Ju=(e,t,n,o,r)=>{const s=[],i=Xu(e.getDoc(),r,n,o),a=ti(),l=()=>{a.clear()},c=e=>{q(e,d)},d=t=>{switch(Yu(e,t,"span",It(t))){case"invalid-child":{l();const e=kn(t);c(e),l();break}case"valid":{const e=a.get().getOrThunk((()=>{const e=vi(i);return s.push(e),a.set(e),e}));((e,t)=>{Kn(e,t),Xn(t,e)})(t,e);break}}};return Nu(e.dom,t,(e=>{l(),(e=>{const t=W(e,un.fromDom);c(t)})(e)})),s},Qu=(e,t,n,o)=>{e.undoManager.transact((()=>{const r=e.selection,s=r.getRng(),i=Iu(e).length>0;if(s.collapsed&&!i&&((e,t)=>{const n=Mu(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)})(e,s),r.getRng().collapsed&&!i){const s=Xu(e.getDoc(),o,t,n.decorate);no(s,dr),r.getRng().insertNode(s.dom),r.select(s.dom)}else Wu(r,!1,(()=>{Uu(e,(r=>{Ju(e,r,t,n.decorate,o)}))}))}))},Zu=e=>{const t=(()=>{const e={};return{register:(t,n)=>{e[t]={name:t,settings:n}},lookup:t=>_e(e,t).map((e=>e.settings)),getNames:()=>me(e)}})();pi(e,t);const n=mi(e,t);return{register:(e,n)=>{t.register(e,n)},annotate:(n,o)=>{t.lookup(n).each((t=>{Qu(e,n,t,o)}))},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{const n=e.selection.getBookmark();di(e,F.some(t)).each((({elements:e})=>{q(e,eo)})),e.selection.moveToBookmark(n)},removeAll:t=>{const n=e.selection.getBookmark();fe(hi(e,t),((e,t)=>q(e,eo))),e.selection.moveToBookmark(n)},getAll:t=>{const n=hi(e,t);return ge(n,(e=>W(e,(e=>e.dom))))}}},eh=e=>({getBookmark:M(Hd,e),moveToBookmark:M(Vd,e)});eh.isBookmarkNode=$d;const th=(e,t,n)=>!n.collapsed&&U(n.getClientRects(),(n=>((e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)(n,e,t))),nh=(e,t,n)=>e.dispatch(t,n),oh=(e,t,n,o)=>e.dispatch("FormatApply",{format:t,node:n,vars:o}),rh=(e,t,n,o)=>e.dispatch("FormatRemove",{format:t,node:n,vars:o}),sh=(e,t)=>e.dispatch("SetContent",t),ih=(e,t)=>e.dispatch("GetContent",t),ah=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),lh={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||lh.metaKeyPressed(e),metaKeyPressed:e=>Tt.os.isMacOS()||Tt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},ch=(e,t)=>{const n="data-mce-selected",o=t.dom,r=Nt.each;let s,i,a,l,c,d,u,h,m,p,f,g,b;const v=t.getDoc(),y=document,x=Math.abs,w=Math.round,_=t.getBody();let S,k;const E={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},O=e=>C(e)&&(No(e)||t.dom.is(e,"figure.image")),T=e=>Io(e)||o.hasClass(e,"mce-preview-object"),A=e=>{const n=e.target;((e,t)=>{if("longpress"===e.type||0===e.type.indexOf("touch")){const n=e.touches[0];return O(e.target)&&!th(n.clientX,n.clientY,t)}return O(e.target)&&!th(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},D=e=>o.is(e,"figure.image")?[e.querySelector("img")]:o.hasClass(e,"mce-preview-object")&&C(e.firstElementChild)?[e,e.firstElementChild]:[e],R=e=>{const n=bl(t);return!!n&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&(o.hasClass(e,"mce-preview-object")?mn(un.fromDom(e.firstElementChild),n):mn(un.fromDom(e),n))))},M=(e,n,r)=>{if(C(r)){const s=D(e);q(s,(e=>{e.style[n]||!t.schema.isValid(e.nodeName.toLowerCase(),n)?o.setStyle(e,n,r):o.setAttrib(e,n,""+r)}))}},N=(e,t,n)=>{M(e,"width",t),M(e,"height",n)},P=e=>{let n,r,c,v,y;n=e.screenX-d,r=e.screenY-u,g=n*l[2]+h,b=r*l[3]+m,g=g<5?5:g,b=b<5?5:b,c=(O(s)||T(s))&&!1!==vl(t)?!lh.modifierPressed(e):lh.modifierPressed(e),c&&(x(n)>x(r)?(b=w(g*p),g=w(b/p)):(g=w(b/p),b=w(g*p))),N(i,g,b),v=l.startPos.x+n,y=l.startPos.y+r,v=v>0?v:0,y=y>0?y:0,o.setStyles(a,{left:v,top:y,display:"block"}),a.innerHTML=g+" &times; "+b,l[2]<0&&i.clientWidth<=g&&o.setStyle(i,"left",undefined+(h-g)),l[3]<0&&i.clientHeight<=b&&o.setStyle(i,"top",undefined+(m-b)),n=_.scrollWidth-S,r=_.scrollHeight-k,n+r!==0&&o.setStyles(a,{left:v-n,top:y-r}),f||(((e,t,n,o,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:r})})(t,s,h,m,"corner-"+l.name),f=!0)},L=()=>{const e=f;f=!1,e&&(M(s,"width",g),M(s,"height",b)),o.unbind(v,"mousemove",P),o.unbind(v,"mouseup",L),y!==v&&(o.unbind(y,"mousemove",P),o.unbind(y,"mouseup",L)),o.remove(i),o.remove(a),o.remove(c),B(s),e&&(((e,t,n,o,r)=>{e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:r})})(t,s,g,b,"corner-"+l.name),o.setAttrib(s,"style",o.getAttrib(s,"style"))),t.nodeChanged()},B=e=>{z();const f=o.getPos(e,_),x=f.x,w=f.y,C=e.getBoundingClientRect(),O=C.width||C.right-C.left,A=C.height||C.bottom-C.top;s!==e&&(I(),s=e,g=b=0);const M=t.dispatch("ObjectSelected",{target:e}),B=o.getAttrib(s,n,"1");R(e)&&!M.isDefaultPrevented()?r(E,((e,t)=>{let r;const f=r=>{const f=D(s)[0];var g;d=r.screenX,u=r.screenY,h=f.clientWidth,m=f.clientHeight,p=m/h,l=e,l.name=t,l.startPos={x:O*e[0]+x,y:A*e[1]+w},S=_.scrollWidth,k=_.scrollHeight,c=o.add(_,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=T(g=s)?o.create("img",{src:Tt.transparentSrc}):g.cloneNode(!0),o.addClass(i,"mce-clonedresizable"),o.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",o.setStyles(i,{left:x,top:w,margin:0}),N(i,O,A),i.removeAttribute(n),_.appendChild(i),o.bind(v,"mousemove",P),o.bind(v,"mouseup",L),y!==v&&(o.bind(y,"mousemove",P),o.bind(y,"mouseup",L)),a=o.add(_,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+m)};r=o.get("mceResizeHandle"+t),r&&o.remove(r),r=o.add(_,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),o.bind(r,"mousedown",(e=>{e.stopImmediatePropagation(),e.preventDefault(),f(e)})),e.elm=r,o.setStyles(r,{left:O*e[0]+x-r.offsetWidth/2,top:A*e[1]+w-r.offsetHeight/2})})):I(),o.getAttrib(s,n)||s.setAttribute(n,B)},I=()=>{z(),s&&s.removeAttribute(n),fe(E,((e,t)=>{const n=o.get("mceResizeHandle"+t);n&&(o.unbind(n),o.remove(n))}))},F=s=>{var i;let a,l;const c=(e,t)=>{if(e)do{if(e===t)return!0}while(e=e.parentNode)};f||t.removed||(r(o.select("img[data-mce-selected],hr[data-mce-selected]"),(e=>{e.removeAttribute(n)})),l="mousedown"===s.type?s.target:e.getNode(),l=null===(i=Go(un.fromDom(l),"table,img,figure.image,hr,video,span.mce-preview-object").getOrUndefined())||void 0===i?void 0:i.dom,c(l,_)&&(j(),a=e.getStart(!0),c(a,l)&&c(e.getEnd(!0),l))?B(l):I())},z=()=>{fe(E,(e=>{e.elm&&(o.unbind(e.elm),delete e.elm)}))},j=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",(()=>{j();const e=ni((e=>{t.composing||F(e)}),0);t.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",e.throttle),t.on("keyup compositionend",(t=>{s&&"TABLE"===s.nodeName&&e.throttle(t)})),t.on("hide blur",I),t.on("contextmenu longpress",A,!0)})),t.on("remove",z);return{isResizable:R,showResizeRect:B,hideResizeRect:I,updateResizeRect:F,destroy:()=>{s=i=c=null}}},dh=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold((e=>{r.setStartBefore(e.dom)}),((e,t)=>{r.setStart(e.dom,t)}),(e=>{r.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(o,n),o},uh=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},hh=Sa([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),mh=(e,t,n)=>t(un.fromDom(n.startContainer),n.startOffset,un.fromDom(n.endContainer),n.endOffset),ph=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:A(e),rtl:F.none}),relative:(t,n)=>({ltr:Le((()=>dh(e,t,n))),rtl:Le((()=>F.some(dh(e,n,t))))}),exact:(t,n,o,r)=>({ltr:Le((()=>uh(e,t,n,o,r))),rtl:Le((()=>F.some(uh(e,o,r,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>hh.rtl(un.fromDom(e.endContainer),e.endOffset,un.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>mh(0,hh.ltr,n)));return mh(0,hh.ltr,n)})(0,n)};hh.ltr,hh.rtl;const fh=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),gh=(e,t,n)=>{var o,r;return F.from(null===(r=(o=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,t,n)).bind((t=>{if(null===t.offsetNode)return F.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),F.some(n)}))},bh=(e,t,n)=>{var o,r;return F.from(null===(r=(o=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,t,n))},vh=document.caretPositionFromPoint?gh:document.caretRangeFromPoint?bh:F.none,yh=Sa([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),xh={before:yh.before,on:yh.on,after:yh.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(D,D,D)},wh=Sa([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ch={domRange:wh.domRange,relative:wh.relative,exact:wh.exact,exactFromRange:e=>wh.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>un.fromDom(e.startContainer),relative:(e,t)=>xh.getStart(e),exact:(e,t,n,o)=>e}))(e);return yn(t)},range:fh},_h=(e,t)=>{const n=It(e);return"input"===n?xh.after(e):$(["br","img"],n)?0===t?xh.before(e):xh.after(e):xh.on(e,t)},Sh=(e,t)=>{const n=e.fold(xh.before,_h,xh.after),o=t.fold(xh.before,_h,xh.after);return Ch.relative(n,o)},kh=(e,t,n,o)=>{const r=_h(e,t),s=_h(n,o);return Ch.relative(r,s)},Eh=(e,t)=>{const n=(t||document).createDocumentFragment();return q(e,(e=>{n.appendChild(e.dom)})),un.fromDom(n)},Oh=e=>{const t=Ch.getWin(e).dom,n=(e,n,o,r)=>uh(t,e,n,o,r),o=(e=>e.match({domRange:e=>{const t=un.fromDom(e.startContainer),n=un.fromDom(e.endContainer);return kh(t,e.startOffset,n,e.endOffset)},relative:Sh,exact:kh}))(e);return ph(t,o).match({ltr:n,rtl:n})},Th=(e,t,n)=>((e,t,n)=>{const o=un.fromDom(e.document);return vh(o,t,n).map((e=>fh(un.fromDom(e.startContainer),e.startOffset,un.fromDom(e.endContainer),e.endOffset)))})(e,t,n),Ah=(e,t,n)=>Th(n.defaultView,e,t).map((e=>{const t=n.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t})).getOrUndefined(),Dh=(e,t)=>e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Rh=(e,t,n)=>null!==((e,t,n)=>{for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null})(e,t,n),Mh=(e,t,n)=>Rh(e,t,(e=>e.nodeName===n)),Nh=e=>e&&"TABLE"===e.nodeName,Ph=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),Lh=(e,t)=>yr(e)&&!1===Rh(e,t,Rd),Bh=(e,t,n)=>{const o=new Jo(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());for(;t=o[n?"prev":"next"]();)if(Mo(t))return!0},Ih=(e,t,n,o,r)=>{let s;const i=e.getRoot();let a;const l=e.schema.getNonEmptyElements(),c=e.getParent(r.parentNode,e.isBlock)||i;if(o&&Mo(r)&&t&&e.isEmpty(c))return F.some(Qi(r.parentNode,e.nodeIndex(r)));const d=new Jo(r,c);for(;a=d[o?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||Lh(a,i))return F.none();if(Eo(a)&&a.nodeValue.length>0)return!1===Mh(a,i,"A")?F.some(Qi(a,o?a.nodeValue.length:0)):F.none();if(e.isBlock(a)||l[a.nodeName.toLowerCase()])return F.none();s=a}return n&&s?F.some(Qi(s,0)):F.none()},Fh=(e,t,n,o)=>{let r,s;const i=e.getRoot();let a,l,c=!1;r=o[(n?"start":"end")+"Container"],s=o[(n?"start":"end")+"Offset"];const d=vo(r)&&s===r.childNodes.length,u=e.schema.getNonEmptyElements();if(l=n,yr(r))return F.none();if(vo(r)&&s>r.childNodes.length-1&&(l=!1),Do(r)&&(r=i,s=0),r===i){if(l&&(a=r.childNodes[s>0?s-1:0],a)){if(yr(a))return F.none();if(u[a.nodeName]||Nh(a))return F.none()}if(r.hasChildNodes()){if(s=Math.min(!l&&s>0?s-1:s,r.childNodes.length-1),r=r.childNodes[s],s=Eo(r)&&d?r.data.length:0,!t&&r===i.lastChild&&Nh(r))return F.none();if(((e,t)=>{for(;t&&t!==e;){if(Lo(t))return!0;t=t.parentNode}return!1})(i,r)||yr(r))return F.none();if(r.hasChildNodes()&&!1===Nh(r)){a=r;const t=new Jo(r,i);do{if(Lo(a)||yr(a)){c=!1;break}if(Eo(a)&&a.nodeValue.length>0){s=l?0:a.nodeValue.length,r=a,c=!0;break}if(u[a.nodeName.toLowerCase()]&&!Ph(a)){s=e.nodeIndex(a),r=a.parentNode,l||s++,c=!0;break}}while(a=l?t.next():t.prev())}}}return t&&(Eo(r)&&0===s&&Ih(e,d,t,!0,r).each((e=>{r=e.container(),s=e.offset(),c=!0})),vo(r)&&(a=r.childNodes[s],a||(a=r.childNodes[s-1]),!a||!Mo(a)||((e,t)=>e.previousSibling&&e.previousSibling.nodeName===t)(a,"A")||Bh(e,a,!1)||Bh(e,a,!0)||Ih(e,d,t,!0,a).each((e=>{r=e.container(),s=e.offset(),c=!0})))),l&&!t&&Eo(r)&&s===r.nodeValue.length&&Ih(e,d,t,!1,r).each((e=>{r=e.container(),s=e.offset(),c=!0})),c?F.some(Qi(r,s)):F.none()},zh=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=Qi.fromRangeStart(t);return Fh(e,n,!0,o).each((e=>{n&&Qi.isAbove(r,e)||o.setStart(e.container(),e.offset())})),n||Fh(e,n,!1,o).each((e=>{o.setEnd(e.container(),e.offset())})),n&&o.collapse(!0),Dh(t,o)?F.none():F.some(o)},jh=(e,t)=>e.splitText(t),Hh=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;return t===o&&Eo(t)?n>0&&n<t.nodeValue.length&&(o=jh(t,n),t=o.previousSibling,r>n?(r-=n,t=o=jh(o,r).previousSibling,r=o.nodeValue.length,n=0):r=0):(Eo(t)&&n>0&&n<t.nodeValue.length&&(t=jh(t,n),n=0),Eo(o)&&r>0&&r<o.nodeValue.length&&(o=jh(o,r).previousSibling,r=o.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},Vh=e=>({walk:(t,n)=>Nu(e,t,n),split:Hh,normalize:t=>zh(e,t).fold(B,(e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0)))});Vh.compareRanges=Dh,Vh.getCaretRangeFromPoint=Ah,Vh.getSelectedNode=Di,Vh.getNode=Ri;const $h=((e,t)=>{const n=n=>{const o=t(n);if(o<=0||null===o){const t=Vn(n,e);return parseFloat(t)||0}return o},o=(e,t)=>J(t,((t,n)=>{const o=Vn(e,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?t:t+r}),0);return{set:(t,n)=>{if(!S(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const o=t.dom;cn(o)&&(o.style[e]=n+"px")},get:n,getOuter:n,aggregate:o,max:(e,t,n)=>{const r=o(e,n);return t>r?t-r:0}}})("height",(e=>{const t=e.dom;return Fn(e)?t.getBoundingClientRect().height:t.offsetHeight})),Uh=()=>un.fromDom(document),Wh=(e,t)=>e.view(t).fold(A([]),(t=>{const n=e.owner(t),o=Wh(e,n);return[t].concat(o)}));var qh=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?F.none():F.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(un.fromDom)},owner:e=>vn(e)});const Kh=e=>{const t=Uh(),n=uo(t),o=((e,t)=>{const n=t.owner(e);return Wh(t,n)})(e,qh),r=co(e),s=X(o,((e,t)=>{const n=co(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return ao(s.left+r.left+n.left,s.top+r.top+n.top)},Gh=e=>"textarea"===It(e),Yh=(e,t)=>{const n=(e=>{const t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return ao(n.offsetLeft,n.offsetTop);const s=lo(null==o?void 0:o.pageYOffset,r.scrollTop),i=lo(null==o?void 0:o.pageXOffset,r.scrollLeft),a=lo(r.clientTop,n.clientTop),l=lo(r.clientLeft,n.clientLeft);return co(e).translate(i-l,s-a)})(e),o=(e=>$h.get(e))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},Xh=(e,t)=>{const n=((e,t)=>{const n=kn(e);if(0===n.length||Gh(e))return{element:e,offset:t};if(t<n.length&&!Gh(n[t]))return{element:n[t],offset:0};{const o=n[n.length-1];return Gh(o)?{element:e,offset:t}:"img"===It(o)?{element:o,offset:1}:Ht(o)?{element:o,offset:Ku(o).length}:{element:o,offset:kn(o).length}}})(e,t),o=un.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Kn(n.element,o),Yh(o,(()=>Zn(o)))},Jh=(e,t,n,o)=>{tm(e,((r,s)=>Zh(e,t,n,o)),n)},Qh=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};if(((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,s))return;n(t,uo(t).top,o,r),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,s)},Zh=(e,t,n,o)=>{const r=un.fromDom(e.getBody()),s=un.fromDom(e.getDoc());r.dom.offsetWidth;const i=Xh(un.fromDom(n.startContainer),n.startOffset);Qh(e,s,t,i,o),i.cleanup()},em=(e,t,n,o)=>{const r=un.fromDom(e.getDoc());Qh(e,r,n,(e=>Yh(un.fromDom(e),E))(t),o)},tm=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,i=n.endOffset;t(un.fromDom(o),un.fromDom(s));const a=e.dom.createRng();a.setStart(o,r),a.setEnd(s,i),e.selection.setRng(n)},nm=(e,t,n,o)=>{const r=e.pos;if(n)ho(r.left,r.top,o);else{const n=r.top-t+e.height;ho(r.left,n,o)}},om=(e,t,n,o,r)=>{const s=n+t,i=o.pos.top,a=o.bottom,l=a-i>=n;if(i<t)nm(o,n,!1!==r,e);else if(i>s){nm(o,n,l?!1!==r:!0===r,e)}else a>s&&!l&&nm(o,n,!0===r,e)},rm=(e,t,n,o)=>{const r=e.dom.defaultView.innerHeight;om(e,t,r,n,o)},sm=(e,t,n,o)=>{const r=e.dom.defaultView.innerHeight;om(e,t,r,n,o);const s=Kh(n.element),i=fo(window);s.top<i.y?mo(n.element,!1!==o):s.top>i.bottom&&mo(n.element,!0===o)},im=(e,t,n)=>Jh(e,rm,t,n),am=(e,t,n)=>em(e,t,rm,n),lm=(e,t,n)=>Jh(e,sm,t,n),cm=(e,t,n)=>em(e,t,sm,n),dm=(e,t,n)=>{(e.inline?im:lm)(e,t,n)},um=e=>e.dom.focus(),hm=e=>{const t=Nn(e).dom;return e.dom===t.activeElement},mm=(e=Uh())=>F.from(e.dom.activeElement).map(un.fromDom),pm=(e,t)=>{const n=Ht(t)?Ku(t).length:kn(t).length+1;return e>n?n:e<0?0:e},fm=e=>Ch.range(e.start,pm(e.soffset,e.start),e.finish,pm(e.foffset,e.finish)),gm=(e,t)=>!bo(t.dom)&&(gn(e,t)||fn(e,t)),bm=e=>t=>gm(e,t.start)&&gm(e,t.finish),vm=e=>Ch.range(un.fromDom(e.startContainer),e.startOffset,un.fromDom(e.endContainer),e.endOffset),ym=e=>(e=>{const t=e.getSelection();return(t&&0!==t.rangeCount?F.from(t.getRangeAt(0)):F.none()).map(vm)})(yn(e).dom).filter(bm(e)),xm=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),F.some(t)}catch(e){return F.none()}},wm=e=>{const t=(e=>e.inline)(e)?ym(un.fromDom(e.getBody())):F.none();e.bookmark=t.isSome()?t:e.bookmark},Cm=e=>(e.bookmark?e.bookmark:F.none()).bind((t=>((e,t)=>F.from(t).filter(bm(e)).map(fm))(un.fromDom(e.getBody()),t))).bind(xm),_m={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Sm={setEditorTimeout:(e,t,n)=>((e,t)=>(S(t)||(t=0),setTimeout(e,t)))((()=>{e.removed||t()}),n),setEditorInterval:(e,t,n)=>{const o=((e,t)=>(S(t)||(t=0),setInterval(e,t)))((()=>{e.removed?clearInterval(o):t()}),n);return o}},km=e=>{const t=ni((()=>{wm(e)}),0);e.on("init",(()=>{e.inline&&((e,t)=>{const n=()=>{t.throttle()};qs.DOM.bind(document,"mouseup",n),e.on("remove",(()=>{qs.DOM.unbind(document,"mouseup",n)}))})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",(e=>{t.throttle()}))})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",(t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||wm(e)}))})(e,t)})),e.on("remove",(()=>{t.cancel()}))};let Em;const Om=qs.DOM,Tm=(e,t)=>{const n=Dl(e),o=Om.getParent(t,(t=>(e=>_m.isEditorUIElement(e))(t)||!!n&&e.dom.is(t,n)));return null!==o},Am=(e,t)=>{const n=t.editor;km(n),n.on("focusin",(()=>{const t=e.focusedEditor;t!==n&&(t&&t.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:t}),n.focus(!0))})),n.on("focusout",(()=>{Sm.setEditorTimeout(n,(()=>{const t=e.focusedEditor;Tm(n,(e=>{try{const t=Nn(un.fromDom(e.getElement()));return mm(t).fold((()=>document.body),(e=>e.dom))}catch(e){return document.body}})(n))||t!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),Em||(Em=t=>{const n=e.activeEditor;n&&Bn(t).each((t=>{t.ownerDocument===document&&(t===document.body||Tm(n,t)||e.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},Om.bind(document,"focusin",Em))},Dm=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Om.unbind(document,"focusin",Em),Em=null)},Rm=(e,t)=>(e=>e.collapsed?F.from(Ri(e.startContainer,e.startOffset)).map(un.fromDom):F.none())(t).bind((t=>ir(t)?F.some(t):!1===gn(e,t)?F.some(e):F.none())),Mm=(e,t)=>{Rm(un.fromDom(e.getBody()),t).bind((e=>Td(e.dom))).fold((()=>{e.selection.normalize()}),(t=>e.selection.setRng(t.toRange())))},Nm=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Pm=e=>{return hm(e)||(t=e,mm(Nn(t)).filter((e=>t.dom.contains(e.dom)))).isSome();var t},Lm=e=>e.inline?(e=>{const t=e.getBody();return t&&Pm(un.fromDom(t))})(e):(e=>e.iframeElement&&hm(un.fromDom(e.iframeElement)))(e),Bm=e=>Lm(e)||(e=>{const t=Nn(un.fromDom(e.getElement()));return mm(t).filter((t=>!(e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))})(t.dom)&&Tm(e,t.dom))).isSome()})(e),Im=e=>e.editorManager.setActive(e),Fm=(e,t)=>{e.removed||(t?Im(e):(e=>{const t=e.selection,n=e.getBody();let o=t.getRng();e.quirks.refreshContentEditable(),void 0!==e.bookmark&&!1===Lm(e)&&Cm(e).each((t=>{e.selection.setRng(t),o=t}));const r=((e,t)=>e.dom.getParent(t,(t=>"true"===e.dom.getContentEditable(t))))(e,t.getNode());if(e.dom.isChildOf(r,n))return Nm(r),Mm(e,o),void Im(e);e.inline||(Tt.browser.isOpera()||Nm(n),e.getWin().focus()),(Tt.browser.isFirefox()||e.inline)&&(Nm(n),Mm(e,o)),Im(e)})(e))},zm=(e,t,n,o,r)=>{const s=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return F.from(s).map(un.fromDom).map((e=>o&&t.collapsed?e:En(e,r(e,i)).getOr(e))).bind((e=>jt(e)?F.some(e):xn(e).filter(jt))).map((e=>e.dom)).getOr(e)},jm=(e,t,n)=>zm(e,t,!0,n,((e,t)=>Math.min(An(e),t))),Hm=(e,t,n)=>zm(e,t,!1,n,((e,t)=>t>0?t-1:t)),Vm=(e,t)=>{const n=e;for(;e&&Eo(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},$m=(e,t)=>W(t,(t=>{const n=e.dispatch("GetSelectionRange",{range:t});return n.range!==t?n.range:t})),Um=["img","br"],Wm=e=>{const t=Gu(e).filter((e=>0!==e.trim().length||e.indexOf(dr)>-1)).isSome();return t||$(Um,It(e))},qm=e=>((e,t)=>{const n=e=>{for(let o=0;o<e.childNodes.length;o++){const r=un.fromDom(e.childNodes[o]);if(t(r))return F.some(r);const s=n(e.childNodes[o]);if(s.isSome())return s}return F.none()};return n(e.dom)})(e,Wm),Km=(e,t)=>{const n=e=>{const o=kn(e);for(let e=o.length-1;e>=0;e--){const r=o[e];if(t(r))return F.some(r);const s=n(r);if(s.isSome())return s}return F.none()};return n(e)},Gm="[data-mce-autocompleter]",Ym=(e,t)=>{if(Xm(un.fromDom(e.getBody())).isNone()){const o=un.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Xn(o,un.fromDom(t.extractContents())),t.insertNode(o.dom),xn(o).each((e=>e.dom.normalize())),(n=o,Km(n,Wm)).map((t=>{e.selection.setCursorLocation(t.dom,(e=>"img"===It(e)?1:Gu(e).fold((()=>kn(e).length),(e=>e.length)))(t))}))}var n},Xm=e=>Ko(e,Gm),Jm={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Qm=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let n=e[r];if(n)return n;for(let o=e.parent;o&&o!==t;o=o.parent)if(n=o[r],n)return n}},Zm=e=>{if(!jr(e.value))return!1;const t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)},ep=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class tp{constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}static create(e,t){const n=new tp(e,Jm[e]||1);return t&&fe(t,((e,t)=>{n.attr(t,e)})),n}replace(e){const t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){const n=this;let o;if("string"!=typeof e)return null!=e&&fe(e,((e,t)=>{n.attr(t,e)})),n;if(o=n.attributes){if(void 0!==t){if(null===t){if(e in o.map){delete o.map[e];let t=o.length;for(;t--;)if(o[t].name===e)return o.splice(t,1),n}return n}if(e in o.map){let n=o.length;for(;n--;)if(o[n].name===e){o[n].value=t;break}}else o.push({name:e,value:t});return o.map[e]=t,n}return o.map[e]}}clone(){const e=this,t=new tp(e.name,e.type);let n;if(n=e.attributes){const e=[];e.map={};for(let t=0,o=n.length;t<o;t++){const o=n[t];"id"!==o.name&&(e[e.length]={name:o.name,value:o.value},e.map[o.name]=o.value)}t.attributes=e}return t.value=e.value,t}wrap(e){const t=this;return t.parent.insert(e,t),e.append(t),t}unwrap(){const e=this;for(let t=e.firstChild;t;){const n=t.next;e.insert(t,e,!0),t=n}e.remove()}remove(){const e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):o.next=n,t.lastChild===e?(t.lastChild=o,o&&(o.next=null)):n.prev=o,e.parent=e.next=e.prev=null),e}append(e){const t=this;e.parent&&e.remove();const n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,n){e.parent&&e.remove();const o=t.parent||this;return n?(t===o.firstChild?o.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=o,e}getAll(e){const t=this,n=[];for(let o=t.firstChild;o;o=Qm(o,t))o.name===e&&n.push(o);return n}children(){const e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){const e=this;if(e.firstChild){const t=[];for(let n=e.firstChild;n;n=Qm(n,e))t.push(n);let n=t.length;for(;n--;){const e=t[n];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},n){const o=this;let r=o.firstChild;if(ep(o))return!1;if(r)do{if(1===r.type){if(r.attr("data-mce-bogus"))continue;if(e[r.name])return!1;if(ep(r))return!1}if(8===r.type)return!1;if(3===r.type&&!Zm(r))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&jr(r.value))return!1;if(n&&n(r))return!1}while(r=Qm(r,o));return!0}walk(e){return Qm(this,null,e)}}const np=(e,t,n=0)=>{const o=e.toLowerCase();if(-1!==o.indexOf("[if ",n)&&((e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)))(o,n)){const e=o.indexOf("[endif]",n);return o.indexOf(">",e)}if(t){const e=o.indexOf(">",n);return-1!==e?e:o.length}{const t=/--!?>/g;t.lastIndex=n;const r=t.exec(e);return r?r.index+r[0].length:o.length}},op=(e,t,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=e.getVoidElements();let i=1,a=n;for(;0!==i;)for(o.lastIndex=a;;){const e=o.exec(t);if(null===e)return a;if("!"===e[1]){a=Ve(e[2],"--")?np(t,!1,e.index+"!--".length):np(t,!0,e.index+1);break}{r.lastIndex=o.lastIndex;const n=r.exec(t);if(v(n)||n.index!==o.lastIndex)continue;"/"===e[1]?i-=1:Se(s,e[2])||(i+=1),a=o.lastIndex+n[0].length;break}}return a},rp=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=e.schema;let r=((e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")})(e.getTempAttrs(),t);const s=o.getVoidElements();let i;for(;i=n.exec(r);){const e=n.lastIndex,t=i[0].length;let a;a=s[i[1]]?e:op(o,r,e),r=r.substring(0,e-t)+r.substring(a),n.lastIndex=e-t}return pr(r)},sp=rp,ip=(e,t,n)=>{let o;o="raw"===t.format?Nt.trim(sp(e.serializer,n.innerHTML)):"text"===t.format?e.dom.isEmpty(n)?"":pr(n.innerText||n.textContent):"tree"===t.format?e.serializer.serialize(n,t):((e,t)=>{const n=Wa(e),o=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(o,"")})(e,e.serializer.serialize(n,t));return"text"!==t.format&&!lr(un.fromDom(n))&&p(o)?Nt.trim(o):o},ap=Nt.each,lp=e=>({compare:(t,n)=>{if(t.nodeName!==n.nodeName)return!1;const o=t=>{const n={};return ap(e.getAttribs(t),(o=>{const r=o.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&0!==r.indexOf("data-")&&(n[r]=e.getAttrib(t,r))})),n},r=(e,t)=>{let n,o;for(o in e)if(Se(e,o)){if(n=t[o],void 0===n)return!1;if(e[o]!==n)return!1;delete t[o]}for(o in t)if(Se(t,o))return!1;return!0};return!!r(o(t),o(n))&&(!!r(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))&&(!$d(t)&&!$d(n)))}}),cp=Nt.makeMap,dp=e=>{const t=[],n=(e=e||{}).indent,o=cp(e.indent_before||""),r=cp(e.indent_after||""),s=ps.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="xhtml"!==e.element_format;return{start:(e,a,l)=>{let c,d,u,h;if(n&&o[e]&&t.length>0&&(h=t[t.length-1],h.length>0&&"\n"!==h&&t.push("\n")),t.push("<",e),a)for(c=0,d=a.length;c<d;c++)u=a[c],t.push(" ",u.name,'="',s(u.value,!0),'"');t[t.length]=!l||i?">":" />",l&&n&&r[e]&&t.length>0&&(h=t[t.length-1],h.length>0&&"\n"!==h&&t.push("\n"))},end:e=>{let o;t.push("</",e,">"),n&&r[e]&&t.length>0&&(o=t[t.length-1],o.length>0&&"\n"!==o&&t.push("\n"))},text:(e,n)=>{e.length>0&&(t[t.length]=n?e:s(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,o)=>{o?t.push("<?",e," ",s(o),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},up=(e,t=Es())=>{const n=dp(e);(e=e||{}).validate=!("validate"in e)||e.validate;return{serialize:o=>{const r=e.validate,s={3:e=>{n.text(e.value,e.raw)},8:e=>{n.comment(e.value)},7:e=>{n.pi(e.name,e.value)},10:e=>{n.doctype(e.value)},4:e=>{n.cdata(e.value)},11:e=>{if(e=e.firstChild)do{i(e)}while(e=e.next)}};n.reset();const i=e=>{const o=s[e.type];if(o)o(e);else{const o=e.name,s=o in t.getVoidElements();let a=e.attributes;if(r&&a&&a.length>1){const n=[];n.map={};const o=t.getElementRule(e.name);if(o){for(let e=0,t=o.attributesOrder.length;e<t;e++){const t=o.attributesOrder[e];if(t in a.map){const e=a.map[t];n.map[t]=e,n.push({name:t,value:e})}}for(let e=0,t=a.length;e<t;e++){const t=a[e].name;if(!(t in n.map)){const e=a.map[t];n.map[t]=e,n.push({name:t,value:e})}}a=n}}if(n.start(o,a,s),!s){let t=e.firstChild;if(t){"pre"!==o&&"textarea"!==o||3!==t.type||"\n"!==t.value[0]||n.text("\n",!0);do{i(t)}while(t=t.next)}n.end(o)}}};return 1!==o.type||e.inner?3===o.type?s[3](o):s[11](o):i(o),n.getContent()}}},hp=new Set;q(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{hp.add(e)}));const mp=["font","text-decoration","text-emphasis"],pp=(e,t)=>me(e.parseStyle(e.getAttrib(t,"style"))),fp=(e,t)=>oe(pp(e,t),(e=>!(e=>hp.has(e))(e))),gp=(e,t,n)=>{const o=pp(e,t),r=pp(e,n),s=o=>{var r,s;const i=null!==(r=e.getStyle(t,o))&&void 0!==r?r:"",a=null!==(s=e.getStyle(n,o))&&void 0!==s?s:"";return Ge(i)&&Ge(a)&&i!==a};return U(o,(e=>{const t=t=>U(t,(t=>t===e));if(!t(r)&&t(mp)){const e=Y(r,(e=>U(mp,(t=>Ve(e,t)))));return U(e,s)}return s(e)}))},bp=(e,t,n)=>F.from(n.container()).filter(Eo).exists((o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))})),vp=M(bp,!0,qd),yp=M(bp,!1,qd),xp=e=>{const t=e.container();return Eo(t)&&(0===t.data.length||mr(t.data)&&eh.isBookmarkNode(t.parentNode))},wp=(e,t)=>n=>F.from(Gc(e?0:-1,n)).filter(t).isSome(),Cp=e=>No(e)&&"block"===Vn(un.fromDom(e),"display"),_p=e=>Lo(e)&&!(e=>vo(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),Sp=wp(!0,Cp),kp=wp(!1,Cp),Ep=wp(!0,Io),Op=wp(!1,Io),Tp=wp(!0,_o),Ap=wp(!1,_o),Dp=wp(!0,_p),Rp=wp(!1,_p),Mp=e=>{const t=si(e,"br"),n=Y((e=>{const t=[];let n=e.dom;for(;n;)t.push(un.fromDom(n)),n=n.lastChild;return t})(e).slice(-1),nr);t.length===n.length&&q(n,Zn)},Np=e=>{Qn(e),Xn(e,un.fromHtml('<br data-mce-bogus="1">'))},Pp=e=>{Tn(e).each((t=>{wn(t).each((n=>{er(e)&&nr(t)&&er(n)&&Zn(t)}))}))},Lp=(e,t,n)=>{return gn(t,e)?(o=((e,t)=>{const n=_(t)?t:B;let o=e.dom;const r=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){const e=o.parentNode,t=un.fromDom(e);if(r.push(t),!0===n(t))break;o=e}return r})(e,(e=>n(e)||fn(e,t))),o.slice(0,-1)):[];var o},Bp=(e,t)=>Lp(e,t,B),Ip=(e,t)=>[e].concat(Bp(e,t)),Fp=(e,t,n)=>Sd(e,t,n,xp),zp=(e,t)=>Z(Ip(un.fromDom(t.container()),e),er),jp=(e,t,n)=>Fp(e,t.dom,n).forall((e=>zp(t,n).fold((()=>!1===Kc(e,n,t.dom)),(o=>!1===Kc(e,n,t.dom)&&gn(o,un.fromDom(e.container())))))),Hp=(e,t,n)=>zp(t,n).fold((()=>Fp(e,t.dom,n).forall((e=>!1===Kc(e,n,t.dom)))),(t=>Fp(e,t.dom,n).isNone())),Vp=M(Hp,!1),$p=M(Hp,!0),Up=M(jp,!1),Wp=M(jp,!0),qp=e=>od(e).exists(nr),Kp=(e,t,n)=>{const o=Y(Ip(un.fromDom(n.container()),t),er),r=ce(o).getOr(t);return Cd(e,r.dom,n).filter(qp)},Gp=(e,t)=>od(t).exists(nr)||Kp(!0,e,t).isSome(),Yp=(e,t)=>(e=>F.from(e.getNode(!0)).map(un.fromDom))(t).exists(nr)||Kp(!1,e,t).isSome(),Xp=M(Kp,!1),Jp=M(Kp,!0),Qp=e=>Qi.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Zp=(e,t)=>{const n=Y(Ip(un.fromDom(t.container()),e),er);return ce(n).getOr(e)},ef=(e,t)=>Qp(t)?yp(t):yp(t)||Od(Zp(e,t).dom,t).exists(yp),tf=(e,t)=>Qp(t)?vp(t):vp(t)||Ed(Zp(e,t).dom,t).exists(vp),nf=e=>od(e).bind((e=>Uo(e,jt))).exists((e=>(e=>$(["pre","pre-wrap"],e))(Vn(e,"white-space")))),of=(e,t)=>((e,t)=>Od(e.dom,t).isNone())(e,t)||((e,t)=>Ed(e.dom,t).isNone())(e,t)||Vp(e,t)||$p(e,t)||Yp(e,t)||Gp(e,t),rf=(e,t)=>!nf(t)&&(Vp(e,t)||Up(e,t)||Yp(e,t)||ef(e,t)),sf=(e,t)=>!nf(t)&&($p(e,t)||Wp(e,t)||Gp(e,t)||tf(e,t)),af=(e,t)=>rf(e,t)||sf(e,(e=>{const t=e.container(),n=e.offset();return Eo(t)&&n<t.data.length?Qi(t,n+1):e})(t)),lf=(e,t)=>Ud(e.charAt(t)),cf=e=>{const t=e.container();return Eo(t)&&He(t.data,dr)},df=e=>{const t=e.data,n=(e=>{const t=e.split("");return W(t,((e,n)=>Ud(e)&&n>0&&n<t.length-1&&Kd(t[n-1])&&Kd(t[n+1])?" ":e)).join("")})(t);return n!==t&&(e.data=n,!0)},uf=(e,t)=>F.some(t).filter(cf).bind((t=>{const n=t.container(),o=((e,t)=>{const n=t.data,o=Qi(t,0);return!(!lf(n,0)||af(e,o)||(t.data=" "+n.slice(1),0))})(e,n)||df(n)||((e,t)=>{const n=t.data,o=Qi(t,n.length-1);return!(!lf(n,n.length-1)||af(e,o)||(t.data=n.slice(0,-1)+" ",0))})(e,n);return o?F.some(t):F.none()})),hf=(e,t,n)=>{if(0===n)return;const o=un.fromDom(e),r=$o(o,er).getOr(o),s=e.data.slice(t,t+n),i=t+n>=e.data.length&&sf(r,Qi(e,e.data.length)),a=0===t&&rf(r,Qi(e,0));e.replaceData(t,n,Vr(s,4,a,i))},mf=(e,t)=>{const n=e.data.slice(t),o=n.length-qe(n).length;hf(e,t,o)},pf=(e,t)=>{const n=e.data.slice(0,t),o=n.length-Ke(n).length;hf(e,t-o,o)},ff=(e,t,n,o=!0)=>{const r=Ke(e.data).length,s=o?e:t,i=o?t:e;return o?s.appendData(i.data):s.insertData(0,i.data),Zn(un.fromDom(i)),n&&mf(s,r),s},gf=(e,t)=>((e,t)=>{const n=e.container(),o=e.offset();return!1===Qi.isTextPosition(e)&&n===t.parentNode&&o>Qi.before(t).offset()})(t,e)?Qi(t.container(),t.offset()-1):t,bf=e=>{return Br(e.previousSibling)?F.some((t=e.previousSibling,Eo(t)?Qi(t,t.data.length):Qi.after(t))):e.previousSibling?Ad(e.previousSibling):F.none();var t},vf=e=>{return Br(e.nextSibling)?F.some((t=e.nextSibling,Eo(t)?Qi(t,0):Qi.before(t))):e.nextSibling?Td(e.nextSibling):F.none();var t},yf=(e,t)=>bf(t).orThunk((()=>vf(t))).orThunk((()=>((e,t)=>{const n=Qi.before(t.previousSibling?t.previousSibling:t.parentNode);return Od(e,n).fold((()=>Ed(e,Qi.after(t))),F.some)})(e,t))),xf=(e,t)=>vf(t).orThunk((()=>bf(t))).orThunk((()=>((e,t)=>Ed(e,Qi.after(t)).fold((()=>Od(e,Qi.before(t))),F.some))(e,t))),wf=(e,t,n)=>((e,t,n)=>e?xf(t,n):yf(t,n))(e,t,n).map(M(gf,n)),Cf=(e,t,n)=>{n.fold((()=>{e.focus()}),(n=>{e.selection.setRng(n.toRange(),t)}))},_f=(e,t)=>t&&Se(e.schema.getBlockElements(),It(t)),Sf=e=>{if(Xr(e)){const t=un.fromHtml('<br data-mce-bogus="1">');return Qn(e),Xn(e,t),F.some(Qi.before(t.dom))}return F.none()},kf=(e,t,n)=>{const o=wn(e).filter(Ht),r=Cn(e).filter(Ht);return Zn(e),(s=o,i=r,a=t,l=(e,t,o)=>{const r=e.dom,s=t.dom,i=r.data.length;return ff(r,s,n),o.container()===s?Qi(r,i):o},s.isSome()&&i.isSome()&&a.isSome()?F.some(l(s.getOrDie(),i.getOrDie(),a.getOrDie())):F.none()).orThunk((()=>(n&&(o.each((e=>pf(e.dom,e.dom.length))),r.each((e=>mf(e.dom,0)))),t)));var s,i,a,l},Ef=(e,t,n,o=!0)=>{const r=wf(t,e.getBody(),n.dom),s=$o(n,M(_f,e),(i=e.getBody(),e=>e.dom===i));var i;const a=kf(n,r,((e,t)=>Se(e.schema.getTextInlineElements(),It(t)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(Sf).fold((()=>{o&&Cf(e,t,a)}),(n=>{o&&Cf(e,t,F.some(n))}))},Of=e=>si(e,"td,th"),Tf=(e,t)=>({start:e,end:t}),Af=Sa([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Df=(e,t)=>Go(un.fromDom(e),"td,th",t),Rf=e=>!fn(e.start,e.end),Mf=(e,t)=>Fu(e.start,t).bind((n=>Fu(e.end,t).bind((e=>Bt(fn(n,e),n))))),Nf=e=>t=>Mf(t,e).map((e=>((e,t,n)=>({rng:e,table:t,cells:n}))(t,e,Of(e)))),Pf=(e,t,n,o)=>{if(n.collapsed||!e.forall(Rf))return F.none();if(t.isSameTable){const t=e.bind(Nf(o));return F.some({start:t,end:t})}{const e=Df(n.startContainer,o),t=Df(n.endContainer,o),r=e.bind((e=>t=>Fu(t,e).bind((e=>de(Of(e)).map((e=>Tf(t,e))))))(o)).bind(Nf(o)),s=t.bind((e=>t=>Fu(t,e).bind((e=>ce(Of(e)).map((e=>Tf(e,t))))))(o)).bind(Nf(o));return F.some({start:r,end:s})}},Lf=(e,t)=>ee(e,(e=>fn(e,t))),Bf=e=>Lt(Lf(e.cells,e.rng.start),Lf(e.cells,e.rng.end),((t,n)=>e.cells.slice(t,n+1))),If=(e,t,n)=>e.exists((e=>((e,t)=>!Rf(e)&&Mf(e,t).exists((e=>{const t=e.dom.rows;return 1===t.length&&1===t[0].cells.length})))(e,n)&&Hu(e.start,t))),Ff=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each((e=>r.setStartAfter(e.dom))),o.each((e=>r.setEndBefore(e.dom))),r},zf=(e,t)=>{const n=(e=>t=>fn(e,t))(e),o=((e,t)=>{const n=Df(e.startContainer,t),o=Df(e.endContainer,t);return Lt(n,o,Tf)})(t,n),r=((e,t)=>{const n=e=>Fu(un.fromDom(e),t),o=n(e.startContainer),r=n(e.endContainer),s=o.isSome(),i=r.isSome(),a=Lt(o,r,fn).getOr(!1);return{startTable:o,endTable:r,isStartInTable:s,isEndInTable:i,isSameTable:a,isMultiTable:!a&&s&&i}})(t,n);return If(o,t,n)?o.map((e=>Af.singleCellTable(t,e.start))):r.isMultiTable?((e,t,n,o)=>Pf(e,t,n,o).bind((({start:e,end:o})=>{const r=e.bind(Bf).getOr([]),s=o.bind(Bf).getOr([]);if(r.length>0&&s.length>0){const e=Ff(n,t);return F.some(Af.multiTable(r,s,e))}return F.none()})))(o,r,t,n):((e,t,n,o)=>Pf(e,t,n,o).bind((({start:e,end:t})=>e.or(t))).bind((e=>{const{isSameTable:o}=t,r=Bf(e).getOr([]);if(o&&e.cells.length===r.length)return F.some(Af.fullTable(e.table));if(r.length>0){if(o)return F.some(Af.partialTable(r,F.none()));{const e=Ff(n,t);return F.some(Af.partialTable(r,F.some({...t,rng:e})))}}return F.none()})))(o,r,t,n)},jf=e=>{var t;return(8===Ft(t=e)||"#comment"===It(t)?wn(e):Tn(e)).bind(jf).orThunk((()=>F.some(e)))},Hf=e=>q(e,(e=>{Xt(e,"contenteditable"),Np(e)})),Vf=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),qf(e,r,t,!1).each((e=>e()))},$f=e=>{const t=Iu(e),n=un.fromDom(e.selection.getNode());Bo(n.dom)&&Xr(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&U(t,(e=>fn(e,n)))&&Wt(n,"data-mce-selected","1")},Uf=(e,t,n)=>F.some((()=>{const o=e.selection.getRng(),r=n.bind((({rng:n,isStartInTable:r})=>{const s=((e,t)=>F.from(e.dom.getParent(t,e.dom.isBlock)).map(un.fromDom))(e,r?n.endContainer:n.startContainer);n.deleteContents(),((e,t,n)=>{n.each((n=>{t?Zn(n):(Np(n),e.selection.setCursorLocation(n.dom,0))}))})(e,r,s.filter(Xr));const i=r?t[0]:t[t.length-1];return Vf(e,i,o,r),Xr(i)?F.none():F.some(r?t.slice(1):t.slice(0,-1))})).getOr(t);Hf(r),$f(e)})),Wf=(e,t,n,o)=>F.some((()=>{const r=e.selection.getRng(),s=t[0],i=n[n.length-1];Vf(e,s,r,!0),Vf(e,i,r,!1);const a=Xr(s)?t:t.slice(1),l=Xr(i)?n:n.slice(0,-1);Hf(a.concat(l)),o.deleteContents(),$f(e)})),qf=(e,t,n,o=!0)=>F.some((()=>{t.deleteContents();const r=jf(n).getOr(n),s=un.fromDom(e.dom.getParent(r.dom,e.dom.isBlock));if(Xr(s)&&(Np(s),o&&e.selection.setCursorLocation(s.dom,0)),!fn(n,s)){const e=Pt(xn(s),n)?[]:xn(i=s).map(kn).map((e=>Y(e,(e=>!fn(i,e))))).getOr([]);q(e.concat(kn(n)),(e=>{fn(e,s)||gn(e,s)||!Xr(e)||Zn(e)}))}var i})),Kf=(e,t)=>F.some((()=>Ef(e,!1,t))),Gf=(e,t,n,o)=>Xf(t,o).fold((()=>((e,t,n)=>zf(t,n).bind((t=>t.fold(M(qf,e),M(Kf,e),M(Uf,e),M(Wf,e)))))(e,t,n)),(t=>((e,t)=>Jf(e,t))(e,t))),Yf=(e,t)=>Z(Ip(t,e),ar),Xf=(e,t)=>{return Z(Ip(t,e),(n="caption",e=>jt(e)&&It(e)===n));var n},Jf=(e,t)=>F.some((()=>{Np(t),e.selection.setCursorLocation(t.dom,0)})),Qf=(e,t,n,o,r)=>_d(n,e.getBody(),r).fold((()=>F.some(E)),(s=>((e,t,n,o)=>Td(e.dom).bind((r=>Ad(e.dom).map((e=>t?n.isEqual(r)&&o.isEqual(e):n.isEqual(e)&&o.isEqual(r))))).getOr(!0))(o,n,r,s)?((e,t)=>Jf(e,t))(e,o):((e,t,n)=>Xf(e,un.fromDom(n.getNode())).fold((()=>F.some(E)),(e=>Bt(!fn(e,t),E))))(t,o,s))),Zf=(e,t,n,o)=>{const r=Qi.fromRangeStart(e.selection.getRng());return Yf(n,o).bind((o=>Xr(o)?Jf(e,o):((e,t,n,o,r)=>_d(n,e.getBody(),r).bind((e=>Yf(t,un.fromDom(e.getNode())).bind((e=>fn(e,o)?F.none():F.some(E))))))(e,n,t,o,r)))},eg=(e,t)=>e?Tp(t):Ap(t),tg=(e,t,n)=>{const o=un.fromDom(e.getBody());return Xf(o,n).fold((()=>Zf(e,t,o,n).orThunk((()=>Bt(((e,t)=>{const n=Qi.fromRangeStart(e.selection.getRng());return eg(t,n)||Cd(t,e.getBody(),n).exists((e=>eg(t,e)))})(e,t),E)))),(n=>((e,t,n,o)=>{const r=Qi.fromRangeStart(e.selection.getRng());return Xr(o)?Jf(e,o):Qf(e,n,t,o,r)})(e,t,o,n)))},ng=(e,t)=>{const n=un.fromDom(e.selection.getStart(!0)),o=Iu(e);return e.selection.isCollapsed()&&0===o.length?tg(e,t,n):((e,t,n)=>{const o=un.fromDom(e.getBody()),r=e.selection.getRng();return 0!==n.length?Uf(e,n,F.none()):Gf(e,o,r,t)})(e,n,o)},og=(e,t)=>{for(;t&&t!==e;){if(Po(t)||Lo(t))return t;t=t.parentNode}return null},rg=(e,t)=>{t(e),e.firstChild&&rg(e.firstChild,t),e.next&&rg(e.next,t)},sg=(e,t,n,o)=>{const r=n.name;for(let t=0,s=e.length;t<s;t++){const s=e[t];if(s.name===r){const e=o.nodes[r];e?e.nodes.push(n):o.nodes[r]={filter:s,nodes:[n]}}}if(n.attributes)for(let e=0,r=t.length;e<r;e++){const r=t[e],s=r.name;if(s in n.attributes.map){const e=o.attributes[s];e?e.nodes.push(n):o.attributes[s]={filter:r,nodes:[n]}}}},ig=(e,t)=>{const n=e=>{fe(e,(e=>{const n=Y(e.nodes,(e=>C(e.parent)));q(e.filter.callbacks,(o=>{o(n,e.filter.name,t)}))}))};n(e.nodes),n(e.attributes)},ag=(e,t,n,o={})=>{const r=((e,t,n)=>{const o={nodes:{},attributes:{}};return n.firstChild&&rg(n.firstChild,(n=>{sg(e,t,n,o)})),o})(e,t,n);ig(r,o)},lg=(e,t,n,o)=>{t.insert&&n[o.name]?o.empty().append(new tp("br",1)):o.empty().append(new tp("#text",3)).value=dr},cg=(e,t)=>e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t,dg=(e,t,n,o)=>o.isEmpty(t,n,(t=>((e,t)=>{const n=e.getElementRule(t.name);return n&&n.paddEmpty})(e,t))),ug=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const e of o)t.isValidChild(n.name,e.name)||ug(e,t,n);e.unwrap()}},hg=(e,t,n=E)=>{const o=t.getTextBlockElements(),r=t.getNonEmptyElements(),s=t.getWhitespaceElements(),i=Nt.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let l=0;l<e.length;l++){const c=e[l];let d,u,h;if(!c.parent||a.has(c))continue;if(o[c.name]&&"li"===c.parent.name){let e=c.next;for(;e&&o[e.name];)e.name="li",a.add(e),c.parent.insert(e,c.parent),e=e.next;c.unwrap();continue}const m=[c];for(d=c.parent;d&&!t.isValidChild(d.name,c.name)&&!i[d.name];d=d.parent)m.push(d);if(d&&m.length>1)if(t.isValidChild(d.name,c.name)){m.reverse(),u=m[0].clone(),n(u);let e=u;for(let o=0;o<m.length-1;o++){t.isValidChild(e.name,m[o].name)?(h=m[o].clone(),n(h),e.append(h)):h=e;for(let e=m[o].firstChild;e&&e!==m[o+1];){const t=e.next;h.append(e),e=t}e=h}dg(t,r,s,u)?d.insert(c,m[0],!0):(d.insert(u,m[0],!0),d.insert(c,u)),d=m[0],(dg(t,r,s,d)||cg(d,"br"))&&d.empty().remove()}else ug(c,t);else if(c.parent){if("li"===c.name){let e=c.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(c);continue}if(e=c.next,e&&("ul"===e.name||"ol"===e.name)){e.insert(c,e.firstChild,!0);continue}const t=new tp("ul",1);n(t),c.wrap(t);continue}if(t.isValidChild(c.parent.name,"div")&&t.isValidChild("div",c.name)){const e=new tp("div",1);n(e),c.wrap(e)}else ug(c,t)}}},mg=e=>{const t=Qi.fromRangeStart(e),n=Qi.fromRangeEnd(e),o=e.commonAncestorContainer;return Cd(!1,o,n).map((r=>!Kc(t,n,o)&&Kc(t,r,o)?((e,t,n,o)=>{const r=document.createRange();return r.setStart(e,t),r.setEnd(n,o),r})(t.container(),t.offset(),r.container(),r.offset()):e)).getOr(e)},pg=e=>e.collapsed?e:mg(e),fg=(e,t)=>e.getBlockElements()[t.name]&&(e=>e.firstChild&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===dr)(t.firstChild),gg=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((e,t)=>{const n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||fg(e,t))})(e,o)&&(o=o.prev),!(!n||n!==o)&&("ul"===n.name||"ol"===n.name)},bg=e=>e&&e.firstChild&&e.firstChild===e.lastChild&&(e=>e.data===dr||Mo(e))(e.firstChild),vg=e=>{return e.length>0&&(!(t=e[e.length-1]).firstChild||bg(t))?e.slice(0,-1):e;var t},yg=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},xg=(e,t)=>{const n=Qi.after(e),o=bd(t).prev(n);return o?o.toRange():null},wg=(e,t,n)=>{const o=e.parentNode;return Nt.each(t,(t=>{o.insertBefore(t,e)})),((e,t)=>{const n=Qi.before(e),o=bd(t).next(n);return o?o.toRange():null})(e,n)},Cg=(e,t,n,o)=>{const r=((e,t,n)=>{const o=t.serialize(n);return(e=>{const t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e})(e.createFragment(o))})(t,e,o),s=yg(t,n.startContainer),i=vg((a=r.firstChild,Y(a.childNodes,(e=>"LI"===e.nodeName))));var a;const l=t.getRoot(),c=e=>{const o=Qi.fromRangeStart(n),r=bd(t.getRoot()),i=1===e?r.prev(o):r.next(o);return!i||yg(t,i.getNode())!==s};return c(1)?wg(s,i,l):c(2)?((e,t,n,o)=>(o.insertAfter(t.reverse(),e),xg(t[0],n)))(s,i,l,t):((e,t,n,o)=>{const r=((e,t)=>{const n=t.cloneRange(),o=t.cloneRange();return n.setStartBefore(e),o.setEndAfter(e),[n.cloneContents(),o.cloneContents()]})(e,o),s=e.parentNode;return s.insertBefore(r[0],e),Nt.each(t,(t=>{s.insertBefore(t,e)})),s.insertBefore(r[1],e),s.removeChild(e),xg(t[t.length-1],n)})(s,i,l,n)},_g=Bo,Sg=(e,t)=>{let n;const o=e.dom,r=e.selection;if(!t)return;r.scrollIntoView(t);const s=og(e.getBody(),t);if("false"===o.getContentEditable(s))return o.remove(t),void r.select(s);let i=o.createRng();const a=t.previousSibling;if(Eo(a)){i.setStart(a,a.nodeValue.length);const e=t.nextSibling;Eo(e)&&(a.appendData(e.data),e.parentNode.removeChild(e))}else i.setStartBefore(t),i.setEndBefore(t);const l=o.getParent(t,o.isBlock);o.remove(t),l&&o.isEmpty(l)&&(Qn(un.fromDom(l)),i.setStart(l,0),i.setEnd(l,0),_g(l)||(e=>!!e.getAttribute("data-mce-fragment"))(l)||!(n=(t=>{let n=Qi.fromRangeStart(t);if(n=bd(e.getBody()).next(n),n)return n.toRange()})(i))?o.add(l,o.create("br",{"data-mce-bogus":"1"})):(i=n,o.remove(l))),r.setRng(i)},kg=e=>{const t=e.dom,n=pg(e.selection.getRng());e.selection.setRng(n);const o=t.getParent(n.startContainer,_g);((e,t,n)=>{if(null!==n)return n===e.getParent(t.endContainer,_g)&&Hu(un.fromDom(n),t);return!1})(t,n,o)?qf(e,n,un.fromDom(o)):e.getDoc().execCommand("Delete",!1,null)},Eg=(e,t,n)=>{let o,r,s;const i=e.selection,a=e.dom,l=e.parser,c=n.merge,d=up({validate:!0},e.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,u),r=i.getRng();const h=r.startContainer||(r.parentElement?r.parentElement():null),m=e.getBody();h===m&&i.isCollapsed()&&a.isBlock(m.firstChild)&&((e,t)=>t&&!e.schema.getVoidElements()[t.nodeName])(e,m.firstChild)&&a.isEmpty(m.firstChild)&&(r=a.createRng(),r.setStart(m.firstChild,0),r.setEnd(m.firstChild,0),i.setRng(r)),i.isCollapsed()||kg(e),o=i.getNode();const p={context:o.nodeName.toLowerCase(),data:n.data,insert:!0},f=l.parse(t,p);if(!0===n.paste&&gg(e.schema,f)&&((e,t)=>!!yg(e,t))(a,o))return r=Cg(d,a,i.getRng(),f),i.setRng(r),t;if((e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(f),s=f.lastChild,"mce_marker"===s.attr("id")){const t=s;for(s=s.prev;s;s=s.walk(!0))if(3===s.type||!a.isBlock(s.name)){e.schema.isValidChild(s.parent.name,"span")&&s.parent.insert(t,s,"br"===s.name);break}}if(e._selectionOverrides.showBlockCaretContainer(o),p.invalid){e.selection.setContent(u),o=i.getNode();const n=e.getBody();for(9===o.nodeType?o=s=n:s=o;s!==n;)o=s,s=s.parentNode;t=o===n?n.innerHTML:a.getOuterHTML(o);const r=l.parse(t);for(let e=r;e;e=e.walk())if("mce_marker"===e.attr("id")){e.replace(f);break}const c=f.children(),h=f.parent.name;f.unwrap();const m=Y(c,(t=>!e.schema.isValidChild(h,t.name)));hg(m,e.schema),ag(l.getNodeFilters(),l.getAttributeFilters(),r),t=d.serialize(r),o===n?a.setHTML(n,t):a.setOuterHTML(o,t)}else t=d.serialize(f),((e,t,n)=>{if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&"BR"===o.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}})(e,t,o);var g;return((e,t)=>{const n=e.schema.getTextInlineElements(),o=e.dom;if(t){const t=e.getBody(),r=lp(o);Nt.each(o.select("*[data-mce-fragment]"),(e=>{if(C(n[e.nodeName.toLowerCase()])&&fp(o,e))for(let n=e.parentNode;C(n)&&n!==t&&!gp(o,e,n);n=n.parentNode)if(r.compare(n,e)){o.remove(e,!0);break}}))}})(e,c),Sg(e,a.get("mce_marker")),g=e.getBody(),Nt.each(g.getElementsByTagName("*"),(e=>{e.removeAttribute("data-mce-fragment")})),((e,t)=>{F.from(e.getParent(t,"td,th")).map(un.fromDom).each(Pp)})(a,i.getStart()),t},Og=e=>e instanceof tp,Tg=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),!0!==n&&(e=>{Lm(e)&&Td(e.getBody()).each((t=>{const n=t.getNode(),o=_o(n)?Td(n).getOr(t):t;e.selection.setRng(o.toRange())}))})(e)},Ag=(e,t,n)=>F.from(e.getBody()).map((o=>Og(t)?((e,t,n,o)=>{ag(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const r=up({validate:!1},e.schema).serialize(n),s=lr(un.fromDom(t))?r:Nt.trim(r);return Tg(e,s,o.no_selection),{content:n,html:s}})(e,o,t,n):((e,t,n,o)=>{if(0===n.length||/^\s+$/.test(n)){const r='<br data-mce-bogus="1">';"TABLE"===t.nodeName?n="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+r+"</li>");const s=Wa(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),s.toLowerCase())?(n=r,n=e.dom.createHTML(s,qa(e),n)):n||(n=r),Tg(e,n,o.no_selection),{content:n,html:n}}{"raw"!==o.format&&(n=up({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const r=lr(un.fromDom(t))?n:Nt.trim(n);return Tg(e,r,o.no_selection),{content:r,html:r}}})(e,o,t,n))).getOr({content:t,html:Og(n.content)?"":n.content}),Dg=(e,t)=>((e,t)=>{const n=e.dom;return n.parentNode?Wo(un.fromDom(n.parentNode),(n=>!fn(e,n)&&t(n))):F.none()})(e,t).isSome(),Rg=e=>_(e)?e:B,Mg=(e,t,n)=>{const o=t(e),r=Rg(n);return o.orThunk((()=>r(e)?F.none():((e,t,n)=>{let o=e.dom;const r=Rg(n);for(;o.parentNode;){o=o.parentNode;const e=un.fromDom(o),n=t(e);if(n.isSome())return n;if(r(e))break}return F.none()})(e,t,r)))},Ng=lu,Pg=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let n=0;n<o.length;n++){const r=o[n];if(fu(r)&&!1===r.inherit&&e.dom.is(t,r.selector))return!0}return!1},Lg=(e,t,n,o,r)=>{const s=e.dom.getRoot();return t!==s&&(t=e.dom.getParent(t,(t=>!!Pg(e,t,n)||(t.parentNode===s||!!Fg(e,t,n,o,!0)))),!!Fg(e,t,n,o,r))},Bg=(e,t,n)=>!(!gu(n)||!Ng(t,n.inline))||(!(!pu(n)||!Ng(t,n.block))||!!fu(n)&&(vo(t)&&e.is(t,n.selector))),Ig=(e,t,n,o,r,s)=>{const i=n[o];if(_(n.onmatch))return n.onmatch(t,n,o);if(i)if(x(i.length)){for(const a in i)if(Se(i,a)){const l="attributes"===o?e.getAttrib(t,a):du(e,t,a),c=au(i[a],s),d=w(l)||Ye(l);if(d&&w(c))continue;if(r&&d&&!n.exact)return!1;if((!r||n.exact)&&!Ng(l,cu(c,a)))return!1}}else for(let n=0;n<i.length;n++)if("attributes"===o?e.getAttrib(t,i[n]):du(e,t,i[n]))return!0;return!0},Fg=(e,t,n,o,r)=>{const s=e.formatter.get(n),i=e.dom;if(s&&t)for(let n=0;n<s.length;n++){const a=s[n];if(Bg(e.dom,t,a)&&Ig(i,t,a,"attributes",r,o)&&Ig(i,t,a,"styles",r,o)){const n=a.classes;if(n)for(let r=0;r<n.length;r++)if(!e.dom.hasClass(t,au(n[r],o)))return;return a}}},zg=(e,t,n,o,r)=>{if(o)return Lg(e,o,t,n,r);if(o=e.selection.getNode(),Lg(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!Lg(e,s,t,n,r))},jg=(e,t)=>{const n=t=>fn(t,un.fromDom(e.getBody()));return F.from(e.selection.getStart(!0)).bind((o=>Mg(un.fromDom(o),(n=>he(t,(t=>((t,n)=>Fg(e,t.dom,n)?F.some(n):F.none())(n,t)))),n))).getOrNull()},Hg=(e,t,n)=>J(n,((n,o)=>{const r=((e,t)=>U(e.formatter.get(t),(e=>{const t=e=>e.length>1&&"%"===e.charAt(0);return U(["styles","attributes"],(n=>_e(e,n).exists((e=>{const n=b(e)?e:Ce(e);return U(n,t)}))))})))(e,o);return e.formatter.matchNode(t,o,{},r)?n.concat([o]):n}),[]),Vg=hr,$g="_mce_caret",Ug=e=>(e=>{const t=[];for(;e;){if(3===e.nodeType&&e.nodeValue!==Vg||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t})(e).length>0,Wg=e=>{if(e){const t=new Jo(e,e);for(e=t.current();e;e=t.next())if(Eo(e))return e}return null},qg=e=>{const t=un.fromTag("span");return qt(t,{id:$g,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Xn(t,un.fromText(Vg)),t},Kg=(e,t,n=!0)=>{const o=e.dom,r=e.selection;if(Ug(t))Ef(e,!1,un.fromDom(t),n);else{const e=r.getRng(),n=o.getParent(t,o.isBlock),s=e.startContainer,i=e.startOffset,a=e.endContainer,l=e.endOffset,c=(e=>{const t=Wg(e);return t&&t.nodeValue.charAt(0)===Vg&&t.deleteData(0,1),t})(t);o.remove(t,!0),s===c&&i>0&&e.setStart(c,i-1),a===c&&l>0&&e.setEnd(c,l-1),n&&o.isEmpty(n)&&Np(un.fromDom(n)),r.setRng(e)}},Gg=(e,t,n=!0)=>{const o=e.dom,r=e.selection;if(t)Kg(e,t,n);else if(!(t=Md(e.getBody(),r.getStart())))for(;t=o.get($g);)Kg(e,t,!1)},Yg=(e,t)=>(e.appendChild(t),t),Xg=(e,t)=>{const n=X(e,((e,t)=>Yg(e,t.cloneNode(!1))),t);return Yg(n,n.ownerDocument.createTextNode(Vg))},Jg=(e,t,n,o)=>{const r=e.dom,s=e.selection;let i,a,l;const c=[],d=s.getRng(),u=d.startContainer,h=d.startOffset;for(a=u,3===u.nodeType&&(h!==u.nodeValue.length&&(i=!0),a=a.parentNode);a;){if(Fg(e,a,t,n,o)){l=a;break}a.nextSibling&&(i=!0),c.push(a),a=a.parentNode}if(l)if(i){const r=s.getBookmark();d.collapse(!0);let i=Mu(e,d,e.formatter.get(t),!0);i=Hh(i),e.formatter.remove(t,n,i,o),s.moveToBookmark(r)}else{const i=Md(e.getBody(),l),a=qg(!1).dom;((e,t,n)=>{const o=e.dom,r=o.getParent(n,M(ru,e));r&&o.isEmpty(r)?n.parentNode.replaceChild(t,n):(Mp(un.fromDom(n)),o.isEmpty(n)?n.parentNode.replaceChild(t,n):o.insertAfter(t,n))})(e,a,null!==i?i:l);const d=((e,t,n,o,r,s)=>{const i=e.formatter,a=e.dom,l=Y(me(i.get()),(e=>e!==o&&!He(e,"removeformat"))),c=Hg(e,n,l);if(Y(c,(t=>!mu(e,t,o))).length>0){const e=n.cloneNode(!1);return a.add(t,e),i.remove(o,r,e,s),a.remove(e),F.some(e)}return F.none()})(e,a,l,t,n,o),u=Xg(c.concat(d.toArray()),a);Kg(e,i,!1),s.setCursorLocation(u,1),r.isEmpty(l)&&r.remove(l)}},Qg=e=>{e.on("mouseup keydown",(t=>{((e,t)=>{const n=e.selection,o=e.getBody();Gg(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Vg||Gg(e,Md(o,n.getStart())),37!==t&&39!==t||Gg(e,Md(o,n.getStart()))})(e,t.keyCode)}))},Zg=(e,t)=>{const n=e.schema.getTextInlineElements();return Se(n,It(t))&&!Rd(t.dom)&&!Co(t.dom)},eb={},tb=De,nb=Te;((e,t)=>{eb[e]||(eb[e]=[]),eb[e].push(t)})("pre",(e=>{const t=e.selection.getRng();let n;const o=e=>r(e.previousSibling)&&-1!==Re(n,e.previousSibling),r=yo(["pre"]);t.collapsed||(n=e.selection.getSelectedBlocks(),nb(tb(tb(n,r),o),(e=>{((e,t)=>{const n=un.fromDom(t),o=vn(n).dom;Zn(n),Jn(un.fromDom(e),[un.fromTag("br",o),un.fromTag("br",o),...kn(n)])})(e.previousSibling,e)})))}));const ob=Nt.each,rb=e=>vo(e)&&!$d(e)&&!Rd(e)&&!Co(e),sb=(e,t)=>{for(let n=e;n;n=n[t]){if(Eo(n)&&Ge(n.data))return e;if(vo(n)&&!$d(n))return n}return e},ib=(e,t,n)=>{const o=lp(e);if(t&&n&&(t=sb(t,"previousSibling"),n=sb(n,"nextSibling"),o.compare(t,n))){for(let e=t.nextSibling;e&&e!==n;){const n=e;e=e.nextSibling,t.appendChild(n)}return e.remove(n),Nt.each(Nt.grep(n.childNodes),(e=>{t.appendChild(e)})),t}return n},ab=(e,t,n,o)=>{if(o&&!1!==t.merge_siblings){const t=ib(e,ou(o),o);ib(e,t,ou(t,!0))}},lb=(e,t,n)=>{ob(e.childNodes,(e=>{rb(e)&&(t(e)&&n(e),e.hasChildNodes()&&lb(e,t,n))}))},cb=(e,t)=>n=>!(!n||!du(e,n,t)),db=(e,t,n)=>o=>{e.setStyle(o,t,n),""===o.getAttribute("style")&&o.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,o)},ub=Sa([{keep:[]},{rename:["name"]},{removed:[]}]),hb=/^(src|href|style)$/,mb=Nt.each,pb=lu,fb=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),gb=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(vo(o)){const e=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>e?e:r]}return Eo(o)&&n&&r>=o.nodeValue.length&&(o=new Jo(o,e.getBody()).next()||o),Eo(o)&&!n&&0===r&&(o=new Jo(o,e.getBody()).prev()||o),o},bb=(e,t)=>{const n=t?"firstChild":"lastChild";if((e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&e[n]){const t=e[n];return"TR"===e.nodeName&&t[n]||t}return e},vb=(e,t,n,o)=>{const r=e.create(n,o);return t.parentNode.insertBefore(r,t),r.appendChild(t),r},yb=(e,t,n,o,r)=>{const s=un.fromDom(t),i=un.fromDom(e.create(o,r)),a=n?Sn(s):_n(s);return Jn(i,a),n?(Kn(s,i),Yn(i,s)):(Gn(s,i),Xn(i,s)),i.dom},xb=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,i=Wa(e);pu(n)&&o===s.getRoot()&&(n.list_block&&pb(t,n.list_block)||q(ue(t.childNodes),(t=>{su(e,i,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=vb(s,t,i),s.setAttribs(r,qa(e))):r=null}))),(e=>fu(e)&&gu(e)&&Pt(_e(e,"mixed"),!0))(n)&&!pb(n.inline,t)||s.remove(t,!0)},wb=(e,t,n,o,r)=>{let s;const i=e.dom;if(!Bg(i,o,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(o,t))return ub.keep();const a=o;if(gu(t)&&"all"===t.remove&&b(t.preserve_attributes)){const e=Y(i.getAttribs(a),(e=>$(t.preserve_attributes,e.name.toLowerCase())));if(i.removeAllAttribs(a),q(e,(e=>i.setAttrib(a,e.name,e.value))),e.length>0)return ub.rename("span")}if("all"!==t.remove){mb(t.styles,((e,o)=>{e=cu(au(e,n),o+""),S(o)&&(o=e,r=null),(t.remove_similar||!r||pb(du(i,r,o),e))&&i.setStyle(a,o,""),s=!0})),s&&""===i.getAttrib(a,"style")&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style")),mb(t.attributes,((e,o)=>{let s;if(e=au(e,n),S(o)&&(o=e,r=null),t.remove_similar||!r||pb(i.getAttrib(r,o),e)){if("class"===o&&(e=i.getAttrib(a,o))&&(s="",q(e.split(/\s+/),(e=>{/mce\-\w+/.test(e)&&(s+=(s?" ":"")+e)})),s))return void i.setAttrib(a,o,s);if(hb.test(o)&&a.removeAttribute("data-mce-"+o),"style"===o&&yo(["li"])(a)&&"none"===i.getStyle(a,"list-style-type"))return a.removeAttribute(o),void i.setStyle(a,"list-style-type","none");"class"===o&&a.removeAttribute("className"),a.removeAttribute(o)}})),mb(t.classes,(e=>{e=au(e,n),r&&!i.hasClass(r,e)||i.removeClass(a,e)}));const e=i.getAttribs(a);for(let t=0;t<e.length;t++){const n=e[t].nodeName;if(0!==n.indexOf("_")&&0!==n.indexOf("data-"))return ub.keep()}}return"none"!==t.remove?(xb(e,a,t),ub.removed()):ub.keep()},Cb=(e,t,n,o,r)=>wb(e,t,n,o,r).fold(B,(t=>(e.dom.rename(o,t),!0)),I),_b=(e,t,n,o)=>wb(e,t,n,o,o).fold(A(o),(t=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,t))),A(null)),Sb=(e,t,n,o,r)=>{const s=e.formatter.get(t),i=s[0];let a=!0;const l=e.dom,c=e.selection,d=o=>{const a=((e,t,n,o,r)=>{let s;return q(hu(e.dom,t.parentNode).reverse(),(t=>{if(!s&&"_start"!==t.id&&"_end"!==t.id){const i=Fg(e,t,n,o,r);i&&!1!==i.split&&(s=t)}})),s})(e,o,t,n,r);return((e,t,n,o,r,s,i,a)=>{let l,c,d;const u=e.dom;if(n){const h=n.parentNode;for(let n=o.parentNode;n&&n!==h;n=n.parentNode){l=u.clone(n,!1);for(let n=0;n<t.length&&(l=_b(e,t[n],a,l),null!==l);n++);l&&(c&&l.appendChild(c),d||(d=l),c=l)}!s||i.mixed&&u.isBlock(n)||(o=u.split(n,o)),c&&(r.parentNode.insertBefore(c,r),d.appendChild(r),gu(i)&&ab(u,i,0,c))}return o})(e,s,a,o,o,!0,i,n)},u=t=>U(s,(o=>Cb(e,o,n,t,t))),h=t=>{let n=!0,o=!1;vo(t)&&l.getContentEditable(t)&&(n=a,a="true"===l.getContentEditable(t),o=!0);const r=ue(t.childNodes);if(a&&!o){const e=u(t)||U(s,(e=>Bg(l,t,e))),n=t.parentNode;!e&&C(n)&&bu(i)&&u(n)}if(i.deep&&r.length){for(let e=0;e<r.length;e++)h(r[e]);o&&(a=n)}q(["underline","line-through","overline"],(n=>{vo(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&uu(l,t.parentNode)===n&&Cb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,t)}))},m=e=>{const t=l.get(e?"_start":"_end");let n=t[e?"firstChild":"lastChild"];return(e=>$d(e)&&vo(e)&&("_start"===e.id||"_end"===e.id))(n)&&(n=n[e?"firstChild":"lastChild"]),Eo(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),l.remove(t,!0),n},p=t=>{let n,o,r=Mu(e,t,s,t.collapsed);if(i.split){if(r=Hh(r),n=gb(e,r,!0),o=gb(e,r),n!==o){if(n=bb(n,!0),o=bb(o,!1),fb(l,n,o)){const e=F.from(n.firstChild).getOr(n);return d(yb(l,e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(fb(l,o,n)){const e=F.from(o.lastChild).getOr(o);return d(yb(l,e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}n=vb(l,n,"span",{id:"_start","data-mce-type":"bookmark"}),o=vb(l,o,"span",{id:"_end","data-mce-type":"bookmark"});const e=l.createRng();e.setStartAfter(n),e.setEndBefore(o),Nu(l,e,(e=>{q(e,(e=>{$d(e)||$d(e.parentNode)||d(e)}))})),d(n),d(o),n=m(!0),o=m()}else n=o=d(n);r.startContainer=n.parentNode?n.parentNode:n,r.startOffset=l.nodeIndex(n),r.endContainer=o.parentNode?o.parentNode:o,r.endOffset=l.nodeIndex(o)+1}Nu(l,r,(e=>{q(e,h)}))};if(o){if(tu(o)){const e=l.createRng();e.setStartBefore(o),e.setEndAfter(o),p(e)}else p(o);rh(e,t,o,n)}else if("false"!==l.getContentEditable(c.getNode()))c.isCollapsed()&&gu(i)&&!Iu(e).length?Jg(e,t,n,r):(Wu(c,!0,(()=>{Uu(e,p)})),gu(i)&&zg(e,t,n,c.getStart())&&nu(l,c,c.getRng()),e.nodeChanged()),rh(e,t,o,n);else{o=c.getNode();for(let t=0;t<s.length&&(!s[t].ceFalseOverride||!Cb(e,s[t],n,o,o));t++);rh(e,t,o,n)}},kb=Nt.each,Eb=(e,t,n,o)=>{kb(t,(t=>{gu(t)&&kb(e.dom.select(t.inline,o),(o=>{rb(o)&&Cb(e,t,n,o,t.exact?o:null)})),((e,t,n)=>{if(t.clear_child_styles){const o=t.links?"*:not(a)":"*";ob(e.select(o,n),(n=>{rb(n)&&ob(t.styles,((t,o)=>{e.setStyle(n,o,"")}))}))}})(e.dom,t,o)}))},Ob=Nt.each,Tb=e=>vo(e)&&!$d(e)&&!Rd(e)&&!Co(e),Ab=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],i=!o&&e.selection.isCollapsed(),a=e.dom,l=e.selection,c=(e,t=s)=>{if(_(t.onformat)&&t.onformat(e,t,n,o),Ob(t.styles,((t,o)=>{a.setStyle(e,o,au(t,n))})),t.styles){const t=a.getAttrib(e,"style");t&&a.setAttrib(e,"data-mce-style",t)}Ob(t.attributes,((t,o)=>{a.setAttrib(e,o,au(t,n))})),Ob(t.classes,(t=>{t=au(t,n),a.hasClass(e,t)||a.addClass(e,t)}))},d=(e,t)=>{let n=!1;return Ob(e,(e=>!!fu(e)&&(C(e.collapsed)&&e.collapsed!==i?void 0:a.is(t,e.selector)&&!Rd(t)?(c(t,e),n=!0,!1):void 0))),n},u=e=>{if(p(e)){const t=a.create(e);return c(t),t}return null},h=(o,i,a)=>{const l=[];let h=!0;const m=s.inline||s.block,p=u(m);Nu(o,i,(i=>{let u;const f=i=>{let g=!1,b=h;const v=i.nodeName.toLowerCase(),y=i.parentNode,x=y.nodeName.toLowerCase();if(vo(i)&&o.getContentEditable(i)&&(b=h,h="true"===o.getContentEditable(i),g=!0),Mo(i)&&!((e,t,n,o)=>{if(Al(e)&&gu(t)){const t=Ss(e.schema),r=Dg(un.fromDom(n),(e=>Rd(e.dom)));return ke(t,o)&&Xr(un.fromDom(n.parentNode),!1)&&!r}return!1})(e,s,i,x))return u=null,void(pu(s)&&o.remove(i));if(pu(s)&&s.wrapper&&Fg(e,i,t,n))u=null;else{if(h&&!g&&pu(s)&&!s.wrapper&&ru(e,v)&&su(e,x,m)){const e=o.rename(i,m);return c(e),l.push(e),void(u=null)}if(fu(s)){let e=d(r,i);if(!e&&C(y)&&bu(s)&&(e=d(r,y)),!gu(s)||e)return void(u=null)}!h||g||!su(e,m,v)||!su(e,x,m)||!a&&Eo(i)&&mr(i.data)||Rd(i)||gu(s)&&o.isBlock(i)?(u=null,q(ue(i.childNodes),f),g&&(h=b),u=null):(u||(u=o.clone(p,!1),i.parentNode.insertBefore(u,i),l.push(u)),u.appendChild(i))}};q(i,f)})),!0===s.links&&q(l,(e=>{const t=e=>{"A"===e.nodeName&&c(e,s),q(ue(e.childNodes),t)};t(e)})),q(l,(i=>{const a=(e=>{let t=0;return q(e.childNodes,(e=>{(e=>C(e)&&Eo(e)&&0===e.length)(e)||$d(e)||t++})),t})(i);!(l.length>1)&&o.isBlock(i)||0!==a?(gu(s)||pu(s)&&s.wrapper)&&(s.exact||1!==a||(i=(e=>{const t=Z(e.childNodes,Tb).filter((e=>Bg(o,e,s)));return t.map((t=>{const n=o.clone(t,!1);return c(n),o.replace(n,e,!0),o.remove(t,!0),n})).getOr(e)})(i)),Eb(e,r,n,i),((e,t,n,o,r)=>{Fg(e,r.parentNode,n,o)&&Cb(e,t,o,r)||t.merge_with_parents&&e.dom.getParent(r.parentNode,(s=>{if(Fg(e,s,n,o))return Cb(e,t,o,r),!0}))})(e,s,t,n,i),((e,t,n,o)=>{t.styles&&t.styles.backgroundColor&&lb(o,cb(e,"fontSize"),db(e,"backgroundColor",au(t.styles.backgroundColor,n)))})(o,s,n,i),((e,t,n,o)=>{const r=t=>{if(1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType){const n=uu(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Nt.walk(o,r,"childNodes"),r(o))})(o,s,0,i),((e,t,n,o)=>{!gu(t)||"sub"!==t.inline&&"sup"!==t.inline||(lb(o,cb(e,"fontSize"),db(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",o),!0))})(o,s,0,i),ab(o,s,0,i)):o.remove(i,!0)}))};if("false"!==a.getContentEditable(l.getNode())){if(s){if(o)if(tu(o)){if(!d(r,o)){const t=a.createRng();t.setStartBefore(o),t.setEndAfter(o),h(a,Mu(e,t,r),!0)}}else h(a,o,!0);else i&&gu(s)&&!Iu(e).length?((e,t,n)=>{let o,r;const s=e.selection,i=s.getRng();let a=i.startOffset;const l=i.startContainer.nodeValue;o=Md(e.getBody(),s.getStart()),o&&(r=Wg(o));const c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&a>0&&a<l.length&&c.test(l.charAt(a))&&c.test(l.charAt(a-1))){const o=s.getBookmark();i.collapse(!0);let r=Mu(e,i,e.formatter.get(t));r=Hh(r),e.formatter.apply(t,n,r),s.moveToBookmark(o)}else o&&r.nodeValue===Vg||(d=e.getDoc(),u=qg(!0).dom,o=d.importNode(u,!0),r=o.firstChild,i.insertNode(o),a=1),e.formatter.apply(t,n,o),s.setCursorLocation(r,a);var d,u})(e,t,n):(l.setRng(pg(l.getRng())),Wu(l,!0,(()=>{Uu(e,((t,n)=>{const o=n?t:Mu(e,t,r);h(a,o,!1)}))})),nu(a,l,l.getRng()),e.nodeChanged());((e,t)=>{nb(eb[e],(e=>{e(t)}))})(t,e)}oh(e,t,o,n)}else{o=l.getNode();for(let e=0,t=r.length;e<t;e++){const t=r[e];if(t.ceFalseOverride&&fu(t)&&a.is(o,t.selector)){c(o,t);break}}oh(e,t,o,n)}},Db=e=>Se(e,"vars"),Rb=e=>e.selection.getStart(),Mb=(e,t,n,o,r)=>Q(t,(t=>{const s=e.formatter.matchNode(t,n,null!=r?r:{},o);return!x(s)}),(t=>!!Pg(e,t,n)||!o&&C(e.formatter.matchNode(t,n,r,!0)))),Nb=(e,t)=>{const n=null!=t?t:Rb(e);return Y(hu(e.dom,n),(e=>vo(e)&&!Co(e)))},Pb=(e,t,n)=>{const o=Nb(e,t);fe(n,((n,r)=>{const s=n=>{const s=Mb(e,o,r,n.similar,Db(n)?n.vars:void 0),i=s.isSome();if(n.state.get()!==i){n.state.set(i);const e=s.getOr(t);Db(n)?n.callback(i,{node:e,format:r,parents:o}):q(n.callbacks,(t=>t(i,{node:e,format:r,parents:o})))}};q([n.withSimilar,n.withoutSimilar],s),q(n.withVars,s)}))},Lb=(e,t,n,o,r,s)=>(null===t.get()&&((e,t)=>{e.set({}),t.on("NodeChange",(n=>{Pb(t,n.element,e.get())})),t.on("FormatApply FormatRemove",(n=>{const o=F.from(n.node).map((e=>tu(e)?e:e.startContainer)).bind((e=>vo(e)?F.some(e):F.from(e.parentElement))).getOrThunk((()=>Rb(t)));Pb(t,o,e.get())}))})(t,e),((e,t,n,o,r,s)=>{const i=t.get();q(n.split(","),(t=>{const n=_e(i,t).getOrThunk((()=>{const e={withSimilar:{state:Ys(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ys(!1),similar:!1,callbacks:[]},withVars:[]};return i[t]=e,e})),a=()=>{const n=Nb(e);return Mb(e,n,t,r,s).isSome()};if(x(s)){const e=r?n.withSimilar:n.withoutSimilar;e.callbacks.push(o),1===e.callbacks.length&&e.state.set(a())}else n.withVars.push({state:Ys(a()),similar:r,vars:s,callback:o})})),t.set(i)})(e,t,n,o,r,s),{unbind:()=>((e,t,n)=>{const o=e.get();q(t.split(","),(e=>_e(o,e).each((t=>{o[e]={withSimilar:{...t.withSimilar,callbacks:Y(t.withSimilar.callbacks,(e=>e!==n))},withoutSimilar:{...t.withoutSimilar,callbacks:Y(t.withoutSimilar.callbacks,(e=>e!==n))},withVars:Y(t.withVars,(e=>e.callback!==n))}})))),e.set(o)})(t,n,o)});var Bb=Object.hasOwnProperty,Ib=Object.setPrototypeOf,Fb=Object.isFrozen,zb=Object.getPrototypeOf,jb=Object.getOwnPropertyDescriptor,Hb=Object.freeze,Vb=Object.seal,$b=Object.create,Ub="undefined"!=typeof Reflect&&Reflect,Wb=Ub.apply,qb=Ub.construct;Wb||(Wb=function(e,t,n){return e.apply(t,n)}),Hb||(Hb=function(e){return e}),Vb||(Vb=function(e){return e}),qb||(qb=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var Kb,Gb=rv(Array.prototype.forEach),Yb=rv(Array.prototype.pop),Xb=rv(Array.prototype.push),Jb=rv(String.prototype.toLowerCase),Qb=rv(String.prototype.match),Zb=rv(String.prototype.replace),ev=rv(String.prototype.indexOf),tv=rv(String.prototype.trim),nv=rv(RegExp.prototype.test),ov=(Kb=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return qb(Kb,t)});function rv(e){return function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Wb(e,t,o)}}function sv(e,t){Ib&&Ib(e,null);for(var n=t.length;n--;){var o=t[n];if("string"==typeof o){var r=Jb(o);r!==o&&(Fb(t)||(t[n]=r),o=r)}e[o]=!0}return e}function iv(e){var t=$b(null),n=void 0;for(n in e)Wb(Bb,e,[n])&&(t[n]=e[n]);return t}function av(e,t){for(;null!==e;){var n=jb(e,t);if(n){if(n.get)return rv(n.get);if("function"==typeof n.value)return rv(n.value)}e=zb(e)}return function(e){return console.warn("fallback value for",e),null}}var lv=Hb(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cv=Hb(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),dv=Hb(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uv=Hb(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hv=Hb(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mv=Hb(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),pv=Hb(["#text"]),fv=Hb(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),gv=Hb(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),bv=Hb(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vv=Hb(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yv=Vb(/\{\{[\s\S]*|[\s\S]*\}\}/gm),xv=Vb(/<%[\s\S]*|[\s\S]*%>/gm),wv=Vb(/^data-[\-\w.\u00B7-\uFFFF]/),Cv=Vb(/^aria-[\-\w]+$/),_v=Vb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Sv=Vb(/^(?:\w+script|data):/i),kv=Vb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ev=Vb(/^html$/i),Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Tv(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Av=function(){return"undefined"==typeof window?null:window},Dv=function(e,t){if("object"!==(void 0===e?"undefined":Ov(e))||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(n=t.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};var Rv=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Av(),n=function(t){return e(t)};if(n.version="2.3.6",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var o=t.document,r=t.document,s=t.DocumentFragment,i=t.HTMLTemplateElement,a=t.Node,l=t.Element,c=t.NodeFilter,d=t.NamedNodeMap,u=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,h=t.HTMLFormElement,m=t.DOMParser,p=t.trustedTypes,f=l.prototype,g=av(f,"cloneNode"),b=av(f,"nextSibling"),v=av(f,"childNodes"),y=av(f,"parentNode");if("function"==typeof i){var x=r.createElement("template");x.content&&x.content.ownerDocument&&(r=x.content.ownerDocument)}var w=Dv(p,o),C=w?w.createHTML(""):"",_=r,S=_.implementation,k=_.createNodeIterator,E=_.createDocumentFragment,O=_.getElementsByTagName,T=o.importNode,A={};try{A=iv(r).documentMode?r.documentMode:{}}catch(e){}var D={};n.isSupported="function"==typeof y&&S&&void 0!==S.createHTMLDocument&&9!==A;var R=yv,M=xv,N=wv,P=Cv,L=Sv,B=kv,I=_v,F=null,z=sv({},[].concat(Tv(lv),Tv(cv),Tv(dv),Tv(hv),Tv(pv))),j=null,H=sv({},[].concat(Tv(fv),Tv(gv),Tv(bv),Tv(vv))),V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,U=null,W=!0,q=!0,K=!1,G=!1,Y=!1,X=!1,J=!1,Q=!1,Z=!1,ee=!1,te=!0,ne=!0,oe=!1,re={},se=null,ie=sv({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ae=null,le=sv({},["audio","video","img","source","image","track"]),ce=null,de=sv({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",me="http://www.w3.org/1999/xhtml",pe=me,fe=!1,ge=void 0,be=["application/xhtml+xml","text/html"],ve="text/html",ye=void 0,xe=null,we=r.createElement("form"),Ce=function(e){return e instanceof RegExp||e instanceof Function},_e=function(e){xe&&xe===e||(e&&"object"===(void 0===e?"undefined":Ov(e))||(e={}),e=iv(e),F="ALLOWED_TAGS"in e?sv({},e.ALLOWED_TAGS):z,j="ALLOWED_ATTR"in e?sv({},e.ALLOWED_ATTR):H,ce="ADD_URI_SAFE_ATTR"in e?sv(iv(de),e.ADD_URI_SAFE_ATTR):de,ae="ADD_DATA_URI_TAGS"in e?sv(iv(le),e.ADD_DATA_URI_TAGS):le,se="FORBID_CONTENTS"in e?sv({},e.FORBID_CONTENTS):ie,$="FORBID_TAGS"in e?sv({},e.FORBID_TAGS):{},U="FORBID_ATTR"in e?sv({},e.FORBID_ATTR):{},re="USE_PROFILES"in e&&e.USE_PROFILES,W=!1!==e.ALLOW_ARIA_ATTR,q=!1!==e.ALLOW_DATA_ATTR,K=e.ALLOW_UNKNOWN_PROTOCOLS||!1,G=e.SAFE_FOR_TEMPLATES||!1,Y=e.WHOLE_DOCUMENT||!1,Q=e.RETURN_DOM||!1,Z=e.RETURN_DOM_FRAGMENT||!1,ee=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,te=!1!==e.SANITIZE_DOM,ne=!1!==e.KEEP_CONTENT,oe=e.IN_PLACE||!1,I=e.ALLOWED_URI_REGEXP||I,pe=e.NAMESPACE||me,e.CUSTOM_ELEMENT_HANDLING&&Ce(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ce(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ge=ge=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?ve:e.PARSER_MEDIA_TYPE,ye="application/xhtml+xml"===ge?function(e){return e}:Jb,G&&(q=!1),Z&&(Q=!0),re&&(F=sv({},[].concat(Tv(pv))),j=[],!0===re.html&&(sv(F,lv),sv(j,fv)),!0===re.svg&&(sv(F,cv),sv(j,gv),sv(j,vv)),!0===re.svgFilters&&(sv(F,dv),sv(j,gv),sv(j,vv)),!0===re.mathMl&&(sv(F,hv),sv(j,bv),sv(j,vv))),e.ADD_TAGS&&(F===z&&(F=iv(F)),sv(F,e.ADD_TAGS)),e.ADD_ATTR&&(j===H&&(j=iv(j)),sv(j,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&sv(ce,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(se===ie&&(se=iv(se)),sv(se,e.FORBID_CONTENTS)),ne&&(F["#text"]=!0),Y&&sv(F,["html","head","body"]),F.table&&(sv(F,["tbody"]),delete $.tbody),Hb&&Hb(e),xe=e)},Se=sv({},["mi","mo","mn","ms","mtext"]),ke=sv({},["foreignobject","desc","title","annotation-xml"]),Ee=sv({},["title","style","font","a","script"]),Oe=sv({},cv);sv(Oe,dv),sv(Oe,uv);var Te=sv({},hv);sv(Te,mv);var Ae=function(e){var t=y(e);t&&t.tagName||(t={namespaceURI:me,tagName:"template"});var n=Jb(e.tagName),o=Jb(t.tagName);return e.namespaceURI===he?t.namespaceURI===me?"svg"===n:t.namespaceURI===ue?"svg"===n&&("annotation-xml"===o||Se[o]):Boolean(Oe[n]):e.namespaceURI===ue?t.namespaceURI===me?"math"===n:t.namespaceURI===he?"math"===n&&ke[o]:Boolean(Te[n]):e.namespaceURI===me&&(!(t.namespaceURI===he&&!ke[o])&&(!(t.namespaceURI===ue&&!Se[o])&&(!Te[n]&&(Ee[n]||!Oe[n]))))},De=function(e){Xb(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=C}catch(t){e.remove()}}},Re=function(e,t){try{Xb(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Xb(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!j[e])if(Q||Z)try{De(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Me=function(e){var t=void 0,n=void 0;if(J)e="<remove></remove>"+e;else{var o=Qb(e,/^[\r\n\t ]+/);n=o&&o[0]}"application/xhtml+xml"===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var s=w?w.createHTML(e):e;if(pe===me)try{t=(new m).parseFromString(s,ge)}catch(e){}if(!t||!t.documentElement){t=S.createDocument(pe,"template",null);try{t.documentElement.innerHTML=fe?"":s}catch(e){}}var i=t.body||t.documentElement;return e&&n&&i.insertBefore(r.createTextNode(n),i.childNodes[0]||null),pe===me?O.call(t,Y?"html":"body")[0]:Y?t.documentElement:i},Ne=function(e){return k.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Pe=function(e){return e instanceof h&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},Le=function(e){return"object"===(void 0===a?"undefined":Ov(a))?e instanceof a:e&&"object"===(void 0===e?"undefined":Ov(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Be=function(e,t,o){D[e]&&Gb(D[e],(function(e){e.call(n,t,o,xe)}))},Ie=function(e){var t=void 0;if(Be("beforeSanitizeElements",e,null),Pe(e))return De(e),!0;if(nv(/[\u0080-\uFFFF]/,e.nodeName))return De(e),!0;var o=ye(e.nodeName);if(Be("uponSanitizeElement",e,{tagName:o,allowedTags:F}),e.hasChildNodes()&&!Le(e.firstElementChild)&&(!Le(e.content)||!Le(e.content.firstElementChild))&&nv(/<[/\w]/g,e.innerHTML)&&nv(/<[/\w]/g,e.textContent))return De(e),!0;if("select"===o&&nv(/<template/i,e.innerHTML))return De(e),!0;if(!F[o]||$[o]){if(!$[o]&&ze(o)){if(V.tagNameCheck instanceof RegExp&&nv(V.tagNameCheck,o))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(o))return!1}if(ne&&!se[o]){var r=y(e)||e.parentNode,s=v(e)||e.childNodes;if(s&&r)for(var i=s.length-1;i>=0;--i)r.insertBefore(g(s[i],!0),b(e))}return De(e),!0}return e instanceof l&&!Ae(e)?(De(e),!0):"noscript"!==o&&"noembed"!==o||!nv(/<\/no(script|embed)/i,e.innerHTML)?(G&&3===e.nodeType&&(t=e.textContent,t=Zb(t,R," "),t=Zb(t,M," "),e.textContent!==t&&(Xb(n.removed,{element:e.cloneNode()}),e.textContent=t)),Be("afterSanitizeElements",e,null),!1):(De(e),!0)},Fe=function(e,t,n){if(te&&("id"===t||"name"===t)&&(n in r||n in we))return!1;if(q&&!U[t]&&nv(N,t));else if(W&&nv(P,t));else if(!j[t]||U[t]){if(!(ze(e)&&(V.tagNameCheck instanceof RegExp&&nv(V.tagNameCheck,e)||V.tagNameCheck instanceof Function&&V.tagNameCheck(e))&&(V.attributeNameCheck instanceof RegExp&&nv(V.attributeNameCheck,t)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(t))||"is"===t&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&nv(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(ce[t]);else if(nv(I,Zb(n,B,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==ev(n,"data:")||!ae[e]){if(K&&!nv(L,Zb(n,B,"")));else if(n)return!1}else;return!0},ze=function(e){return e.indexOf("-")>0},je=function(e){var t=void 0,n=void 0,o=void 0,r=void 0;Be("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j};for(r=s.length;r--;){var a=t=s[r],l=a.name,c=a.namespaceURI;n=tv(t.value),o=ye(l);var d=n;if(i.attrName=o,i.attrValue=n,i.keepAttr=!0,i.forceKeepAttr=void 0,Be("uponSanitizeAttribute",e,i),n=i.attrValue,!i.forceKeepAttr)if(i.keepAttr)if(nv(/\/>/i,n))Re(l,e);else{G&&(n=Zb(n,R," "),n=Zb(n,M," "));var u=ye(e.nodeName);if(Fe(u,o,n)){if(n!==d)try{c?e.setAttributeNS(c,l,n):e.setAttribute(l,n)}catch(t){Re(l,e)}}else Re(l,e)}else Re(l,e)}Be("afterSanitizeAttributes",e,null)}},He=function e(t){var n=void 0,o=Ne(t);for(Be("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)Be("uponSanitizeShadowNode",n,null),Ie(n)||(n.content instanceof s&&e(n.content),je(n));Be("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,r){var i=void 0,l=void 0,c=void 0,d=void 0,u=void 0;if((fe=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Le(e)){if("function"!=typeof e.toString)throw ov("toString is not a function");if("string"!=typeof(e=e.toString()))throw ov("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Ov(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Le(e))return t.toStaticHTML(e.outerHTML)}return e}if(X||_e(r),n.removed=[],"string"==typeof e&&(oe=!1),oe){if(e.nodeName){var h=ye(e.nodeName);if(!F[h]||$[h])throw ov("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof a)1===(l=(i=Me("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?i=l:i.appendChild(l);else{if(!Q&&!G&&!Y&&-1===e.indexOf("<"))return w&&ee?w.createHTML(e):e;if(!(i=Me(e)))return Q?null:ee?C:""}i&&J&&De(i.firstChild);for(var m=Ne(oe?e:i);c=m.nextNode();)3===c.nodeType&&c===d||Ie(c)||(c.content instanceof s&&He(c.content),je(c),d=c);if(d=null,oe)return e;if(Q){if(Z)for(u=E.call(i.ownerDocument);i.firstChild;)u.appendChild(i.firstChild);else u=i;return j.shadowroot&&(u=T.call(o,u,!0)),u}var p=Y?i.outerHTML:i.innerHTML;return Y&&F["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&nv(Ev,i.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+p),G&&(p=Zb(p,R," "),p=Zb(p,M," ")),w&&ee?w.createHTML(p):p},n.setConfig=function(e){_e(e),X=!0},n.clearConfig=function(){xe=null,X=!1},n.isValidAttribute=function(e,t,n){xe||_e({});var o=ye(e),r=ye(t);return Fe(o,r,n)},n.addHook=function(e,t){"function"==typeof t&&(D[e]=D[e]||[],Xb(D[e],t))},n.removeHook=function(e){D[e]&&Yb(D[e])},n.removeHooks=function(e){D[e]&&(D[e]=[])},n.removeAllHooks=function(){D={}},n}();const Mv=(e,t,n)=>{e.addNodeFilter("font",(e=>{q(e,(e=>{const o=t.parse(e.attr("style")),r=e.attr("color"),s=e.attr("face"),i=e.attr("size");r&&(o.color=r),s&&(o["font-family"]=s),i&&(o["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(o)),((e,t)=>{q(t,(t=>{e.attr(t,null)}))})(e,["color","face","size"])}))}))},Nv=(e,t,n)=>{const o=Os();t.convert_fonts_to_spans&&Mv(e,o,Nt.explode(t.font_size_legacy_values)),((e,t,n)=>{e.addNodeFilter("strike",(e=>{const o="html4"!==t.type;q(e,(e=>{if(o)e.name="s";else{const t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}}))}))})(e,n,o)},Pv=e=>{let t;const n=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(t=o[1]),{type:t,data:n[1]}},Lv=(e,t)=>{let n;try{n=atob(t)}catch(e){return F.none()}const o=new Uint8Array(n.length);for(let e=0;e<o.length;e++)o[e]=n.charCodeAt(e);return F.some(new Blob([o],{type:e}))},Bv=e=>{return 0===e.indexOf("blob:")?(e=>new Promise(((t,n)=>{const o=()=>{n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=()=>{200===n.status?t(n.response):o()},n.onerror=o,n.send()}catch(e){o()}})))(e):0===e.indexOf("data:")?(t=e,new Promise((e=>{const{type:n,data:o}=Pv(t);Lv(n,o).fold((()=>e(new Blob([]))),e)}))):null;var t},Iv=e=>new Promise((t=>{const n=new FileReader;n.onloadend=()=>{t(n.result)},n.readAsDataURL(e)}));let Fv=0;const zv=e=>(e||"blobid")+Fv++,jv=(e,t)=>{const n={};return{findAll:(o,r)=>{r||(r=I);const s=Y((e=>e?ue(e.getElementsByTagName("img")):[])(o),(t=>{const n=t.src;return!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===Tt.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&r(t):0===n.indexOf("data:")&&r(t))))})),i=W(s,(e=>{if(void 0!==n[e.src])return new Promise((t=>{n[e.src].then((n=>{if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})}))}));const o=new Promise(((n,o)=>{((e,t,n,o)=>{let r,s;if(0===t.src.indexOf("blob:"))return s=e.getByUri(t.src),void(s?n({image:t,blobInfo:s}):Bv(t.src).then((o=>{Iv(o).then((i=>{r=Pv(i).data,s=e.create(zv(),o,r),e.add(s),n({image:t,blobInfo:s})}))}),(e=>{o(e)})));const{data:i,type:a}=Pv(t.src);r=i,s=e.getByData(r,a),s?n({image:t,blobInfo:s}):Bv(t.src).then((o=>{s=e.create(zv(),o,r),e.add(s),n({image:t,blobInfo:s})}),(e=>{o(e)}))})(t,e,n,o)})).then((e=>(delete n[e.image.src],e))).catch((t=>(delete n[e.src],t)));return n[e.src]=o,o}));return Promise.all(i)}}},Hv=(e,t)=>{const{blob_cache:n}=t,o=e=>{const t=e.attr("src");(e=>e.attr("src")===Tt.transparentSrc||C(e.attr("data-mce-placeholder")))(e)||(e=>C(e.attr("data-mce-bogus")))(e)||(e=>{const t=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return t?F.some({type:t[1],data:decodeURIComponent(t[2])}):F.none()})(t).bind((({type:e,data:t})=>F.from(n.getByData(t,e)).orThunk((()=>Lv(e,t).map((e=>{const o=n.create(zv(),e,t);return n.add(o),o})))))).each((t=>{e.attr("src",t.blobUri())}))};n&&e.addAttributeFilter("src",(e=>q(e,o)))},Vv=Nt.each,$v=Nt.trim,Uv="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Wv={ftp:21,http:80,https:443,mailto:25},qv=["img","video"],Kv=(e,t,n)=>{const o=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t);return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((e,t)=>C(e)?!e:!C(t)||!$(qv,t))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class Gv{constructor(e,t){e=$v(e),this.settings=t||{};const n=this.settings.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const r=0===e.indexOf("//");if(0!==e.indexOf("/")||r||(e=(n&&n.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const t=this.settings.base_uri?this.settings.base_uri.path:new Gv(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)e="//mce_host"+o.toAbsPath(t,e);else{const r=/([^#?]*)([#?]?.*)/.exec(e);e=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(t,r[1])+r[2]}}e=e.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);Vv(Uv,((e,t)=>{let n=s[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[e]=n})),n&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!==o.host||(o.port=n.port),o.host&&"mce_host"!==o.host||(o.host=n.host),o.source=""),r&&(o.protocol="")}static parseDataUri(e){let t;const n=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(t=o[1]),{type:t,data:n[1]}}static isDomSafe(e,t,n={}){if(n.allow_script_urls)return!0;{const o=ps.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Kv(n,o,t)}}static getDocumentBaseUrl(e){let t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t}setPath(e){const t=/^(.*?)\/?(\w+)?$/.exec(e);this.path=t[0],this.directory=t[1],this.file=t[2],this.source="",this.getURI()}toRelative(e){let t;if("./"===e)return e;const n=new Gv(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();return o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r?o:(t=this.toRelPath(this.path,n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),t)}toAbsolute(e,t){const n=new Gv(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const t=Wv[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let n,o,r=0,s="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),a=t.split("/");if(i.length>=a.length)for(n=0,o=i.length;n<o;n++)if(n>=a.length||i[n]!==a[n]){r=n+1;break}if(i.length<a.length)for(n=0,o=a.length;n<o;n++)if(n>=i.length||i[n]!==a[n]){r=n+1;break}if(1===r)return t;for(n=0,o=i.length-(r-1);n<o;n++)s+="../";for(n=r-1,o=a.length;n<o;n++)s+=n!==r-1?"/"+a[n]:a[n];return s}toAbsPath(e,t){let n,o,r=0,s=[];const i=/\/$/.test(t)?"/":"";let a=e.split("/");const l=t.split("/");for(Vv(a,(e=>{e&&s.push(e)})),a=s,n=l.length-1,s=[];n>=0;n--)0!==l[n].length&&"."!==l[n]&&(".."!==l[n]?r>0?r--:s.push(l[n]):r++);return n=a.length-r,o=n<=0?re(s).join("/"):a.slice(0,n).join("/")+"/"+re(s).join("/"),0!==o.indexOf("/")&&(o="/"+o),i&&o.lastIndexOf("/")!==o.length-1&&(o+=i),o}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const Yv=Nt.makeMap,Xv=Nt.each,Jv=Nt.explode,Qv=Nt.extend,Zv={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},ey=Nt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),ty="data-mce-type",ny=(e,t)=>{const n=Rv(),o=e.validate;let r=0;return n.addHook("uponSanitizeElement",((n,s)=>{var i,a;8===n.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(n.nodeValue)&&(n.nodeValue=" "+n.nodeValue);const l=s.tagName;if(1!==n.nodeType||"body"===l)return;const c=un.fromDom(n),d=Yt(c,ty),u=Kt(c,"data-mce-bogus");if(!d&&p(u))return void("all"===u?Zn(c):eo(c));const h=t.getElementRule(l.toLowerCase());if(!o||h){if(s.allowedTags[l]=!0,o&&!d){if(q(null!==(i=h.attributesForced)&&void 0!==i?i:[],(e=>{Wt(c,e.name,"{$uid}"===e.value?"mce_"+r++:e.value)})),q(null!==(a=h.attributesDefault)&&void 0!==a?a:[],(e=>{Yt(c,e.name)||Wt(c,e.name,"{$uid}"===e.value?"mce_"+r++:e.value)})),h.attributesRequired&&!U(h.attributesRequired,(e=>Yt(c,e))))return void eo(c);if(h.removeEmptyAttrs&&(e=>{const t=e.dom.attributes;return null==t||0===t.length})(c))return void eo(c);h.outputName&&h.outputName!==l.toLowerCase()&&xi(c,h.outputName)}}else eo(c)})),n.addHook("uponSanitizeAttribute",((n,r)=>{const s=n.tagName.toLowerCase(),{attrName:i,attrValue:a}=r;r.keepAttr=!o||t.isValid(s,i)||Ve(i,"data-")||Ve(i,"aria-"),i in ey&&Kv(e,a,s)&&(r.keepAttr=!1),r.keepAttr?(r.allowedAttributes[i]=!0,i in t.getBoolAttrs()&&(r.attrValue=i),e.allow_svg_data_urls&&Ve(a,"data:image/svg+xml")&&(r.forceKeepAttr=!0)):!n.hasAttribute(ty)||"id"!==i&&"class"!==i&&"style"!==i||(r.forceKeepAttr=!0)})),n},oy=(e,t,n)=>{const o=e.name,r=o in n&&"title"!==o&&"textarea"!==o,s=t.childNodes;for(let t=0,o=s.length;t<o;t++){const o=s[t],i=new tp(o.nodeName.toLowerCase(),o.nodeType);if(vo(o)){const e=o.attributes;for(let t=0,n=e.length;t<n;t++){const n=e[t];i.attr(n.name,n.value)}}else Eo(o)?(i.value=o.data,r&&(i.raw=!0)):(Ao(o)||Oo(o)||To(o))&&(i.value=o.data);oy(i,o,n),e.append(i)}},ry=(e,t,n,o)=>{const r=n.validate,s=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=Qv(Yv("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=Ss(t),c=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,h=e=>{for(e=e.parent;C(e);){if(e.name in i)return!0;e=e.parent}return!1},m=(t,n)=>{const r=n?t.prev:t.next;return!C(r)&&(t.parent.name in a&&(t.parent!==e||o.isRootContent))};return[e=>{if(3===e.type&&!h(e)){let t=e.value;t=t.replace(c," "),(((e,t)=>e&&(e.name in t||"br"===e.name))(e.prev,a)||m(e,!0))&&(t=t.replace(d,"")),0===t.length?e.remove():e.value=t}},e=>{var n;if(1===e.type){const n=t.getElementRule(e.name);if(r&&n){const r=dg(t,s,i,e);n.paddInEmptyBlock&&r&&(e=>{let n=e;for(;C(n);){if(n.name in l)return dg(t,s,i,n);n=n.parent}return!1})(e)?lg(0,o,a,e):n.removeEmpty&&r?a[e.name]?e.remove():e.unwrap():n.paddEmpty&&(r||(e=>cg(e,"#text")&&e.firstChild.value===dr)(e))&&lg(0,o,a,e)}}else if(3===e.type&&!h(e)){let t=e.value;(a[null===(n=e.next)||void 0===n?void 0:n.name]||m(e,!1))&&(t=t.replace(u,"")),0===t.length?e.remove():e.value=t}}]},sy=(e={},t=Es())=>{const n={},o=[],r={validate:!0,root_name:"body",...e},s=new DOMParser,i=ny(r,t),a=(e,n,o="html")=>{const a="xhtml"===o?"application/xhtml+xml":"text/html",l=Se(t.getSpecialElements(),n.toLowerCase()),c=l?`<${n}>${e}</${n}>`:e,d="xhtml"===o?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${c}</body></html>`:`<body>${c}</body>`,u=s.parseFromString(d,a).body;return i.sanitize(u,((e,t)=>{const n={...Zv};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(r,a)),i.removed=[],l?u.firstChild:u},l=()=>{const e=[];for(const t in n)Se(n,t)&&e.push({name:t,callbacks:n[t]});return e},c={schema:t,addAttributeFilter:(e,t)=>{Xv(Jv(e),(e=>{let n;for(n=0;n<o.length;n++)if(o[n].name===e)return void o[n].callbacks.push(t);o.push({name:e,callbacks:[t]})}))},getAttributeFilters:()=>[].concat(o),addNodeFilter:(e,t)=>{Xv(Jv(e),(e=>{let o=n[e];o||(n[e]=o=[]),o.push(t)}))},getNodeFilters:l,parse:(e,n={})=>{var s;const i=r.validate,c=null!==(s=n.context)&&void 0!==s?s:r.root_name,d=a(e,c,n.format),u=new tp(c,11);oy(u,d,t.getSpecialElements());const[h,m]=ry(u,t,r,n),p=[],f=i?e=>((e,n)=>{const o=e.parent;o&&t.children[e.name]&&!t.isValidChild(o.name,e.name)&&n.push(e)})(e,p):E,g=l(),b={nodes:{},attributes:{}},v=e=>sg(g,o,e,b);if(((e,t,n)=>{const o=[];for(let n=e,r=n;C(n);r=n,n=n.walk())q(t,(e=>e(n))),w(n.parent)&&n!==e?n=r:o.push(n);for(let e=o.length-1;e>=0;e--){const t=o[e];q(n,(e=>e(t)))}})(u,[h,v],[m,f]),p.reverse(),i&&p.length>0)if(n.context){const{pass:e,fail:o}=G(p,(e=>e.parent===u));hg(o,t,v),n.invalid=e.length>0}else hg(p,t,v);const y=((e,t)=>{var n;const o=null!==(n=t.forced_root_block)&&void 0!==n?n:e.forced_root_block;return!1===o?"":!0===o?"p":o})(r,n);return y&&("body"===u.name||n.isRootContent)&&((e,n)=>{const o=Qv(Yv("script,style,head,html,body,title,meta,param"),t.getBlockElements()),s=/^[ \t\r\n]+/,i=/[ \t\r\n]+$/;let a=e.firstChild,l=null;const c=e=>{e&&(a=e.firstChild,a&&3===a.type&&(a.value=a.value.replace(s,"")),a=e.lastChild,a&&3===a.type&&(a.value=a.value.replace(i,"")))};if(t.isValidChild(e.name,n.toLowerCase())){for(;a;){const t=a.next;3===a.type||1===a.type&&"p"!==a.name&&!o[a.name]&&!a.attr(ty)?(l||(l=new tp(n,1),l.attr(r.forced_root_block_attrs),e.insert(l,a)),l.append(a)):(c(l),l=null),a=t}c(l)}})(u,y),n.invalid||ig(b,n),u}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",((e,t,o)=>{const r=Nt.extend({},n.getBlockElements()),s=n.getNonEmptyElements(),i=n.getWhitespaceElements();r.body=1;for(let t=0,a=e.length;t<a;t++){let a=e[t],l=a.parent;if(r[a.parent.name]&&a===l.lastChild){let e=a.prev;for(;e;){const t=e.name;if("span"!==t||"bookmark"!==e.attr("data-mce-type")){"br"===t&&(a=null);break}e=e.prev}if(a&&(a.remove(),dg(n,s,i,l))){const e=n.getElementRule(l.name);e&&(e.removeEmpty?l.remove():e.paddEmpty&&lg(0,o,r,l))}}else{let e=a;for(;l&&l.firstChild===e&&l.lastChild===e&&(e=l,!r[l.name]);)l=l.parent;if(e===l){const e=new tp("#text",3);e.value=dr,a.replace(e)}}}})),e.addAttributeFilter("href",(e=>{let n=e.length;const o=e=>{const t=e?Nt.trim(e):"";return/\b(noopener)\b/g.test(t)?t:(e=>e.split(" ").filter((e=>e.length>0)).concat(["noopener"]).sort().join(" "))(t)};if(!t.allow_unsafe_link_target)for(;n--;){const t=e[n];"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",o(t.attr("rel")))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(e=>{let t,n,o,r,s=e.length;for(;s--;)if(r=e[s],"a"===r.name&&r.firstChild&&!r.attr("href")){o=r.parent,t=r.lastChild;do{n=t.prev,o.insert(t,r),t=n}while(t)}})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(e=>{let t,n,o=e.length;for(;o--;)if(t=e[o],n=t.parent,"ul"===n.name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new tp("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}})),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",(e=>{const t=n.getValidClasses();let o=e.length;for(;o--;){const n=e[o],r=n.attr("class").split(" ");let s="";for(let e=0;e<r.length;e++){const o=r[e];let i=!1,a=t["*"];a&&a[o]&&(i=!0),a=t[n.name],!i&&a&&a[o]&&(i=!0),i&&(s&&(s+=" "),s+=o)}s.length||(s=null),n.attr("class",s)}})),Hv(e,t)})(c,r),((e,t,n)=>{t.inline_styles&&Nv(e,t,n)})(c,r,t),c},iy=(e,t)=>{const n=(e=>Og(e)?up({validate:!1}).serialize(e):e)(e),o=t(n);if(o.isDefaultPrevented())return o;if(Og(e)){if(o.content!==n){const t=sy({validate:!1,forced_root_block:!1}).parse(o.content,{context:e.name});return{...o,content:t}}return{...o,content:e}}return o},ay=(e,t)=>{if(t.no_events)return _a.value(t);{const n=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return n.isDefaultPrevented()?_a.error(ih(e,{content:"",...n}).content):_a.value(n)}},ly=(e,t,n)=>{if(n.no_events)return t;return iy(t,(t=>ih(e,{...n,content:t}))).content},cy=(e,t)=>{if(t.no_events)return _a.value(t);{const n=iy(t.content,(n=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,{...t,content:n})));return n.isDefaultPrevented()?(sh(e,n),_a.error(void 0)):_a.value(n)}},dy=(e,t,n)=>{n.no_events||sh(e,{...n,content:t})},uy=(e,t,n)=>({element:e,width:t,rows:n}),hy=(e,t)=>({element:e,cells:t}),my=(e,t)=>({x:e,y:t}),py=(e,t)=>{const n=parseInt(Kt(e,t),10);return isNaN(n)?1:n},fy=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},gy=e=>J(e,((e,t)=>t.cells.length>e?t.cells.length:e),0),by=(e,t)=>{const n=e.rows;for(let e=0;e<n.length;e++){const o=n[e].cells;for(let n=0;n<o.length;n++)if(fn(o[n],t))return F.some(my(n,e))}return F.none()},vy=(e,t,n,o,r)=>{const s=[],i=e.rows;for(let e=n;e<=r;e++){const n=i[e].cells,r=t<o?n.slice(t,o+1):n.slice(o,t+1);s.push(hy(i[e].element,r))}return s},yy=e=>{const t=uy(vi(e),0,[]);return q(si(e,"tr"),((e,n)=>{q(si(e,"td,th"),((o,r)=>{((e,t,n,o,r)=>{const s=py(r,"rowspan"),i=py(r,"colspan"),a=e.rows;for(let e=n;e<n+s;e++){a[e]||(a[e]=hy(yi(o),[]));for(let o=t;o<t+i;o++)a[e].cells[o]=e===n&&o===t?r:vi(r)}})(t,((e,t,n)=>{for(;fy(e,t,n);)t++;return t})(t,r,n),n,e,o)}))})),uy(t.element,gy(t.rows),t.rows)},xy=e=>((e,t)=>{const n=vi(e.element),o=un.fromTag("tbody");return Jn(o,t),Xn(n,o),n})(e,(e=>W(e.rows,(e=>{const t=W(e.cells,(e=>{const t=yi(e);return Xt(t,"colspan"),Xt(t,"rowspan"),t})),n=vi(e.element);return Jn(n,t),n})))(e)),wy=(e,t,n)=>by(e,t).bind((t=>by(e,n).map((n=>((e,t,n)=>{const o=t.x,r=t.y,s=n.x,i=n.y,a=r<i?vy(e,o,r,s,i):vy(e,o,i,s,r);return uy(e.element,gy(a),a)})(e,t,n))))),Cy=(e,t)=>Z(e,(e=>"li"===It(e)&&Hu(e,t))).fold(A([]),(t=>(e=>Z(e,(e=>"ul"===It(e)||"ol"===It(e))))(e).map((e=>{const t=un.fromTag(It(e)),n=xe(Wn(e),((e,t)=>Ve(t,"list-style")));return Hn(t,n),[un.fromTag("li"),t]})).getOr([]))),_y=(e,t)=>{const n=un.fromDom(t.commonAncestorContainer),o=Ip(n,e),r=Y(o,(e=>tr(e)||Zo(e))),s=Cy(o,t),i=r.concat(s.length?s:(e=>sr(e)?xn(e).filter(rr).fold(A([]),(t=>[e,t])):rr(e)?[e]:[])(n));return W(i,vi)},Sy=()=>Eh([]),ky=(e,t)=>((e,t)=>{const n=J(t,((e,t)=>(Xn(t,e),t)),e);return t.length>0?Eh([n]):n})(un.fromDom(t.cloneContents()),_y(e,t)),Ey=(e,t)=>((e,t)=>qo(t,"table",M(fn,e)))(e,t[0]).bind((e=>{const n=t[0],o=t[t.length-1],r=yy(e);return wy(r,n,o).map((e=>Eh([xy(e)])))})).getOrThunk(Sy),Oy=(e,t)=>{const n=Bu(t,e);return n.length>0?Ey(e,n):((e,t)=>t.length>0&&t[0].collapsed?Sy():ky(e,t[0]))(e,t)},Ty=(e,t)=>t>=0&&t<e.length&&qd(e.charAt(t)),Ay=e=>pr(e.innerText),Dy=(e,t)=>{if("text"===t.format)return(e=>F.from(e.selection.getRng()).map((t=>{const n=F.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=(e=>e.map((e=>e.nodeName)).getOr("div").toLowerCase())(n),s=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),i=Ay(s),a=pr(s.textContent);if(e.dom.remove(s),Ty(a,0)||Ty(a,a.length-1)){const e=n.getOr(o),t=Ay(e),r=t.indexOf(i);return-1===r?i:(Ty(t,r-1)?" ":"")+i+(Ty(t,r+i.length)?" ":"")}return i})).getOr(""))(e);{const n=((e,t)=>{const n=e.selection.getRng(),o=e.dom.create("body"),r=e.selection.getSel(),s=$m(e,Pu(r)),i=t.contextual?Oy(un.fromDom(e.getBody()),s).dom:n.cloneContents();return i&&o.appendChild(i),e.selection.serializer.serialize(o,t)})(e,t);return"tree"===t.format?n:e.selection.isCollapsed()?"":n}},Ry=e=>vo(e)?e.outerHTML:Eo(e)?ps.encodeRaw(e.data,!1):Ao(e)?"\x3c!--"+e.data+"--\x3e":"",My=(e,t,n)=>{const o=(e=>{let t;const n=document.createElement("div"),o=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)o.appendChild(t);return o})(t);if(e.hasChildNodes()&&n<e.childNodes.length){const t=e.childNodes[n];t.parentNode.insertBefore(o,t)}else e.appendChild(o)},Ny=(e,t)=>(((e,t)=>{let n=0;q(e,(e=>{0===e[0]?n++:1===e[0]?(My(t,e[1],n),n++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];n.parentNode.removeChild(n)}})(t,n)}))})(((e,t)=>{const n=e.length+t.length+2,o=new Array(n),r=new Array(n),s=(n,o,r,i,l)=>{const c=a(n,o,r,i);if(null===c||c.start===o&&c.diag===o-i||c.end===n&&c.diag===n-r){let s=n,a=r;for(;s<o||a<i;)s<o&&a<i&&e[s]===t[a]?(l.push([0,e[s]]),++s,++a):o-n>i-r?(l.push([2,e[s]]),++s):(l.push([1,t[a]]),++a)}else{s(n,c.start,r,c.start-c.diag,l);for(let t=c.start;t<c.end;++t)l.push([0,e[t]]);s(c.end,o,c.end-c.diag,i,l)}},i=(n,o,r,s)=>{let i=n;for(;i-o<s&&i<r&&e[i]===t[i-o];)++i;return((e,t,n)=>({start:e,end:t,diag:n}))(n,i,o)},a=(n,s,a,l)=>{const c=s-n,d=l-a;if(0===c||0===d)return null;const u=c-d,h=d+c,m=(h%2==0?h:h+1)/2;let p,f,g,b,v;for(o[1+m]=n,r[1+m]=s+1,p=0;p<=m;++p){for(f=-p;f<=p;f+=2){for(g=f+m,f===-p||f!==p&&o[g-1]<o[g+1]?o[g]=o[g+1]:o[g]=o[g-1]+1,b=o[g],v=b-n+a-f;b<s&&v<l&&e[b]===t[v];)o[g]=++b,++v;if(u%2!=0&&u-p<=f&&f<=u+p&&r[g-u]<=o[g])return i(r[g-u],f+n-a,s,l)}for(f=u-p;f<=u+p;f+=2){for(g=f+m-u,f===u-p||f!==u+p&&r[g+1]<=r[g-1]?r[g]=r[g+1]-1:r[g]=r[g-1],b=r[g]-1,v=b-n+a-f;b>=n&&v>=a&&e[b]===t[v];)r[g]=b--,v--;if(u%2==0&&-p<=f&&f<=p&&r[g]<=o[g+u])return i(r[g],f+n-a,s,l)}}},l=[];return s(0,e.length,0,t.length,l),l})(W(ue(t.childNodes),Ry),e),t),t),Py=Le((()=>document.implementation.createHTMLDocument("undo"))),Ly=e=>{const t=(n=e.getBody(),Y(W(ue(n.childNodes),Ry),(e=>e.length>0)));var n;const o=ne(t,(t=>{const n=rp(e.serializer,t);return n.length>0?[n]:[]})),r=o.join("");return(e=>-1!==e.indexOf("</iframe>"))(r)?(e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}))(o):(e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}))(r)},By=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?Ny(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!C(o)||!Nd(o)||!o.isFakeCaret}),e.selection.moveToBookmark(o)},Iy=e=>"fragmented"===e.type?e.fragments.join(""):e.content,Fy=e=>{const t=un.fromTag("body",Py());return no(t,Iy(e)),q(si(t,"*[data-mce-bogus]"),eo),to(t)},zy=(e,t)=>!(!e||!t)&&(!!((e,t)=>Iy(e)===Iy(t))(e,t)||((e,t)=>Fy(e)===Fy(t))(e,t)),jy=e=>0===e.get(),Hy=(e,t,n)=>{jy(n)&&(e.typing=t)},Vy=(e,t)=>{e.typing&&(Hy(e,!1,t),e.add())},$y=e=>({init:{bindEvents:E},undoManager:{beforeChange:(t,n)=>((e,t,n)=>{jy(t)&&n.set(xa(e.selection))})(e,t,n),add:(t,n,o,r,s,i)=>((e,t,n,o,r,s,i)=>{const a=Ly(e);if(s=s||{},s=Nt.extend(s,a),!1===jy(o)||e.removed)return null;const l=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:s,lastLevel:l,originalEvent:i}).isDefaultPrevented())return null;if(l&&zy(l,s))return null;t.data[n.get()]&&r.get().each((e=>{t.data[n.get()].beforeBookmark=e}));const c=Bl(e);if(c&&t.data.length>c){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,n.set(t.data.length)}s.bookmark=xa(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(s),n.set(t.data.length-1);const d={level:s,lastLevel:l,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),s})(e,t,n,o,r,s,i),undo:(t,n,o)=>((e,t,n,o)=>{let r;return t.typing&&(t.add(),t.typing=!1,Hy(t,!1,n)),o.get()>0&&(o.set(o.get()-1),r=t.data[o.get()],By(e,r,!0),e.setDirty(!0),e.dispatch("Undo",{level:r})),r})(e,t,n,o),redo:(t,n)=>((e,t,n)=>{let o;return t.get()<n.length-1&&(t.set(t.get()+1),o=n[t.get()],By(e,o,!1),e.setDirty(!0),e.dispatch("Redo",{level:o})),o})(e,t,n),clear:(t,n)=>((e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,n),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(t,n)=>((e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!zy(Ly(e),t.data[0]))(e,t,n),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,n)=>((e,t,n)=>(Vy(e,t),e.beforeChange(),e.ignore(n),e.add()))(e,t,n),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,n,o,r)=>((e,t,n,o,r)=>{if(t.transact(o)){const o=t.data[n.get()].bookmark,s=t.data[n.get()-1];By(e,s,!0),t.transact(r)&&(t.data[n.get()-1].beforeBookmark=o)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>zg(e,t,n,o,r),matchAll:(t,n)=>((e,t,n)=>{const o=[],r={},s=e.selection.getStart();return e.dom.getParent(s,(s=>{for(let i=0;i<t.length;i++){const a=t[i];!r[a]&&Fg(e,s,a,n)&&(r[a]=!0,o.push(a))}}),e.dom.getRoot()),o})(e,t,n),matchNode:(t,n,o,r)=>Fg(e,t,n,o,r),canApply:t=>((e,t)=>{const n=e.formatter.get(t),o=e.dom;if(n){const t=e.selection.getStart(),r=hu(o,t);for(let e=n.length-1;e>=0;e--){const t=n[e];if(!fu(t))return!0;for(let e=r.length-1;e>=0;e--)if(o.is(r[e],t.selector))return!0}}return!1})(e,t),closest:t=>jg(e,t),apply:(t,n,o)=>Ab(e,t,n,o),remove:(t,n,o,r)=>Sb(e,t,n,o,r),toggle:(t,n,o)=>((e,t,n,o)=>{const r=e.formatter.get(t);!zg(e,t,n,o)||"toggle"in r[0]&&!r[0].toggle?Ab(e,t,n,o):Sb(e,t,n,o)})(e,t,n,o),formatChanged:(t,n,o,r,s)=>Lb(e,t,n,o,r,s)},editor:{getContent:t=>((e,t)=>F.from(e.getBody()).fold(A("tree"===t.format?new tp("body",11):""),(n=>ip(e,t,n))))(e,t),setContent:(t,n)=>Ag(e,t,n),insertContent:(t,n)=>Eg(e,t,n),addVisual:t=>((e,t)=>{const n=e.dom,o=C(t)?t:e.getBody();x(e.hasVisual)&&(e.hasVisual=$l(e)),q(n.select("table,a",o),(t=>{switch(t.nodeName){case"TABLE":const o=Ul(e),r=n.getAttrib(t,"border");r&&"0"!==r||!e.hasVisual?n.removeClass(t,o):n.addClass(t,o);break;case"A":if(!n.getAttrib(t,"href")){const o=n.getAttrib(t,"name")||t.id,r=Wl(e);o&&e.hasVisual?n.addClass(t,r):n.removeClass(t,r)}}})),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((e,t,n={})=>{const o=((e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}))(n,t);return ay(e,o).fold(D,(t=>{const n=Dy(e,t);return ly(e,n,t)}))})(e,t,n)},autocompleter:{addDecoration:t=>Ym(e,t),removeDecoration:()=>((e,t)=>Xm(t).each((t=>{const n=e.selection.getBookmark();eo(t),e.selection.moveToBookmark(n)})))(e,un.fromDom(e.getBody()))},raw:{getModel:()=>F.none()}}),Uy=e=>Se(e.plugins,"rtc"),Wy=e=>{const t=e;return(e=>_e(e.plugins,"rtc").bind((e=>F.from(e.setup))))(e).fold((()=>(t.rtcInstance=$y(e),F.none())),(e=>(t.rtcInstance=(()=>{const e=A(null),t=A("");return{init:{bindEvents:E},undoManager:{beforeChange:E,add:e,undo:e,redo:e,clear:E,reset:E,hasUndo:B,hasRedo:B,transact:e,ignore:E,extra:E},formatter:{match:B,matchAll:A([]),matchNode:A(void 0),canApply:B,closest:t,apply:E,remove:E,toggle:E,formatChanged:A({unbind:E})},editor:{getContent:t,setContent:A({content:"",html:""}),insertContent:A(""),addVisual:E},selection:{getContent:t},autocompleter:{addDecoration:E,removeDecoration:E},raw:{getModel:A(F.none())}}})(),F.some((()=>e().then((e=>(t.rtcInstance=(e=>{const t=e=>f(e)?e:{},{init:n,undoManager:o,formatter:r,editor:s,selection:i,autocompleter:a,raw:l}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:(e,t,n)=>o.transact(n),ignore:(e,t)=>o.ignore(t),extra:(e,t,n,r)=>o.extra(n,r)},formatter:{match:(e,n,o,s)=>r.match(e,t(n),s),matchAll:r.matchAll,matchNode:r.matchNode,canApply:e=>r.canApply(e),closest:e=>r.closest(e),apply:(e,n,o)=>r.apply(e,t(n)),remove:(e,n,o,s)=>r.remove(e,t(n)),toggle:(e,n,o)=>r.toggle(e,t(n)),formatChanged:(e,t,n,o,s)=>r.formatChanged(t,n,o,s)},editor:{getContent:e=>s.getContent(e),setContent:(e,t)=>({content:s.setContent(e,t),html:""}),insertContent:(e,t)=>(s.insertContent(e),""),addVisual:s.addVisual},selection:{getContent:(e,t)=>i.getContent(t)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>F.some(l.getRawModel())}}})(e),e.rtc.isRemote))))))))},qy=e=>e.rtcInstance?e.rtcInstance:$y(e),Ky=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Gy=e=>Ky(e).init.bindEvents(),Yy=(e,t={})=>((e,t,n)=>Ky(e).selection.getContent(t,n))(e,t.format?t.format:"html",t),Xy=e=>0===e.dom.length?(Zn(e),F.none()):F.some(e),Jy=(e,t,n,o)=>{e.bind((e=>((o?pf:mf)(e.dom,o?e.dom.length:0),t.filter(Ht).map((t=>((e,t,n,o)=>{const r=e.dom,s=t.dom,i=o?r.length:s.length;o?(ff(r,s,!1,!o),n.setStart(s,i)):(ff(s,r,!1,!o),n.setEnd(s,i))})(e,t,n,o)))))).orThunk((()=>{const e=((e,t)=>e.filter((e=>eh.isBookmarkNode(e.dom))).bind(t?Cn:wn))(t,o).or(t).filter(Ht);return e.map((e=>((e,t)=>{xn(e).each((n=>{const o=e.dom;t&&rf(n,Qi(o,0))?mf(o,0):!t&&sf(n,Qi(o,o.length))&&pf(o,o.length)}))})(e,o)))}))},Qy=(e,t,n={})=>{const o=((e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}))(n,t);cy(e,o).each((t=>{const n=((e,t)=>{if("raw"!==t.format){const n=e.selection.getRng(),o=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),r=o?{context:o.nodeName.toLowerCase()}:{},s=e.parser.parse(t.content,{forced_root_block:!1,...r,...t});return up({validate:!1},e.schema).serialize(s)}return t.content})(e,t),o=e.selection.getRng();((e,t)=>{const n=F.from(t.firstChild).map(un.fromDom),o=F.from(t.lastChild).map(un.fromDom);e.deleteContents(),e.insertNode(t);const r=n.bind(wn).filter(Ht).bind(Xy),s=o.bind(Cn).filter(Ht).bind(Xy);Jy(r,n,e,!0),Jy(s,o,e,!1),e.collapse(!1)})(o,o.createContextualFragment(n)),e.selection.setRng(o),dm(e,o),dy(e,n,t)}))},Zy=(e,t,n)=>{if(e&&Se(e,t)){const o=Y(e[t],(e=>e!==n));0===o.length?delete e[t]:e[t]=o}};const ex=e=>!(!e||!e.ownerDocument)&&gn(un.fromDom(e.ownerDocument),un.fromDom(e)),tx=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:i}=((e,t)=>{let n,o;const r=(t,n)=>Z(n,(n=>e.is(n,t))),s=t=>e.getParents(t,null,e.getRoot());return{selectorChangedWithUnbind:(e,i)=>(n||(n={},o={},t.on("NodeChange",(e=>{const t=e.element,i=s(t),a={};Nt.each(n,((e,t)=>{r(t,i).each((n=>{o[t]||(q(e,(e=>{e(!0,{node:n,selector:t,parents:i})})),o[t]=e),a[t]=e}))})),Nt.each(o,((e,n)=>{a[n]||(delete o[n],Nt.each(e,(e=>{e(!1,{node:t,selector:n,parents:i})})))}))}))),n[e]||(n[e]=[]),n[e].push(i),r(e,s(t.selection.getStart())).each((()=>{o[e]=n[e]})),{unbind:()=>{Zy(n,e,i),Zy(o,e,i)}})}})(e,o),a=(e,t)=>Qy(o,e,t),l=e=>{const t=d();t.collapse(!!e),u(t)},c=()=>t.getSelection?t.getSelection():t.document.selection,d=()=>{let n,i,a;const l=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}},d=t.document;if(void 0!==o.bookmark&&!1===Lm(o)){const e=Cm(o);if(e.isSome())return e.map((e=>$m(o,[e])[0])).getOr(d.createRange())}try{(n=c())&&!bo(n.anchorNode)&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():d.createRange(),i=$m(o,[i])[0])}catch(e){}return i||(i=d.createRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(a=e.getRoot(),i.setStart(a,0),i.setEnd(a,0)),r&&s&&(0===l(i.START_TO_START,i,r)&&0===l(i.END_TO_END,i,r)?i=s:(r=null,s=null)),i},u=(e,t)=>{let n;if(!(e=>!!e&&ex(e.startContainer)&&ex(e.endContainer))(e))return;const i=c();if(e=o.dispatch("SetSelectionRange",{range:e,forward:t}).range,i){s=e;try{i.removeAllRanges(),i.addRange(e)}catch(e){}!1===t&&i.extend&&(i.collapse(e.endContainer,e.endOffset),i.extend(e.startContainer,e.startOffset)),r=i.rangeCount>0?i.getRangeAt(0):null}!e.collapsed&&e.startContainer===e.endContainer&&i.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset],n&&"IMG"===n.tagName&&(i.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),i.anchorNode===e.startContainer&&i.focusNode===e.endContainer||i.setBaseAndExtent(n,0,n,1))),o.dispatch("AfterSetSelectionRange",{range:e,forward:t})},h=()=>{const t=c(),n=null==t?void 0:t.anchorNode,o=null==t?void 0:t.focusNode;if(!t||!n||!o||bo(n)||bo(o))return!0;const r=e.createRng();r.setStart(n,t.anchorOffset),r.collapse(!0);const s=e.createRng();return s.setStart(o,t.focusOffset),s.collapse(!0),r.compareBoundaryPoints(r.START_TO_START,s)<=0},m={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:o,collapse:l,setCursorLocation:(t,n)=>{const r=e.createRng();C(t)&&C(n)?(r.setStart(t,n),r.setEnd(t,n),u(r),l(!1)):(Vu(e,r,o.getBody(),!0),u(r))},getContent:e=>Yy(o,e),setContent:a,getBookmark:(e,t)=>p.getBookmark(e,t),moveToBookmark:e=>p.moveToBookmark(e),select:(t,n)=>(((e,t,n)=>F.from(t).map((t=>{const o=e.nodeIndex(t),r=e.createRng();return r.setStart(t.parentNode,o),r.setEnd(t.parentNode,o+1),n&&(Vu(e,r,t,!0),Vu(e,r,t,!1)),r})))(e,t,n).each(u),t),isCollapsed:()=>{const e=d(),t=c();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:h,setNode:t=>(a(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{let n,o,r;if(!t)return e;o=t.startContainer,r=t.endContainer;const s=t.startOffset,i=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(o===r&&i-s<2&&o.hasChildNodes()&&(n=o.childNodes[s]),3===o.nodeType&&3===r.nodeType&&(o=o.length===s?Vm(o.nextSibling,!0):o.parentNode,r=0===i?Vm(r.previousSibling,!1):r.parentNode,o&&o===r))?o:n&&3===n.nodeType?n.parentNode:n})(o.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:e=>jm(o.getBody(),d(),e),getEnd:e=>Hm(o.getBody(),d(),e),getSelectedBlocks:(t,n)=>((e,t,n,o)=>{let r;const s=[],i=e.getRoot();if(n=e.getParent(n||jm(i,t,t.collapsed),e.isBlock),o=e.getParent(o||Hm(i,t,t.collapsed),e.isBlock),n&&n!==i&&s.push(n),n&&o&&n!==o){r=n;const t=new Jo(n,i);for(;(r=t.next())&&r!==o;)e.isBlock(r)&&s.push(r)}return o&&n!==o&&o!==i&&s.push(o),s})(e,d(),t,n),normalize:()=>{const t=d(),n=c();if(!(Pu(n).length>1)&&$u(o)){const n=zh(e,t);return n.each((e=>{u(e,h())})),n.getOr(t)}return t},selectorChanged:(e,t)=>(i(e,t),m),selectorChangedWithUnbind:i,getScrollContainer:()=>{let t,n=e.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:(e,t)=>{C(e)?((e,t,n)=>{(e.inline?am:cm)(e,t,n)})(o,e,t):dm(o,d(),t)},placeCaretAt:(e,t)=>u(Ah(e,t,o.getDoc())),getBoundingClientRect:()=>{const e=d();return e.collapsed?Qi.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=r=s=null,f.destroy()}},p=eh(m),f=ch(m,o);return m.bookmarkManager=p,m.controlSelection=f,m},nx=(e,t,n)=>((e,t)=>e&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,n)?((e,t,n)=>{let o;const r=e.dom;let s=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const e=i.createHTMLDocument("");Nt.each("BODY"===s.nodeName?s.childNodes:[s],(t=>{e.body.appendChild(e.importNode(t,!0))})),s="BODY"!==s.nodeName?e.body.firstChild:e.body,o=r.doc,r.doc=e}return((e,t)=>{e.dispatch("PreProcess",t)})(e,{...n,node:s}),o&&(r.doc=o),s})(e,t,n):t,ox=(e,t,n)=>{-1===Nt.inArray(t,n)&&(e.addAttributeFilter(n,((e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)})),t.push(n))},rx=(e,t,n,o,r)=>{const s=((e,t,n)=>up(e,t).serialize(n))(t,n,o);return((e,t,n)=>{if(!t.no_events&&e){const o=((e,t)=>e.dispatch("PostProcess",t))(e,{...t,content:n});return o.content}return n})(e,r,s)},sx=(e,t)=>{const n=["data-mce-selected"],o=t&&t.dom?t.dom:qs.DOM,r=t&&t.schema?t.schema:Es(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;const s=sy(e,r);((e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",((e,t)=>{let n=e.length;for(;n--;){const o=e[n];o.attr("tabindex",o.attr("data-mce-tabindex")),o.attr(t,null)}})),e.addAttributeFilter("src,href,style",((e,o)=>{const r="data-mce-"+o,s=t.url_converter,i=t.url_converter_scope;let a=e.length;for(;a--;){const t=e[a];let l=t.attr(r);void 0!==l?(t.attr(o,l.length>0?l:null),t.attr(r,null)):(l=t.attr(o),"style"===o?l=n.serializeStyle(n.parseStyle(l),t.name):s&&(l=s.call(i,l,o,t.name)),t.attr(o,l.length>0?l:null))}})),e.addAttributeFilter("class",(e=>{let t=e.length;for(;t--;){const n=e[t];let o=n.attr("class");o&&(o=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",o.length>0?o:null))}})),e.addAttributeFilter("data-mce-type",((e,t,n)=>{let o=e.length;for(;o--;){const t=e[o];if("bookmark"===t.attr("data-mce-type")&&!n.cleanup){const e=F.from(t.firstChild).exists((e=>!mr(e.value)));e?t.unwrap():t.remove()}}})),e.addNodeFilter("noscript",(e=>{let t=e.length;for(;t--;){const n=e[t].firstChild;n&&(n.value=ps.decode(n.value))}})),e.addNodeFilter("script,style",((e,n)=>{const o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let r=e.length;for(;r--;){const s=e[r],i=s.firstChild?s.firstChild.value:"";if("script"===n){const e=s.attr("type");e&&s.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i.length>0&&(s.firstChild.value="// <![CDATA[\n"+o(i)+"\n// ]]>")}else"xhtml"===t.element_format&&i.length>0&&(s.firstChild.value="\x3c!--\n"+o(i)+"\n--\x3e")}})),e.addNodeFilter("#comment",(e=>{let o=e.length;for(;o--;){const r=e[o];t.preserve_cdata&&0===r.value.indexOf("[CDATA[")?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===r.value.indexOf("mce:protected ")&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}})),e.addNodeFilter("xml:namespace,input",((e,t)=>{let n=e.length;for(;n--;){const o=e[n];7===o.type?o.remove():1===o.type&&("input"!==t||o.attr("type")||o.attr("type","text"))}})),e.addAttributeFilter("data-mce-type",(t=>{q(t,(t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",((e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}))})(s,e,o);return{schema:r,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(n,i={})=>{const a={format:"html",...i},l=nx(t,n,a),c=((e,t,n)=>{const o=pr(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||lr(un.fromDom(t))?o:Nt.trim(o)})(o,l,a),d=((e,t,n)=>{const o=n.selection?{forced_root_block:!1,...n}:n,r=e.parse(t,o);return(e=>{const t=e=>e&&"br"===e.name,n=e.lastChild;if(t(n)){const e=n.prev;t(e)&&(n.remove(),e.remove())}})(r),r})(s,c,a);return"tree"===a.format?d:rx(t,e,r,d,a)},addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:M(ox,s,n),getTempAttrs:A(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters}},ix=(e,t)=>{const n=sx(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},ax=(e,t={})=>{const n=((e,t)=>({...e,format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return ay(e,n).fold(D,(t=>{const n=((e,t)=>qy(e).editor.getContent(t))(e,t);return ly(e,n,t)}))},lx=(e,t,n={})=>{const o=((e,t)=>({format:"html",...e,set:!0,content:t}))(n,t);return cy(e,o).map((t=>{const n=((e,t,n)=>qy(e).editor.setContent(t,n))(e,t.content,t);return dy(e,n.html,t),n.content})).getOr(t)},cx="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),dx="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),ux=e=>{const t=Y(cx,(t=>Se(e,t))),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),ae(t)},hx=e=>{const t=Nt.makeMap(e.plugins," "),n=Y(dx,(e=>Se(t,e)));return ae(n)},mx=(e,t)=>{((e,t)=>{const n=ux(e),o=hx(t),r=o.length>0,s=n.length>0,i="mobile"===t.theme;if(r||s||i){const e="\n- ",t=i?`\n\nThemes:${e}mobile`:"",a=r?`\n\nPlugins:${e}${o.join(e)}`:"",l=s?`\n\nOptions:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+t+a+l)}})(e,t)},px=qs.DOM,fx=e=>F.from(e).each((e=>e.destroy())),gx=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,o=e.getBody(),r=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&r&&px.remove(r.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&o&&(e=>{px.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),px.remove(e.getContainer()),fx(t),fx(n),e.destroy()}},bx=(e,t)=>{const{selection:n,dom:o}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),fx(n),fx(o)),(e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),px.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)})(e),e.destroyed=!0):e.remove())},vx=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Se(e,t)}})(),yx=ei.ModelManager,xx=(e,t)=>t.dom[e],wx=(e,t)=>parseInt(Vn(t,e),10),Cx=M(xx,"clientWidth"),_x=M(xx,"clientHeight"),Sx=M(wx,"margin-top"),kx=M(wx,"margin-left"),Ex=(e,t,n)=>{const o=un.fromDom(e.getBody()),r=e.inline?o:(s=o,un.fromDom(vn(s).dom.documentElement));var s;const i=((e,t,n,o)=>{const r=(e=>e.dom.getBoundingClientRect())(t);return{x:n-(e?r.left+t.dom.clientLeft+kx(t):0),y:o-(e?r.top+t.dom.clientTop+Sx(t):0)}})(e.inline,r,t,n);return((e,t,n)=>{const o=Cx(e),r=_x(e);return t>=0&&n>=0&&t<=o&&n<=r})(r,i.x,i.y)},Ox=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return(n=t,F.from(n).map(un.fromDom)).map(Fn).getOr(!1);var n},Tx=e=>{const t=[],n=()=>{const t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},o=()=>F.from(t[0]),r=()=>{q(t,(e=>{e.reposition()}))},s=e=>{ee(t,(t=>t===e)).each((e=>{t.splice(e,1)}))},i=(i,a=!0)=>{if(!e.removed&&Ox(e))return a&&e.dispatch("BeforeOpenNotification",{notification:i}),Z(t,(e=>{return t=n().getArgs(e),o=i,!(t.type!==o.type||t.text!==o.text||t.progressBar||t.timeout||o.progressBar||o.timeout);var t,o})).getOrThunk((()=>{e.editorManager.setActive(e);const a=n().open(i,(()=>{s(a),r(),o().fold((()=>e.focus()),(e=>um(un.fromDom(e.getEl()))))}));return(e=>{t.push(e)})(a),r(),e.dispatch("OpenNotification",{notification:{...a}}),a}))},a=A(t);return(e=>{e.on("SkinLoaded",(()=>{const t=wl(e);t&&i({text:t,type:"warning",timeout:0},!1),r()})),e.on("show ResizeEditor ResizeWindow NodeChange",(()=>{requestAnimationFrame(r)})),e.on("remove",(()=>{q(t.slice(),(e=>{n().close(e)}))}))})(e),{open:i,close:()=>{o().each((e=>{n().close(e),s(e),r()}))},getNotifications:a}},Ax=ei.PluginManager,Dx=ei.ThemeManager;const Rx=e=>{let t=[];const n=()=>{const t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}})()},o=(e,t)=>(...n)=>t?t.apply(e,n):void 0,r=n=>{t.push(n),(t=>{e.dispatch("OpenWindow",{dialog:t})})(n)},s=n=>{(t=>{e.dispatch("CloseWindow",{dialog:t})})(n),t=Y(t,(e=>e!==n)),0===t.length&&e.focus()},i=t=>{e.editorManager.setActive(e),wm(e),e.ui.show();const n=t();return r(n),n};return e.on("remove",(()=>{q(t,(e=>{n().close(e)}))})),{open:(e,t)=>i((()=>n().open(e,t,s))),openUrl:e=>i((()=>n().openUrl(e,s))),alert:(e,t,r)=>{const s=n();s.alert(e,o(r||s,t))},confirm:(e,t,r)=>{const s=n();s.confirm(e,o(r||s,t))},close:()=>{F.from(t[t.length-1]).each((e=>{n().close(e),s(e)}))}}},Mx=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Nx=(e,t)=>{e._skinLoaded?Mx(e,t):e.on("SkinLoaded",(()=>{Mx(e,t)}))},Px=(e,t,n)=>{nh(e,t,{message:n}),console.error(n)},Lx=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Bx=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Ix=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`,r=!0===e.inline;return W(t,(t=>(e=>/^[a-z0-9\-]+$/i.test(e))(t)&&!r?`${n}/${t}/${o}`:e.documentBaseURI.toAbsolute(t)))},Fx=e=>{e.contentCSS=e.contentCSS.concat((e=>Ix(e,hl(e)))(e),(e=>Ix(e,pl(e)))(e))},zx=I,jx=()=>{let e={};const t=(e,t)=>({status:e,resultUri:t}),n=t=>t in e;return{hasBlobUri:n,getResultUri:t=>{const n=e[t];return n?n.resultUri:null},isPending:t=>!!n(t)&&1===e[t].status,isUploaded:t=>!!n(t)&&2===e[t].status,markPending:n=>{e[n]=t(1,null)},markUploaded:(n,o)=>{e[n]=t(2,o)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}};let Hx=0;const Vx=e=>e+Hx+++(()=>{const e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),$x=(e,t)=>{const n={},o=(e,n)=>new Promise(((o,r)=>{const s=new XMLHttpRequest;s.open("POST",t.url),s.withCredentials=t.credentials,s.upload.onprogress=e=>{n(e.loaded/e.total*100)},s.onerror=()=>{r("Image upload failed due to a XHR Transport error. Code: "+s.status)},s.onload=()=>{if(s.status<200||s.status>=300)return void r("HTTP Error: "+s.status);const e=JSON.parse(s.responseText);var n,i;e&&p(e.location)?o((n=t.basePath,i=e.location,n?n.replace(/\/$/,"")+"/"+i.replace(/^\//,""):i)):r("Invalid JSON: "+s.responseText)};const i=new FormData;i.append("file",e.blob(),e.filename()),s.send(i)})),r=(e,t)=>({url:t,blobInfo:e,status:!0}),s=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),i=(e,t)=>{Nt.each(n[e],(e=>{e(t)})),delete n[e]},a=(o,a)=>(o=Nt.grep(o,(t=>!e.isUploaded(t.blobUri()))),Promise.all(Nt.map(o,(o=>e.isPending(o.blobUri())?(e=>{const t=e.blobUri();return new Promise((e=>{n[t]=n[t]||[],n[t].push(e)}))})(o):((t,n,o)=>(e.markPending(t.blobUri()),new Promise((a=>{let l,c;try{const d=()=>{l&&(l.close(),c=E)},u=n=>{d(),e.markUploaded(t.blobUri(),n),i(t.blobUri(),r(t,n)),a(r(t,n))},h=n=>{d(),e.removeFailed(t.blobUri()),i(t.blobUri(),s(t,n)),a(s(t,n))};c=e=>{e<0||e>100||F.from(l).orThunk((()=>F.from(o).map(P))).each((t=>{l=t,t.progressBar.value(e)}))},n(t,c).then(u,(e=>{h(p(e)?{message:e}:e)}))}catch(e){a(s(t,e))}}))))(o,t.handler,a)))));return!1===_(t.handler)&&(t.handler=o),{upload:(e,n)=>t.url||t.handler!==o?a(e,n):new Promise((e=>{e([])}))}},Ux=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Wx=(e,t)=>$x(t,{url:nl(e),basePath:ol(e),credentials:rl(e),handler:sl(e)}),qx=e=>{const t=(()=>{let e=[];const t=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const t=e.id||Vx("blobid"),n=e.name||t,o=e.blob;return{id:A(t),name:A(n),filename:A(e.filename||n+"."+(r=o.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.toLowerCase()]||"dat")),blob:A(o),base64:A(e.base64),blobUri:A(e.blobUri||URL.createObjectURL(o)),uri:A(e.uri)};var r},n=t=>Z(e,t).getOrUndefined(),o=e=>n((t=>t.id()===e));return{create:(e,n,o,r,s)=>{if(p(e))return t({id:e,name:r,filename:s,blob:n,base64:o});if(f(e))return t(e);throw new Error("Unknown input type")},add:t=>{o(t.id())||e.push(t)},get:o,getByUri:e=>n((t=>t.blobUri()===e)),getByData:(e,t)=>n((n=>n.base64()===e&&n.blob().type===t)),findFirst:n,removeByUri:t=>{e=Y(e,(e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)))},destroy:()=>{q(e,(e=>{URL.revokeObjectURL(e.blobUri())})),e=[]}}})();let n,o;const r=jx(),s=[],i=(e=>{const t=Ys(null);return e.on("change AddUndo",(e=>{t.set({...e.level})})),{fireIfChanged:()=>{const n=e.undoManager.data;de(n).filter((e=>!zy(t.get(),e))).each((t=>{e.setDirty(!0),e.dispatch("change",{level:t,lastLevel:le(n,n.length-2).getOrNull()})}))}}})(e),a=t=>n=>e.selection?t(n):[],l=(e,t,n)=>{let o=0;do{o=e.indexOf(t,o),-1!==o&&(e=e.substring(0,o)+n+e.substr(o+t.length),o+=n.length-t.length+1)}while(-1!==o);return e},c=(e,t,n)=>{const o=`src="${n}"${n===Tt.transparentSrc?' data-mce-placeholder="1"':""}`;return e=l(e,`src="${t}"`,o),e=l(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},d=(t,n)=>{q(e.undoManager.data,(e=>{"fragmented"===e.type?e.fragments=W(e.fragments,(e=>c(e,t,n))):e.content=c(e.content,t,n)}))},u=()=>(n||(n=Wx(e,r)),g().then(a((o=>{const r=W(o,(e=>e.blobInfo));return n.upload(r,Ux(e)).then(a((n=>{const r=[],s=W(n,((n,s)=>{const i=o[s].blobInfo,a=o[s].image;let l=!1;return n.status&&Za(e)?(t.removeByUri(a.src),Uy(e)||((t,n)=>{const o=e.convertURL(n,"src");var r;d(t.src,n),qt(un.fromDom(t),{src:Qa(e)?(r=n,r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":o})})(a,n.url)):n.error&&(n.error.remove&&(d(a.getAttribute("src"),Tt.transparentSrc),r.push(a),l=!0),((e,t)=>{Nx(e,Zs.translate(["Failed to upload image: {0}",t]))})(e,n.error.message)),{element:a,status:n.status,uploadUri:n.url,blobInfo:i,removed:l}}));return s.length>0&&i.fireIfChanged(),r.length>0&&!Uy(e)&&e.undoManager.transact((()=>{q(r,(n=>{e.dom.remove(n),t.removeByUri(n.src)}))})),s})))})))),h=()=>Ja(e)?u():Promise.resolve([]),m=e=>oe(s,(t=>t(e))),g=()=>(o||(o=jv(r,t)),o.findAll(e.getBody(),m).then(a((t=>(t=Y(t,(t=>"string"!=typeof t||(Nx(e,t),!1))),Uy(e)||q(t,(e=>{d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),t))))),b=n=>n.replace(/src="(blob:[^"]+)"/g,((n,o)=>{const s=r.getResultUri(o);if(s)return'src="'+s+'"';let i=t.getByUri(o);if(i||(i=J(e.editorManager.get(),((e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(o)),null)),i){return'src="data:'+i.blob().type+";base64,"+i.base64()+'"'}return n}));return e.on("SetContent",(()=>{Ja(e)?h():g()})),e.on("RawSaveContent",(e=>{e.content=b(e.content)})),e.on("GetContent",(e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=b(e.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(e=>{q(e,(e=>{const n=e.attr("src");if(t.getByUri(n))return;const o=r.getResultUri(n);o&&e.attr("src",o)}))}))})),{blobCache:t,addFilter:e=>{s.push(e)},uploadImages:u,uploadImagesAuto:h,scanForImages:g,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}},Kx={remove_similar:!0,inherit:!1},Gx={selector:"td,th",...Kx},Yx={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Gx},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Gx},tablecellbordercolor:{styles:{borderColor:"%value"},...Gx},tablecellclass:{classes:["%value"],...Gx},tableclass:{selector:"table",classes:["%value"],...Kx},tablecellborderstyle:{styles:{borderStyle:"%value"},...Gx},tablecellborderwidth:{styles:{borderWidth:"%value"},...Gx}},Xx=A(Yx),Jx=e=>{const t={},n=(e,o)=>{e&&(p(e)?(b(o)||(o=[o]),q(o,(e=>{x(e.deep)&&(e.deep=!fu(e)),x(e.split)&&(e.split=!fu(e)||gu(e)),x(e.remove)&&fu(e)&&!gu(e)&&(e.remove="none"),fu(e)&&gu(e)&&(e.mixed=!0,e.block_expand=!0),p(e.classes)&&(e.classes=e.classes.split(/\s+/))})),t[e]=o):fe(e,((e,t)=>{n(t,e)})))};return n((e=>{const t=e.dom,n=e.schema.type,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},o={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[o,e,t]:[e,o,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,n)=>vo(e)&&e.hasAttribute("href"),onformat:(e,n,o)=>{Nt.each(o,((n,o)=>{t.setAttrib(e,o,n)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Nt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(e=>{o[e]={block:e,remove:"all"}})),o})(e)),n(Xx()),n(Ol(e)),{get:e=>C(e)?t[e]:t,has:e=>Se(t,e),register:n,unregister:e=>(e&&t[e]&&delete t[e],t)}},Qx=Nt.each,Zx=qs.DOM,ew=(e,t)=>{let n,o,r;const s=t&&t.schema||Es({}),i=e=>{o="string"==typeof e?{name:e,classes:[],attrs:{}}:e;const t=Zx.create(o.name);return((e,t)=>{t.classes.length&&Zx.addClass(e,t.classes.join(" ")),Zx.setAttribs(e,t.attrs)})(t,o),t},a=(e,t,n)=>{let o,r;const l=t.length>0&&t[0],c=l&&l.name,d=((e,t)=>{const n="string"!=typeof e?e.nodeName.toLowerCase():e,o=s.getElementRule(n),r=o&&o.parentsRequired;return!(!r||!r.length)&&(t&&-1!==Nt.inArray(r,t)?t:r[0])})(e,c);if(d)c===d?(r=t[0],t=t.slice(1)):r=d;else if(l)r=t[0],t=t.slice(1);else if(!n)return e;return r&&(o=i(r),o.appendChild(e)),n&&(o||(o=Zx.create("div"),o.appendChild(e)),Nt.each(n,(t=>{const n=i(t);o.insertBefore(n,e)}))),a(o,t,r&&r.siblings)};return e&&e.length?(o=e[0],n=i(o),r=Zx.create("div"),r.appendChild(a(n,e.slice(1),o.siblings)),r):""},tw=e=>{let t;const n={classes:[],attrs:{}};return"*"!==(e=n.selector=Nt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((e,t,o,r,s)=>{switch(t){case"#":n.attrs.id=o;break;case".":n.classes.push(o);break;case":":-1!==Nt.inArray("checked disabled enabled read-only required".split(" "),o)&&(n.attrs[o]=o)}if("["===r){const e=s.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(n.attrs[e[1]]=e[2])}return""}))),n.name=t||"div",n},nw=(e,t)=>{let n,o,r,s="",i=Tl(e);if(""===i)return"";const a=e=>e.replace(/%(\w+)/g,"");if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}if("preview"in t){const e=_e(t,"preview");if(Pt(e,!1))return"";i=e.getOr(i)}n=t.block||t.inline||"span";const l=(c=t.selector)&&"string"==typeof c?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Nt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(e=>{const t=Nt.map(e.split(/(?:~\+|~|\+)/),tw),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[];var c;l.length?(l[0].name||(l[0].name=n),n=t.selector,o=ew(l,e)):o=ew([n],e);const d=Zx.select(n,o)[0]||o.firstChild;return Qx(t.styles,((e,t)=>{const n=a(e);n&&Zx.setStyle(d,t,n)})),Qx(t.attributes,((e,t)=>{const n=a(e);n&&Zx.setAttrib(d,t,n)})),Qx(t.classes,(e=>{const t=a(e);Zx.hasClass(d,t)||Zx.addClass(d,t)})),e.dispatch("PreviewFormats"),Zx.setStyles(o,{position:"absolute",left:-65535}),e.getBody().appendChild(o),r=Zx.getStyle(e.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,Qx(i.split(" "),(t=>{let n=Zx.getStyle(d,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=Zx.getStyle(e.getBody(),t,!0),"#ffffff"===eu(n).toLowerCase())||"color"===t&&"#000000"===eu(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===r)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*r+"px"}"border"===t&&n&&(s+="padding:0 2px;"),s+=t+":"+n+";"}})),e.dispatch("AfterPreviewFormats"),Zx.remove(o),s},ow=e=>{const t=Jx(e),n=Ys(null);return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),Qg(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,n,o)=>{((e,t,n,o)=>{Ky(e).formatter.apply(t,n,o)})(e,t,n,o)},remove:(t,n,o,r)=>{((e,t,n,o,r)=>{Ky(e).formatter.remove(t,n,o,r)})(e,t,n,o,r)},toggle:(t,n,o)=>{((e,t,n,o)=>{Ky(e).formatter.toggle(t,n,o)})(e,t,n,o)},match:(t,n,o,r)=>((e,t,n,o,r)=>Ky(e).formatter.match(t,n,o,r))(e,t,n,o,r),closest:t=>((e,t)=>Ky(e).formatter.closest(t))(e,t),matchAll:(t,n)=>((e,t,n)=>Ky(e).formatter.matchAll(t,n))(e,t,n),matchNode:(t,n,o,r)=>((e,t,n,o,r)=>Ky(e).formatter.matchNode(t,n,o,r))(e,t,n,o,r),canApply:t=>((e,t)=>Ky(e).formatter.canApply(t))(e,t),formatChanged:(t,o,r,s)=>((e,t,n,o,r,s)=>Ky(e).formatter.formatChanged(t,n,o,r,s))(e,n,t,o,r,s),getCssText:M(nw,e)}},rw=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},sw=e=>{const t=ti(),n=Ys(0),o=Ys(0),r={data:[],typing:!1,beforeChange:()=>{((e,t,n)=>{Ky(e).undoManager.beforeChange(t,n)})(e,n,t)},add:(s,i)=>((e,t,n,o,r,s,i)=>Ky(e).undoManager.add(t,n,o,r,s,i))(e,r,o,n,t,s,i),undo:()=>((e,t,n,o)=>Ky(e).undoManager.undo(t,n,o))(e,r,n,o),redo:()=>((e,t,n)=>Ky(e).undoManager.redo(t,n))(e,o,r.data),clear:()=>{((e,t,n)=>{Ky(e).undoManager.clear(t,n)})(e,r,o)},reset:()=>{((e,t)=>{Ky(e).undoManager.reset(t)})(e,r)},hasUndo:()=>((e,t,n)=>Ky(e).undoManager.hasUndo(t,n))(e,r,o),hasRedo:()=>((e,t,n)=>Ky(e).undoManager.hasRedo(t,n))(e,r,o),transact:t=>((e,t,n,o)=>Ky(e).undoManager.transact(t,n,o))(e,r,n,t),ignore:t=>{((e,t,n)=>{Ky(e).undoManager.ignore(t,n)})(e,n,t)},extra:(t,n)=>{((e,t,n,o,r)=>{Ky(e).undoManager.extra(t,n,o,r)})(e,r,o,t,n)}};return Uy(e)||((e,t,n)=>{const o=Ys(!1),r=e=>{Hy(t,!1,n),t.add({},e)};e.on("init",(()=>{t.add()})),e.on("BeforeExecCommand",(e=>{const o=e.command;rw(o)||(Vy(t,n),t.beforeChange())})),e.on("ExecCommand",(e=>{const t=e.command;rw(t)||r(e)})),e.on("ObjectResizeStart cut",(()=>{t.beforeChange()})),e.on("SaveContent ObjectResized blur",r),e.on("dragend",r),e.on("keyup",(n=>{const s=n.keyCode;n.isDefaultPrevented()||((s>=33&&s<=36||s>=37&&s<=40||45===s||n.ctrlKey)&&(r(),e.nodeChanged()),46!==s&&8!==s||e.nodeChanged(),o.get()&&t.typing&&!1===zy(Ly(e),t.data[0])&&(!1===e.isDirty()&&e.setDirty(!0),e.dispatch("TypingUndo"),o.set(!1),e.nodeChanged()))})),e.on("keydown",(e=>{const s=e.keyCode;if(e.isDefaultPrevented())return;if(s>=33&&s<=36||s>=37&&s<=40||45===s)return void(t.typing&&r(e));const i=e.ctrlKey&&!e.altKey||e.metaKey;!(s<16||s>20)||224===s||91===s||t.typing||i||(t.beforeChange(),Hy(t,!0,n),t.add({},e),o.set(!0))})),e.on("mousedown",(e=>{t.typing&&r(e)})),e.on("input",(e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&r(e)})),e.on("AddUndo Undo Redo ClearUndos",(t=>{t.isDefaultPrevented()||e.nodeChanged()}))})(e,r,n),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},iw=[9,27,lh.HOME,lh.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,lh.DOWN,lh.UP,lh.LEFT,lh.RIGHT].concat(Tt.browser.isFirefox()?[224]:[]),aw="data-mce-placeholder",lw=e=>"keydown"===e.type||"keyup"===e.type,cw=e=>{const t=e.keyCode;return t===lh.BACKSPACE||t===lh.DELETE},dw=e=>{const t=e.dom,n=Wa(e),o=yl(e),r=(s,i)=>{if((e=>{if(lw(e)){const t=e.keyCode;return!cw(e)&&(lh.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||$(iw,t))}return!1})(s))return;const a=e.getBody(),l=!(e=>lw(e)&&!(cw(e)||"keyup"===e.type&&229===e.keyCode))(s)&&((e,t,n)=>{if(Xr(un.fromDom(t),!1)){const o=t.firstElementChild;return!o||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&n===o.nodeName.toLowerCase()}return!1})(t,a,n);(""!==t.getAttrib(a,aw)!==l||i)&&(t.setAttrib(a,aw,l?o:null),t.setAttrib(a,"aria-placeholder",l?o:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,l),e.on(l?"keydown":"keyup",r),e.off(l?"keyup":"keydown",r))};o&&e.on("init",(t=>{r(t,!0),e.on("change SetContent ExecCommand",r),e.on("paste",(t=>Sm.setEditorTimeout(e,(()=>r(t)))))}))},uw=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,hw=(e,t)=>mn(un.fromDom(t),gl(e)),mw=e=>"rtl"===qs.DOM.getStyle(e,"direction",!0)||(e=>uw.test(e))(e.textContent),pw=(e,t,n)=>{const o=((e,t,n)=>Y(qs.DOM.getParents(n.container(),"*",t),e))(e,t,n);return F.from(o[o.length-1])},fw=(e,t)=>{if(!t)return t;const n=t.container(),o=t.offset();return e?vr(n)?Eo(n.nextSibling)?Qi(n.nextSibling,0):Qi.after(n):wr(t)?Qi(n,o+1):t:vr(n)?Eo(n.previousSibling)?Qi(n.previousSibling,n.previousSibling.data.length):Qi.before(n):Cr(t)?Qi(n,o-1):t},gw=M(fw,!0),bw=M(fw,!1),vw=(e,t)=>{const n=e=>e.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},yw=e=>vw(e,"Delete"),xw=e=>or(e)||sr(e),ww=(e,t)=>gn(e,t)?Uo(t,xw,(e=>t=>fn(e,un.fromDom(t.dom.parentNode)))(e)):F.none(),Cw=e=>{e.dom.isEmpty(e.getBody())&&(e.setContent(""),(e=>{const t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)})(e))},_w=(e,t)=>({from:e,to:t}),Sw=(e,t)=>{const n=un.fromDom(e),o=un.fromDom(t.container());return ww(n,o).map((e=>((e,t)=>({block:e,position:t}))(e,t)))},kw=(e,t,n)=>{const o=Sw(e,Qi.fromRangeStart(n)),r=o.bind((n=>Cd(t,e,n.position).bind((n=>Sw(e,n).map((n=>((e,t,n)=>Mo(n.position.getNode())&&!1===Xr(n.block)?kd(!1,n.block.dom).bind((o=>o.isEqual(n.position)?Cd(t,e,o).bind((t=>Sw(e,t))):F.some(n))).getOr(n):n)(e,t,n)))))));return Lt(o,r,_w).filter((e=>(e=>!1===fn(e.from.block,e.to.block))(e)&&(e=>xn(e.from.block).bind((t=>xn(e.to.block).filter((e=>fn(t,e))))).isSome())(e)&&(e=>!1===Lo(e.from.block.dom)&&!1===Lo(e.to.block.dom))(e)))},Ew=e=>{const t=kn(e);return ee(t,er).fold(A(t),(e=>t.slice(0,e)))},Ow=e=>{const t=Ew(e);return q(t,Zn),t},Tw=(e,t)=>{const n=Ip(t,e);return Z(n.reverse(),(e=>Xr(e))).each(Zn)},Aw=(e,t,n,o)=>{if(Xr(n))return Np(n),Td(n.dom);0===Y(_n(o),(e=>!Xr(e))).length&&Xr(t)&&Kn(o,un.fromTag("br"));const r=Od(n.dom,Qi.before(o.dom));return q(Ow(t),(e=>{Kn(o,e)})),Tw(e,t),r},Dw=(e,t,n)=>{if(Xr(n))return Zn(n),Xr(t)&&Np(t),Td(t.dom);const o=Ad(n.dom);return q(Ow(t),(e=>{Xn(n,e)})),Tw(e,t),o},Rw=(e,t)=>gn(t,e)?((e,t)=>{const n=Ip(t,e);return F.from(n[n.length-1])})(t,e):F.none(),Mw=(e,t)=>{kd(e,t.dom).map((e=>e.getNode())).map(un.fromDom).filter(nr).each(Zn)},Nw=(e,t,n)=>(Mw(!0,t),Mw(!1,n),Rw(t,n).fold(M(Dw,e,t,n),M(Aw,e,t,n))),Pw=(e,t,n,o)=>t?Nw(e,o,n):Nw(e,n,o),Lw=(e,t)=>{const n=un.fromDom(e.getBody()),o=((e,t,n)=>n.collapsed?kw(e,t,n):F.none())(n.dom,t,e.selection.getRng()).map((o=>()=>{Pw(n,t,o.from.block,o.to.block).each((t=>{e.selection.setRng(t.toRange())}))}));return o},Bw=(e,t)=>{const n=un.fromDom(t),o=M(fn,e);return $o(n,ar,o).isSome()},Iw=(e,t)=>{const n=Od(e.dom,Qi.fromRangeStart(t)).isNone(),o=Ed(e.dom,Qi.fromRangeEnd(t)).isNone();return!((e,t)=>Bw(e,t.startContainer)||Bw(e,t.endContainer))(e,t)&&n&&o},Fw=e=>{const t=un.fromDom(e.getBody()),n=e.selection.getRng();return Iw(t,n)?(e=>F.some((()=>{e.setContent(""),e.selection.setCursorLocation()})))(e):((e,t)=>{const n=t.getRng();return Lt(ww(e,un.fromDom(n.startContainer)),ww(e,un.fromDom(n.endContainer)),((o,r)=>!1===fn(o,r)?F.some((()=>{n.deleteContents(),Pw(e,!0,o,r).each((e=>{t.setRng(e.toRange())}))})):F.none())).getOr(F.none())})(t,e.selection)},zw=(e,t)=>e.selection.isCollapsed()?F.none():Fw(e),jw=Po,Hw=Lo,Vw=(e,t,n,o,r)=>F.from(t._selectionOverrides.showCaret(e,n,o,r)),$w=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?F.none():F.some((e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),Uw=(e,t,n)=>t.collapsed?((e,t,n)=>{const o=ed(1,e.getBody(),t),r=Qi.fromRangeStart(o),s=r.getNode();if(Mc(s))return Vw(1,e,s,!r.isAtEnd(),!1);const i=r.getNode(!0);if(Mc(i))return Vw(1,e,i,!1,!1);const a=e.dom.getParent(r.getNode(),(e=>Hw(e)||jw(e)));return Mc(a)?Vw(1,e,a,!1,n):F.none()})(e,t,n).getOr(t):t,Ww=e=>Dp(e)||Ep(e),qw=e=>Rp(e)||Op(e),Kw=(e,t,n,o,r,s)=>{Vw(o,e,s.getNode(!r),r,!0).each((n=>{if(t.collapsed){const e=t.cloneRange();r?e.setEnd(n.startContainer,n.startOffset):e.setStart(n.endContainer,n.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(n)})),((e,t)=>{Eo(t)&&0===t.data.length&&e.remove(t)})(e.dom,n)},Gw=(e,t)=>((e,t)=>{const n=e.selection.getRng();if(!Eo(n.commonAncestorContainer))return F.none();const o=t?id.Forwards:id.Backwards,r=bd(e.getBody()),s=M(rd,t?r.next:r.prev),i=t?Ww:qw,a=nd(o,e.getBody(),n),l=fw(t,s(a));if(!l||!sd(a,l))return F.none();if(i(l))return F.some((()=>Kw(e,n,a.getNode(),o,t,l)));const c=s(l);return c&&i(c)&&sd(l,c)?F.some((()=>Kw(e,n,a.getNode(),o,t,c))):F.none()})(e,t),Yw=Sa([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Xw=(e,t,n,o)=>{const r=o.getNode(!1===t);return ww(un.fromDom(e),un.fromDom(n.getNode())).map((e=>Xr(e)?Yw.remove(e.dom):Yw.moveToElement(r))).orThunk((()=>F.some(Yw.moveToElement(r))))},Jw=(e,t,n)=>Cd(t,e,n).bind((o=>{return r=o.getNode(),ar(un.fromDom(r))||sr(un.fromDom(r))||((e,t,n,o)=>{const r=t=>tr(un.fromDom(t))&&!Kc(n,o,e);return td(!t,n).fold((()=>td(t,o).fold(B,r)),r)})(e,t,n,o)?F.none():t&&Lo(o.getNode())||!1===t&&Lo(o.getNode(!0))?Xw(e,t,n,o):t&&Rp(n)||!1===t&&Dp(n)?F.some(Yw.moveToPosition(o)):F.none();var r})),Qw=(e,t,n)=>((e,t)=>{const n=t.getNode(!1===e),o=e?"after":"before";return vo(n)&&n.getAttribute("data-mce-caret")===o})(t,n)?((e,t)=>e&&Lo(t.nextSibling)?F.some(Yw.moveToElement(t.nextSibling)):!1===e&&Lo(t.previousSibling)?F.some(Yw.moveToElement(t.previousSibling)):F.none())(t,n.getNode(!1===t)).fold((()=>Jw(e,t,n)),F.some):Jw(e,t,n).bind((t=>((e,t,n)=>n.fold((e=>F.some(Yw.remove(e))),(e=>F.some(Yw.moveToElement(e))),(n=>Kc(t,n,e)?F.none():F.some(Yw.moveToPosition(n)))))(e,n,t))),Zw=(e,t)=>F.from(og(e.getBody(),t)),eC=(e,t)=>{const n=e.selection.getNode();return Zw(e,n).filter(Lo).fold((()=>((e,t,n)=>{const o=ed(t?1:-1,e,n),r=Qi.fromRangeStart(o),s=un.fromDom(e);return!1===t&&Rp(r)?F.some(Yw.remove(r.getNode(!0))):t&&Dp(r)?F.some(Yw.remove(r.getNode())):!1===t&&Dp(r)&&Yp(s,r)?Xp(s,r).map((e=>Yw.remove(e.getNode()))):t&&Rp(r)&&Gp(s,r)?Jp(s,r).map((e=>Yw.remove(e.getNode()))):Qw(e,t,r)})(e.getBody(),t,e.selection.getRng()).map((n=>()=>n.fold(((e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Ef(e,t,un.fromDom(n)),!0))(e,t),((e,t)=>n=>{const o=t?Qi.before(n):Qi.after(n);return e.selection.setRng(o.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))))),(()=>F.some(E)))},tC=(e,t)=>{const n=e.selection.getNode();if(Lo(n)&&!Bo(n)){return Zw(e,n.parentNode).filter(Lo).fold((()=>F.some((()=>{var n;n=un.fromDom(e.getBody()),q(si(n,".mce-offscreen-selection"),Zn),Ef(e,t,un.fromDom(e.selection.getNode())),Cw(e)}))),(()=>F.some(E)))}return F.none()},nC=e=>{const t=e.dom,n=e.selection,o=og(e.getBody(),n.getNode());if(Po(o)&&t.isBlock(o)&&t.isEmpty(o)){const e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(e),n.setRng(Qi.before(e).toRange())}return!0},oC=(e,t)=>e.selection.isCollapsed()?eC(e,t):tC(e,t),rC=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=Qi.fromRangeStart(e.selection.getRng());return Cd(t,e.getBody(),n).filter((e=>t?Sp(e):kp(e))).bind((e=>F.from(Gc(t?0:-1,e)))).map((t=>()=>e.selection.select(t)))})(e,t):F.none(),sC=Eo,iC=e=>sC(e)&&e.data[0]===hr,aC=e=>sC(e)&&e.data[e.data.length-1]===hr,lC=e=>e.ownerDocument.createTextNode(hr),cC=(e,t)=>e?(e=>{if(sC(e.previousSibling))return aC(e.previousSibling)||e.previousSibling.appendData(hr),e.previousSibling;if(sC(e))return iC(e)||e.insertData(0,hr),e;{const t=lC(e);return e.parentNode.insertBefore(t,e),t}})(t):(e=>{if(sC(e.nextSibling))return iC(e.nextSibling)||e.nextSibling.insertData(0,hr),e.nextSibling;if(sC(e))return aC(e)||e.appendData(hr),e;{const t=lC(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}})(t),dC=M(cC,!0),uC=M(cC,!1),hC=(e,t)=>Eo(e.container())?cC(t,e.container()):cC(t,e.getNode()),mC=(e,t)=>{const n=t.get();return n&&e.container()===n&&vr(n)},pC=(e,t)=>t.fold((t=>{kc(e.get());const n=dC(t);return e.set(n),F.some(Qi(n,n.length-1))}),(t=>Td(t).map((t=>{if(mC(t,e))return Qi(e.get(),1);{kc(e.get());const n=hC(t,!0);return e.set(n),Qi(n,1)}}))),(t=>Ad(t).map((t=>{if(mC(t,e))return Qi(e.get(),e.get().length-1);{kc(e.get());const n=hC(t,!1);return e.set(n),Qi(n,n.length-1)}}))),(t=>{kc(e.get());const n=uC(t);return e.set(n),F.some(Qi(n,1))})),fC=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return F.none()},gC=Sa([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),bC=(e,t)=>{const n=qc(t,e);return n||e},vC=(e,t,n)=>{const o=gw(n),r=bC(t,o.container());return pw(e,r,o).fold((()=>Ed(r,o).bind(M(pw,e,r)).map((e=>gC.before(e)))),F.none)},yC=(e,t)=>null===Md(e,t),xC=(e,t,n)=>pw(e,t,n).filter(M(yC,t)),wC=(e,t,n)=>{const o=bw(n);return xC(e,t,o).bind((e=>Od(e,o).isNone()?F.some(gC.start(e)):F.none()))},CC=(e,t,n)=>{const o=gw(n);return xC(e,t,o).bind((e=>Ed(e,o).isNone()?F.some(gC.end(e)):F.none()))},_C=(e,t,n)=>{const o=bw(n),r=bC(t,o.container());return pw(e,r,o).fold((()=>Od(r,o).bind(M(pw,e,r)).map((e=>gC.after(e)))),F.none)},SC=e=>!1===mw(EC(e)),kC=(e,t,n)=>fC([vC,wC,CC,_C],[e,t,n]).filter(SC),EC=e=>e.fold(D,D,D,D),OC=e=>e.fold(A("before"),A("start"),A("end"),A("after")),TC=e=>e.fold(gC.before,gC.before,gC.after,gC.after),AC=e=>e.fold(gC.start,gC.start,gC.end,gC.end),DC=(e,t,n,o,r,s)=>Lt(pw(t,n,o),pw(t,n,r),((t,o)=>t!==o&&((e,t,n)=>{const o=qc(t,e),r=qc(n,e);return o&&o===r})(n,t,o)?gC.after(e?t:o):s)).getOr(s),RC=(e,t)=>e.fold(I,(e=>{return o=t,!(OC(n=e)===OC(o)&&EC(n)===EC(o));var n,o})),MC=(e,t)=>e?t.fold(O(F.some,gC.start),F.none,O(F.some,gC.after),F.none):t.fold(F.none,O(F.some,gC.before),F.none,O(F.some,gC.end)),NC=(e,t,n,o)=>{const r=fw(e,o),s=kC(t,n,r);return kC(t,n,r).bind(M(MC,e)).orThunk((()=>((e,t,n,o,r)=>{const s=fw(e,r);return Cd(e,n,s).map(M(fw,e)).fold((()=>o.map(TC)),(r=>kC(t,n,r).map(M(DC,e,t,n,s,r)).filter(M(RC,o)))).filter(SC)})(e,t,n,s,o)))},PC=(e,t,n)=>{const o=e?1:-1;return t.setRng(Qi(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},LC=(e,t)=>{const n=t.selection.getRng(),o=e?Qi.fromRangeEnd(n):Qi.fromRangeStart(n);return!!(e=>_(e.selection.getSel().modify))(t)&&(e&&wr(o)?PC(!0,t.selection,o):!(e||!Cr(o))&&PC(!1,t.selection,o))};var BC;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(BC||(BC={}));const IC=(e,t)=>e===id.Backwards?re(t):t,FC=(e,t,n)=>e===id.Forwards?t.next(n):t.prev(n),zC=(e,t,n,o)=>Mo(o.getNode(t===id.Forwards))?BC.Br:!1===Kc(n,o)?BC.Block:BC.Wrap,jC=(e,t,n,o)=>{const r=bd(n);let s=o;const i=[];for(;s;){const n=FC(t,r,s);if(!n)break;if(Mo(n.getNode(!1)))return t===id.Forwards?{positions:IC(t,i).concat([n]),breakType:BC.Br,breakAt:F.some(n)}:{positions:IC(t,i),breakType:BC.Br,breakAt:F.some(n)};if(n.isVisible()){if(e(s,n)){const e=zC(0,t,s,n);return{positions:IC(t,i),breakType:e,breakAt:F.some(n)}}i.push(n),s=n}else s=n}return{positions:IC(t,i),breakType:BC.Eol,breakAt:F.none()}},HC=(e,t,n,o)=>t(n,o).breakAt.map((o=>{const r=t(n,o).positions;return e===id.Backwards?r.concat(o):[o].concat(r)})).getOr([]),VC=(e,t)=>J(e,((e,n)=>e.fold((()=>F.some(n)),(o=>Lt(ce(o.getClientRects()),ce(n.getClientRects()),((e,r)=>{const s=Math.abs(t-e.left);return Math.abs(t-r.left)<=s?n:o})).or(e)))),F.none()),$C=(e,t)=>ce(t.getClientRects()).bind((t=>VC(e,t.left))),UC=M(jC,Qi.isAbove,-1),WC=M(jC,Qi.isBelow,1),qC=M(HC,-1,UC),KC=M(HC,1,WC),GC=Lo,YC=(e,t)=>Math.abs(e.left-t),XC=(e,t)=>Math.abs(e.right-t),JC=(e,t)=>Me(e,((e,n)=>{const o=Math.min(YC(e,t),XC(e,t)),r=Math.min(YC(n,t),XC(n,t));return r===o&&ke(n,"node")&&GC(n.node)||r<o?n:e})),QC=e=>{const t=t=>W(t,(t=>{const n=Si(t);return n.node=e,n}));if(vo(e))return t(e.getClientRects());if(Eo(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},ZC=e=>ne(e,QC);var e_;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(e_||(e_={}));const t_=(e,t,n,o,r,s)=>{let i=0;const a=[],l=o=>{let s=ZC([o]);-1===e&&(s=s.reverse());for(let e=0;e<s.length;e++){const o=s[e];if(!n(o,c)){if(a.length>0&&t(o,Pe(a))&&i++,o.line=i,r(o))return!0;a.push(o)}}},c=Pe(s.getClientRects());if(!c)return a;const d=s.getNode();return l(d),((e,t,n,o)=>{for(;o=Wc(o,e,Fr,t);)if(n(o))return})(e,o,l,d),a},n_=M(t_,e_.Up,Oi,Ti),o_=M(t_,e_.Down,Ti,Oi),r_=e=>t=>((e,t)=>t.line>e)(e,t),s_=e=>t=>((e,t)=>t.line===e)(e,t),i_=(e,t)=>{e.selection.setRng(t),dm(e,e.selection.getRng())},a_=(e,t,n)=>F.some(Uw(e,t,n)),l_=(e,t,n,o,r,s)=>{const i=t===id.Forwards,a=bd(e.getBody()),l=M(rd,i?a.next:a.prev),c=i?o:r;if(!n.collapsed){const o=Di(n);if(s(o))return Vw(t,e,o,t===id.Backwards,!1)}const d=nd(t,e.getBody(),n);if(c(d))return $w(e,d.getNode(!i));const u=fw(i,l(d)),h=Or(n);if(!u)return h?F.some(n):F.none();if(c(u))return Vw(t,e,u.getNode(!i),i,!1);const m=l(u);return m&&c(m)&&sd(u,m)?Vw(t,e,m.getNode(!i),i,!1):h?a_(e,u.toRange(),!1):F.none()},c_=(e,t,n,o,r,s)=>{const i=nd(t,e.getBody(),n),a=Pe(i.getClientRects()),l=t===e_.Down;if(!a)return F.none();const c=(l?o_:n_)(e.getBody(),r_(1),i),d=Y(c,s_(1)),u=a.left,h=JC(d,u);if(h&&s(h.node)){const n=Math.abs(u-h.left),o=Math.abs(u-h.right);return Vw(t,e,h.node,n<o,!1)}let m;if(m=o(i)?i.getNode():r(i)?i.getNode(!0):Di(n),m){const n=((e,t,n,o)=>{const r=bd(t);let s,i,a,l;const c=[];let d=0;const u=e=>Pe(e.getClientRects());1===e?(s=r.next,i=Ti,a=Oi,l=Qi.after(o)):(s=r.prev,i=Oi,a=Ti,l=Qi.before(o));const h=u(l);do{if(!l.isVisible())continue;const e=u(l);if(a(e,h))continue;c.length>0&&i(e,Pe(c))&&d++;const t=Si(e);if(t.position=l,t.line=d,n(t))return c;c.push(t)}while(l=s(l));return c})(t,e.getBody(),r_(1),m);let o=JC(Y(n,s_(1)),u);if(o)return a_(e,o.position.toRange(),!1);if(o=Pe(Y(n,s_(0))),o)return a_(e,o.position.toRange(),!1)}return 0===d.length?d_(e,l).filter(l?r:o).map((t=>Uw(e,t.toRange(),!1))):F.none()},d_=(e,t)=>{const n=e.selection.getRng(),o=t?Qi.fromRangeEnd(n):Qi.fromRangeStart(n),r=(s=o.container(),i=e.getBody(),$o(un.fromDom(s),(e=>Pc(e.dom)),(e=>e.dom===i)).map((e=>e.dom)).getOr(i));var s,i;if(t){const e=WC(r,o);return de(e.positions)}{const e=UC(r,o);return ce(e.positions)}},u_=(e,t,n)=>d_(e,t).filter(n).exists((t=>(e.selection.setRng(t.toRange()),!0))),h_=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},m_=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},p_=(e,t,n)=>pC(t,n).map((t=>(h_(e,t),n))),f_=(e,t)=>{if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){const n=Qi.fromRangeStart(e.selection.getRng());Qi.isTextPosition(n)&&!1===(e=>wr(e)||Cr(e))(n)&&(h_(e,Sc(t.get(),n)),t.set(null))}},g_=(e,t,n)=>!!El(e)&&((e,t,n)=>{const o=e.getBody(),r=Qi.fromRangeStart(e.selection.getRng()),s=M(hw,e);return NC(n,s,o,r).bind((n=>p_(e,t,n)))})(e,t,n).isSome(),b_=(e,t,n)=>!!El(t)&&LC(e,t),v_=e=>{const t=Ys(null),n=M(hw,e);return e.on("NodeChange",(o=>{El(e)&&(((e,t,n)=>{const o=W(si(un.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(e=>e.dom)),r=Y(o,e),s=Y(n,e);q(se(r,s),M(m_,!1)),q(se(s,r),M(m_,!0))})(n,e.dom,o.parents),f_(e,t),((e,t,n,o)=>{if(t.selection.isCollapsed()){const r=Y(o,e);q(r,(o=>{const r=Qi.fromRangeStart(t.selection.getRng());kC(e,t.getBody(),r).bind((e=>p_(t,n,e)))}))}})(n,e,t,o.parents))})),t},y_=M(b_,!0),x_=M(b_,!1),w_=(e,t,n)=>{if(El(e)){const o=d_(e,t).getOrThunk((()=>{const n=e.selection.getRng();return t?Qi.fromRangeEnd(n):Qi.fromRangeStart(n)}));return kC(M(hw,e),e.getBody(),o).exists((t=>{const o=TC(t);return pC(n,o).exists((t=>(h_(e,t),!0)))}))}return!1},C_=(e,t)=>n=>pC(t,n).map((t=>()=>h_(e,t))),__=(e,t,n,o)=>{const r=e.getBody(),s=M(hw,e);e.undoManager.ignore((()=>{e.selection.setRng(((e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n})(n,o)),yw(e),kC(s,r,Qi.fromRangeStart(e.selection.getRng())).map(AC).bind(C_(e,t)).each(L)})),e.nodeChanged()},S_=(e,t,n,o)=>{const r=((e,t)=>qc(t,e)||e)(e.getBody(),o.container()),s=M(hw,e),i=kC(s,r,o);return i.bind((e=>n?e.fold(A(F.some(AC(e))),F.none,A(F.some(TC(e))),F.none):e.fold(F.none,A(F.some(TC(e))),F.none,A(F.some(AC(e)))))).map(C_(e,t)).getOrThunk((()=>{const a=_d(n,r,o),l=a.bind((e=>kC(s,r,e)));return Lt(i,l,(()=>pw(s,r,o).bind((t=>(e=>Lt(Td(e),Ad(e),((t,n)=>{const o=fw(!0,t),r=fw(!1,n);return Ed(e,o).forall((e=>e.isEqual(r)))})).getOr(!0))(t)?F.some((()=>{Ef(e,n,un.fromDom(t))})):F.none())))).getOrThunk((()=>l.bind((()=>a.map((r=>()=>{n?__(e,t,o,r):__(e,t,r,o)}))))))}))},k_=(e,t,n)=>{if(e.selection.isCollapsed()&&El(e)){const o=Qi.fromRangeStart(e.selection.getRng());return S_(e,t,n,o)}return F.none()},E_=e=>1===An(e),O_=(e,t,n,o)=>{const r=M(Zg,t),s=W(Y(o,r),(e=>e.dom));if(0===s.length)Ef(t,e,n);else{const e=((e,t)=>{const n=qg(!1),o=Xg(t,n.dom);return Kn(un.fromDom(e),n),Zn(un.fromDom(e)),Qi(o,0)})(n.dom,s);t.selection.setRng(e.toRange())}},T_=(e,t)=>{const n=un.fromDom(e.getBody()),o=un.fromDom(e.selection.getStart()),r=Y(((e,t)=>{const n=Ip(t,e);return ee(n,er).fold(A(n),(e=>n.slice(0,e)))})(n,o),E_);return de(r).bind((n=>{const o=Qi.fromRangeStart(e.selection.getRng());return!((e,t,n)=>Lt(Td(n),Ad(n),((o,r)=>{const s=fw(!0,o),i=fw(!1,r),a=fw(!1,t);return e?Ed(n,a).exists((e=>e.isEqual(i)&&t.isEqual(s))):Od(n,a).exists((e=>e.isEqual(s)&&t.isEqual(i)))})).getOr(!0))(t,o,n.dom)||Rd((s=n).dom)&&Ug(s.dom)?F.none():F.some((()=>O_(t,e,n,r)));var s}))},A_=(e,t)=>e.selection.isCollapsed()?T_(e,t):F.none(),D_=(e,t,n)=>F.some((()=>{e._selectionOverrides.hideFakeCaret(),Ef(e,t,un.fromDom(n))})),R_=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=t?Ep:Op,o=t?id.Forwards:id.Backwards,r=nd(o,e.getBody(),e.selection.getRng());return n(r)?D_(e,t,r.getNode(!t)):F.from(fw(t,r)).filter((e=>n(e)&&sd(r,e))).map((n=>()=>D_(e,t,n.getNode(!t))))})(e,t):((e,t)=>{const n=e.selection.getNode();return Io(n)?D_(e,t,n):F.none()})(e,t),M_=e=>{const t=parseInt(e,10);return isNaN(t)?0:t},N_=(e,t)=>(e||"table"===It(t)?"margin":"padding")+("rtl"===Vn(t,"direction")?"-right":"-left"),P_=e=>{const t=B_(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>oe(t,(t=>{const n=N_(dl(e),t),o=Un(t,n).map(M_).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&o>0})))(e,t))},L_=e=>rr(e)||sr(e),B_=e=>{return Y((t=e.selection.getSelectedBlocks(),W(t,un.fromDom)),(e=>!L_(e)&&!(e=>xn(e).exists(L_))(e)&&Uo(e,(e=>Po(e.dom)||Lo(e.dom))).exists((e=>Po(e.dom)))));var t},I_=(e,t)=>{const{dom:n}=e,o=ul(e),r=/[a-z%]+$/i.exec(o)[0],s=parseInt(o,10),i=dl(e);q(B_(e),(e=>{((e,t,n,o,r,s)=>{const i=N_(n,un.fromDom(s));if("outdent"===t){const t=Math.max(0,M_(s.style[i])-o);e.setStyle(s,i,t?t+r:"")}else{const t=M_(s.style[i])+o+r;e.setStyle(s,i,t)}})(n,t,i,s,r,e.dom)}))},F_=e=>I_(e,"outdent"),z_=e=>{if(e.selection.isCollapsed()&&P_(e)){const t=e.dom,n=e.selection.getRng(),o=Qi.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(null!==r&&Vp(un.fromDom(r),o))return F.some((()=>F_(e)))}return F.none()},j_=(e,t,n)=>he([z_,oC,Gw,(e,n)=>k_(e,t,n),Lw,ng,rC,R_,zw,A_],(t=>t(e,n))),H_=(e,t)=>{j_(e,t,!0).fold((()=>(e=>vw(e,"ForwardDelete"))(e)),L)},V_=(e,t)=>{e.addCommand("delete",(()=>{((e,t)=>{j_(e,t,!1).fold((()=>{yw(e),Cw(e)}),L)})(e,t)})),e.addCommand("forwardDelete",(()=>{H_(e,t)}))},$_=e=>void 0===e.touches||1!==e.touches.length?F.none():F.some(e.touches[0]),U_=e=>{const t=ti(),n=Ys(!1),o=oi((t=>{e.dispatch("longpress",{...t,type:"longpress"}),n.set(!0)}),400);e.on("touchstart",(e=>{$_(e).each((r=>{o.cancel();const s={x:r.clientX,y:r.clientY,target:e.target};o.throttle(e),n.set(!1),t.set(s)}))}),!0),e.on("touchmove",(r=>{o.cancel(),$_(r).each((o=>{t.on((r=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),o=Math.abs(e.clientY-t.y);return n>5||o>5})(o,r)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(r=>{o.cancel(),"touchcancel"!==r.type&&t.get().filter((e=>e.target.isEqualNode(r.target))).each((()=>{n.get()?r.preventDefault():e.dispatch("tap",{...r,type:"tap"})}))}),!0)},W_=(e,t)=>Se(e,t.nodeName),q_=(e,t)=>!!Eo(t)||!!vo(t)&&(!W_(e,t)&&!$d(t)),K_=(e,t)=>{if(Eo(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||W_(e,t.nextSibling)))return!0}return!1},G_=e=>{const t=e.dom,n=e.selection,o=e.schema,r=o.getBlockElements();let s=n.getStart();const i=e.getBody();let a,l,c;const d=Wa(e);if(!s||!vo(s))return;const u=i.nodeName.toLowerCase();if(!o.isValidChild(u,d.toLowerCase())||((e,t,n)=>U(Bp(un.fromDom(n),un.fromDom(t)),(t=>W_(e,t.dom))))(r,i,s))return;const h=n.getRng(),m=h.startContainer,p=h.startOffset,f=h.endContainer,g=h.endOffset,b=Lm(e);for(s=i.firstChild;s;)if(q_(r,s)){if(K_(r,s)){l=s,s=s.nextSibling,t.remove(l);continue}a||(a=t.create(d,qa(e)),s.parentNode.insertBefore(a,s),c=!0),l=s,s=s.nextSibling,a.appendChild(l)}else a=null,s=s.nextSibling;c&&b&&(h.setStart(m,p),h.setEnd(f,g),n.setRng(h),e.nodeChanged())},Y_=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),X_=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],i=s>0?t.charAt(s-1):"";if('"'===i)return o;if(">"===i){const e=t.lastIndexOf("<",s);if(-1!==e){if(-1!==t.substring(e,s).indexOf('contenteditable="false"'))return o}}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},J_=e=>{const t="contenteditable",n=" "+Nt.trim(hc(e))+" ",o=" "+Nt.trim(uc(e))+" ",r=Y_(n),s=Y_(o),i=mc(e);i.length>0&&e.on("BeforeSetContent",(t=>{((e,t,n)=>{let o=t.length,r=n.content;if("raw"!==n.format){for(;o--;)r=r.replace(t[o],X_(e,r,uc(e)));n.content=r}})(e,i,t)})),e.parser.addAttributeFilter("class",(e=>{let n=e.length;for(;n--;){const o=e[n];r(o)?o.attr(t,"true"):s(o)&&o.attr(t,"false")}})),e.serializer.addAttributeFilter(t,(e=>{let n=e.length;for(;n--;){const o=e[n];(r(o)||s(o))&&(i.length>0&&o.attr("data-mce-content")?(o.name="#text",o.type=3,o.raw=!0,o.value=o.attr("data-mce-content")):o.attr(t,null))}}))},Q_=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Er(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},Z_=(e,t)=>{const n=(e=>Ko(un.fromDom(e.getBody()),"*[data-mce-caret]").map((e=>e.dom)).getOrNull())(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Q_(e,n)):void(xr(n)&&(Q_(e,n),e.undoManager.add()))},eS=Lo,tS=(e,t,n)=>{const o=bd(e.getBody()),r=M(rd,1===t?o.next:o.prev);if(n.collapsed){const o=e.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!r(Qi.fromRangeStart(n))){const n=un.fromDom((e=>{const t=e.dom.create(Wa(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?Gn(un.fromDom(o),n):Kn(un.fromDom(o),n),e.selection.select(n.dom,!0),e.selection.collapse()}}},nS=(e,t)=>{const n=t?id.Forwards:id.Backwards,o=e.selection.getRng();return((e,t,n)=>l_(t,e,n,Dp,Rp,eS))(n,e,o).orThunk((()=>(tS(e,n,o),F.none())))},oS=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return((e,t,n)=>c_(t,e,n,(e=>Dp(e)||Tp(e)),(e=>Rp(e)||Ap(e)),eS))(n,e,o).orThunk((()=>(tS(e,n,o),F.none())))},rS=(e,t)=>nS(e,t).exists((t=>(i_(e,t),!0))),sS=(e,t)=>oS(e,t).exists((t=>(i_(e,t),!0))),iS=(e,t)=>u_(e,t,t?Rp:Dp),aS=e=>$(["figcaption"],It(e)),lS=(e,t,n,o)=>{const r=un.fromTag(n),s=un.fromTag("br");return qt(r,o),Xn(r,s),((e,t,n)=>{n?Xn(e,t):Yn(e,t)})(e,r,t),(e=>{const t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t})(s)},cS=(e,t,n)=>t?((e,t)=>WC(e,t).breakAt.isNone())(e.dom,n):((e,t)=>UC(e,t).breakAt.isNone())(e.dom,n),dS=(e,t)=>{const n=un.fromDom(e.getBody()),o=Qi.fromRangeStart(e.selection.getRng()),r=Wa(e),s=qa(e);return((e,t)=>{const n=M(fn,t);return Uo(un.fromDom(e.container()),er,n).filter(aS)})(o,n).exists((()=>{if(cS(n,t,o)){const o=lS(n,t,r,s);return e.selection.setRng(o),!0}return!1}))},uS=(e,t)=>!!e.selection.isCollapsed()&&dS(e,t),hS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},mS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,pS=(e,t)=>ne((e=>W(e,(e=>({...hS,action:E,...e}))))(e),(e=>mS(e,t)?[e]:[])),fS=(e,t)=>ne((e=>W(e,(e=>({...hS,action:()=>F.none(),...e}))))(e),(e=>mS(e,t)?[e]:[])),gS=(e,...t)=>()=>e.apply(null,t),bS=(e,t)=>Z(pS(e,t),(e=>e.action())),vS=(e,t)=>he(fS(e,t),(e=>e.action())),yS=(e,t)=>{const n=t?id.Forwards:id.Backwards,o=e.selection.getRng();return l_(e,n,o,Ep,Op,Io).exists((t=>(i_(e,t),!0)))},xS=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return c_(e,n,o,Ep,Op,Io).exists((t=>(i_(e,t),!0)))},wS=(e,t)=>u_(e,t,t?Op:Ep),CS=Sa([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),_S={...CS,none:e=>CS.none(e)},SS=(e,t,n)=>ne(kn(e),(e=>mn(e,t)?n(e)?[e]:[]:SS(e,t,n))),kS=(e,t)=>((e,t,n=B)=>n(t)?F.none():$(e,It(t))?F.some(t):qo(t,e.join(","),(e=>mn(e,"table")||n(e))))(["td","th"],e,t),ES=e=>SS(e,"th,td",I),OS=(e,t)=>Go(e,"table",t),TS=(e,t,n,o,r=I)=>{const s=1===o;if(!s&&n<=0)return _S.first(e[0]);if(s&&n>=e.length-1)return _S.last(e[e.length-1]);{const s=n+o,i=e[s];return r(i)?_S.middle(t,i):TS(e,t,s,o,r)}},AS=(e,t)=>OS(e,t).bind((t=>{const n=ES(t);return ee(n,(t=>fn(e,t))).map((e=>({index:e,all:n})))})),DS=(e,t=!1)=>{return Fn(e)?e.dom.isContentEditable:(n=e,Go(n,"[contenteditable]")).fold(A(t),(e=>"true"===RS(e)));var n},RS=e=>e.dom.contentEditable,MS=(e,t,n,o,r)=>{const s=si(un.fromDom(n),"td,th,caption").map((e=>e.dom)),i=Y(((e,t)=>ne(t,(t=>{const n=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}))(Si(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})))(e,s),(e=>t(e,r)));return((e,t,n)=>J(e,((e,o)=>e.fold((()=>F.some(o)),(e=>{const r=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),s=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return F.some(s<r?o:e)}))),F.none()))(i,o,r).map((e=>e.cell))},NS=M(MS,(e=>e.bottom),((e,t)=>e.y<t)),PS=M(MS,(e=>e.top),((e,t)=>e.y>t)),LS=(e,t)=>ce(t.getClientRects()).bind((t=>NS(e,t.left,t.top))).bind((e=>{return $C(Ad(n=e).map((e=>UC(n,e).positions.concat(e))).getOr([]),t);var n})),BS=(e,t)=>de(t.getClientRects()).bind((t=>PS(e,t.left,t.top))).bind((e=>{return $C(Td(n=e).map((e=>[e].concat(WC(n,e).positions))).getOr([]),t);var n})),IS=(e,t,n)=>{const o=e(t,n);return(e=>e.breakType===BC.Wrap&&0===e.positions.length)(o)||!Mo(n.getNode())&&(e=>e.breakType===BC.Br&&1===e.positions.length)(o)?!((e,t,n)=>n.breakAt.exists((n=>e(t,n).breakAt.isSome())))(e,t,o):o.breakAt.isNone()},FS=M(IS,UC),zS=M(IS,WC),jS=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!Rc()||!((e,t,n)=>{const o=Qi.fromRangeStart(t);return kd(!e,n).exists((e=>e.isEqual(o)))})(t,r,n))&&(Vw(s,e,n,!t,!1).each((t=>{i_(e,t)})),!0)},HS=(e,t)=>{const n=t.getNode(e);return vo(n)&&"TABLE"===n.nodeName?F.some(n):F.none()},VS=(e,t,n)=>{const o=HS(!!t,n),r=!1===t;o.fold((()=>i_(e,n.toRange())),(o=>kd(r,e.getBody()).filter((e=>e.isEqual(n))).fold((()=>i_(e,n.toRange())),(n=>((e,t,n)=>{const o=Wa(t);t.undoManager.transact((()=>{const r=un.fromTag(o);qt(r,qa(t)),Xn(r,un.fromTag("br")),e?Gn(un.fromDom(n),r):Kn(un.fromDom(n),r);const s=t.dom.createRng();s.setStart(r.dom,0),s.setEnd(r.dom,0),i_(t,s)}))})(t,e,o)))))},$S=(e,t,n,o)=>{const r=e.selection.getRng(),s=Qi.fromRangeStart(r),i=e.getBody();if(!t&&FS(o,s)){const o=((e,t,n)=>LS(t,n).orThunk((()=>ce(n.getClientRects()).bind((n=>VC(qC(e,Qi.before(t)),n.left))))).getOr(Qi.before(t)))(i,n,s);return VS(e,t,o),!0}if(t&&zS(o,s)){const o=((e,t,n)=>BS(t,n).orThunk((()=>ce(n.getClientRects()).bind((n=>VC(KC(e,Qi.after(t)),n.left))))).getOr(Qi.after(t)))(i,n,s);return VS(e,t,o),!0}return!1},US=(e,t,n)=>F.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((o=>F.from(e.dom.getParent(o,"table")).map((r=>n(e,t,r,o))))).getOr(!1),WS=(e,t)=>US(e,t,jS),qS=(e,t)=>US(e,t,$S),KS=(e,t,n)=>n.fold(F.none,F.none,((e,t)=>qm(t).map((e=>(e=>{const t=Ch.exact(e,0,e,0);return Oh(t)})(e)))),(n=>(e.execCommand("mceTableInsertRowAfter"),GS(e,t,n)))),GS=(e,t,n)=>KS(e,t,((e,t,n)=>AS(e,n).fold((()=>_S.none(e)),(n=>TS(n.all,e,n.index,1,t))))(n,DS)),YS=(e,t,n)=>KS(e,t,((e,t,n)=>AS(e,n).fold((()=>_S.none()),(n=>TS(n.all,e,n.index,-1,t))))(n,DS)),XS=(e,t)=>{const n=["table","li","dl"],o=un.fromDom(e.getBody()),r=e=>{const t=It(e);return fn(e,o)||$(n,t)},s=e.selection.getRng(),i=un.fromDom(t?s.endContainer:s.startContainer);return kS(i,r).map((n=>{OS(n,r).each((t=>{e.model.table.clearSelectedCells(t.dom)})),e.selection.collapse(!t);return(t?GS:YS)(e,r,n).each((t=>{e.selection.setRng(t)})),!0})).getOr(!1)},JS=(e,t)=>{e.on("keydown",(n=>{!1===n.isDefaultPrevented()&&((e,t,n)=>{const o=wt().os;bS([{keyCode:lh.RIGHT,action:gS(rS,e,!0)},{keyCode:lh.LEFT,action:gS(rS,e,!1)},{keyCode:lh.UP,action:gS(sS,e,!1)},{keyCode:lh.DOWN,action:gS(sS,e,!0)},{keyCode:lh.RIGHT,action:gS(WS,e,!0)},{keyCode:lh.LEFT,action:gS(WS,e,!1)},{keyCode:lh.UP,action:gS(qS,e,!1)},{keyCode:lh.DOWN,action:gS(qS,e,!0)},{keyCode:lh.RIGHT,action:gS(yS,e,!0)},{keyCode:lh.LEFT,action:gS(yS,e,!1)},{keyCode:lh.UP,action:gS(xS,e,!1)},{keyCode:lh.DOWN,action:gS(xS,e,!0)},{keyCode:lh.RIGHT,action:gS(g_,e,t,!0)},{keyCode:lh.LEFT,action:gS(g_,e,t,!1)},{keyCode:lh.RIGHT,ctrlKey:!o.isMacOS(),altKey:o.isMacOS(),action:gS(y_,e,t)},{keyCode:lh.LEFT,ctrlKey:!o.isMacOS(),altKey:o.isMacOS(),action:gS(x_,e,t)},{keyCode:lh.UP,action:gS(uS,e,!1)},{keyCode:lh.DOWN,action:gS(uS,e,!0)}],n).each((e=>{n.preventDefault()}))})(e,t,n)}))},QS=(e,t)=>({container:e,offset:t}),ZS=qs.DOM,ek=e=>t=>e===t?-1:0,tk=(e,t,n)=>{if(Eo(e)&&t>=0)return F.some(QS(e,t));{const o=Ci(ZS);return F.from(o.backwards(e,t,ek(e),n)).map((e=>QS(e.container,e.container.data.length)))}},nk=(e,t,n)=>{if(!Eo(e))return F.none();const o=e.textContent;if(t>=0&&t<=o.length)return F.some(QS(e,t));{const o=Ci(ZS);return F.from(o.backwards(e,t,ek(e),n)).bind((e=>{const o=e.container.data;return nk(e.container,t+o.length,n)}))}},ok=(e,t,n)=>{if(!Eo(e))return F.none();const o=e.textContent;if(t<=o.length)return F.some(QS(e,t));{const r=Ci(ZS);return F.from(r.forwards(e,t,ek(e),n)).bind((e=>ok(e.container,t-o.length,n)))}},rk=(e,t,n,o,r)=>{const s=Ci(e,(e=>t=>e.isBlock(t)||$(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return F.from(s.backwards(t,n,o,r))},sk=e=>e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),ik=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),ak=(e,t)=>e.substring(t.length),lk=(e,t,n,o=0)=>{if(!(r=t).collapsed||3!==r.startContainer.nodeType)return F.none();var r;const s=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return rk(e,t.startContainer,t.startOffset,((e,t,o)=>((e,t,n)=>{let o;for(o=t-1;o>=0;o--){const t=e.charAt(o);if(ik(t))return F.none();if(t===n)break}return F.some(o)})(o,t,n).getOr(t)),s).bind((e=>{const r=t.cloneRange();if(r.setStart(e.container,e.offset),r.setEnd(t.endContainer,t.endOffset),r.collapsed)return F.none();const s=sk(r);return 0!==s.lastIndexOf(n)||ak(s,n).length<o?F.none():F.some({text:ak(s,n),range:r,triggerChar:n})}))},ck=(e,t,n,o=0)=>{return(r=un.fromDom(t.startContainer),Go(r,Gm)).fold((()=>lk(e,t,n,o)),(t=>{const o=e.createRng();o.selectNode(t.dom);const r=sk(o);return F.some({range:o,text:ak(r,n),triggerChar:n})}));var r},dk=e=>{if((e=>3===e.nodeType)(e))return QS(e,e.data.length);{const t=e.childNodes;return t.length>0?dk(t[t.length-1]):QS(e,t.length)}},uk=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?uk(n[t],0):n.length>0&&(e=>1===e.nodeType)(e)&&n.length===t?dk(n[n.length-1]):QS(e,t)},hk=e=>t=>{const n=uk(t.startContainer,t.startOffset);return!((e,t)=>rk(e,t.container,t.offset,((e,t)=>0===t?-1:t),e.getRoot()).filter((e=>{const t=e.container.data.charAt(e.offset-1);return!ik(t)})).isSome())(e,n)},mk=(e,t)=>{const n=t(),o=e.selection.getRng();return((e,t,n)=>he(n.triggerChars,(n=>ck(e,t,n))))(e.dom,o,n).bind((n=>pk(e,t,n)))},pk=(e,t,n,o={})=>{const r=t(),s=e.selection.getRng().startContainer.nodeValue,i=Y(r.lookupByChar(n.triggerChar),(t=>n.text.length>=t.minChars&&t.matches.getOrThunk((()=>hk(e.dom)))(n.range,s,n.text)));if(0===i.length)return F.none();const a=Promise.all(W(i,(e=>e.fetch(n.text,e.maxResults,o).then((t=>({matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))))));return F.some({lookupData:a,context:n})};var fk;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(fk||(fk={}));const gk=(e,t,n)=>e.stype===fk.Error?t(e.serror):n(e.svalue),bk=e=>({stype:fk.Value,svalue:e}),vk=e=>({stype:fk.Error,serror:e}),yk=e=>gk(e,_a.error,_a.value),xk=bk,wk=e=>{const t=[],n=[];return q(e,(e=>{gk(e,(e=>n.push(e)),(e=>t.push(e)))})),{values:t,errors:n}},Ck=vk,_k=(e,t)=>e.stype===fk.Error?t(e.serror):e,Sk=(e,t)=>e.stype===fk.Value?{stype:fk.Value,svalue:t(e.svalue)}:e,kk=(e,t)=>e.stype===fk.Error?{stype:fk.Error,serror:t(e.serror)}:e,Ek=gk,Ok=e=>f(e)&&me(e).length>100?" removed due to size":JSON.stringify(e,null,2),Tk=(e,t)=>Ck([{path:e,getErrorInfo:t}]),Ak=(e,t,n,o)=>_e(n,o).fold((()=>((e,t,n)=>Tk(e,(()=>'The chosen schema: "'+n+'" did not exist in branches: '+Ok(t))))(e,n,o)),(n=>n.extract(e.concat(["branch: "+o]),t))),Dk=(e,t)=>({extract:(n,o)=>_e(o,e).fold((()=>((e,t)=>Tk(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(n,e)),(e=>Ak(n,o,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+me(t)}),Rk=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const t in r)Se(r,t)&&(n[t]=e(n[t],r[t]))}return n},Mk=Rk(((e,t)=>g(e)&&g(t)?Mk(e,t):t)),Nk=(Rk(((e,t)=>t)),e=>({tag:"defaultedThunk",process:A(e)})),Pk=e=>O(Ck,te)(e),Lk=e=>{const t=wk(e);return t.errors.length>0?Pk(t.errors):xk(t.values)},Bk=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Ik=e=>({extract:(t,n)=>_k(e(n),(e=>((e,t)=>Tk(e,A(t)))(t,e))),toString:A("val")}),Fk=Ik(xk),zk=(e,t,n,o)=>_e(t,n).fold((()=>((e,t,n)=>Tk(e,(()=>'Could not find valid *required* value for "'+t+'" in '+Ok(n))))(e,n,t)),o),jk=(e,t,n,o)=>o(_e(e,t).getOrThunk((()=>n(e)))),Hk=(e,t,n,o,r)=>{const s=e=>r.extract(t.concat([o]),e),i=e=>e.fold((()=>xk(F.none())),(e=>{const n=r.extract(t.concat([o]),e);return Sk(n,F.some)}));switch(e.tag){case"required":return zk(t,n,o,s);case"defaultedThunk":return jk(n,o,e.process,s);case"option":return((e,t,n)=>n(_e(e,t)))(n,o,i);case"defaultedOptionThunk":return((e,t,n,o)=>o(_e(e,t).map((t=>!0===t?n(e):t))))(n,o,e.process,i);case"mergeWithThunk":return jk(n,o,A({}),(t=>{const o=Mk(e.process(n),t);return s(o)}))}},Vk=e=>({extract:(t,n)=>((e,t,n)=>{const o={},r=[];for(const s of n)Bk(s,((n,s,i,a)=>{const l=Hk(i,e,t,n,a);Ek(l,(e=>{r.push(...e)}),(e=>{o[s]=e}))}),((e,n)=>{o[e]=n(t)}));return r.length>0?Ck(r):xk(o)})(t,n,e),toString:()=>{const t=W(e,(e=>Bk(e,((e,t,n,o)=>e+" -> "+o.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),$k=e=>({extract:(t,n)=>{const o=W(n,((n,o)=>e.extract(t.concat(["["+o+"]"]),n)));return Lk(o)},toString:()=>"array("+e.toString()+")"}),Uk=(e,t,n)=>yk(((e,t,n)=>{const o=t.extract([e],n);return kk(o,(e=>({input:n,errors:e})))})(e,t,n)),Wk=e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:A("... (only showing first ten failures)")}]):e;return W(t,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))})(e.errors).join("\n")+"\n\nInput object: "+Ok(e.input),qk=(e,t)=>Dk(e,ge(t,Vk)),Kk=A(Fk),Gk=(e,t)=>Ik((n=>{const o=typeof n;return e(n)?xk(n):Ck(`Expected type: ${t} but got: ${o}`)})),Yk=Gk(S,"number"),Xk=Gk(p,"string"),Jk=Gk(y,"boolean"),Qk=Gk(_,"function"),Zk=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),eE=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),tE=e=>{return t=t=>$(e,t)?_a.value(t):_a.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`),Ik((e=>t(e).fold(Ck,xk)));var t},nE=(e,t)=>Zk(e,e,{tag:"required",process:{}},t),oE=e=>nE(e,Xk),rE=e=>nE(e,Qk),sE=(e,t)=>Zk(e,e,{tag:"option",process:{}},t),iE=e=>sE(e,Xk),aE=(e,t,n)=>Zk(e,e,Nk(t),n),lE=(e,t)=>aE(e,t,Yk),cE=(e,t,n)=>aE(e,t,tE(n)),dE=(e,t)=>aE(e,t,Jk),uE=(e,t)=>aE(e,t,Qk),hE=oE("type"),mE=rE("fetch"),pE=rE("onAction"),fE=uE("onSetup",(()=>E)),gE=iE("text"),bE=iE("icon"),vE=iE("tooltip"),yE=iE("label"),xE=dE("active",!1),wE=dE("enabled",!0),CE=dE("primary",!1),_E=e=>((e,t)=>aE(e,t,Xk))("type",e),SE=Vk([hE,oE("ch"),lE("minChars",1),(EE=1,((e,t)=>Zk(e,e,Nk(t),Kk()))("columns",EE)),lE("maxResults",10),(kE="matches",sE(kE,Qk)),mE,pE,((e,t,n)=>aE(e,t,$k(n)))("highlightOn",[],Xk)]);var kE,EE;const OE=[wE,vE,bE,gE,fE],TE=[xE].concat(OE),AE=[uE("predicate",B),cE("scope","node",["node","editor"]),cE("position","selection",["node","selection","line"])],DE=OE.concat([_E("contextformbutton"),CE,pE,eE("original",D)]),RE=TE.concat([_E("contextformbutton"),CE,pE,eE("original",D)]),ME=OE.concat([_E("contextformbutton")]),NE=TE.concat([_E("contextformtogglebutton")]),PE=qk("type",{contextformbutton:DE,contextformtogglebutton:RE});Vk([_E("contextform"),uE("initValue",A("")),yE,((e,t)=>Zk(e,e,{tag:"required",process:{}},$k(t)))("commands",PE),sE("launch",qk("type",{contextformbutton:ME,contextformtogglebutton:NE}))].concat(AE));const LE=e=>{const t=e.ui.registry.getAll().popups,n=ge(t,(e=>{return(t=e,Uk("Autocompleter",SE,t)).fold((e=>{throw new Error(Wk(e))}),D);var t})),o=Ee(we(n,(e=>e.ch))),r=Ce(n);return{dataset:n,triggerChars:o,lookupByChar:e=>Y(r,(t=>t.ch===e))}},BE=e=>{const t=ti(),n=Ys(!1),o=t.isSet,r=()=>{o()&&((e=>{Ky(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},s=n=>{o()||(((e,t)=>{Ky(e).autocompleter.addDecoration(t)})(e,n.range),t.set({triggerChar:n.triggerChar,matchLength:n.text.length}))},i=Le((()=>LE(e))),a=o=>{(n=>t.get().map((t=>ck(e.dom,e.selection.getRng(),t.triggerChar).bind((t=>pk(e,i,t,n))))).getOrThunk((()=>mk(e,i))))(o).fold(r,(o=>{s(o.context),o.lookupData.then((s=>{t.get().map((i=>{const a=o.context;i.triggerChar===a.triggerChar&&(a.text.length-i.matchLength>=10?r():(t.set({...i,matchLength:a.text.length}),n.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:s}):(n.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:s}))))}))}))}))};e.addCommand("mceAutocompleterReload",((e,t)=>{const n=f(t)?t.fetchOptions:{};a(n)})),e.addCommand("mceAutocompleterClose",r),((e,t)=>{const n=oi(t.load,50);e.on("keypress compositionend",(e=>{27!==e.which&&n.throttle()})),e.on("keydown",(e=>{const o=e.which;8===o?n.throttle():27===o&&t.cancelIfNecessary()})),e.on("remove",n.cancel)})(e,{cancelIfNecessary:r,load:a})},IE=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:E,inputType:n},i=Ds(new InputEvent(e));return t.dispatch(e,{...i,...s,...o})},FE=IE("input"),zE=IE("beforeinput"),jE=(e,t)=>{e.on("keydown",(n=>{!1===n.isDefaultPrevented()&&((e,t,n)=>{const o=n.keyCode===lh.BACKSPACE?"deleteContentBackward":"deleteContentForward";vS([{keyCode:lh.BACKSPACE,action:gS(z_,e)},{keyCode:lh.BACKSPACE,action:gS(oC,e,!1)},{keyCode:lh.DELETE,action:gS(oC,e,!0)},{keyCode:lh.BACKSPACE,action:gS(Gw,e,!1)},{keyCode:lh.DELETE,action:gS(Gw,e,!0)},{keyCode:lh.BACKSPACE,action:gS(k_,e,t,!1)},{keyCode:lh.DELETE,action:gS(k_,e,t,!0)},{keyCode:lh.BACKSPACE,action:gS(ng,e,!1)},{keyCode:lh.DELETE,action:gS(ng,e,!0)},{keyCode:lh.BACKSPACE,action:gS(rC,e,!1)},{keyCode:lh.DELETE,action:gS(rC,e,!0)},{keyCode:lh.BACKSPACE,action:gS(R_,e,!1)},{keyCode:lh.DELETE,action:gS(R_,e,!0)},{keyCode:lh.BACKSPACE,action:gS(zw,e,!1)},{keyCode:lh.DELETE,action:gS(zw,e,!0)},{keyCode:lh.BACKSPACE,action:gS(Lw,e,!1)},{keyCode:lh.DELETE,action:gS(Lw,e,!0)},{keyCode:lh.BACKSPACE,action:gS(A_,e,!1)},{keyCode:lh.DELETE,action:gS(A_,e,!0)}],n).each((t=>{n.preventDefault(),zE(e,o).isDefaultPrevented()||(t(),FE(e,o))}))})(e,t,n)})),e.on("keyup",(t=>{!1===t.isDefaultPrevented()&&((e,t)=>{bS([{keyCode:lh.BACKSPACE,action:gS(nC,e)},{keyCode:lh.DELETE,action:gS(nC,e)}],t)})(e,t)}))},HE=(e,t)=>{let n,o=t;const r=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const e=(e=>{for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}})(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(r.doc.createTextNode(dr),t.firstChild)}const i=r.createRng();if(t.normalize(),t.hasChildNodes()){const e=new Jo(t,t);for(;n=e.current();){if(Eo(n)){i.setStart(n,0),i.setEnd(n,0);break}if(s[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}o=n,n=e.next()}n||(i.setStart(o,0),i.setEnd(o,0))}else Mo(t)?t.nextSibling&&r.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),dm(e,i)},VE=e=>F.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),$E=(e,t)=>e&&e.parentNode&&e.parentNode.nodeName===t,UE=e=>e&&/^(OL|UL|LI)$/.test(e.nodeName),WE=e=>{const t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},qE=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!vo(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},KE=(e,t,n,o,r)=>{const s=e.dom,i=e.selection.getRng();if(n===e.getBody())return;var a;UE(a=n)&&UE(a.parentNode)&&(r="LI");let l=t(r);if(qE(n,o,!0)&&qE(n,o,!1))if($E(n,"LI")){const e=WE(n);s.insertAfter(l,e),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(n)?s.remove(e):s.remove(n)}else s.replace(l,n);else if(qE(n,o,!0))$E(n,"LI")?(s.insertAfter(l,WE(n)),l.appendChild(s.doc.createTextNode(" ")),l.appendChild(n)):n.parentNode.insertBefore(l,n),s.remove(o);else if(qE(n,o,!1))s.insertAfter(l,WE(n)),s.remove(o);else{n=WE(n);const e=i.cloneRange();e.setStartAfter(o),e.setEndAfter(n);const t=e.extractContents();"LI"===r&&((e,t)=>e.firstChild&&e.firstChild.nodeName===t)(t,"LI")?(l=t.firstChild,s.insertAfter(t,n)):(s.insertAfter(t,n),s.insertAfter(l,n)),s.remove(o)}HE(e,l)},GE=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),YE=e=>{e.innerHTML='<br data-mce-bogus="1">'},XE=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,JE=(e,t)=>t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t),QE=(e,t,n)=>!1===Eo(t)?n:e?1===n&&t.data.charAt(n-1)===hr?0:n:n===t.data.length-1&&t.data.charAt(n)===hr?t.data.length:n,ZE=(e,t)=>{const n=e.getRoot();let o,r;for(o=t;o!==n&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n},eO=(e,t)=>{if(Wa(e).toLowerCase()===t.tagName.toLowerCase()){((e,t,n)=>{const o=e.dom;F.from(n.style).map(o.parseStyle).each((e=>{const n={...Wn(un.fromDom(t)),...e};o.setStyles(t,n)}));const r=F.from(n.class).map((e=>e.split(/\s+/))),s=F.from(t.className).map((e=>Y(e.split(/\s+/),(e=>""!==e))));Lt(r,s,((e,n)=>{const r=Y(n,(t=>!$(e,t))),s=[...e,...r];o.setAttrib(t,"class",s.join(" "))}));const i=["style","class"],a=xe(n,((e,t)=>!$(i,t)));o.setAttribs(t,a)})(e,t,qa(e))}},tO=(e,t)=>{let n,o,r,s,i,a,l,c,d;const u=e.dom,h=e.schema,m=h.getNonEmptyElements(),p=e.selection.getRng(),f=Wa(e),g=t=>{let n,r,i,a=o;const l=h.getTextInlineElements();if(n=t||"TABLE"===c||"HR"===c?u.create(t||f):s.cloneNode(!1),i=n,!1===Ya(e))u.setAttrib(n,"style",null),u.setAttrib(n,"class",null);else do{if(l[a.nodeName]){if(Rd(a)||$d(a))continue;r=a.cloneNode(!1),u.setAttrib(r,"id",""),n.hasChildNodes()?(r.appendChild(n.firstChild),n.appendChild(r)):(i=r,n.appendChild(r))}}while((a=a.parentNode)&&a!==w);return eO(e,n),YE(i),n},b=e=>{let t,n;const i=QE(e,o,r);if(Eo(o)&&(e?i>0:i<o.nodeValue.length))return!1;if(o.parentNode===s&&d&&!e)return!0;if(e&&vo(o)&&o===s.firstChild)return!0;if(XE(o,"TABLE")||XE(o,"HR"))return d&&!e||!d&&e;const a=new Jo(o,s);for(Eo(o)&&(e&&0===i?a.prev():e||i!==o.nodeValue.length||a.next());t=a.current();){if(vo(t)){if(!t.getAttribute("data-mce-bogus")&&(n=t.nodeName.toLowerCase(),m[n]&&"br"!==n))return!1}else if(Eo(t)&&!jr(t.nodeValue))return!1;e?a.prev():a.next()}return!0},v=()=>{i=/^(H[1-6]|PRE|FIGURE)$/.test(c)&&"HGROUP"!==C?g(f):g(),Xa(e)&&JE(u,l)&&u.isEmpty(s)?i=u.split(l,s):u.insertAfter(i,s),HE(e,i)};zh(u,p).each((e=>{p.setStart(e.startContainer,e.startOffset),p.setEnd(e.endContainer,e.endOffset)})),o=p.startContainer,r=p.startOffset;const y=!(!t||!t.shiftKey),x=!(!t||!t.ctrlKey);vo(o)&&o.hasChildNodes()&&(d=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,r=d&&Eo(o)?o.nodeValue.length:0);const w=ZE(u,o);if(!w)return;y||(o=((e,t,n,o,r)=>{let s,i,a,l,c,d;const u=e.dom,h=ZE(u,o);if(i=u.getParent(o,u.isBlock),!i||!JE(u,i)){if(i=i||h,d=i===e.getBody()||(e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName))(i)?i.nodeName.toLowerCase():i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return s=u.create(t),eO(e,s),i.appendChild(s),n.setStart(s,0),n.setEnd(s,0),s;for(l=o;l.parentNode!==i;)l=l.parentNode;for(;l&&!u.isBlock(l);)a=l,l=l.previousSibling;if(a&&e.schema.isValidChild(d,t.toLowerCase())){for(s=u.create(t),eO(e,s),a.parentNode.insertBefore(s,a),l=a;l&&!u.isBlock(l);)c=l.nextSibling,s.appendChild(l),l=c;n.setStart(o,r),n.setEnd(o,r)}}return o})(e,f,p,o,r)),s=u.getParent(o,u.isBlock),l=s?u.getParent(s.parentNode,u.isBlock):null,c=s?s.nodeName.toUpperCase():"";const C=l?l.nodeName.toUpperCase():"";"LI"!==C||x||(s=l,l=l.parentNode,c=C),/^(LI|DT|DD)$/.test(c)&&u.isEmpty(s)?KE(e,g,l,s,f):s!==e.getBody()&&(br(s)?(i=Er(s),u.isEmpty(s)&&YE(s),eO(e,i),HE(e,i)):b()?v():b(!0)?(i=s.parentNode.insertBefore(g(),s),HE(e,XE(s,"HR")?i:s)):(n=(e=>{const t=e.cloneRange();return t.setStart(e.startContainer,QE(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,QE(!1,e.endContainer,e.endOffset)),t})(p).cloneRange(),n.setEndAfter(s),a=n.extractContents(),(e=>{q(ri(un.fromDom(e),Ht),(e=>{const t=e.dom;t.nodeValue=pr(t.nodeValue)}))})(a),(e=>{do{Eo(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)})(a),i=a.firstChild,u.insertAfter(a,s),((e,t,n)=>{let o=n;const r=[];let s;if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;vo(o)&&!t[o.nodeName.toLowerCase()]&&r.push(o)}for(s=r.length;s--;)o=r[s],(!o.hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue||GE(e,o))&&e.remove(o)}})(u,m,i),((e,t)=>{t.normalize();const n=t.lastChild;n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")})(u,s),u.isEmpty(s)&&YE(s),i.normalize(),u.isEmpty(i)?(u.remove(i),v()):(eO(e,i),HE(e,i))),u.setAttrib(i,"id",""),e.dispatch("NewBlock",{newBlock:i}))},nO=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),dm(e,o)},oO=(e,t)=>{const n=e.selection,o=e.dom,r=n.getRng();let s,i;zh(o,r).each((e=>{r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset)}));let a=r.startOffset,l=r.startContainer;if(1===l.nodeType&&l.hasChildNodes()){const e=a>l.childNodes.length-1;l=l.childNodes[Math.min(a,l.childNodes.length-1)]||l,a=e&&3===l.nodeType?l.nodeValue.length:0}let c=o.getParent(l,o.isBlock);const d=c?o.getParent(c.parentNode,o.isBlock):null,u=d?d.nodeName.toUpperCase():"",h=!(!t||!t.ctrlKey);"LI"!==u||h||(c=d),l&&3===l.nodeType&&a>=l.nodeValue.length&&(((e,t,n)=>{const o=new Jo(t,n);let r;const s=e.getNonEmptyElements();for(;r=o.next();)if(s[r.nodeName.toLowerCase()]||r.length>0)return!0})(e.schema,l,c)||(s=o.create("br"),r.insertNode(s),r.setStartAfter(s),r.setEndAfter(s),i=!0)),s=o.create("br"),ea(o,r,s),nO(e,s,i),e.undoManager.add()},rO=(e,t)=>{const n=un.fromTag("br");Kn(un.fromDom(t),n),e.undoManager.add()},sO=(e,t)=>{iO(e.getBody(),t)||Gn(un.fromDom(t),un.fromTag("br"));const n=un.fromTag("br");Gn(un.fromDom(t),n),nO(e,n.dom,!1),e.undoManager.add()},iO=(e,t)=>{return n=Qi.after(t),!!Mo(n.getNode())||Ed(e,Qi.after(t)).map((e=>Mo(e.getNode()))).getOr(!1);var n},aO=e=>e&&"A"===e.nodeName&&"href"in e,lO=e=>e.fold(B,aO,aO,B),cO=(e,t)=>{t.fold(E,M(rO,e),M(sO,e),E)},dO=(e,t)=>{const n=(e=>{const t=M(hw,e),n=Qi.fromRangeStart(e.selection.getRng());return kC(t,e.getBody(),n).filter(lO)})(e);n.isSome()?n.each(M(cO,e)):oO(e,t)},uO=(e,t)=>VE(e).filter((e=>t.length>0&&mn(un.fromDom(e),t))).isSome(),hO=Sa([{br:[]},{block:[]},{none:[]}]),mO=(e,t)=>(e=>uO(e,Ga(e)))(e),pO=e=>(t,n)=>(e=>VE(e).filter((e=>sr(un.fromDom(e)))).isSome())(t)===e,fO=(e,t)=>(n,o)=>{const r=(e=>VE(e).fold(A(""),(e=>e.nodeName.toUpperCase())))(n)===e.toUpperCase();return r===t},gO=e=>fO("pre",e),bO=e=>(t,n)=>Ua(t)===e,vO=(e,t)=>(e=>uO(e,Ka(e)))(e),yO=(e,t)=>t,xO=e=>{const t=Wa(e),n=((e,t)=>{const n=e.getRoot();let o,r;for(o=t;o!==n&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n})(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t)},wO=(e,t)=>(n,o)=>J(e,((e,t)=>e&&t(n,o)),!0)?F.some(t):F.none(),CO=(e,t)=>{((e,t)=>fC([wO([mO],hO.none()),wO([fO("summary",!0)],hO.br()),wO([gO(!0),bO(!1),yO],hO.br()),wO([gO(!0),bO(!1)],hO.block()),wO([gO(!0),bO(!0),yO],hO.block()),wO([gO(!0),bO(!0)],hO.br()),wO([pO(!0),yO],hO.br()),wO([pO(!0)],hO.block()),wO([vO],hO.br()),wO([yO],hO.br()),wO([xO],hO.block())],[e,!(!t||!t.shiftKey)]).getOr(hO.none()))(e,t).fold((()=>{if(C(t)){if(zE(e,"insertLineBreak").isDefaultPrevented())return}dO(e,t),C(t)&&FE(e,"insertLineBreak")}),(()=>{if(C(t)){if(zE(e,"insertParagraph").isDefaultPrevented())return}tO(e,t),C(t)&&FE(e,"insertParagraph")}),E)},_O=e=>{e.on("keydown",(t=>{t.keyCode===lh.ENTER&&((e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((()=>{!1===e.selection.isCollapsed()&&yw(e),CO(e,t)})))})(e,t)}))},SO=(e,t)=>{e.on("keydown",(n=>{!1===n.isDefaultPrevented()&&((e,t,n)=>{bS([{keyCode:lh.END,action:gS(iS,e,!0)},{keyCode:lh.HOME,action:gS(iS,e,!1)},{keyCode:lh.END,action:gS(wS,e,!0)},{keyCode:lh.HOME,action:gS(wS,e,!1)},{keyCode:lh.END,action:gS(w_,e,!0,t)},{keyCode:lh.HOME,action:gS(w_,e,!1,t)}],n).each((e=>{n.preventDefault()}))})(e,t,n)}))},kO=e=>{e.on("input",(t=>{!1===t.isComposing&&(e=>{const t=un.fromDom(e.getBody());e.selection.isCollapsed()&&uf(t,Qi.fromRangeStart(e.selection.getRng())).each((t=>{e.selection.setRng(t.toRange())}))})(e)}))},EO=wt(),OO=e=>e.stopImmediatePropagation(),TO=e=>e.keyCode===lh.PAGE_UP||e.keyCode===lh.PAGE_DOWN,AO=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",OO,!0):!n&&e.get()&&t.off("NodeChange",OO),e.set(n)},DO=(e,t)=>{if(EO.os.isMacOS())return;const n=Ys(!1);e.on("keydown",(t=>{TO(t)&&AO(n,e,!0)})),e.on("keyup",(o=>{!1===o.isDefaultPrevented()&&((e,t,n)=>{bS([{keyCode:lh.PAGE_UP,action:gS(w_,e,!1,t)},{keyCode:lh.PAGE_DOWN,action:gS(w_,e,!0,t)}],n)})(e,t,o),TO(o)&&n.get()&&(AO(n,e,!1),e.nodeChanged())}))},RO=(e,t)=>{const n=t.container(),o=t.offset();return Eo(n)?(n.insertData(o,e),F.some(Qi(n,o+e.length))):od(t).map((n=>{const o=un.fromText(e);return t.isAtEnd()?Gn(n,o):Kn(n,o),Qi(o.dom,e.length)}))},MO=M(RO,dr),NO=M(RO," "),PO=(e,t)=>n=>((e,t)=>!nf(t)&&(of(e,t)||ef(e,t)||tf(e,t)))(e,n)?MO(t):NO(t),LO=e=>{const t=Qi.fromRangeStart(e.selection.getRng()),n=un.fromDom(e.getBody());if(e.selection.isCollapsed()){const o=M(hw,e),r=Qi.fromRangeStart(e.selection.getRng());return kC(o,e.getBody(),r).bind((e=>t=>t.fold((t=>Od(e.dom,Qi.before(t))),(e=>Td(e)),(e=>Ad(e)),(t=>Ed(e.dom,Qi.after(t)))))(n)).map((o=>()=>PO(n,t)(o).each((e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0))(e))))}return F.none()},BO=e=>{e.on("keydown",(t=>{!1===t.isDefaultPrevented()&&((e,t)=>{vS([{keyCode:lh.SPACEBAR,action:gS(LO,e)}],t).each((n=>{t.preventDefault(),zE(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),FE(e,"insertText",{data:" "}))}))})(e,t)}))},IO=e=>fc(e)?[{keyCode:lh.TAB,action:gS(XS,e,!0)},{keyCode:lh.TAB,shiftKey:!0,action:gS(XS,e,!1)}]:[],FO=e=>{e.on("keydown",(t=>{!1===t.isDefaultPrevented()&&((e,t)=>{bS([...IO(e)],t).each((e=>{t.preventDefault()}))})(e,t)}))},zO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),BE(e),Uy(e))return Ys(null);{const t=v_(e);return(e=>{e.on("keyup compositionstart",M(Z_,e))})(e),JS(e,t),jE(e,t),_O(e),BO(e),kO(e),FO(e),SO(e,t),DO(e,t),t}};class jO{constructor(e){let t;this.lastPath=[],this.editor=e;const n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(n=>{const o=e.selection.getRng(),r={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!==n.type&&Dh(r,t)||e.dispatch("SelectionChange"),t=r})),e.on("contextmenu",(()=>{e.dispatch("SelectionChange")})),e.on("SelectionChange",(()=>{const t=e.selection.getStart(!0);t&&$u(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(t=>{!t.isDefaultPrevented()&&$u(e)&&("IMG"===e.selection.getNode().nodeName?Sm.setEditorTimeout(e,(()=>{e.nodeChanged()})):e.nodeChanged())}))}nodeChanged(e){const t=this.editor.selection;let n,o,r;this.editor.initialized&&t&&!Il(this.editor)&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),n=t.getStart(!0)||r,n.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(n,r)||(n=r),o=[],this.editor.dom.getParent(n,(e=>{if(e===r)return!0;o.push(e)})),(e=e||{}).element=n,e.parents=o,this.editor.dispatch("NodeChange",e))}isSameElementPath(e){let t;const n=this.editor,o=re(n.dom.getParents(e,I,n.getBody()));if(o.length===this.lastPath.length){for(t=o.length;t>=0&&o[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=o,!0}return this.lastPath=o,!1}}const HO="x-tinymce/html",VO=A(HO),$O="\x3c!-- x-tinymce/html --\x3e",UO=e=>$O+e,WO=e=>-1!==e.indexOf($O),qO=(e,t,n)=>{const o=e.split(/\n\n/),r=((e,t)=>{let n="<"+e;const o=we(t,((e,t)=>t+'="'+ps.encodeAllRaw(e)+'"'));return o.length&&(n+=" "+o.join(" ")),n+">"})(t,n),s="</"+t+">",i=W(o,(e=>e.split(/\n/).join("<br />")));return 1===i.length?i[0]:W(i,(e=>r+e+s)).join("")},KO="%MCEPASTEBIN%",GO=e=>e.dom.get("mcepastebin"),YO=e=>e&&"mcepastebin"===e.id,XO=e=>e===KO,JO=e=>{const t=Ys(null);return{create:()=>((e,t)=>{const{dom:n,selection:o}=e,r=e.getBody();t.set(o.getRng());const s=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},KO);Tt.browser.isFirefox()&&n.setStyle(s,"left","rtl"===n.getStyle(r,"direction",!0)?65535:-65535),n.bind(s,"beforedeactivate focusin focusout",(e=>{e.stopPropagation()})),s.focus(),o.select(s,!0)})(e,t),remove:()=>((e,t)=>{const n=e.dom;if(GO(e)){let o;const r=t.get();for(;o=GO(e);)n.remove(o),n.unbind(o);r&&e.selection.setRng(r)}t.set(null)})(e,t),getEl:()=>GO(e),getHtml:()=>(e=>{const t=e.dom,n=(e,n)=>{e.appendChild(n),t.remove(n,!0)},[o,...r]=Y(e.getBody().childNodes,YO);q(r,(e=>{n(o,e)}));const s=t.select("div[id=mcepastebin]",o);for(let e=s.length-1;e>=0;e--){const r=t.create("div");o.insertBefore(r,s[e]),n(r,s[e])}return o?o.innerHTML:""})(e),getLastRng:t.get}},QO=(e,t)=>(Nt.each(t,(t=>{e=m(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])})),e),ZO=e=>e=QO(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,n)=>t||n?dr:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),eT=(e,t)=>({content:e,cancelled:t}),tT=(e,t,n)=>{const o=((e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}))(e,t,n),r=((e,t)=>{const n=sy({},e.schema);n.addNodeFilter("meta",(e=>{Nt.each(e,(e=>{e.remove()}))}));const o=n.parse(t,{forced_root_block:!1,isRootContent:!0});return up({validate:!0},e.schema).serialize(o)})(e,o.content);return e.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?((e,t,n)=>{const o=e.dom.create("div",{style:"display:none"},t),r=((e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}))(e,o,n);return eT(r.node.innerHTML,r.isDefaultPrevented())})(e,r,n):eT(r,o.isDefaultPrevented())},nT=(e,t)=>(e.insertContent(t,{merge:sc(e),paste:!0}),!0),oT=e=>/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e),rT=(e,t,n)=>!(e.selection.isCollapsed()||!oT(t))&&((e,t,n)=>(e.undoManager.extra((()=>{n(e,t)}),(()=>{e.execCommand("mceInsertLink",!1,t)})),!0))(e,t,n),sT=(e,t,n)=>!!((e,t)=>oT(t)&&U(pc(e),(e=>$e(t.toLowerCase(),`.${e.toLowerCase()}`))))(e,t)&&((e,t,n)=>(e.undoManager.extra((()=>{n(e,t)}),(()=>{e.insertContent('<img src="'+t+'">')})),!0))(e,t,n),iT=(e,t,n)=>{n||!ic(e)?nT(e,t):((e,t)=>{Nt.each([rT,sT,nT],(n=>!0!==n(e,t,nT)))})(e,t)},aT=(e=>{let t=0;return()=>e+t++})("mceclip"),lT=(e,t,n,o)=>{const r=((e,t,n)=>tT(e,t,n))(e,t,n);!1===r.cancelled&&iT(e,r.content,o)},cT=(e,t,n)=>{const o=n||WO(t);lT(e,(e=>e.replace($O,""))(t),o,!1)},dT=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,"\n"),o=Vr(n,lc(e)),r=qO(o,Wa(e),qa(e));lT(e,r,!1,!0)},uT=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch(e){t[o]=""}}return t},hT=(e,t)=>t in e&&e[t].length>0,mT=e=>hT(e,"text/html")||hT(e,"text/plain"),pT=(e,t,n,o)=>{const r=aT(),s=Qa(e)&&C(n.name),i=s?((e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return C(n)?e.dom.encode(n[1]):null})(e,n.name):r,a=s?n.name:void 0,l=t.create(r,n,o,i,a);return t.add(l),l},fT=e=>{const t=pc(e);return e=>Ve(e.type,"image/")&&U(t,(t=>(e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Nt.hasOwn(n,t)?"image/"+n[t]:"image/"+t})(t)===e.type))},gT=(e,t,n)=>{const o="paste"===t.type?t.clipboardData:t.dataTransfer;var r;if(ec(e)&&o){const s=((e,t)=>{const n=t.items?ne(ue(t.items),(e=>"file"===e.kind?[e.getAsFile()]:[])):[],o=t.files?ue(t.files):[];return Y(n.length>0?n:o,fT(e))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(W(r,(e=>Iv(e).then((t=>({file:e,uri:t}))))))).then((t=>{n&&e.selection.setRng(n),q(t,(t=>{((e,t)=>{const{data:n,type:o}=Pv(t.uri),r=t.file,s=e.editorUpload.blobCache,i=s.getByData(n,o),a=null!=i?i:pT(e,s,r,n);cT(e,`<img src="${a.blobUri()}">`,!1)})(e,t)}))})),!0}return!1},bT=(e,t,n,o)=>{let r=ZO(n);const s=hT(t,VO())||WO(n),i=!s&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(r),a=oT(r);(XO(r)||!r.length||i&&!a)&&(o=!0),(o||a)&&(r=hT(t,"text/plain")&&i?t["text/plain"]:(e=>{const t=Es(),n=sy({},t);let o="";const r=t.getVoidElements(),s=Nt.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=e=>{const n=e.name,l=e;if("br"!==n){if("wbr"!==n)if(r[n]&&(o+=" "),s[n])o+=" ";else{if(3===e.type&&(o+=e.value),!(e.name in t.getVoidElements())&&(e=e.firstChild))do{a(e)}while(e=e.next);i[n]&&l.next&&(o+="\n","p"===n&&(o+="\n"))}}else o+="\n"};return e=QO(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),o})(r)),XO(r)||(o?dT(e,r):cT(e,r,s))},vT=(e,t,n)=>{let o;e.on("keydown",(e=>{(e=>lh.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(o=e.shiftKey&&86===e.keyCode)})),e.on("paste",(r=>{if(r.isDefaultPrevented()||(e=>{var t,n;return Tt.os.isAndroid()&&0===(null===(n=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)})(r))return;const s="text"===n.get()||o;o=!1;const i=uT(r.clipboardData);!mT(i)&&gT(e,r,t.getLastRng()||e.selection.getRng())||(hT(i,"text/html")?(r.preventDefault(),bT(e,i,i["text/html"],s)):(t.create(),Sm.setEditorTimeout(e,(()=>{const n=t.getHtml();t.remove(),bT(e,i,n,s)}),0)))}))},yT=(e,t,n)=>{vT(e,t,n),(e=>{const t=e=>Ve(e,"webkit-fake-url"),n=e=>Ve(e,"data:");e.parser.addNodeFilter("img",((o,r,s)=>{if(!ec(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(s))for(const r of o){const o=r.attr("src");p(o)&&!r.attr("data-mce-object")&&o!==Tt.transparentSrc&&(t(o)||!cc(e)&&n(o))&&r.remove()}}))})(e)},xT=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",(()=>{((e,t)=>{"text"===t.get()?(t.set("html"),ah(e,!1)):(t.set("text"),ah(e,!0)),e.focus()})(e,t)})),e.addCommand("mceInsertClipboardContent",((t,n)=>{n.html&&cT(e,n.html,n.internal),n.text&&dT(e,n.text)}))},wT=(e,t,n,o)=>{((e,t,n)=>{try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(VO(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},CT=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(i),o.add(e.getBody(),s);const a=r.getRng();i.focus();const l=o.createRng();l.selectNodeContents(i),r.setRng(l),Sm.setEditorTimeout(e,(()=>{r.setRng(a),o.remove(s),n()}),0)},_T=e=>({html:UO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),ST=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),kT=e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&ST(e)&&wT(t,_T(e),CT(e),(()=>{if(Tt.browser.isChromium()||Tt.browser.isFirefox()){const t=e.selection.getRng();Sm.setEditorTimeout(e,(()=>{e.selection.setRng(t),e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&ST(e)&&wT(t,_T(e),CT(e),E)})(e))},ET=(e,t)=>{var n,o;return Vh.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(o=t.clientY)&&void 0!==o?o:0,e.getDoc())},OT=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},TT=(e,t)=>{Zl(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(e=>{e.preventDefault(),e.stopPropagation()})),ec(e)||e.on("drop",(e=>{const t=e.dataTransfer;t&&(e=>U(e.files,(e=>/^image\//.test(e.type))))(t)&&e.preventDefault()})),e.on("drop",(n=>{if(n.isDefaultPrevented()||t.get())return;const o=ET(e,n);if(w(o))return;const r=uT(n.dataTransfer),s=hT(r,VO());if((!mT(r)||(e=>{const t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(r))&&gT(e,n,o))return;const i=r[VO()],a=i||r["text/html"]||r["text/plain"];a&&(n.preventDefault(),Sm.setEditorTimeout(e,(()=>{e.undoManager.transact((()=>{i&&e.execCommand("Delete"),OT(e,o);const t=ZO(a);r["text/html"]?cT(e,t,s):dT(e,t)}))})))})),e.on("dragstart",(e=>{t.set(!0)})),e.on("dragover dragend",(n=>{ec(e)&&!1===t.get()&&(n.preventDefault(),OT(e,ET(e,n))),"dragend"===n.type&&t.set(!1)}))},AT=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,DT=e=>Nt.trim(e).replace(AT,eu).toLowerCase(),RT=(e,t,n)=>{const o=oc(e);if(n||"all"===o||!rc(e))return t;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const n=e.dom,o=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((e,t,s,i)=>{const a=n.parseStyle(n.decode(s)),l={};for(let e=0;e<r.length;e++){const t=a[r[e]];let s=t,i=n.getStyle(o,r[e],!0);/color/.test(r[e])&&(s=DT(s),i=DT(i)),i!==s&&(l[r[e]]=t)}const c=n.serializeStyle(l,"span");return c?t+' style="'+c+'"'+i:t+i}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((e,t,n,o)=>t+' style="'+n+'"'+o)),t},MT=e=>{const t=Ys(!1),n=Ys(ac(e)?"text":"html"),o=JO(e);(e=>{(Tt.browser.isChromium()||Tt.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",(n=>{n.content=t(e,n.content,n.internal)}))})(e,RT)})(e),xT(e,n),(e=>{const t=t=>n=>{t(e,n)},n=tc(e);_(n)&&e.on("PastePreProcess",t(n));const o=nc(e);_(o)&&e.on("PastePostProcess",t(o))})(e),e.on("PreInit",(()=>{kT(e),TT(e,t),yT(e,o,n)}))},NT=e=>{(e=>{e.on("click",(t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()}))})(e),(e=>{e.parser.addNodeFilter("details",(e=>{q(e,(e=>{e.attr("data-mce-open",e.attr("open")),e.attr("open","open")}))})),e.serializer.addNodeFilter("details",(e=>{q(e,(e=>{const t=e.attr("data-mce-open");e.attr("open",p(t)?t:null),e.attr("data-mce-open",null)}))}))})(e)},PT=e=>vo(e)&&or(un.fromDom(e)),LT=e=>{e.on("click",(t=>{t.detail>=3&&(e=>{const t=e.selection.getRng(),n=Qi.fromRangeStart(t),o=Qi.fromRangeEnd(t);if(Qi.isElementPosition(n)){const e=n.container();PT(e)&&Td(e).each((e=>t.setStart(e.container(),e.offset())))}if(Qi.isElementPosition(o)){const e=n.container();PT(e)&&Ad(e).each((e=>t.setEnd(e.container(),e.offset())))}e.selection.setRng(pg(t))})(e)}))};var BT;!function(e){e.Before="before",e.After="after"}(BT||(BT={}));const IT=(e,t)=>Math.abs(e.left-t),FT=(e,t)=>Math.abs(e.right-t),zT=(e,t)=>{const n=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&n>.5},jT=(e,t)=>(e=>J(e,((e,t)=>e.fold((()=>F.some(t)),(e=>{const n=Math.min(t.left,e.left),o=Math.min(t.top,e.top),r=Math.max(t.right,e.right),s=Math.max(t.bottom,e.bottom);return F.some({top:o,right:r,bottom:s,left:n,width:r-n,height:s-o})}))),F.none()))(Y(e,(e=>{return(n=t)>=(o=e).top&&n<=o.bottom;var n,o}))).fold((()=>[[],e]),(t=>{const{pass:n,fail:o}=G(e,(e=>zT(e,t)));return[n,o]})),HT=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),VT=(e,t,n)=>{const o=e=>Br(e.node)?F.some(e):vo(e.node)?VT(ue(e.node.childNodes),t,n):F.none(),r=(e,r)=>{const s=ae(e,((e,o)=>r(e,t,n)-r(o,t,n)));return((e,r)=>{if(e.length>=2){const s=o(e[0]).getOr(e[0]),i=o(e[1]).getOr(e[1]);if(Math.abs(r(s,t,n)-r(i,t,n))<2){if(Eo(s.node))return F.some(s);if(Eo(i.node))return F.some(i)}}return F.none()})(s,r).orThunk((()=>he(s,o)))},[s,i]=jT(ZC(e),n),{pass:a,fail:l}=G(i,(e=>e.top<n));return r(s,HT).orThunk((()=>r(l,Ai))).orThunk((()=>r(a,Ai)))},$T=(e,t,n,o)=>{const r=(t,s)=>s.fold((()=>VT(ue(t.dom.childNodes),n,o)),(e=>{const r=Y(ue(t.dom.childNodes),(t=>t!==e.dom));return VT(r,n,o)})).orThunk((()=>{var n;return(fn(t,e)?F.none():(n=t,F.from(n.dom.parentElement).map(un.fromDom))).bind((e=>r(e,F.some(t))))}));return r(t,F.none())},UT=(e,t,n)=>((e,t,n)=>{const o=un.fromDom(e),r=vn(o),s=un.fromPoint(r,t,n).filter((e=>gn(o,e))).getOr(o);return $T(o,s,t,n)})(e,t,n).filter((e=>Nc(e.node))).map((e=>((e,t)=>({node:e.node,position:IT(e,t)<FT(e,t)?BT.Before:BT.After}))(e,t))),WT=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument,o=n.documentElement,r=n.defaultView;return{top:t.top+r.pageYOffset-o.clientTop,left:t.left+r.pageXOffset-o.clientLeft}},qT=(e,t)=>{return n=(e=>e.inline?WT(e.getBody()):{left:0,top:0})(e),o=(e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),r=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=WT(e.getContentAreaContainer()),o=(e=>{const t=e.getBody(),n=e.getDoc().documentElement,o={left:t.scrollLeft,top:t.scrollTop},r={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?o:r})(e);return{left:t.pageX-n.left+o.left,top:t.pageY-n.top+o.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:r.left-n.left+o.left,pageY:r.top-n.top+o.top};var n,o,r},KT=Lo,GT=Po,YT=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const i=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),i.appendChild(s),i},XT=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},JT=(e,t)=>n=>{if((e=>0===e.button)(n)){const s=Z(t.dom.getParents(n.target),((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(KT,GT)).getOr(null);if(o=t.getBody(),KT(r=s)&&r!==o){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:YT(t,s,s.offsetWidth,s.offsetHeight)})}}var o,r},QT=(e,t)=>n=>{e.on((e=>{if(e.dragging){if(((e,t,n)=>t!==n&&!e.dom.isChildOf(t,n)&&!KT(t))(t,(e=>{const t=e.getSel().getRangeAt(0).startContainer;return 3===t.nodeType?t.parentNode:t})(t.selection),e.element)){const o=(e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t})(e.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact((()=>{XT(e.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()}))}t.dispatch("dragend")}})),ZT(e)},ZT=e=>{e.on((e=>{XT(e.ghost)})),e.clear()},eA=e=>{const t=ti(),n=qs.DOM,o=document,r=JT(t,e),s=((e,t)=>{const n=ni(((e,n)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)}),0);return t.on("remove",n.cancel),o=>e.on((e=>{const r=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(!e.dragging&&r>10){if(t.dispatch("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){const r=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,qT(t,o));s=e.ghost,i=t.getBody(),s.parentNode!==i&&i.appendChild(s),((e,t,n,o,r,s)=>{let i=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>r&&(i=t.pageX+n-r),t.pageY+o>s&&(a=t.pageY+o-s),e.style.width=n-i+"px",e.style.height=o-a+"px"})(e.ghost,r,e.width,e.height,e.maxX,e.maxY),n.throttle(o.clientX,o.clientY)}var s,i}))})(t,e),i=QT(t,e),a=((e,t)=>()=>{e.on((e=>{e.dragging&&t.dispatch("dragend")})),ZT(e)})(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",i),n.bind(o,"mousemove",s),n.bind(o,"mouseup",a),e.on("remove",(()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",a)})),e.on("keydown",(e=>{e.keyCode===lh.ESC&&a()}))},tA=e=>{eA(e),Vl(e)&&(e=>{const t=t=>{if(!t.isDefaultPrevented()){const n=t.dataTransfer;n&&($(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&Nx(e,"Dropped file type is not supported"))}},n=n=>{Tm(e,n.target)&&t(n)},o=()=>{const o=qs.DOM,r=e.dom,s=document,i=e.inline?e.getBody():e.getDoc(),a=["drop","dragover"];q(a,(e=>{o.bind(s,e,n),r.bind(i,e,t)})),e.on("remove",(()=>{q(a,(e=>{o.unbind(s,e,n),r.unbind(i,e,t)}))}))};e.on("init",(()=>{Sm.setEditorTimeout(e,o,0)}))})(e)},nA=Lo,oA=(e,t)=>og(e.getBody(),t),rA=e=>{const t=e.selection,n=e.dom,o=n.isBlock,r=e.getBody(),s=Dc(e,r,o,(()=>Lm(e))),i="sel-"+n.uniqueId(),a="data-mce-selected";let l;const c=e=>e!==r&&(nA(e)||Io(e))&&n.isChildOf(e,r),d=(n,o,r,i=!0)=>e.dispatch("ShowCaret",{target:o,direction:n,before:r}).isDefaultPrevented()?null:(i&&t.scrollIntoView(o,-1===n),s.show(r,o)),u=()=>{e.on("click",(t=>{const n=oA(e,t.target);n&&nA(n)&&(t.preventDefault(),e.focus())})),e.on("blur NewBlock",b),e.on("ResizeWindow FullscreenStateChanged",s.reposition),e.on("tap",(t=>{const n=t.target,o=oA(e,n);nA(o)?(t.preventDefault(),$w(e,o).each(g)):c(n)&&$w(e,n).each(g)}),!0),e.on("mousedown",(o=>{const s=o.target;if(s!==r&&"HTML"!==s.nodeName&&!n.isChildOf(s,r))return;if(!1===Ex(e,o.clientX,o.clientY))return;b(),v();const i=oA(e,s);nA(i)?(o.preventDefault(),$w(e,i).each(g)):UT(r,o.clientX,o.clientY).each((n=>{o.preventDefault();(e=>{e&&t.setRng(e)})(d(1,n.node,n.position===BT.Before,!1)),vo(i)?i.focus():e.getBody().focus()}))})),e.on("keypress",(e=>{lh.modifierPressed(e)||nA(t.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(e=>{let t=e.range;if(l){if(!l.parentNode)return void(l=null);t=t.cloneRange(),t.selectNode(l),e.range=t}})),e.on("SetSelectionRange",(e=>{e.range=p(e.range);const t=g(e.range,e.forward);t&&(e.range=t)}));e.on("AfterSetSelectionRange",(e=>{const t=e.range,o=t.startContainer.parentNode;m(t)||"mcepastebin"===o.id||v(),(e=>n.hasClass(e,"mce-offscreen-selection"))(o)||b()})),tA(e),(e=>{const t=ni((()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const t=e.selection.getRng();if(t.collapsed){const n=Uw(e,t,!1);e.selection.setRng(n)}}}),0);e.on("focus",(()=>{t.throttle()})),e.on("blur",(()=>{t.cancel()}))})(e),(e=>{e.on("init",(()=>{e.on("focusin",(t=>{const n=t.target;if(Io(n)){const t=og(e.getBody(),n),o=Lo(t)?t:n;e.selection.getNode()!==o&&$w(e,o).each((t=>e.selection.setRng(t)))}}))}))})(e)},h=e=>yr(e)||Sr(e)||kr(e),m=e=>h(e.startContainer)||h(e.endContainer),p=t=>{const o=e.schema.getVoidElements(),r=n.createRng(),s=t.startContainer,i=t.startOffset,a=t.endContainer,l=t.endOffset;return Se(o,s.nodeName.toLowerCase())?0===i?r.setStartBefore(s):r.setStartAfter(s):r.setStart(s,i),Se(o,a.nodeName.toLowerCase())?0===l?r.setEndBefore(a):r.setEndAfter(a):r.setEnd(a,l),r},f=o=>{const r=o.cloneNode(!0),s=e.dispatch("ObjectSelected",{target:o,targetClone:r});if(s.isDefaultPrevented())return null;const c=((o,r)=>{const s=un.fromDom(e.getBody()),a=e.getDoc(),l=Ko(s,"#"+i).getOrThunk((()=>{const e=un.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',a);return Wt(e,"id",i),Xn(s,e),e})),c=n.createRng();Qn(l),Jn(l,[un.fromText(dr,a),un.fromDom(r),un.fromText(dr,a)]),c.setStart(l.dom.firstChild,1),c.setEnd(l.dom.lastChild,0),Hn(l,{top:n.getPos(o,e.getBody()).y+"px"}),um(l);const d=t.getSel();return d.removeAllRanges(),d.addRange(c),c})(o,s.targetClone),d=un.fromDom(o);return q(si(un.fromDom(e.getBody()),"*[data-mce-selected]"),(e=>{fn(d,e)||Xt(e,a)})),n.getAttrib(o,a)||o.setAttribute(a,"1"),l=o,v(),c},g=(e,t)=>{if(!e)return null;if(e.collapsed){if(!m(e)){const n=t?1:-1,o=nd(n,r,e),s=o.getNode(!t);if(Nc(s))return d(n,s,!!t&&!o.isAtEnd(),!1);const i=o.getNode(t);if(Nc(i))return d(n,i,!t&&!o.isAtEnd(),!1)}return null}let o=e.startContainer,s=e.startOffset;const i=e.endOffset;if(3===o.nodeType&&0===s&&nA(o.parentNode)&&(o=o.parentNode,s=n.nodeIndex(o),o=o.parentNode),1!==o.nodeType)return null;if(i===s+1&&o===e.endContainer){const e=o.childNodes[s];if(c(e))return f(e)}return null},b=()=>{l&&l.removeAttribute(a),Ko(un.fromDom(e.getBody()),"#"+i).each(Zn),l=null},v=()=>{s.hide()};return Uy(e)||u(),{showCaret:d,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Er(e),t.scrollIntoView(e))},hideFakeCaret:v,destroy:()=>{s.destroy(),l=null}}},sA=(e,t,n)=>{if(Eo(t)&&(n<0||n>t.data.length))return[];const o=[n];let r=t;for(;r!==e&&r.parentNode;){const e=r.parentNode;for(let t=0;t<e.childNodes.length;t++)if(e.childNodes[t]===r){o.push(t);break}r=e}return r===e?o.reverse():[]},iA=(e,t,n,o,r)=>({start:sA(e,t,n),end:sA(e,o,r)}),aA=(e,t)=>{const n=t.slice(),o=n.pop();return J(n,((e,t)=>e.bind((e=>F.from(e.childNodes[t])))),F.some(e)).bind((e=>Eo(e)&&(o<0||o>e.data.length)?F.none():F.some({node:e,offset:o})))},lA=(e,t)=>aA(e,t.start).bind((({node:n,offset:o})=>aA(e,t.end).map((({node:e,offset:t})=>{const r=document.createRange();return r.setStart(n,o),r.setEnd(e,t),r})))),cA=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t),cA(e,o,n)}},dA=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(Eo(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),Eo(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),cA(e,r,n),r!==s&&cA(e,s,n))},uA=(e,t)=>F.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),hA=(e,t,n)=>{const o=((e,t,n)=>{if(Eo(e)&&t>=e.length)return F.some(QS(e,t));{const o=Ci(ZS);return F.from(o.forwards(e,t,ek(e),n)).map((e=>QS(e.container,0)))}})(t,0,t);o.each((o=>{const r=o.container;ok(r,n.start.length,t).each((n=>{const o=e.createRng();o.setStart(r,0),o.setEnd(n.container,n.offset),dA(e,o,(e=>e===t))}))}))},mA=(e,t)=>{const n=e.dom,o=t.pattern,r=lA(n.getRoot(),t.range).getOrDie("Unable to resolve path range");return uA(e,r).each((t=>{"block-format"===o.type?((e,t)=>{const n=t.get(e);return b(n)&&ce(n).exists((e=>Se(e,"block")))})(o.format,e.formatter)&&e.undoManager.transact((()=>{hA(e.dom,t,o),e.formatter.apply(o.format)})):"block-command"===o.type&&e.undoManager.transact((()=>{hA(e.dom,t,o),e.execCommand(o.cmd,!1,o.value)}))})),!0},pA=(e,t)=>{const n=e.dom,o=e.selection.getRng();return uA(e,o).filter((t=>{const o=Wa(e),r=n.is(t,o);return null!==t&&r})).bind((e=>{const o=e.textContent,r=((e,t)=>{const n=t.replace(dr," ");return Z(e,(e=>0===t.indexOf(e.start)||0===n.indexOf(e.start)))})(t,o);return r.map((t=>Nt.trim(o).length===t.start.length?[]:[{pattern:t,range:iA(n.getRoot(),e,0,e,0)}]))})).getOr([])},fA=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),gA=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},bA=(e,t,n)=>{const o=lA(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,i=0===o.endOffset?s:s.splitText(o.endOffset),a=0===o.startOffset?r:r.splitText(o.startOffset);return{prefix:t,end:i.parentNode.insertBefore(fA(e,t+"-end"),i),start:a.parentNode.insertBefore(fA(e,t+"-start"),a)}},vA=(e,t,n)=>{cA(e,e.get(t.prefix+"-end"),n),cA(e,e.get(t.prefix+"-start"),n)},yA=e=>0===e.start.length,xA=(e,t,n,o)=>{const r=t.start;var s;return rk(e,o.container,o.offset,(s=r,(e,t)=>{const n=e.data.substring(0,t),o=n.lastIndexOf(s.charAt(s.length-1)),r=n.lastIndexOf(s);return-1!==r?r+s.length:-1!==o?o+1:-1}),n).bind((o=>{if(o.offset>=r.length){const t=e.createRng();return t.setStart(o.container,o.offset-r.length),t.setEnd(o.container,o.offset),F.some(t)}{const s=o.offset-r.length;return nk(o.container,s,n).map((t=>{const n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(o.container,o.offset),n})).filter((e=>e.toString()===r)).orThunk((()=>xA(e,t,n,QS(o.container,0))))}}))},wA=(e,t,n)=>{const o=e.dom,r=o.getRoot(),s=n.pattern,i=n.position.container,a=n.position.offset;return nk(i,a-n.pattern.end.length,t).bind((l=>{const c=iA(r,l.container,l.offset,i,a);if(yA(s))return F.some({matches:[{pattern:s,startRng:c,endRng:c}],position:l});{const i=CA(e,n.remainingPatterns,l.container,l.offset,t),a=i.getOr({matches:[],position:l}),d=a.position,u=((e,t,n,o,r,s=!1)=>{if(0===t.start.length&&!s){const t=e.createRng();return t.setStart(n,o),t.setEnd(n,o),F.some(t)}return tk(n,o,r).bind((n=>xA(e,t,r,n).bind((e=>{if(s){if(e.endContainer===n.container&&e.endOffset===n.offset)return F.none();if(0===n.offset&&e.endContainer.textContent.length===e.endOffset)return F.none()}return F.some(e)}))))})(o,s,d.container,d.offset,t,i.isNone());return u.map((e=>{const t=((e,t)=>iA(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset))(r,e);return{matches:a.matches.concat([{pattern:s,startRng:t,endRng:c}]),position:QS(e.startContainer,e.startOffset)}}))}}))},CA=(e,t,n,o,r)=>{const s=e.dom;return tk(n,o,s.getRoot()).bind((i=>{const a=s.createRng();a.setStart(r,0),a.setEnd(n,o);const l=a.toString();for(let n=0;n<t.length;n++){const o=t[n];if(!$e(l,o.end))continue;const s=t.slice();s.splice(n,1);const a=wA(e,r,{pattern:o,remainingPatterns:s,position:i});if(a.isSome())return a}return F.none()}))},_A=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?q(t.format,(t=>{e.formatter.apply(t)})):e.execCommand(t.cmd,!1,t.value)},SA=(e,t,n)=>{const o=e.selection.getRng();return!1===o.collapsed?[]:uA(e,o).bind((r=>{const s=Math.max(0,o.startOffset-(n?1:0));return CA(e,t,o.startContainer,s,r)})).fold((()=>[]),(e=>e.matches))},kA=(e,t)=>{if(0===t.length)return;const n=e.dom,o=e.selection.getBookmark(),r=((e,t)=>{const n=gi("mce_textpattern"),o=X(t,((t,o)=>{const r=bA(e,n+`_end${t.length}`,o.endRng);return t.concat([{...o,endMarker:r}])}),[]);return X(o,((t,r)=>{const s=o.length-t.length-1,i=yA(r.pattern)?r.endMarker:bA(e,n+`_start${s}`,r.startRng);return t.concat([{...r,startMarker:i}])}),[])})(n,t);q(r,(t=>{const o=n.getParent(t.startMarker.start,n.isBlock),r=e=>e===o;yA(t.pattern)?((e,t,n,o)=>{const r=gA(e.dom,n);dA(e.dom,r,o),_A(e,t,r)})(e,t.pattern,t.endMarker,r):((e,t,n,o,r)=>{const s=e.dom,i=gA(s,o),a=gA(s,n);dA(s,a,r),dA(s,i,r);const l={prefix:n.prefix,start:n.end,end:o.start},c=gA(s,l);_A(e,t,c)})(e,t.pattern,t.startMarker,t.endMarker,r),vA(n,t.endMarker,r),vA(n,t.startMarker,r)})),e.selection.moveToBookmark(o)},EA=(e,t)=>{if(!e.selection.isCollapsed()||!(e=>e.inlinePatterns.length>0||e.blockPatterns.length>0)(t))return!1;const n=SA(e,t.inlinePatterns,!1),o=pA(e,t.blockPatterns);return(o.length>0||n.length>0)&&(e.undoManager.add(),e.undoManager.extra((()=>{e.execCommand("mceInsertNewLine")}),(()=>{e.insertContent(cr),kA(e,n),((e,t)=>{if(0===t.length)return;const n=e.selection.getBookmark();q(t,(t=>mA(e,t))),e.selection.moveToBookmark(n)})(e,o);const t=e.selection.getRng(),r=tk(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each((t=>{const n=t.container;n.data.charAt(t.offset-1)===cr&&(n.deleteData(t.offset-1,1),cA(e.dom,n.parentNode,(t=>t===e.dom.getRoot())))}))})),!0)},OA=(e,t)=>{if(t.length>0){const n=SA(e,t,!0);n.length>0&&e.undoManager.transact((()=>{kA(e,n)}))}},TA=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},AA=e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return t=dc(e),{inlinePatterns:Aa(t),blockPatterns:Ta(t)};var t},r=()=>Aa(dc(e));e.on("keydown",(t=>{13!==t.keyCode||lh.modifierPressed(t)||EA(e,o())&&t.preventDefault()}),!0),e.on("keyup",(t=>{TA(n,t,((e,t)=>e===t.keyCode&&!1===lh.modifierPressed(t)))&&OA(e,r())})),e.on("keypress",(n=>{TA(t,n,((e,t)=>e.charCodeAt(0)===t.charCode))&&Sm.setEditorTimeout(e,(()=>{OA(e,r())}))}))},DA=e=>{const t=Nt.each,n=lh.BACKSPACE,o=lh.DELETE,r=e.dom,s=e.selection,i=e.parser,a=Tt.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=Tt.deviceType.isiPhone()||Tt.deviceType.isiPad(),u=Tt.os.isMacOS()||Tt.os.isiOS(),h=(t,n)=>{try{e.getDoc().execCommand(t,!1,n)}catch(e){}},m=e=>e.isDefaultPrevented(),p=()=>{const t=e=>{const t=r.create("body"),n=e.cloneContents();return t.appendChild(n),s.serializer.serialize(t,{format:"html"})};e.on("keydown",(s=>{const i=s.keyCode;let a,l;if(!m(s)&&(i===o||i===n)){if(a=e.selection.isCollapsed(),l=e.getBody(),a&&!r.isEmpty(l))return;if(!a&&!(n=>{const o=t(n),s=r.createRng();return s.selectNode(e.getBody()),o===t(s)})(e.selection.getRng()))return;s.preventDefault(),e.setContent(""),l.firstChild&&r.isBlock(l.firstChild)?e.selection.setCursorLocation(l.firstChild,0):e.selection.setCursorLocation(l,0),e.nodeChanged()}}))},f=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},g=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",(t=>{let n;if(t.target===e.getDoc().documentElement)if(n=s.getRng(),e.getBody().focus(),"mousedown"===t.type){if(yr(n.startContainer))return;s.placeCaretAt(t.clientX,t.clientY)}else s.setRng(n)}))},b=()=>{Range.prototype.getClientRects||e.on("mousedown",(t=>{if(!m(t)&&"HTML"===t.target.nodeName){const t=e.getBody();t.blur(),Sm.setEditorTimeout(e,(()=>{t.focus()}))}}))},v=()=>{const t=Wl(e);e.on("click",(n=>{const o=n.target;/^(IMG|HR)$/.test(o.nodeName)&&"false"!==r.getContentEditableParent(o)&&(n.preventDefault(),e.selection.select(o),e.nodeChanged()),"A"===o.nodeName&&r.hasClass(o,t)&&0===o.childNodes.length&&(n.preventDefault(),s.select(o))}))},y=()=>{e.on("keydown",(e=>{if(!m(e)&&e.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const t=s.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}}))},x=()=>{const t=()=>{h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),bl(e)||h("enableObjectResizing",!1)};Fl(e)||e.on("BeforeExecCommand mousedown",t)},w=()=>{e.on("SetContent ExecCommand",(e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||t(r.select("a"),(e=>{let t=e.parentNode;const n=r.getRoot();if(t.lastChild===e){for(;t&&!r.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}r.add(t,"br",{"data-mce-bogus":1})}}))}))},C=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},_=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},S=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(t=>{let n;"HTML"===t.target.nodeName&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())})))},k=()=>{u&&e.on("keydown",(t=>{if(lh.metaKeyPressed(t)&&!t.shiftKey&&(37===t.keyCode||39===t.keyCode)){t.preventDefault();e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary")}}))},O=()=>{e.on("click",(e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},T=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(e=>{e.preventDefault()}))}))},A=E,D=()=>{e.on("keydown",(t=>{let n,o;if(m(t)||t.keyCode!==lh.BACKSPACE)return;n=s.getRng();const i=n.startContainer,a=n.startOffset,l=r.getRoot();if(o=i,n.collapsed&&0===a){for(;o&&o.parentNode&&o.parentNode.firstChild===o&&o.parentNode!==l;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(e.formatter.toggle("blockquote",null,o),n=r.createRng(),n.setStart(i,0),n.setEnd(i,0),s.setRng(n))}})),p(),Tt.windowsPhone||e.on("keyup focusin mouseup",(e=>{lh.modifierPressed(e)||s.normalize()}),!0),c&&(g(),v(),e.on("init",(()=>{h("DefaultParagraphSeparator",Wa(e))})),T(),y(),i.addNodeFilter("br",(e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),d?(_(),S(),O()):f()),l&&(e.on("keydown",(t=>{if(!m(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const e=s.getNode(),n=e.previousSibling;if("HR"===e.nodeName)return r.remove(e),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(r.remove(n),t.preventDefault())}}})),b(),(()=>{const n=()=>{const n=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const o=s.getStart();o!==e.getBody()&&(r.setAttrib(o,"style",null),t(n,(e=>{o.setAttributeNode(e.cloneNode(!0))})))}},o=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",(t=>{let r;if(!m(t)&&(8===t.keyCode||46===t.keyCode)&&o())return r=n(),e.getDoc().execCommand("delete",!1,null),r(),t.preventDefault(),!1})),r.bind(e.getDoc(),"cut",(t=>{let r;!m(t)&&o()&&(r=n(),Sm.setEditorTimeout(e,(()=>{r()})))}))})(),x(),w(),C(),k(),y())};return Uy(e)?(c&&(g(),v(),T(),f(),d&&(_(),S(),O())),l&&(b(),x(),C(),k())):D(),{refreshContentEditable:A,isHidden:()=>{if(!l||e.removed)return!1;const t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},RA=qs.DOM,MA=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,NA=e=>xe(e,(e=>!1===x(e))),PA=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return NA({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:MA(e),validate:!0,blob_cache:n,document:e.getDoc()})},LA=e=>{const t=e.options.get;return NA({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},BA=e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{const t=e.dom.getRoot();e.inline||$u(e)&&e.selection.getStart(!0)!==t||Td(t).each((t=>{const n=t.getNode(),o=_o(n)?Td(n).getOr(t):t;e.selection.setRng(o.toRange())}))})(e),e.nodeChanged({initial:!0});const t=Gl(e);_(t)&&t.call(e,e),(e=>{const t=Xl(e);t&&Sm.setEditorTimeout(e,(()=>{let n;n=!0===t?e:e.editorManager.get(t),n.destroyed||n.focus()}),100)})(e)},IA=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,FA=e=>{const t=IA(e),n=pl(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let t="";Nt.each(e.contentStyles,(e=>{t+=e+"\r\n"})),e.dom.addStyle(t)}const i=Promise.all(((e,t,n)=>{const o=[IA(e).loadAll(t)];return e.inline?o:o.concat([e.ui.styleSheetLoader.loadAll(n)])})(e,o,n)).then(s).catch(s),a=ml(e);return a&&((e,t)=>{const n=un.fromDom(e.getBody()),o=Pn(Nn(n)),r=un.fromTag("style");Wt(r,"type","text/css"),Xn(r,un.fromText(t)),Xn(o,r),e.on("remove",(()=>{Zn(r)}))})(e,a),i},zA=e=>{!0!==e.removed&&((e=>{Uy(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),BA(e))},jA=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(RA.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=Fl(e),e.readonly||(e.inline&&"static"===RA.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=qx(e),e.schema=Es(LA(e)),e.dom=qs(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:()=>e.inline,schema:e.schema,contentCssCors:il(e),referrerPolicy:al(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=(e=>{const t=sy(PA(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",((t,n)=>{let o,r,s=t.length;const i=e.dom,a="data-mce-"+n;for(;s--;)if(o=t[s],r=o.attr(n),r&&!o.attr(a)){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===n?(r=i.serializeStyle(i.parseStyle(r),o.name),r.length||(r=null),o.attr(a,r),o.attr(n,r)):"tabindex"===n?(o.attr(a,r),o.attr(n,null)):o.attr(a,e.convertURL(r,n,o.name))}})),t.addNodeFilter("script",(e=>{let t=e.length;for(;t--;){const n=e[t],o=n.attr("type")||"no/type";0!==o.indexOf("mce-")&&n.attr("type","mce-"+o)}})),e.options.get("preserve_cdata")&&t.addNodeFilter("#cdata",(t=>{let n=t.length;for(;n--;){const o=t[n];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(o.value)+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(t=>{let n=t.length;const o=e.schema.getNonEmptyElements();for(;n--;){const e=t[n];e.isEmpty(o)&&0===e.getAll("br").length&&e.append(new tp("br",1))}})),t})(e),e.serializer=ix((e=>{const t=e.options.get;return{...PA(e),...LA(e),...NA({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}})(e),e),e.selection=tx(e.dom,e.getWin(),e.serializer,e),e.annotator=Zu(e),e.formatter=ow(e),e.undoManager=sw(e),e._nodeChangeDispatcher=new jO(e),e._selectionOverrides=rA(e),U_(e),NT(e),J_(e),Uy(e)||(LT(e),(e=>{AA(e)})(e));const r=zO(e);V_(e,r),(e=>{e.on("NodeChange",M(G_,e))})(e),dw(e),MT(e);const s=Wy(e);(e=>{const t=e.getDoc(),n=e.getBody();(e=>{e.dispatch("PreInit")})(e),Jl(e)||(t.body.spellcheck=!1,RA.setAttrib(n,"spellcheck","false")),e.quirks=DA(e),(e=>{e.dispatch("PostRender")})(e);const o=fl(e);void 0!==o&&(n.dir=o);const r=Ql(e);r&&e.on("BeforeSetContent",(e=>{Nt.each(r,(t=>{e.content=e.content.replace(t,(e=>"\x3c!--mce:protected "+escape(e)+"--\x3e"))}))})),e.on("SetContent",(()=>{e.addVisual(e.getBody())})),e.on("compositionstart compositionend",(t=>{e.composing="compositionstart"===t.type}))})(e),s.fold((()=>{FA(e).then((()=>zA(e)))}),(t=>{e.setProgressState(!0),FA(e).then((()=>{t().then((t=>{e.setProgressState(!1),zA(e),Gy(e)}),(t=>{e.notificationManager.open({type:"error",text:String(t)}),zA(e),Gy(e)}))}))}))},HA=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),t||e.inline)jA(e);else{const t=e.iframeElement,o=(n=un.fromDom(t),ro(n,"load",zx,(()=>{o.unbind(),e.contentDocument=t.contentDocument,jA(e)})));t.srcdoc=e.iframeHTML}var n},VA=qs.DOM,$A=(e,t)=>{const n=e.translate("Rich Text Area"),o=Gt(un.fromDom(e.getElement()),"tabindex").bind(Xe),r=((e,t,n,o)=>{const r=un.fromTag("iframe");return o.each((e=>Wt(r,"tabindex",e))),qt(r,n),qt(r,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),on(r,"tox-edit-area__iframe"),r})(e.id,n,Fa(e),o).dom;r.onload=()=>{r.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=(e=>{let t=za(e)+"<html><head>";ja(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=Ha(e),o=Va(e),r=e.translate(ql(e));return $a(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+$a(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${o}" data-id="${e.id}" aria-label="${r}"><br></body></html>`,t})(e),VA.add(t.iframeContainer,r)},UA=qs.DOM,WA=(e,t,n)=>{const o=Ax.get(n),r=Ax.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Nt.trim(n),o&&-1===Nt.inArray(t,n)){if(e.plugins[n])return;try{const s=o(e,r)||{};e.plugins[n]=s,_(s.init)&&(s.init(e,r),t.push(n))}catch(t){((e,t,n)=>{const o=Zs.translate(["Failed to initialize plugin: {0}",t]);nh(e,"PluginLoadError",{message:o}),Bx(o,n),Nx(e,o)})(e,n,t)}}},qA=e=>({editorContainer:e,iframeContainer:e,api:{}}),KA=e=>{const t=e.getElement();return e.inline?qA(null):(e=>{const t=UA.create("div");return UA.insertAfter(t,e),qA(t)})(t)},GA=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,p(Cl(e))?(e=>e.theme.renderUI())(e):_(Cl(e))?(e=>{const t=e.getElement(),n=Cl(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n})(e):KA(e)},YA=e=>{e.dispatch("ScriptsLoaded"),(e=>{const t=Nt.trim(el(e)),n=e.ui.registry.getAll().icons,o={...vx.get("default").icons,...vx.get(t).icons};fe(o,((t,o)=>{Se(n,o)||e.ui.registry.addIcon(o,t)}))})(e),(e=>{const t=Cl(e);if(p(t)){const n=Dx.get(t);e.theme=n(e,Dx.urls[t])||{},_(e.theme.init)&&e.theme.init(e,Dx.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(e),(e=>{const t=Sl(e),n=yx.get(t);e.model=n(e,yx.urls[t])})(e),(e=>{const t=[];q(jl(e),(n=>{WA(e,t,(e=>e.replace(/^\-/,""))(n))}))})(e);const t=GA(e);((e,t)=>{const n={show:F.from(t.show).getOr(E),hide:F.from(t.hide).getOr(E),isEnabled:F.from(t.isEnabled).getOr(I),setEnabled:n=>{e.mode.isReadOnly()||F.from(t.setEnabled).each((e=>e(n)))}};e.ui={...e.ui,...n}})(e,F.from(t.api).getOr({}));const n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,Fx(e),e.inline?HA(e):((e,t)=>{$A(e,t),t.editorContainer&&(VA.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=VA.isHidden(t.editorContainer)),e.getElement().style.display="none",VA.setAttrib(e.id,"aria-hidden","true"),HA(e)})(e,n)},XA=qs.DOM,JA=e=>"-"===e.charAt(0),QA=(e,t)=>{const n=ll(t),o=cl(t);if(!1===Zs.hasCode(n)&&"en"!==n){const r=Ge(o)?o:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(r).catch((()=>{((e,t,n)=>{Px(e,"LanguageLoadError",Lx("language",t,n))})(t,r,n)}))}},ZA=(e,t)=>{const n=Cl(e);if(p(n)&&!JA(n)&&!Se(Dx.urls,n)){const o=_l(e),r=o?e.documentBaseURI.toAbsolute(o):`themes/${n}/theme${t}.js`;Dx.load(n,r).catch((()=>{((e,t,n)=>{Px(e,"ThemeLoadError",Lx("theme",t,n))})(e,r,n)}))}},eD=(e,t)=>{const n=Sl(e);if("plugin"!==n&&!Se(yx.urls,n)){const o=kl(e),r=p(o)?e.documentBaseURI.toAbsolute(o):`models/${n}/model${t}.js`;yx.load(n,r).catch((()=>{((e,t,n)=>{Px(e,"ModelLoadError",Lx("model",t,n))})(e,r,n)}))}},tD=(e,t,n)=>F.from(t).filter((e=>Ge(e)&&!vx.has(e))).map((t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${n}.js`,name:F.some(t)}))),nD=(e,t,n)=>{const o=tD(t,"default",n),r=(e=>F.from(tl(e)).filter(Ge).map((e=>({url:e,name:F.none()}))))(t).orThunk((()=>tD(t,el(t),"")));q((e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t})([o,r]),(n=>{e.add(n.url).catch((()=>{((e,t,n)=>{Px(e,"IconsLoadError",Lx("icons",t,n))})(t,n.url,n.name.getOrUndefined())}))}))},oD=(e,t)=>{const n=(t,n)=>{Ax.load(t,n).catch((()=>{((e,t,n)=>{Px(e,"PluginLoadError",Lx("plugin",t,n))})(e,n,t)}))};fe(Hl(e),((t,o)=>{n(o,t),e.options.set("plugins",jl(e).concat(o))})),q(jl(e),(e=>{!(e=Nt.trim(e))||Ax.urls[e]||JA(e)||n(e,`plugins/${e}/plugin${t}.js`)}))},rD=(e,t)=>{const n=Gs.ScriptLoader,o=()=>{!e.removed&&(e=>{const t=Cl(e);return!p(t)||C(Dx.get(t))})(e)&&(e=>{const t=Sl(e);return C(yx.get(t))})(e)&&YA(e)};ZA(e,t),eD(e,t),QA(n,e),nD(n,e,t),oD(e,t),n.loadQueue().then(o,o)},sD=e=>{const t=e.id;Zs.setCode(ll(e));const n=()=>{XA.unbind(window,"ready",n),e.render()};if(!Is.Event.domLoaded)return void XA.bind(window,"ready",n);if(!e.getElement())return;const o=un.fromDom(e.getElement()),r=Jt(o);e.on("remove",(()=>{K(o.dom.attributes,(e=>Xt(o,e.name))),qt(o,r)})),e.ui.styleSheetLoader=((e,t)=>Xo.forElement(e,{contentCssCors:zl(t),referrerPolicy:al(t)}))(o,e),Rl(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const s=e.getElement().form||XA.getParent(t,"form");s&&(e.formElement=s,Ml(e)&&!ko(e.getElement())&&(XA.insertAfter(XA.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},XA.bind(s,"submit reset",e.formEventDelegate),e.on("reset",(()=>{e.resetContent()})),!Nl(e)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),s._mceOldSubmit(s)))),e.windowManager=Rx(e),e.notificationManager=Tx(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",(e=>{e.save&&(e.content=XA.encode(e.content))})),Pl(e)&&e.on("submit",(()=>{e.initialized&&e.save()})),Ll(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),rD(e,e.suffix)},iD=wt().deviceType,aD=iD.isPhone(),lD=iD.isTablet(),cD=e=>{if(w(e))return[];{const t=b(e)?e:e.split(/[ ,]/),n=W(t,We);return Y(n,Ge)}},dD=(e,t)=>{const n=((e,t)=>{const n={},o={};return ye(e,t,ve(n),ve(o)),{t:n,f:o}})(t,((t,n)=>$(e,n)));return o=n.t,r=n.f,{sections:A(o),options:A(r)};var o,r},uD=(e,t)=>Se(e.sections(),t),hD=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:_e(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),mD=(e,t)=>{var n;const o=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?Nt.extend({},e.external_plugins,o):o},pD=(e,t,n,o)=>{const r=cD(n.forced_plugins),s=cD(o.plugins),i=((e,t)=>uD(e,t)?e.sections()[t]:{})(t,"mobile"),a=((e,t,n,o)=>e&&uD(t,"mobile")?o:n)(e,t,s,i.plugins?cD(i.plugins):s),l=((e,t)=>[].concat(cD(e)).concat(cD(t)))(r,a);return Nt.extend(o,{forced_plugins:r,plugins:l})},fD=(e,t,n,o,r)=>{var s;const i=e?{mobile:hD(null!==(s=r.mobile)&&void 0!==s?s:{},t)}:{},a=dD(["mobile"],Mk(i,r)),l=Nt.extend(n,o,a.options(),((e,t)=>e&&uD(t,"mobile"))(e,a)?((e,t,n={})=>{const o=e.sections(),r=_e(o,t).getOr({});return Nt.extend({},n,r)})(a,"mobile"):{},{external_plugins:mD(o,a.options())});return pD(e,a,o,l)},gD=(e,t)=>((e,t)=>Ky(e).editor.addVisual(t))(e,t),bD=e=>{const t=t=>()=>{q("left,center,right,justify".split(","),(n=>{t!==n&&e.formatter.remove("align"+n)})),"none"!==t&&((t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})},vD=e=>{bD(e),(e=>{const t=t=>()=>{const n=e.selection,o=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks();return U(o,(n=>C(e.formatter.matchNode(n,t))))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},yD=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((e,t,n)=>{const o=un.fromDom(e.getRoot());return n=rf(o,Qi.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),sf(o,Qi.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t):t},xD=(e,t)=>{const{content:n,details:o}=(e=>{if("string"!=typeof e){const t=Nt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);cy(e,{content:yD(e,n),format:"html",set:!1,selection:!0,paste:o.paste}).each((t=>{const n=((e,t,n)=>qy(e).editor.insertContent(t,n))(e,t.content,o);dy(e,n,t),e.addVisual()}))},wD={"font-size":"size","font-family":"face"},CD=(e,t,n)=>Mg(un.fromDom(n),(t=>(t=>Un(t,e).orThunk((()=>"font"===It(t)?_e(wD,e).bind((e=>Gt(t,e))):F.none())))(t)),(e=>fn(un.fromDom(t),e))),_D=e=>(t,n)=>F.from(n).map(un.fromDom).filter(jt).bind((n=>CD(e,t,n.dom).or(((e,t)=>F.from(qs.DOM.getStyle(t,e,!0)))(e,n.dom)))).getOr(""),SD=_D("font-size"),kD=O((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),_D("font-family")),ED=e=>Td(e.getBody()).map((e=>{const t=e.container();return Eo(t)?t.parentNode:t})),OD=(e,t)=>(e=>F.from(e.selection.getRng()).bind((t=>{const n=e.getBody();return t.startContainer===n&&0===t.startOffset?F.none():F.from(e.selection.getStart(!0))})))(e).orThunk(M(ED,e)).map(un.fromDom).filter(jt).bind(t),TD=(e,t)=>OD(e,T(F.some,t)),AD=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(e=>Nt.explode(e.options.get("font_size_style_values")))(e),r=(e=>Nt.explode(e.options.get("font_size_classes")))(e);return r?r[n-1]||t:o[n-1]||t}return t}return t},DD=e=>{const t=e.split(/\s*,\s*/);return W(t,(e=>-1===e.indexOf(" ")||Ve(e,'"')||Ve(e,"'")?e:`'${e}'`)).join(",")},RD=e=>{const t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,n,o)=>{t(e,{value:o})},BackColor:(e,n,o)=>{t("hilitecolor",{value:o})},FontName:(t,n,o)=>{((e,t)=>{const n=AD(e,t);e.formatter.toggle("fontname",{value:DD(n)}),e.nodeChanged()})(e,o)},FontSize:(t,n,o)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:AD(e,t)}),e.nodeChanged()})(e,o)},LineHeight:(t,n,o)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,o)},Lang:(e,n,o)=>{t(e,{value:o.code,customValue:o.customCode})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,n,o)=>{t(p(o)?o:"p")},mceToggleFormat:(e,n,o)=>{t(o)}})},MD=e=>{const t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",(()=>(e=>TD(e,(t=>kD(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("FontSize",(()=>(e=>TD(e,(t=>SD(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("LineHeight",(()=>(e=>TD(e,(t=>{const n=un.fromDom(e.getBody()),o=Mg(t,(e=>Un(e,"line-height")),M(fn,n));return o.getOrThunk((()=>{const e=parseFloat(Vn(t,"line-height")),n=parseFloat(Vn(t,"font-size"));return String(e/n)}))})).getOr(""))(e)))},ND=e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{I_(e,"indent")})(e)},Outdent:()=>{F_(e)}}),e.editorCommands.addCommands({Outdent:()=>P_(e)},"state")},PD=e=>{vD(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let o;try{n.execCommand(t)}catch(e){o=!0}if("paste"!==t||n.queryCommandEnabled(t)||(o=!0),o||!n.queryCommandSupported(t)){let t=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Tt.os.isMacOS()||Tt.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:t,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,o)=>{let r=0;e.dom.getParent(e.selection.getNode(),(t=>{if(1===t.nodeType&&r++===o)return e.selection.select(t),!1}),e.getBody())},mceSelectNode:(t,n,o)=>{e.selection.select(o)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Po);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,o)=>{xD(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,o)=>{xD(e,e.dom.encode(o))},insertHTML:(t,n,o)=>{xD(e,o)},mceInsertContent:(t,n,o)=>{xD(e,o)},mceSetContent:(t,n,o)=>{e.setContent(o)},mceReplaceContent:(t,n,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(e),(e=>{const t=(t,n,o)=>{const r=p(o)?{href:o}:o,s=e.dom.getParent(e.selection.getNode(),"a");f(r)&&p(r.href)&&(r.href=r.href.replace(/ /g,"%20"),s&&r.href||e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,s))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},mceInsertLink:t,createLink:t})})(e),ND(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{CO(e)},mceInsertNewLine:(t,n,o)=>{CO(e,o)},InsertLineBreak:(t,n,o)=>{dO(e,o)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const t=n.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){const o=e.selection.getBookmark();e.dom.split(t,n),e.selection.moveToBookmark(o)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state")})(e)})(e),(e=>{RD(e),MD(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,o)=>{const r=null!=o?o:e.selection.getNode();if(r!==e.getBody()){const t=e.selection.getBookmark();e.dom.remove(r,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,o)=>{Fm(e,o)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)};class LD{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t,n,o){const r=this.editor,s=e.toLowerCase(),i=null==o?void 0:o.skip_focus;if(r.removed)return!1;"mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||i?(e=>{Cm(e).each((t=>e.selection.setRng(t)))})(r):r.focus());if(r.dispatch("BeforeExecCommand",{command:e,ui:t,value:n}).isDefaultPrevented())return!1;const a=this.commands.exec[s];return!!_(a)&&(a(s,t,n),r.dispatch("ExecCommand",{command:e,ui:t,value:n}),!0)}queryCommandState(e){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const t=e.toLowerCase(),n=this.commands.state[t];return!!_(n)&&n(t)}queryCommandValue(e){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const t=e.toLowerCase(),n=this.commands.value[t];return _(n)?n(t):""}addCommands(e,t="exec"){const n=this.commands;fe(e,((e,o)=>{q(o.toLowerCase().split(","),(o=>{n[t][o]=e}))}))}addCommand(e,t,n){const o=e.toLowerCase();this.commands.exec[o]=(e,o,r)=>t.call(null!=n?n:this.editor,o,r)}queryCommandSupported(e){const t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}}const BD="data-mce-contenteditable",ID=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},FD=(e,t)=>{e.dom.contentEditable=t?"true":"false"},zD=(e,t)=>{const n=un.fromDom(e.getBody());((e,t,n)=>{ln(e,t)&&!1===n?sn(e,t):n&&on(e,t)})(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{F.from(e.selection.getNode()).each((e=>{e.removeAttribute("data-mce-selected")}))})(e),e.readonly=!0,FD(n,!1),q(si(n,'*[contenteditable="true"]'),(e=>{Wt(e,BD,"true"),FD(e,!1)}))):(e.readonly=!1,FD(n,!0),(e=>{q(si(e,'*[data-mce-contenteditable="true"]'),(e=>{Xt(e,BD),FD(e,!0)}))})(n),ID(e,"StyleWithCSS",!1),ID(e,"enableInlineTableEditing",!1),ID(e,"enableObjectResizing",!1),Bm(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},jD=e=>e.readonly,HD=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{jD(e)&&q(t,(e=>{e.attr(BD,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(BD,(t=>{jD(e)&&q(t,(e=>{e.attr("contenteditable",e.attr(BD))}))})),e.serializer.addTempAttr(BD)},VD=(e,t)=>{if((e=>"click"===e.type)(t)&&!lh.metaKeyPressed(t)){const n=un.fromDom(t.target);((e,t)=>Go(t,"a",(t=>fn(t,un.fromDom(e.getBody())))).bind((e=>Gt(e,"href"))))(e,n).each((n=>{if(t.preventDefault(),/^#/.test(n)){const t=e.dom.select(`${n},[name="${o=n,r="#",Ve(o,r)?((e,t)=>e.substring(t))(o,r.length):o}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var o,r}))}},$D=Nt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class UD{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||B}static isNative(e){return!!$D[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){const n=e.toLowerCase(),o=Rs(n,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[n];if(r)for(let e=0,t=r.length;e<t;e++){const t=r[e];if(!t.removed){if(t.once&&this.off(n,t.func),o.isImmediatePropagationStopped())return o;if(!1===t.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,t,n,o){if(!1===t&&(t=B),t){const r={func:t,removed:!1};o&&Nt.extend(r,o);const s=e.toLowerCase().split(" ");let i=s.length;for(;i--;){const e=s[i];let t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=n?[r,...t]:[...t,r],this.bindings[e]=t}}return this}off(e,t){if(e){const n=e.toLowerCase().split(" ");let o=n.length;for(;o--;){const r=n[o];let s=this.bindings[r];if(!r)return fe(this.bindings,((e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]})),this;if(s){if(t){const e=G(s,(e=>e.func===t));s=e.fail,this.bindings[r]=s,q(e.pass,(e=>{e.removed=!0}))}else s.length=0;s.length||(this.toggleEvent(e,!1),delete this.bindings[r])}}}else fe(this.bindings,((e,t)=>{this.toggleEvent(t,!1)})),this.bindings={};return this}once(e,t,n){return this.on(e,t,n,{once:!0})}has(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)}}const WD=e=>(e._eventDispatcher||(e._eventDispatcher=new UD({scope:e,toggleEvent:(t,n)=>{UD.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),qD={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&"remove"!==e&&"detach"!==e)return Rs(e.toLowerCase(),null!=t?t:{},o);const r=WD(o).dispatch(e,t);if(!1!==n&&o.parent){let t=o.parent();for(;t&&!r.isPropagationStopped();)t.dispatch(e,r,!1),t=t.parent()}return r},on(e,t,n){return WD(this).on(e,t,n)},off(e,t){return WD(this).off(e,t)},once(e,t){return WD(this).once(e,t)},hasEventListeners(e){return WD(this).has(e)}},KD=qs.DOM;let GD;const YD=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=xl(e);return n?(e.eventRoot||(e.eventRoot=KD.select(n)[0]),e.eventRoot):e.getBody()},XD=(e,t,n)=>{(e=>!e.hidden&&!jD(e))(e)?e.dispatch(t,n):jD(e)&&VD(e,n)},JD=(e,t)=>{let n;if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const o=YD(e,t);if(xl(e)){if(GD||(GD={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||GD&&(fe(GD,((t,n)=>{e.dom.unbind(YD(e,n))})),GD=null)}))),GD[t])return;n=n=>{const o=n.target,r=e.editorManager.get();let s=r.length;for(;s--;){const e=r[s].getBody();(e===o||KD.isChildOf(o,e))&&XD(r[s],t,n)}},GD[t]=n,KD.bind(o,t,n)}else n=n=>{XD(e,t,n)},KD.bind(o,t,n),e.delegates[t]=n},QD={...qD,bindPendingEventDelegates(){const e=this;Nt.each(e._pendingNativeEvents,(t=>{JD(e,t)}))},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?JD(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(YD(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(fe(e.delegates,((t,n)=>{e.dom.unbind(YD(e,n),n,t)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},ZD=e=>p(e)?{value:e.split(/[ ,]/),valid:!0}:k(e,p)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},eR=(e,t)=>e+(Ye(t.message)?"":`. ${t.message}`),tR=e=>e.valid,nR=(e,t,n="")=>{const o=t(e);return y(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},oR=(e,t)=>{const n={},o={},r=(e,t,n)=>{const r=nR(t,n);return tR(r)?(o[e]=r.value,!0):(console.warn(eR(`Invalid value passed for the ${e} option`,r)),!1)},s=e=>Se(n,e);return{register:(e,s)=>{const i=(e=>p(e.processor))(s)?(e=>{const t=(()=>{switch(e){case"array":return b;case"boolean":return y;case"function":return _;case"number":return S;case"object":return f;case"string":return p;case"string[]":return ZD;case"object[]":return e=>k(e,f);case"regexp":return e=>m(e,RegExp)}})();return n=>nR(n,t,`The value must be a ${e}.`)})(s.processor):s.processor,a=((e,t,n)=>{if(!x(t)){const o=nR(t,n);if(tR(o))return o.value;console.error(eR(`Invalid default value passed for the "${e}" option`,o))}})(e,s.default,i);n[e]={...s,default:a,processor:i};_e(o,e).orThunk((()=>_e(t,e))).each((t=>r(e,t,i)))},isRegistered:s,get:e=>_e(o,e).orThunk((()=>_e(n,e).map((e=>e.default)))).getOrUndefined(),set:(e,t)=>{if(s(e)){const o=n[e];return o.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):r(e,t,o.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{const t=s(e);return t&&delete o[e],t},isSet:e=>Se(o,e)}},rR=["design","readonly"],sR=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(e){return void console.error(`problem while activating editor mode ${o}:`,e)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&zD(e,s.editorReadOnly),t.set(o),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,o)},iR=e=>{const t=Ys("design"),n=Ys({design:{activate:E,deactivate:E,editorReadOnly:!1},readonly:{activate:E,deactivate:E,editorReadOnly:!0}});return(e=>{e.serializer?HD(e):e.on("PreInit",(()=>{HD(e)}))})(e),(e=>{e.on("ShowCaret",(t=>{jD(e)&&t.preventDefault()})),e.on("ObjectSelected",(t=>{jD(e)&&t.preventDefault()}))})(e),{isReadOnly:()=>jD(e),set:o=>((e,t,n,o)=>{if(o!==n.get()){if(!Se(t,o))throw new Error(`Editor mode '${o}' is invalid`);e.initialized?sR(e,n,t,o):e.on("init",(()=>sR(e,n,t,o)))}})(e,n.get(),t,o),get:()=>t.get(),register:(e,t)=>{n.set(((e,t,n)=>{if($(rR,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(n.get(),e,t))}}},aR=Nt.each,lR=Nt.explode,cR={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},dR=Nt.makeMap("alt,ctrl,shift,meta,access"),uR=e=>{let t;const n={},o=Tt.os.isMacOS()||Tt.os.isiOS();aR(lR(e.toLowerCase(),"+"),(e=>{e in dR?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=cR[e]||e.toUpperCase().charCodeAt(0))}));const r=[n.keyCode];for(t in dR)n[t]?r.push(t):n[t]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class hR{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const t=this;e.on("keyup keypress keydown",(e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(aR(t.shortcuts,(n=>{if(t.matchShortcut(e,n))return t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n),!0})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}add(e,t,n,o){const r=this,s=r.normalizeCommandFunc(n);return aR(lR(Nt.trim(e)),(e=>{const n=r.createShortcut(e,t,s,o);r.shortcuts[n.id]=n})),!0}remove(e){const t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){const t=this,n=e;return"string"==typeof n?()=>{t.editor.execCommand(n,!1,null)}:Nt.isArray(n)?()=>{t.editor.execCommand(n[0],n[1],n[2])}:n}createShortcut(e,t,n,o){const r=Nt.map(lR(e,">"),uR);return r[r.length-1]=Nt.extend(r[r.length-1],{func:n,scope:o||this.editor}),Nt.extend(r[0],{desc:this.editor.translate(t),subpatterns:r.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const mR=()=>{const e=(()=>{const e={},t={},n={},o={},r={},s={},i={},a=(e,t)=>(n,o)=>e[n.toLowerCase()]={...o,type:t};return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(r,"contextmenu"),addContextToolbar:a(s,"contexttoolbar"),addContextForm:a(s,"contextform"),addSidebar:a(i,"sidebar"),addIcon:(e,t)=>o[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:o,popups:n,contextMenus:r,contextToolbars:s,sidebars:i})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},pR=qs.DOM,fR=Nt.extend,gR=Nt.each;class bR{constructor(e,t,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,fR(this,QD);const o=this;this.id=e,this.hidden=!1;const r=((e,t)=>fD(aD||lD,aD,t,e,t))(n.defaultOptions,t);this.options=oR(0,r),(e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean"}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:Ia(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Ia(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{const t=p(e)&&Ge(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:"boolean",default:!1}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{const t=!1===e||p(e)||k(e,p);return t?p(e)?{value:W(e.split(","),We),valid:t}:b(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Rl(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{const t=p(e)||k(e,p);return t?{value:b(e)?e:W(e.split(","),We),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,.mce-annotation"}),t("object_resizing",{processor:e=>{const t=y(e)||p(e);return t?!1===e||Ra.isiPhone()||Ra.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!Ma}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||p(e)||_(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("preview_styles",{processor:e=>{const t=!1===e||p(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Ba}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Ba}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Ba}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>p(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>k(e,f)||!1===e?{value:Da(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>k(e,Pa)?{value:e,valid:!0}:Pa(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",(()=>{t("directionality",{processor:"string",default:Zs.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:Na.getAttrib(e.getElement(),"placeholder")})}))})(o);const s=this.options.get;s("deprecation_warnings")&&mx(t,r);const i=s("suffix");i&&(n.suffix=i),this.suffix=n.suffix;const a=s("base_url");a&&n._setBaseUrl(a),this.baseUri=n.baseURI;const l=al(o);l&&(Gs.ScriptLoader._setReferrerPolicy(l),qs.DOM.styleSheetLoader._setReferrerPolicy(l)),ei.languageLoad=s("language_load"),ei.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new Gv(ja(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Rl(o),this.shortcuts=new hR(this),this.editorCommands=new LD(this),PD(this);const c=s("cache_suffix");c&&(Tt.cacheSuffix=c.replace(/^[\?\&]+/,"")),this.ui={registry:mR(),styleSheetLoader:void 0,show:E,hide:E,setEnabled:E,isEnabled:I},this.mode=iR(o),n.dispatch("SetupEditor",{editor:this});const d=Kl(o);_(d)&&d.call(o,o)}render(){sD(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Lm(this)}translate(e){return Zs.translate(e)}getParam(e,t,n){const o=this.options;return o.isRegistered(e)||(C(n)?o.register(e,{processor:n,default:t}):o.register(e,{processor:I,default:t})),o.isSet(e)||x(t)?o.get(e):t}hasPlugin(e,t){return!!$(jl(this),e)&&(!t||void 0!==Ax.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,o){this.shortcuts.add(e,t,n,o)}execCommand(e,t,n,o){return this.editorCommands.execCommand(e,t,n,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(pR.show(e.getContainer()),pR.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(pR.hide(e.getContainer()),pR.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e){const t=this;let n,o=t.getElement();if(t.removed)return"";if(o){(e=e||{}).load=!0;const r=ko(o)?o.value:o.innerHTML;return n=t.setContent(r,e),e.element=o,e.no_events||t.dispatch("LoadContent",e),e.element=o=null,n}}save(e){const t=this;let n,o,r=t.getElement();if(r&&t.initialized&&!t.removed)return(e=e||{}).save=!0,e.element=r,n=e.content=t.getContent(e),e.no_events||t.dispatch("SaveContent",e),"raw"===e.format&&t.dispatch("RawSaveContent",e),n=e.content,ko(r)?r.value=n:(!e.is_removing&&t.inline||(r.innerHTML=n),(o=pR.getParent(t.id,"form"))&&gR(o.elements,(e=>{if(e.name===t.id)return e.value=n,!1}))),e.element=r=null,!1!==e.set_dirty&&t.setDirty(!1),n}setContent(e,t){return lx(this,e,t)}getContent(e){return ax(this,e)}insertContent(e,t){t&&(e=fR({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?lx(this,this.startContent,{format:"raw"}):lx(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=pR.get(e.editorContainer||e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=pR.get(this.id)),this.targetElm}getWin(){const e=this;let t;return e.contentWindow||(t=e.iframeElement,t&&(e.contentWindow=t.contentWindow)),e.contentWindow}getDoc(){const e=this;let t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument}getBody(){const e=this.getDoc();return this.bodyElement||(e?e.body:null)}convertURL(e,t,n){const o=this,r=o.options.get,s=Yl(o);return _(s)?s.call(o,e,n,!0,t):!r("convert_urls")||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,r("remove_script_host"))}addVisual(e){gD(this,e)}remove(){gx(this)}destroy(e){bx(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const vR=qs.DOM,yR=Nt.each;let xR,wR=!1,CR=[];const _R=e=>{const t=e.type;yR(OR.get(),(n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}}))},SR=e=>{if(e!==wR){const t=qs.DOM;e?(t.bind(window,"resize",_R),t.bind(window,"scroll",_R)):(t.unbind(window,"resize",_R),t.unbind(window,"scroll",_R)),wR=e}},kR=e=>{const t=CR;return CR=Y(CR,(t=>e!==t)),OR.activeEditor===e&&(OR.activeEditor=CR.length>0?CR[0]:null),OR.focusedEditor===e&&(OR.focusedEditor=null),t.length!==CR.length},ER="CSS1Compat"!==document.compatMode,OR={...qD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"0.3",releaseDate:"2022-05-25",i18n:Zs,activeEditor:null,focusedEditor:null,setup(){const e=this;let t,n,o="";n=Gv.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,o=r.suffix;else{const e=document.getElementsByTagName("script");for(let n=0;n<e.length;n++){const r=e[n].src||"";if(""===r)continue;const s=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==s.indexOf(".min")&&(o=".min"),t=r.substring(0,r.lastIndexOf("/"));break}}if(!t&&document.currentScript){const e=document.currentScript.src;-1!==e.indexOf(".min")&&(o=".min"),t=e.substring(0,e.lastIndexOf("/"))}}var s;e.baseURL=new Gv(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new Gv(e.baseURL),e.suffix=o,(s=e).on("AddEditor",M(Am,s)),s.on("RemoveEditor",M(Dm,s))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;e.suffix&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;void 0!==o&&fe(o,((e,t)=>{ei.PluginManager.urls[t]=e}))},init(e){const t=this;let n;const o=Nt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=e=>{n=e};const s=()=>{let n=0;const i=[];let a;vR.unbind(window,"ready",s),(n=>{const o=e[n];if(o)o.apply(t,[])})("onpageload"),a=((e,t)=>{const n=[],o=_(t)?e=>U(n,(n=>t(n,e))):e=>$(n,e);for(let t=0,r=e.length;t<r;t++){const r=e[t];o(r)||n.push(r)}return n})((e=>Tt.browser.isIE()||Tt.browser.isEdge()?(Bx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):ER?(Bx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):p(e.selector)?vR.select(e.selector):C(e.target)?[e.target]:[])(e)),Nt.each(a,(e=>{var n;(n=t.get(e.id))&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(kR(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0,n=null)})),a=Nt.grep(a,(e=>!t.get(e.id))),0===a.length?r([]):yR(a,(s=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in o)(e,s)?Bx("Could not initialize inline editor on invalid inline target element",s):((e,o,s)=>{const l=new bR(e,o,t);i.push(l),l.on("init",(()=>{++n===a.length&&r(i)})),l.targetElm=l.targetElm||s,l.render()})((e=>{let t=e.id;return t||(t=_e(e,"name").filter((e=>!vR.get(e))).getOrThunk(vR.uniqueId),e.setAttribute("id",t)),t})(s),e,s)}))};return vR.bind(window,"ready",s),new Promise((e=>{n?e(n):r=t=>{e(t)}}))},get(e){return 0===arguments.length?CR.slice(0):p(e)?Z(CR,(t=>t.id===e)).getOr(null):S(e)&&CR[e]?CR[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&CR.push(e),SR(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),xR||(xR=e=>{const n=t.dispatch("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",xR))),e},createEditor(e,t){return this.add(new bR(e,t,this))},remove(e){const t=this;let n,o;if(e){if(!p(e))return o=e,v(t.get(o.id))?null:(kR(o)&&t.dispatch("RemoveEditor",{editor:o}),0===CR.length&&window.removeEventListener("beforeunload",xR),o.remove(),SR(CR.length>0),o);yR(vR.select(e),(e=>{o=t.get(e.id),o&&t.remove(o)}))}else for(n=CR.length-1;n>=0;n--)t.remove(CR[n])},execCommand(e,t,n){var o;const r=this,s=f(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(e){case"mceAddEditor":if(!r.get(s)){const e=n.options;new bR(s,e,r).render()}return!0;case"mceRemoveEditor":{const e=r.get(s);return e&&e.remove(),!0}case"mceToggleEditor":{const e=r.get(s);return e?(e.isHidden()?e.show():e.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{yR(CR,(e=>{e.save()}))},addI18n:(e,t)=>{Zs.add(e,t)},translate:e=>Zs.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Gv(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Gv(this.baseURL)}};OR.setup();const TR=(()=>{const e=ti();return{FakeClipboardItem:e=>({items:e,types:me(e),getType:t=>_e(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),AR=Math.min,DR=Math.max,RR=Math.round,MR=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,i=e.h,a=t.w,l=t.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(o+=a),"c"===c[0]&&(r+=RR(l/2)),"c"===c[1]&&(o+=RR(a/2)),"b"===c[3]&&(r-=i),"r"===c[4]&&(o-=s),"c"===c[3]&&(r-=RR(i/2)),"c"===c[4]&&(o-=RR(s/2)),NR(o,r,s,i)},NR=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),PR={inflate:(e,t,n)=>NR(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:MR,findBestRelativePosition:(e,t,n,o)=>{let r,s;for(s=0;s<o.length;s++)if(r=MR(e,t,o[s]),r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return o[s];return null},intersect:(e,t)=>{const n=DR(e.x,t.x),o=DR(e.y,t.y),r=AR(e.x+e.w,t.x+t.w),s=AR(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:NR(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,l=t.y+t.h,c=DR(0,t.x-o),d=DR(0,t.y-r),u=DR(0,s-a),h=DR(0,i-l);return o+=c,r+=d,n&&(s+=c,i+=d,o-=u,r-=h),s-=u,i-=h,NR(o,r,s-o,i-r)},create:NR,fromClientRect:e=>NR(e.left,e.top,e.width,e.height)},LR=(()=>{const e={},t={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==e[n])return e[n];{const i=new Promise(((e,i)=>{const a=((e,t,n=1e3)=>{let o=!1,r=null;const s=e=>(...t)=>{o||(o=!0,null!==r&&(clearTimeout(r),r=null),e.apply(null,t))},i=s(e),a=s(t);return{start:(...e)=>{o||null!==r||(r=setTimeout((()=>a.apply(null,e)),n))},resolve:i,reject:a}})(e,i);t[n]=a.resolve,Gs.ScriptLoader.loadScript(o).then((()=>a.start(s)),(()=>a.reject(r)))}));return e[n]=i,i}},add:(n,o)=>{void 0!==t[n]&&(t[n](o),delete t[n]),e[n]=Promise.resolve(o)},unload:t=>{delete e[t]}}})();let BR;try{const e="__storage_test__";BR=window.localStorage,BR.setItem(e,e),BR.removeItem(e)}catch(e){BR=(()=>{let e={},t=[];const n={getItem:t=>e[t]||null,setItem:(n,o)=>{t.push(n),e[n]=String(o)},key:e=>t[e],removeItem:n=>{t=t.filter((e=>e===n)),delete e[n]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})()}const IR={geom:{Rect:PR},util:{Delay:Sm,Tools:Nt,VK:lh,URI:Gv,EventDispatcher:UD,Observable:qD,I18n:Zs,LocalStorage:BR,ImageUploader:e=>{const t=jx(),n=Wx(e,t);return{upload:(t,o=!0)=>n.upload(t,o?Ux(e):void 0)}}},dom:{EventUtils:Is,TreeWalker:Jo,TextSeeker:Ci,DOMUtils:qs,ScriptLoader:Gs,RangeUtils:Vh,Serializer:ix,StyleSheetLoader:Yo,ControlSelection:ch,BookmarkManager:eh,Selection:tx,Event:Is.Event},html:{Styles:Os,Entities:ps,Node:tp,Schema:Es,DomParser:sy,Writer:dp,Serializer:up},Env:Tt,AddOnManager:ei,Annotator:Zu,Formatter:ow,UndoManager:sw,EditorCommands:LD,WindowManager:Rx,NotificationManager:Tx,EditorObservable:QD,Shortcuts:hR,Editor:bR,FocusManager:_m,EditorManager:OR,DOM:qs.DOM,ScriptLoader:Gs.ScriptLoader,PluginManager:Ax,ThemeManager:Dx,ModelManager:yx,IconManager:vx,Resource:LR,FakeClipboard:TR,trim:Nt.trim,isArray:Nt.isArray,is:Nt.is,toArray:Nt.toArray,makeMap:Nt.makeMap,each:Nt.each,map:Nt.map,grep:Nt.grep,inArray:Nt.inArray,extend:Nt.extend,walk:Nt.walk,resolve:Nt.resolve,explode:Nt.explode,_addCacheSuffix:Nt._addCacheSuffix},FR=Nt.extend(OR,IR);(e=>{window.tinymce=e,window.tinyMCE=e})(FR),(t=>{try{e.exports=t}catch(e){}})(FR)}()},8278:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(6599);const r="[role='option']:not([aria-disabled])";class s extends o.Qr{static targets=["input","hidden","results"];static classes=["selected"];static values={ready:Boolean,submitOnEnter:Boolean,url:String,minLength:Number,delay:{type:Number,default:300}};connect(){this.close(),this.inputTarget.hasAttribute("autocomplete")||this.inputTarget.setAttribute("autocomplete","off"),this.inputTarget.setAttribute("spellcheck","false"),this.mouseDown=!1,this.onInputChange=i(this.onInputChange,this.delayValue),this.inputTarget.addEventListener("keydown",this.onKeydown),this.inputTarget.addEventListener("blur",this.onInputBlur),this.inputTarget.addEventListener("input",this.onInputChange),this.resultsTarget.addEventListener("mousedown",this.onResultsMouseDown),this.resultsTarget.addEventListener("click",this.onResultsClick),this.inputTarget.hasAttribute("autofocus")&&this.inputTarget.focus(),this.readyValue=!0}disconnect(){this.hasInputTarget&&(this.inputTarget.removeEventListener("keydown",this.onKeydown),this.inputTarget.removeEventListener("blur",this.onInputBlur),this.inputTarget.removeEventListener("input",this.onInputChange)),this.hasResultsTarget&&(this.resultsTarget.removeEventListener("mousedown",this.onResultsMouseDown),this.resultsTarget.removeEventListener("click",this.onResultsClick))}sibling(e){const t=this.options,n=this.selectedOption,o=t.indexOf(n),r=e?t[o+1]:t[o-1],s=e?t[0]:t[t.length-1];return r||s}select(e){const t=this.selectedOption;t&&(t.removeAttribute("aria-selected"),t.classList.remove(...this.selectedClassesOrDefault)),e.setAttribute("aria-selected","true"),e.classList.add(...this.selectedClassesOrDefault),this.inputTarget.setAttribute("aria-activedescendant",e.id),e.scrollIntoView({behavior:"smooth",block:"nearest"})}onKeydown=e=>{const t=this[`on${e.key}Keydown`];t&&t(e)};onEscapeKeydown=e=>{this.resultsShown&&(this.hideAndRemoveOptions(),e.stopPropagation(),e.preventDefault())};onArrowDownKeydown=e=>{const t=this.sibling(!0);t&&this.select(t),e.preventDefault()};onArrowUpKeydown=e=>{const t=this.sibling(!1);t&&this.select(t),e.preventDefault()};onTabKeydown=e=>{const t=this.selectedOption;t&&this.commit(t)};onEnterKeydown=e=>{const t=this.selectedOption;t&&this.resultsShown&&(this.commit(t),this.hasSubmitOnEnterValue||e.preventDefault())};onInputBlur=()=>{this.mouseDown||this.close()};commit(e){if("true"===e.getAttribute("aria-disabled"))return;if(e instanceof HTMLAnchorElement)return e.click(),void this.close();const t=e.getAttribute("data-autocomplete-label")||e.textContent.trim(),n=e.getAttribute("data-autocomplete-value")||t;this.inputTarget.value=t,this.hasHiddenTarget?(this.hiddenTarget.value=n,this.hiddenTarget.dispatchEvent(new Event("input")),this.hiddenTarget.dispatchEvent(new Event("change"))):this.inputTarget.value=n,this.inputTarget.focus(),this.hideAndRemoveOptions(),this.element.dispatchEvent(new CustomEvent("autocomplete.change",{bubbles:!0,detail:{value:n,textValue:t,selected:e}}))}clear(){this.inputTarget.value="",this.hasHiddenTarget&&(this.hiddenTarget.value="")}onResultsClick=e=>{if(!(e.target instanceof Element))return;const t=e.target.closest(r);t&&this.commit(t)};onResultsMouseDown=()=>{this.mouseDown=!0,this.resultsTarget.addEventListener("mouseup",(()=>{this.mouseDown=!1}),{once:!0})};onInputChange=()=>{this.element.removeAttribute("value"),this.hasHiddenTarget&&(this.hiddenTarget.value="");const e=this.inputTarget.value.trim();e&&e.length>=this.minLengthValue?this.fetchResults(e):this.hideAndRemoveOptions()};identifyOptions(){let e=0;this.resultsTarget.querySelectorAll(`${r}:not([id])`).forEach((t=>{t.id=`${this.resultsTarget.id}-option-${e++}`}))}hideAndRemoveOptions(){this.close(),this.resultsTarget.innerHTML=null}fetchResults=async e=>{if(!this.hasUrlValue)return;const t=this.buildURL(e);try{this.element.dispatchEvent(new CustomEvent("loadstart"));const e=await this.doFetch(t);this.replaceResults(e),this.element.dispatchEvent(new CustomEvent("load")),this.element.dispatchEvent(new CustomEvent("loadend"))}catch(e){throw this.element.dispatchEvent(new CustomEvent("error")),this.element.dispatchEvent(new CustomEvent("loadend")),e}};buildURL(e){const t=new URL(this.urlValue,window.location.href),n=new URLSearchParams(t.search.slice(1));return n.append("q",e),t.search=n.toString(),t.toString()}doFetch=async e=>{const t=await fetch(e,this.optionsForFetch());return await t.text()};replaceResults(e){this.resultsTarget.innerHTML=e,this.identifyOptions(),this.options?this.open():this.close()}open(){this.resultsShown||(this.resultsShown=!0,this.element.setAttribute("aria-expanded","true"),this.element.dispatchEvent(new CustomEvent("toggle",{detail:{action:"open",inputTarget:this.inputTarget,resultsTarget:this.resultsTarget}})))}close(){this.resultsShown&&(this.resultsShown=!1,this.inputTarget.removeAttribute("aria-activedescendant"),this.element.setAttribute("aria-expanded","false"),this.element.dispatchEvent(new CustomEvent("toggle",{detail:{action:"close",inputTarget:this.inputTarget,resultsTarget:this.resultsTarget}})))}get resultsShown(){return!this.resultsTarget.hidden}set resultsShown(e){this.resultsTarget.hidden=!e}get options(){return Array.from(this.resultsTarget.querySelectorAll(r))}get selectedOption(){return this.resultsTarget.querySelector("[aria-selected='true']")}get selectedClassesOrDefault(){return this.hasSelectedClass?this.selectedClasses:["active"]}optionsForFetch(){return{headers:{"X-Requested-With":"XMLHttpRequest"}}}}const i=(e,t=10)=>{let n=null;return(...o)=>{clearTimeout(n),n=setTimeout(e,t)}}}}]);